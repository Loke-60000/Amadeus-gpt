function E2(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var zi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sc(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Du(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var Dw={exports:{}},wc={},Lw={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lu=Symbol.for("react.element"),b2=Symbol.for("react.portal"),S2=Symbol.for("react.fragment"),w2=Symbol.for("react.strict_mode"),C2=Symbol.for("react.profiler"),I2=Symbol.for("react.provider"),P2=Symbol.for("react.context"),A2=Symbol.for("react.forward_ref"),R2=Symbol.for("react.suspense"),O2=Symbol.for("react.memo"),M2=Symbol.for("react.lazy"),Ox=Symbol.iterator;function D2(r){return r===null||typeof r!="object"?null:(r=Ox&&r[Ox]||r["@@iterator"],typeof r=="function"?r:null)}var Nw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fw=Object.assign,Bw={};function Sa(r,e,t){this.props=r,this.context=e,this.refs=Bw,this.updater=t||Nw}Sa.prototype.isReactComponent={};Sa.prototype.setState=function(r,e){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,e,"setState")};Sa.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function Uw(){}Uw.prototype=Sa.prototype;function $y(r,e,t){this.props=r,this.context=e,this.refs=Bw,this.updater=t||Nw}var Wy=$y.prototype=new Uw;Wy.constructor=$y;Fw(Wy,Sa.prototype);Wy.isPureReactComponent=!0;var Mx=Array.isArray,kw=Object.prototype.hasOwnProperty,Yy={current:null},Gw={key:!0,ref:!0,__self:!0,__source:!0};function jw(r,e,t){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)kw.call(e,n)&&!Gw.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=t;else if(1<o){for(var u=Array(o),l=0;l<o;l++)u[l]=arguments[l+2];i.children=u}if(r&&r.defaultProps)for(n in o=r.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:Lu,type:r,key:s,ref:a,props:i,_owner:Yy.current}}function L2(r,e){return{$$typeof:Lu,type:r.type,key:e,ref:r.ref,props:r.props,_owner:r._owner}}function qy(r){return typeof r=="object"&&r!==null&&r.$$typeof===Lu}function N2(r){var e={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(t){return e[t]})}var Dx=/\/+/g;function Cf(r,e){return typeof r=="object"&&r!==null&&r.key!=null?N2(""+r.key):e.toString(36)}function sh(r,e,t,n,i){var s=typeof r;(s==="undefined"||s==="boolean")&&(r=null);var a=!1;if(r===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(r.$$typeof){case Lu:case b2:a=!0}}if(a)return a=r,i=i(a),r=n===""?"."+Cf(a,0):n,Mx(i)?(t="",r!=null&&(t=r.replace(Dx,"$&/")+"/"),sh(i,e,t,"",function(l){return l})):i!=null&&(qy(i)&&(i=L2(i,t+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Dx,"$&/")+"/")+r)),e.push(i)),1;if(a=0,n=n===""?".":n+":",Mx(r))for(var o=0;o<r.length;o++){s=r[o];var u=n+Cf(s,o);a+=sh(s,e,t,u,i)}else if(u=D2(r),typeof u=="function")for(r=u.call(r),o=0;!(s=r.next()).done;)s=s.value,u=n+Cf(s,o++),a+=sh(s,e,t,u,i);else if(s==="object")throw e=String(r),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function ul(r,e,t){if(r==null)return r;var n=[],i=0;return sh(r,n,"","",function(s){return e.call(t,s,i++)}),n}function F2(r){if(r._status===-1){var e=r._result;e=e(),e.then(function(t){(r._status===0||r._status===-1)&&(r._status=1,r._result=t)},function(t){(r._status===0||r._status===-1)&&(r._status=2,r._result=t)}),r._status===-1&&(r._status=0,r._result=e)}if(r._status===1)return r._result.default;throw r._result}var Gt={current:null},ah={transition:null},B2={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:ah,ReactCurrentOwner:Yy};we.Children={map:ul,forEach:function(r,e,t){ul(r,function(){e.apply(this,arguments)},t)},count:function(r){var e=0;return ul(r,function(){e++}),e},toArray:function(r){return ul(r,function(e){return e})||[]},only:function(r){if(!qy(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};we.Component=Sa;we.Fragment=S2;we.Profiler=C2;we.PureComponent=$y;we.StrictMode=w2;we.Suspense=R2;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B2;we.cloneElement=function(r,e,t){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var n=Fw({},r.props),i=r.key,s=r.ref,a=r._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Yy.current),e.key!==void 0&&(i=""+e.key),r.type&&r.type.defaultProps)var o=r.type.defaultProps;for(u in e)kw.call(e,u)&&!Gw.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&o!==void 0?o[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=t;else if(1<u){o=Array(u);for(var l=0;l<u;l++)o[l]=arguments[l+2];n.children=o}return{$$typeof:Lu,type:r.type,key:i,ref:s,props:n,_owner:a}};we.createContext=function(r){return r={$$typeof:P2,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:I2,_context:r},r.Consumer=r};we.createElement=jw;we.createFactory=function(r){var e=jw.bind(null,r);return e.type=r,e};we.createRef=function(){return{current:null}};we.forwardRef=function(r){return{$$typeof:A2,render:r}};we.isValidElement=qy;we.lazy=function(r){return{$$typeof:M2,_payload:{_status:-1,_result:r},_init:F2}};we.memo=function(r,e){return{$$typeof:O2,type:r,compare:e===void 0?null:e}};we.startTransition=function(r){var e=ah.transition;ah.transition={};try{r()}finally{ah.transition=e}};we.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};we.useCallback=function(r,e){return Gt.current.useCallback(r,e)};we.useContext=function(r){return Gt.current.useContext(r)};we.useDebugValue=function(){};we.useDeferredValue=function(r){return Gt.current.useDeferredValue(r)};we.useEffect=function(r,e){return Gt.current.useEffect(r,e)};we.useId=function(){return Gt.current.useId()};we.useImperativeHandle=function(r,e,t){return Gt.current.useImperativeHandle(r,e,t)};we.useInsertionEffect=function(r,e){return Gt.current.useInsertionEffect(r,e)};we.useLayoutEffect=function(r,e){return Gt.current.useLayoutEffect(r,e)};we.useMemo=function(r,e){return Gt.current.useMemo(r,e)};we.useReducer=function(r,e,t){return Gt.current.useReducer(r,e,t)};we.useRef=function(r){return Gt.current.useRef(r)};we.useState=function(r){return Gt.current.useState(r)};we.useSyncExternalStore=function(r,e,t){return Gt.current.useSyncExternalStore(r,e,t)};we.useTransition=function(){return Gt.current.useTransition()};we.version="18.2.0";Lw.exports=we;var K=Lw.exports;const Ky=Sc(K),U2=E2({__proto__:null,default:Ky},[K]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k2=K,G2=Symbol.for("react.element"),j2=Symbol.for("react.fragment"),H2=Object.prototype.hasOwnProperty,V2=k2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,z2={key:!0,ref:!0,__self:!0,__source:!0};function Hw(r,e,t){var n,i={},s=null,a=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)H2.call(e,n)&&!z2.hasOwnProperty(n)&&(i[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:G2,type:r,key:s,ref:a,props:i,_owner:V2.current}}wc.Fragment=j2;wc.jsx=Hw;wc.jsxs=Hw;Dw.exports=wc;var V=Dw.exports,Rm={},Vw={exports:{}},nr={},zw={exports:{}},Xw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function e(L,B){var N=L.length;L.push(B);e:for(;0<N;){var U=N-1>>>1,q=L[U];if(0<i(q,B))L[U]=B,L[N]=q,N=U;else break e}}function t(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var B=L[0],N=L.pop();if(N!==B){L[0]=N;e:for(var U=0,q=L.length,Q=q>>>1;U<Q;){var ne=2*(U+1)-1,de=L[ne],ge=ne+1,oe=L[ge];if(0>i(de,N))ge<q&&0>i(oe,de)?(L[U]=oe,L[ge]=N,U=ge):(L[U]=de,L[ne]=N,U=ne);else if(ge<q&&0>i(oe,N))L[U]=oe,L[ge]=N,U=ge;else break e}}return B}function i(L,B){var N=L.sortIndex-B.sortIndex;return N!==0?N:L.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();r.unstable_now=function(){return a.now()-o}}var u=[],l=[],h=1,c=null,f=3,p=!1,v=!1,g=!1,m=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(L){for(var B=t(l);B!==null;){if(B.callback===null)n(l);else if(B.startTime<=L)n(l),B.sortIndex=B.expirationTime,e(u,B);else break;B=t(l)}}function E(L){if(g=!1,T(L),!v)if(t(u)!==null)v=!0,H(b);else{var B=t(l);B!==null&&Y(E,B.startTime-L)}}function b(L,B){v=!1,g&&(g=!1,y(O),O=-1),p=!0;var N=f;try{for(T(B),c=t(u);c!==null&&(!(c.expirationTime>B)||L&&!D());){var U=c.callback;if(typeof U=="function"){c.callback=null,f=c.priorityLevel;var q=U(c.expirationTime<=B);B=r.unstable_now(),typeof q=="function"?c.callback=q:c===t(u)&&n(u),T(B)}else n(u);c=t(u)}if(c!==null)var Q=!0;else{var ne=t(l);ne!==null&&Y(E,ne.startTime-B),Q=!1}return Q}finally{c=null,f=N,p=!1}}var w=!1,C=null,O=-1,R=5,I=-1;function D(){return!(r.unstable_now()-I<R)}function F(){if(C!==null){var L=r.unstable_now();I=L;var B=!0;try{B=C(!0,L)}finally{B?j():(w=!1,C=null)}}else w=!1}var j;if(typeof x=="function")j=function(){x(F)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,$=z.port2;z.port1.onmessage=F,j=function(){$.postMessage(null)}}else j=function(){m(F,0)};function H(L){C=L,w||(w=!0,j())}function Y(L,B){O=m(function(){L(r.unstable_now())},B)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(L){L.callback=null},r.unstable_continueExecution=function(){v||p||(v=!0,H(b))},r.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<L?Math.floor(1e3/L):5},r.unstable_getCurrentPriorityLevel=function(){return f},r.unstable_getFirstCallbackNode=function(){return t(u)},r.unstable_next=function(L){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var N=f;f=B;try{return L()}finally{f=N}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(L,B){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var N=f;f=L;try{return B()}finally{f=N}},r.unstable_scheduleCallback=function(L,B,N){var U=r.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?U+N:U):N=U,L){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=N+q,L={id:h++,callback:B,priorityLevel:L,startTime:N,expirationTime:q,sortIndex:-1},N>U?(L.sortIndex=N,e(l,L),t(u)===null&&L===t(l)&&(g?(y(O),O=-1):g=!0,Y(E,N-U))):(L.sortIndex=q,e(u,L),v||p||(v=!0,H(b))),L},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(L){var B=f;return function(){var N=f;f=B;try{return L.apply(this,arguments)}finally{f=N}}}})(Xw);zw.exports=Xw;var X2=zw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $w=K,rr=X2;function J(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ww=new Set,Uo={};function ys(r,e){aa(r,e),aa(r+"Capture",e)}function aa(r,e){for(Uo[r]=e,r=0;r<e.length;r++)Ww.add(e[r])}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Om=Object.prototype.hasOwnProperty,$2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Lx={},Nx={};function W2(r){return Om.call(Nx,r)?!0:Om.call(Lx,r)?!1:$2.test(r)?Nx[r]=!0:(Lx[r]=!0,!1)}function Y2(r,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function q2(r,e,t,n){if(e===null||typeof e>"u"||Y2(r,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function jt(r,e,t,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){wt[r]=new jt(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=r[0];wt[e]=new jt(e,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){wt[r]=new jt(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){wt[r]=new jt(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){wt[r]=new jt(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){wt[r]=new jt(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){wt[r]=new jt(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){wt[r]=new jt(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){wt[r]=new jt(r,5,!1,r.toLowerCase(),null,!1,!1)});var Jy=/[\-:]([a-z])/g;function Zy(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var e=r.replace(Jy,Zy);wt[e]=new jt(e,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var e=r.replace(Jy,Zy);wt[e]=new jt(e,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(Jy,Zy);wt[e]=new jt(e,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){wt[r]=new jt(r,1,!1,r.toLowerCase(),null,!1,!1)});wt.xlinkHref=new jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){wt[r]=new jt(r,1,!1,r.toLowerCase(),null,!0,!0)});function Qy(r,e,t,n){var i=wt.hasOwnProperty(e)?wt[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(q2(e,t,i,n)&&(t=null),n||i===null?W2(e)&&(t===null?r.removeAttribute(e):r.setAttribute(e,""+t)):i.mustUseProperty?r[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,n=i.attributeNamespace,t===null?r.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,n?r.setAttributeNS(n,e,t):r.setAttribute(e,t))))}var On=$w.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ll=Symbol.for("react.element"),Ns=Symbol.for("react.portal"),Fs=Symbol.for("react.fragment"),e_=Symbol.for("react.strict_mode"),Mm=Symbol.for("react.profiler"),Yw=Symbol.for("react.provider"),qw=Symbol.for("react.context"),t_=Symbol.for("react.forward_ref"),Dm=Symbol.for("react.suspense"),Lm=Symbol.for("react.suspense_list"),r_=Symbol.for("react.memo"),kn=Symbol.for("react.lazy"),Kw=Symbol.for("react.offscreen"),Fx=Symbol.iterator;function Va(r){return r===null||typeof r!="object"?null:(r=Fx&&r[Fx]||r["@@iterator"],typeof r=="function"?r:null)}var nt=Object.assign,If;function lo(r){if(If===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);If=e&&e[1]||""}return`
`+If+r}var Pf=!1;function Af(r,e){if(!r||Pf)return"";Pf=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(r,[],e)}else{try{e.call()}catch(l){n=l}r.call(e.prototype)}else{try{throw Error()}catch(l){n=l}r()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var u=`
`+i[a].replace(" at new "," at ");return r.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",r.displayName)),u}while(1<=a&&0<=o);break}}}finally{Pf=!1,Error.prepareStackTrace=t}return(r=r?r.displayName||r.name:"")?lo(r):""}function K2(r){switch(r.tag){case 5:return lo(r.type);case 16:return lo("Lazy");case 13:return lo("Suspense");case 19:return lo("SuspenseList");case 0:case 2:case 15:return r=Af(r.type,!1),r;case 11:return r=Af(r.type.render,!1),r;case 1:return r=Af(r.type,!0),r;default:return""}}function Nm(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Fs:return"Fragment";case Ns:return"Portal";case Mm:return"Profiler";case e_:return"StrictMode";case Dm:return"Suspense";case Lm:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case qw:return(r.displayName||"Context")+".Consumer";case Yw:return(r._context.displayName||"Context")+".Provider";case t_:var e=r.render;return r=r.displayName,r||(r=e.displayName||e.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case r_:return e=r.displayName||null,e!==null?e:Nm(r.type)||"Memo";case kn:e=r._payload,r=r._init;try{return Nm(r(e))}catch{}}return null}function J2(r){var e=r.type;switch(r.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=e.render,r=r.displayName||r.name||"",e.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nm(e);case 8:return e===e_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fi(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Jw(r){var e=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Z2(r){var e=Jw(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),n=""+r[e];if(!r.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function hl(r){r._valueTracker||(r._valueTracker=Z2(r))}function Zw(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return r&&(n=Jw(r)?r.checked?"true":"false":r.value),r=n,r!==t?(e.setValue(r),!0):!1}function Ph(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Fm(r,e){var t=e.checked;return nt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??r._wrapperState.initialChecked})}function Bx(r,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=fi(e.value!=null?e.value:t),r._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Qw(r,e){e=e.checked,e!=null&&Qy(r,"checked",e,!1)}function Bm(r,e){Qw(r,e);var t=fi(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&r.value===""||r.value!=t)&&(r.value=""+t):r.value!==""+t&&(r.value=""+t);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}e.hasOwnProperty("value")?Um(r,e.type,t):e.hasOwnProperty("defaultValue")&&Um(r,e.type,fi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(r.defaultChecked=!!e.defaultChecked)}function Ux(r,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+r._wrapperState.initialValue,t||e===r.value||(r.value=e),r.defaultValue=e}t=r.name,t!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,t!==""&&(r.name=t)}function Um(r,e,t){(e!=="number"||Ph(r.ownerDocument)!==r)&&(t==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+t&&(r.defaultValue=""+t))}var ho=Array.isArray;function qs(r,e,t,n){if(r=r.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<r.length;t++)i=e.hasOwnProperty("$"+r[t].value),r[t].selected!==i&&(r[t].selected=i),i&&n&&(r[t].defaultSelected=!0)}else{for(t=""+fi(t),e=null,i=0;i<r.length;i++){if(r[i].value===t){r[i].selected=!0,n&&(r[i].defaultSelected=!0);return}e!==null||r[i].disabled||(e=r[i])}e!==null&&(e.selected=!0)}}function km(r,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return nt({},e,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function kx(r,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(J(92));if(ho(t)){if(1<t.length)throw Error(J(93));t=t[0]}e=t}e==null&&(e=""),t=e}r._wrapperState={initialValue:fi(t)}}function eC(r,e){var t=fi(e.value),n=fi(e.defaultValue);t!=null&&(t=""+t,t!==r.value&&(r.value=t),e.defaultValue==null&&r.defaultValue!==t&&(r.defaultValue=t)),n!=null&&(r.defaultValue=""+n)}function Gx(r){var e=r.textContent;e===r._wrapperState.initialValue&&e!==""&&e!==null&&(r.value=e)}function tC(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gm(r,e){return r==null||r==="http://www.w3.org/1999/xhtml"?tC(e):r==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var cl,rC=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return r(e,t,n,i)})}:r}(function(r,e){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=e;else{for(cl=cl||document.createElement("div"),cl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cl.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;e.firstChild;)r.appendChild(e.firstChild)}});function ko(r,e){if(e){var t=r.firstChild;if(t&&t===r.lastChild&&t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var To={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Q2=["Webkit","ms","Moz","O"];Object.keys(To).forEach(function(r){Q2.forEach(function(e){e=e+r.charAt(0).toUpperCase()+r.substring(1),To[e]=To[r]})});function nC(r,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||To.hasOwnProperty(r)&&To[r]?(""+e).trim():e+"px"}function iC(r,e){r=r.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,i=nC(t,e[t],n);t==="float"&&(t="cssFloat"),n?r.setProperty(t,i):r[t]=i}}var eD=nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jm(r,e){if(e){if(eD[r]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,r));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function Hm(r,e){if(r.indexOf("-")===-1)return typeof e.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vm=null;function n_(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var zm=null,Ks=null,Js=null;function jx(r){if(r=Bu(r)){if(typeof zm!="function")throw Error(J(280));var e=r.stateNode;e&&(e=Rc(e),zm(r.stateNode,r.type,e))}}function sC(r){Ks?Js?Js.push(r):Js=[r]:Ks=r}function aC(){if(Ks){var r=Ks,e=Js;if(Js=Ks=null,jx(r),e)for(r=0;r<e.length;r++)jx(e[r])}}function oC(r,e){return r(e)}function uC(){}var Rf=!1;function lC(r,e,t){if(Rf)return r(e,t);Rf=!0;try{return oC(r,e,t)}finally{Rf=!1,(Ks!==null||Js!==null)&&(uC(),aC())}}function Go(r,e){var t=r.stateNode;if(t===null)return null;var n=Rc(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(t&&typeof t!="function")throw Error(J(231,e,typeof t));return t}var Xm=!1;if(Sn)try{var za={};Object.defineProperty(za,"passive",{get:function(){Xm=!0}}),window.addEventListener("test",za,za),window.removeEventListener("test",za,za)}catch{Xm=!1}function tD(r,e,t,n,i,s,a,o,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(t,l)}catch(h){this.onError(h)}}var Eo=!1,Ah=null,Rh=!1,$m=null,rD={onError:function(r){Eo=!0,Ah=r}};function nD(r,e,t,n,i,s,a,o,u){Eo=!1,Ah=null,tD.apply(rD,arguments)}function iD(r,e,t,n,i,s,a,o,u){if(nD.apply(this,arguments),Eo){if(Eo){var l=Ah;Eo=!1,Ah=null}else throw Error(J(198));Rh||(Rh=!0,$m=l)}}function _s(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,e.flags&4098&&(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function hC(r){if(r.tag===13){var e=r.memoizedState;if(e===null&&(r=r.alternate,r!==null&&(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function Hx(r){if(_s(r)!==r)throw Error(J(188))}function sD(r){var e=r.alternate;if(!e){if(e=_s(r),e===null)throw Error(J(188));return e!==r?null:r}for(var t=r,n=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){t=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return Hx(i),r;if(s===n)return Hx(i),e;s=s.sibling}throw Error(J(188))}if(t.return!==n.return)t=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===t){a=!0,t=i,n=s;break}if(o===n){a=!0,n=i,t=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===t){a=!0,t=s,n=i;break}if(o===n){a=!0,n=s,t=i;break}o=o.sibling}if(!a)throw Error(J(189))}}if(t.alternate!==n)throw Error(J(190))}if(t.tag!==3)throw Error(J(188));return t.stateNode.current===t?r:e}function cC(r){return r=sD(r),r!==null?fC(r):null}function fC(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var e=fC(r);if(e!==null)return e;r=r.sibling}return null}var dC=rr.unstable_scheduleCallback,Vx=rr.unstable_cancelCallback,aD=rr.unstable_shouldYield,oD=rr.unstable_requestPaint,ot=rr.unstable_now,uD=rr.unstable_getCurrentPriorityLevel,i_=rr.unstable_ImmediatePriority,pC=rr.unstable_UserBlockingPriority,Oh=rr.unstable_NormalPriority,lD=rr.unstable_LowPriority,vC=rr.unstable_IdlePriority,Cc=null,Zr=null;function hD(r){if(Zr&&typeof Zr.onCommitFiberRoot=="function")try{Zr.onCommitFiberRoot(Cc,r,void 0,(r.current.flags&128)===128)}catch{}}var Lr=Math.clz32?Math.clz32:dD,cD=Math.log,fD=Math.LN2;function dD(r){return r>>>=0,r===0?32:31-(cD(r)/fD|0)|0}var fl=64,dl=4194304;function co(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Mh(r,e){var t=r.pendingLanes;if(t===0)return 0;var n=0,i=r.suspendedLanes,s=r.pingedLanes,a=t&268435455;if(a!==0){var o=a&~i;o!==0?n=co(o):(s&=a,s!==0&&(n=co(s)))}else a=t&~i,a!==0?n=co(a):s!==0&&(n=co(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=t&16),e=r.entangledLanes,e!==0)for(r=r.entanglements,e&=n;0<e;)t=31-Lr(e),i=1<<t,n|=r[t],e&=~i;return n}function pD(r,e){switch(r){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vD(r,e){for(var t=r.suspendedLanes,n=r.pingedLanes,i=r.expirationTimes,s=r.pendingLanes;0<s;){var a=31-Lr(s),o=1<<a,u=i[a];u===-1?(!(o&t)||o&n)&&(i[a]=pD(o,e)):u<=e&&(r.expiredLanes|=o),s&=~o}}function Wm(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function mC(){var r=fl;return fl<<=1,!(fl&4194240)&&(fl=64),r}function Of(r){for(var e=[],t=0;31>t;t++)e.push(r);return e}function Nu(r,e,t){r.pendingLanes|=e,e!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,e=31-Lr(e),r[e]=t}function mD(r,e){var t=r.pendingLanes&~e;r.pendingLanes=e,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=e,r.mutableReadLanes&=e,r.entangledLanes&=e,e=r.entanglements;var n=r.eventTimes;for(r=r.expirationTimes;0<t;){var i=31-Lr(t),s=1<<i;e[i]=0,n[i]=-1,r[i]=-1,t&=~s}}function s_(r,e){var t=r.entangledLanes|=e;for(r=r.entanglements;t;){var n=31-Lr(t),i=1<<n;i&e|r[n]&e&&(r[n]|=e),t&=~i}}var Le=0;function gC(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var yC,a_,_C,xC,TC,Ym=!1,pl=[],Qn=null,ei=null,ti=null,jo=new Map,Ho=new Map,Hn=[],gD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zx(r,e){switch(r){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":jo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ho.delete(e.pointerId)}}function Xa(r,e,t,n,i,s){return r===null||r.nativeEvent!==s?(r={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Bu(e),e!==null&&a_(e)),r):(r.eventSystemFlags|=n,e=r.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),r)}function yD(r,e,t,n,i){switch(e){case"focusin":return Qn=Xa(Qn,r,e,t,n,i),!0;case"dragenter":return ei=Xa(ei,r,e,t,n,i),!0;case"mouseover":return ti=Xa(ti,r,e,t,n,i),!0;case"pointerover":var s=i.pointerId;return jo.set(s,Xa(jo.get(s)||null,r,e,t,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Ho.set(s,Xa(Ho.get(s)||null,r,e,t,n,i)),!0}return!1}function EC(r){var e=Xi(r.target);if(e!==null){var t=_s(e);if(t!==null){if(e=t.tag,e===13){if(e=hC(t),e!==null){r.blockedOn=e,TC(r.priority,function(){_C(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function oh(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0<e.length;){var t=qm(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t===null){t=r.nativeEvent;var n=new t.constructor(t.type,t);Vm=n,t.target.dispatchEvent(n),Vm=null}else return e=Bu(t),e!==null&&a_(e),r.blockedOn=t,!1;e.shift()}return!0}function Xx(r,e,t){oh(r)&&t.delete(e)}function _D(){Ym=!1,Qn!==null&&oh(Qn)&&(Qn=null),ei!==null&&oh(ei)&&(ei=null),ti!==null&&oh(ti)&&(ti=null),jo.forEach(Xx),Ho.forEach(Xx)}function $a(r,e){r.blockedOn===e&&(r.blockedOn=null,Ym||(Ym=!0,rr.unstable_scheduleCallback(rr.unstable_NormalPriority,_D)))}function Vo(r){function e(i){return $a(i,r)}if(0<pl.length){$a(pl[0],r);for(var t=1;t<pl.length;t++){var n=pl[t];n.blockedOn===r&&(n.blockedOn=null)}}for(Qn!==null&&$a(Qn,r),ei!==null&&$a(ei,r),ti!==null&&$a(ti,r),jo.forEach(e),Ho.forEach(e),t=0;t<Hn.length;t++)n=Hn[t],n.blockedOn===r&&(n.blockedOn=null);for(;0<Hn.length&&(t=Hn[0],t.blockedOn===null);)EC(t),t.blockedOn===null&&Hn.shift()}var Zs=On.ReactCurrentBatchConfig,Dh=!0;function xD(r,e,t,n){var i=Le,s=Zs.transition;Zs.transition=null;try{Le=1,o_(r,e,t,n)}finally{Le=i,Zs.transition=s}}function TD(r,e,t,n){var i=Le,s=Zs.transition;Zs.transition=null;try{Le=4,o_(r,e,t,n)}finally{Le=i,Zs.transition=s}}function o_(r,e,t,n){if(Dh){var i=qm(r,e,t,n);if(i===null)jf(r,e,n,Lh,t),zx(r,n);else if(yD(i,r,e,t,n))n.stopPropagation();else if(zx(r,n),e&4&&-1<gD.indexOf(r)){for(;i!==null;){var s=Bu(i);if(s!==null&&yC(s),s=qm(r,e,t,n),s===null&&jf(r,e,n,Lh,t),s===i)break;i=s}i!==null&&n.stopPropagation()}else jf(r,e,n,null,t)}}var Lh=null;function qm(r,e,t,n){if(Lh=null,r=n_(n),r=Xi(r),r!==null)if(e=_s(r),e===null)r=null;else if(t=e.tag,t===13){if(r=hC(e),r!==null)return r;r=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;r=null}else e!==r&&(r=null);return Lh=r,null}function bC(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uD()){case i_:return 1;case pC:return 4;case Oh:case lD:return 16;case vC:return 536870912;default:return 16}default:return 16}}var Yn=null,u_=null,uh=null;function SC(){if(uh)return uh;var r,e=u_,t=e.length,n,i="value"in Yn?Yn.value:Yn.textContent,s=i.length;for(r=0;r<t&&e[r]===i[r];r++);var a=t-r;for(n=1;n<=a&&e[t-n]===i[s-n];n++);return uh=i.slice(r,1<n?1-n:void 0)}function lh(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}function vl(){return!0}function $x(){return!1}function ir(r){function e(t,n,i,s,a){this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in r)r.hasOwnProperty(o)&&(t=r[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?vl:$x,this.isPropagationStopped=$x,this}return nt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=vl)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=vl)},persist:function(){},isPersistent:vl}),e}var wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},l_=ir(wa),Fu=nt({},wa,{view:0,detail:0}),ED=ir(Fu),Mf,Df,Wa,Ic=nt({},Fu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:h_,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Wa&&(Wa&&r.type==="mousemove"?(Mf=r.screenX-Wa.screenX,Df=r.screenY-Wa.screenY):Df=Mf=0,Wa=r),Mf)},movementY:function(r){return"movementY"in r?r.movementY:Df}}),Wx=ir(Ic),bD=nt({},Ic,{dataTransfer:0}),SD=ir(bD),wD=nt({},Fu,{relatedTarget:0}),Lf=ir(wD),CD=nt({},wa,{animationName:0,elapsedTime:0,pseudoElement:0}),ID=ir(CD),PD=nt({},wa,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),AD=ir(PD),RD=nt({},wa,{data:0}),Yx=ir(RD),OD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LD(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=DD[r])?!!e[r]:!1}function h_(){return LD}var ND=nt({},Fu,{key:function(r){if(r.key){var e=OD[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=lh(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?MD[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:h_,charCode:function(r){return r.type==="keypress"?lh(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?lh(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),FD=ir(ND),BD=nt({},Ic,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qx=ir(BD),UD=nt({},Fu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:h_}),kD=ir(UD),GD=nt({},wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),jD=ir(GD),HD=nt({},Ic,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),VD=ir(HD),zD=[9,13,27,32],c_=Sn&&"CompositionEvent"in window,bo=null;Sn&&"documentMode"in document&&(bo=document.documentMode);var XD=Sn&&"TextEvent"in window&&!bo,wC=Sn&&(!c_||bo&&8<bo&&11>=bo),Kx=String.fromCharCode(32),Jx=!1;function CC(r,e){switch(r){case"keyup":return zD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function IC(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Bs=!1;function $D(r,e){switch(r){case"compositionend":return IC(e);case"keypress":return e.which!==32?null:(Jx=!0,Kx);case"textInput":return r=e.data,r===Kx&&Jx?null:r;default:return null}}function WD(r,e){if(Bs)return r==="compositionend"||!c_&&CC(r,e)?(r=SC(),uh=u_=Yn=null,Bs=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wC&&e.locale!=="ko"?null:e.data;default:return null}}var YD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zx(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e==="input"?!!YD[r.type]:e==="textarea"}function PC(r,e,t,n){sC(n),e=Nh(e,"onChange"),0<e.length&&(t=new l_("onChange","change",null,t,n),r.push({event:t,listeners:e}))}var So=null,zo=null;function qD(r){kC(r,0)}function Pc(r){var e=Gs(r);if(Zw(e))return r}function KD(r,e){if(r==="change")return e}var AC=!1;if(Sn){var Nf;if(Sn){var Ff="oninput"in document;if(!Ff){var Qx=document.createElement("div");Qx.setAttribute("oninput","return;"),Ff=typeof Qx.oninput=="function"}Nf=Ff}else Nf=!1;AC=Nf&&(!document.documentMode||9<document.documentMode)}function eT(){So&&(So.detachEvent("onpropertychange",RC),zo=So=null)}function RC(r){if(r.propertyName==="value"&&Pc(zo)){var e=[];PC(e,zo,r,n_(r)),lC(qD,e)}}function JD(r,e,t){r==="focusin"?(eT(),So=e,zo=t,So.attachEvent("onpropertychange",RC)):r==="focusout"&&eT()}function ZD(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Pc(zo)}function QD(r,e){if(r==="click")return Pc(e)}function eL(r,e){if(r==="input"||r==="change")return Pc(e)}function tL(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Ur=typeof Object.is=="function"?Object.is:tL;function Xo(r,e){if(Ur(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var i=t[n];if(!Om.call(e,i)||!Ur(r[i],e[i]))return!1}return!0}function tT(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function rT(r,e){var t=tT(r);r=0;for(var n;t;){if(t.nodeType===3){if(n=r+t.textContent.length,r<=e&&n>=e)return{node:t,offset:e-r};r=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=tT(t)}}function OC(r,e){return r&&e?r===e?!0:r&&r.nodeType===3?!1:e&&e.nodeType===3?OC(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&16):!1:!1}function MC(){for(var r=window,e=Ph();e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)r=e.contentWindow;else break;e=Ph(r.document)}return e}function f_(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e&&(e==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}function rL(r){var e=MC(),t=r.focusedElem,n=r.selectionRange;if(e!==t&&t&&t.ownerDocument&&OC(t.ownerDocument.documentElement,t)){if(n!==null&&f_(t)){if(e=n.start,r=n.end,r===void 0&&(r=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(r,t.value.length);else if(r=(e=t.ownerDocument||document)&&e.defaultView||window,r.getSelection){r=r.getSelection();var i=t.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!r.extend&&s>n&&(i=n,n=s,s=i),i=rT(t,s);var a=rT(t,n);i&&a&&(r.rangeCount!==1||r.anchorNode!==i.node||r.anchorOffset!==i.offset||r.focusNode!==a.node||r.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),r.removeAllRanges(),s>n?(r.addRange(e),r.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),r.addRange(e)))}}for(e=[],r=t;r=r.parentNode;)r.nodeType===1&&e.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)r=e[t],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var nL=Sn&&"documentMode"in document&&11>=document.documentMode,Us=null,Km=null,wo=null,Jm=!1;function nT(r,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Jm||Us==null||Us!==Ph(n)||(n=Us,"selectionStart"in n&&f_(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),wo&&Xo(wo,n)||(wo=n,n=Nh(Km,"onSelect"),0<n.length&&(e=new l_("onSelect","select",null,e,t),r.push({event:e,listeners:n}),e.target=Us)))}function ml(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var ks={animationend:ml("Animation","AnimationEnd"),animationiteration:ml("Animation","AnimationIteration"),animationstart:ml("Animation","AnimationStart"),transitionend:ml("Transition","TransitionEnd")},Bf={},DC={};Sn&&(DC=document.createElement("div").style,"AnimationEvent"in window||(delete ks.animationend.animation,delete ks.animationiteration.animation,delete ks.animationstart.animation),"TransitionEvent"in window||delete ks.transitionend.transition);function Ac(r){if(Bf[r])return Bf[r];if(!ks[r])return r;var e=ks[r],t;for(t in e)if(e.hasOwnProperty(t)&&t in DC)return Bf[r]=e[t];return r}var LC=Ac("animationend"),NC=Ac("animationiteration"),FC=Ac("animationstart"),BC=Ac("transitionend"),UC=new Map,iT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yi(r,e){UC.set(r,e),ys(e,[r])}for(var Uf=0;Uf<iT.length;Uf++){var kf=iT[Uf],iL=kf.toLowerCase(),sL=kf[0].toUpperCase()+kf.slice(1);yi(iL,"on"+sL)}yi(LC,"onAnimationEnd");yi(NC,"onAnimationIteration");yi(FC,"onAnimationStart");yi("dblclick","onDoubleClick");yi("focusin","onFocus");yi("focusout","onBlur");yi(BC,"onTransitionEnd");aa("onMouseEnter",["mouseout","mouseover"]);aa("onMouseLeave",["mouseout","mouseover"]);aa("onPointerEnter",["pointerout","pointerover"]);aa("onPointerLeave",["pointerout","pointerover"]);ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ys("onBeforeInput",["compositionend","keypress","textInput","paste"]);ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aL=new Set("cancel close invalid load scroll toggle".split(" ").concat(fo));function sT(r,e,t){var n=r.type||"unknown-event";r.currentTarget=t,iD(n,e,void 0,r),r.currentTarget=null}function kC(r,e){e=(e&4)!==0;for(var t=0;t<r.length;t++){var n=r[t],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],u=o.instance,l=o.currentTarget;if(o=o.listener,u!==s&&i.isPropagationStopped())break e;sT(i,o,l),s=u}else for(a=0;a<n.length;a++){if(o=n[a],u=o.instance,l=o.currentTarget,o=o.listener,u!==s&&i.isPropagationStopped())break e;sT(i,o,l),s=u}}}if(Rh)throw r=$m,Rh=!1,$m=null,r}function Xe(r,e){var t=e[rg];t===void 0&&(t=e[rg]=new Set);var n=r+"__bubble";t.has(n)||(GC(e,r,2,!1),t.add(n))}function Gf(r,e,t){var n=0;e&&(n|=4),GC(t,r,n,e)}var gl="_reactListening"+Math.random().toString(36).slice(2);function $o(r){if(!r[gl]){r[gl]=!0,Ww.forEach(function(t){t!=="selectionchange"&&(aL.has(t)||Gf(t,!1,r),Gf(t,!0,r))});var e=r.nodeType===9?r:r.ownerDocument;e===null||e[gl]||(e[gl]=!0,Gf("selectionchange",!1,e))}}function GC(r,e,t,n){switch(bC(e)){case 1:var i=xD;break;case 4:i=TD;break;default:i=o_}t=i.bind(null,e,t,r),i=void 0,!Xm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?r.addEventListener(e,t,{capture:!0,passive:i}):r.addEventListener(e,t,!0):i!==void 0?r.addEventListener(e,t,{passive:i}):r.addEventListener(e,t,!1)}function jf(r,e,t,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Xi(o),a===null)return;if(u=a.tag,u===5||u===6){n=s=a;continue e}o=o.parentNode}}n=n.return}lC(function(){var l=s,h=n_(t),c=[];e:{var f=UC.get(r);if(f!==void 0){var p=l_,v=r;switch(r){case"keypress":if(lh(t)===0)break e;case"keydown":case"keyup":p=FD;break;case"focusin":v="focus",p=Lf;break;case"focusout":v="blur",p=Lf;break;case"beforeblur":case"afterblur":p=Lf;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Wx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=SD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=kD;break;case LC:case NC:case FC:p=ID;break;case BC:p=jD;break;case"scroll":p=ED;break;case"wheel":p=VD;break;case"copy":case"cut":case"paste":p=AD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=qx}var g=(e&4)!==0,m=!g&&r==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var x=l,T;x!==null;){T=x;var E=T.stateNode;if(T.tag===5&&E!==null&&(T=E,y!==null&&(E=Go(x,y),E!=null&&g.push(Wo(x,E,T)))),m)break;x=x.return}0<g.length&&(f=new p(f,v,null,t,h),c.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=r==="mouseover"||r==="pointerover",p=r==="mouseout"||r==="pointerout",f&&t!==Vm&&(v=t.relatedTarget||t.fromElement)&&(Xi(v)||v[wn]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(v=t.relatedTarget||t.toElement,p=l,v=v?Xi(v):null,v!==null&&(m=_s(v),v!==m||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=l),p!==v)){if(g=Wx,E="onMouseLeave",y="onMouseEnter",x="mouse",(r==="pointerout"||r==="pointerover")&&(g=qx,E="onPointerLeave",y="onPointerEnter",x="pointer"),m=p==null?f:Gs(p),T=v==null?f:Gs(v),f=new g(E,x+"leave",p,t,h),f.target=m,f.relatedTarget=T,E=null,Xi(h)===l&&(g=new g(y,x+"enter",v,t,h),g.target=T,g.relatedTarget=m,E=g),m=E,p&&v)t:{for(g=p,y=v,x=0,T=g;T;T=Cs(T))x++;for(T=0,E=y;E;E=Cs(E))T++;for(;0<x-T;)g=Cs(g),x--;for(;0<T-x;)y=Cs(y),T--;for(;x--;){if(g===y||y!==null&&g===y.alternate)break t;g=Cs(g),y=Cs(y)}g=null}else g=null;p!==null&&aT(c,f,p,g,!1),v!==null&&m!==null&&aT(c,m,v,g,!0)}}e:{if(f=l?Gs(l):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var b=KD;else if(Zx(f))if(AC)b=eL;else{b=ZD;var w=JD}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=QD);if(b&&(b=b(r,l))){PC(c,b,t,h);break e}w&&w(r,f,l),r==="focusout"&&(w=f._wrapperState)&&w.controlled&&f.type==="number"&&Um(f,"number",f.value)}switch(w=l?Gs(l):window,r){case"focusin":(Zx(w)||w.contentEditable==="true")&&(Us=w,Km=l,wo=null);break;case"focusout":wo=Km=Us=null;break;case"mousedown":Jm=!0;break;case"contextmenu":case"mouseup":case"dragend":Jm=!1,nT(c,t,h);break;case"selectionchange":if(nL)break;case"keydown":case"keyup":nT(c,t,h)}var C;if(c_)e:{switch(r){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Bs?CC(r,t)&&(O="onCompositionEnd"):r==="keydown"&&t.keyCode===229&&(O="onCompositionStart");O&&(wC&&t.locale!=="ko"&&(Bs||O!=="onCompositionStart"?O==="onCompositionEnd"&&Bs&&(C=SC()):(Yn=h,u_="value"in Yn?Yn.value:Yn.textContent,Bs=!0)),w=Nh(l,O),0<w.length&&(O=new Yx(O,r,null,t,h),c.push({event:O,listeners:w}),C?O.data=C:(C=IC(t),C!==null&&(O.data=C)))),(C=XD?$D(r,t):WD(r,t))&&(l=Nh(l,"onBeforeInput"),0<l.length&&(h=new Yx("onBeforeInput","beforeinput",null,t,h),c.push({event:h,listeners:l}),h.data=C))}kC(c,e)})}function Wo(r,e,t){return{instance:r,listener:e,currentTarget:t}}function Nh(r,e){for(var t=e+"Capture",n=[];r!==null;){var i=r,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Go(r,t),s!=null&&n.unshift(Wo(r,s,i)),s=Go(r,e),s!=null&&n.push(Wo(r,s,i))),r=r.return}return n}function Cs(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function aT(r,e,t,n,i){for(var s=e._reactName,a=[];t!==null&&t!==n;){var o=t,u=o.alternate,l=o.stateNode;if(u!==null&&u===n)break;o.tag===5&&l!==null&&(o=l,i?(u=Go(t,s),u!=null&&a.unshift(Wo(t,u,o))):i||(u=Go(t,s),u!=null&&a.push(Wo(t,u,o)))),t=t.return}a.length!==0&&r.push({event:e,listeners:a})}var oL=/\r\n?/g,uL=/\u0000|\uFFFD/g;function oT(r){return(typeof r=="string"?r:""+r).replace(oL,`
`).replace(uL,"")}function yl(r,e,t){if(e=oT(e),oT(r)!==e&&t)throw Error(J(425))}function Fh(){}var Zm=null,Qm=null;function eg(r,e){return r==="textarea"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tg=typeof setTimeout=="function"?setTimeout:void 0,lL=typeof clearTimeout=="function"?clearTimeout:void 0,uT=typeof Promise=="function"?Promise:void 0,hL=typeof queueMicrotask=="function"?queueMicrotask:typeof uT<"u"?function(r){return uT.resolve(null).then(r).catch(cL)}:tg;function cL(r){setTimeout(function(){throw r})}function Hf(r,e){var t=e,n=0;do{var i=t.nextSibling;if(r.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(n===0){r.removeChild(i),Vo(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=i}while(t);Vo(e)}function ri(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break;if(e===8){if(e=r.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return r}function lT(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&&e++}r=r.previousSibling}return null}var Ca=Math.random().toString(36).slice(2),qr="__reactFiber$"+Ca,Yo="__reactProps$"+Ca,wn="__reactContainer$"+Ca,rg="__reactEvents$"+Ca,fL="__reactListeners$"+Ca,dL="__reactHandles$"+Ca;function Xi(r){var e=r[qr];if(e)return e;for(var t=r.parentNode;t;){if(e=t[wn]||t[qr]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(r=lT(r);r!==null;){if(t=r[qr])return t;r=lT(r)}return e}r=t,t=r.parentNode}return null}function Bu(r){return r=r[qr]||r[wn],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Gs(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(J(33))}function Rc(r){return r[Yo]||null}var ng=[],js=-1;function _i(r){return{current:r}}function We(r){0>js||(r.current=ng[js],ng[js]=null,js--)}function je(r,e){js++,ng[js]=r.current,r.current=e}var di={},Dt=_i(di),Wt=_i(!1),as=di;function oa(r,e){var t=r.type.contextTypes;if(!t)return di;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=i),i}function Yt(r){return r=r.childContextTypes,r!=null}function Bh(){We(Wt),We(Dt)}function hT(r,e,t){if(Dt.current!==di)throw Error(J(168));je(Dt,e),je(Wt,t)}function jC(r,e,t){var n=r.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(J(108,J2(r)||"Unknown",i));return nt({},t,n)}function Uh(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||di,as=Dt.current,je(Dt,r),je(Wt,Wt.current),!0}function cT(r,e,t){var n=r.stateNode;if(!n)throw Error(J(169));t?(r=jC(r,e,as),n.__reactInternalMemoizedMergedChildContext=r,We(Wt),We(Dt),je(Dt,r)):We(Wt),je(Wt,t)}var dn=null,Oc=!1,Vf=!1;function HC(r){dn===null?dn=[r]:dn.push(r)}function pL(r){Oc=!0,HC(r)}function xi(){if(!Vf&&dn!==null){Vf=!0;var r=0,e=Le;try{var t=dn;for(Le=1;r<t.length;r++){var n=t[r];do n=n(!0);while(n!==null)}dn=null,Oc=!1}catch(i){throw dn!==null&&(dn=dn.slice(r+1)),dC(i_,xi),i}finally{Le=e,Vf=!1}}return null}var Hs=[],Vs=0,kh=null,Gh=0,hr=[],cr=0,os=null,mn=1,gn="";function Mi(r,e){Hs[Vs++]=Gh,Hs[Vs++]=kh,kh=r,Gh=e}function VC(r,e,t){hr[cr++]=mn,hr[cr++]=gn,hr[cr++]=os,os=r;var n=mn;r=gn;var i=32-Lr(n)-1;n&=~(1<<i),t+=1;var s=32-Lr(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,mn=1<<32-Lr(e)+i|t<<i|n,gn=s+r}else mn=1<<s|t<<i|n,gn=r}function d_(r){r.return!==null&&(Mi(r,1),VC(r,1,0))}function p_(r){for(;r===kh;)kh=Hs[--Vs],Hs[Vs]=null,Gh=Hs[--Vs],Hs[Vs]=null;for(;r===os;)os=hr[--cr],hr[cr]=null,gn=hr[--cr],hr[cr]=null,mn=hr[--cr],hr[cr]=null}var tr=null,er=null,Ke=!1,Or=null;function zC(r,e){var t=dr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=r,e=r.deletions,e===null?(r.deletions=[t],r.flags|=16):e.push(t)}function fT(r,e){switch(r.tag){case 5:var t=r.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(r.stateNode=e,tr=r,er=ri(e.firstChild),!0):!1;case 6:return e=r.pendingProps===""||e.nodeType!==3?null:e,e!==null?(r.stateNode=e,tr=r,er=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=os!==null?{id:mn,overflow:gn}:null,r.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=dr(18,null,null,0),t.stateNode=e,t.return=r,r.child=t,tr=r,er=null,!0):!1;default:return!1}}function ig(r){return(r.mode&1)!==0&&(r.flags&128)===0}function sg(r){if(Ke){var e=er;if(e){var t=e;if(!fT(r,e)){if(ig(r))throw Error(J(418));e=ri(t.nextSibling);var n=tr;e&&fT(r,e)?zC(n,t):(r.flags=r.flags&-4097|2,Ke=!1,tr=r)}}else{if(ig(r))throw Error(J(418));r.flags=r.flags&-4097|2,Ke=!1,tr=r}}}function dT(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;tr=r}function _l(r){if(r!==tr)return!1;if(!Ke)return dT(r),Ke=!0,!1;var e;if((e=r.tag!==3)&&!(e=r.tag!==5)&&(e=r.type,e=e!=="head"&&e!=="body"&&!eg(r.type,r.memoizedProps)),e&&(e=er)){if(ig(r))throw XC(),Error(J(418));for(;e;)zC(r,e),e=ri(e.nextSibling)}if(dT(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(J(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="/$"){if(e===0){er=ri(r.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}r=r.nextSibling}er=null}}else er=tr?ri(r.stateNode.nextSibling):null;return!0}function XC(){for(var r=er;r;)r=ri(r.nextSibling)}function ua(){er=tr=null,Ke=!1}function v_(r){Or===null?Or=[r]:Or.push(r)}var vL=On.ReactCurrentBatchConfig;function Ar(r,e){if(r&&r.defaultProps){e=nt({},e),r=r.defaultProps;for(var t in r)e[t]===void 0&&(e[t]=r[t]);return e}return e}var jh=_i(null),Hh=null,zs=null,m_=null;function g_(){m_=zs=Hh=null}function y_(r){var e=jh.current;We(jh),r._currentValue=e}function ag(r,e,t){for(;r!==null;){var n=r.alternate;if((r.childLanes&e)!==e?(r.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),r===t)break;r=r.return}}function Qs(r,e){Hh=r,m_=zs=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&e&&(Xt=!0),r.firstContext=null)}function yr(r){var e=r._currentValue;if(m_!==r)if(r={context:r,memoizedValue:e,next:null},zs===null){if(Hh===null)throw Error(J(308));zs=r,Hh.dependencies={lanes:0,firstContext:r}}else zs=zs.next=r;return e}var $i=null;function __(r){$i===null?$i=[r]:$i.push(r)}function $C(r,e,t,n){var i=e.interleaved;return i===null?(t.next=t,__(e)):(t.next=i.next,i.next=t),e.interleaved=t,Cn(r,n)}function Cn(r,e){r.lanes|=e;var t=r.alternate;for(t!==null&&(t.lanes|=e),t=r,r=r.return;r!==null;)r.childLanes|=e,t=r.alternate,t!==null&&(t.childLanes|=e),t=r,r=r.return;return t.tag===3?t.stateNode:null}var Gn=!1;function x_(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WC(r,e){r=r.updateQueue,e.updateQueue===r&&(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function En(r,e){return{eventTime:r,lane:e,tag:0,payload:null,callback:null,next:null}}function ni(r,e,t){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,Ae&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Cn(r,t)}return i=n.interleaved,i===null?(e.next=e,__(n)):(e.next=i.next,i.next=e),n.interleaved=e,Cn(r,t)}function hh(r,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,s_(r,t)}}function pT(r,e){var t=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=a:s=s.next=a,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}function Vh(r,e,t,n){var i=r.updateQueue;Gn=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var u=o,l=u.next;u.next=null,a===null?s=l:a.next=l,a=u;var h=r.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=l:o.next=l,h.lastBaseUpdate=u))}if(s!==null){var c=i.baseState;a=0,h=l=u=null,o=s;do{var f=o.lane,p=o.eventTime;if((n&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=r,g=o;switch(f=e,p=t,g.tag){case 1:if(v=g.payload,typeof v=="function"){c=v.call(p,c,f);break e}c=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,f=typeof v=="function"?v.call(p,c,f):v,f==null)break e;c=nt({},c,f);break e;case 2:Gn=!0}}o.callback!==null&&o.lane!==0&&(r.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(l=h=p,u=c):h=h.next=p,a|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(h===null&&(u=c),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ls|=a,r.lanes=a,r.memoizedState=c}}function vT(r,e,t){if(r=e.effects,e.effects=null,r!==null)for(e=0;e<r.length;e++){var n=r[e],i=n.callback;if(i!==null){if(n.callback=null,n=t,typeof i!="function")throw Error(J(191,i));i.call(n)}}}var YC=new $w.Component().refs;function og(r,e,t,n){e=r.memoizedState,t=t(n,e),t=t==null?e:nt({},e,t),r.memoizedState=t,r.lanes===0&&(r.updateQueue.baseState=t)}var Mc={isMounted:function(r){return(r=r._reactInternals)?_s(r)===r:!1},enqueueSetState:function(r,e,t){r=r._reactInternals;var n=Ut(),i=si(r),s=En(n,i);s.payload=e,t!=null&&(s.callback=t),e=ni(r,s,i),e!==null&&(Nr(e,r,i,n),hh(e,r,i))},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var n=Ut(),i=si(r),s=En(n,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=ni(r,s,i),e!==null&&(Nr(e,r,i,n),hh(e,r,i))},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=Ut(),n=si(r),i=En(t,n);i.tag=2,e!=null&&(i.callback=e),e=ni(r,i,n),e!==null&&(Nr(e,r,n,t),hh(e,r,n))}};function mT(r,e,t,n,i,s,a){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!Xo(t,n)||!Xo(i,s):!0}function qC(r,e,t){var n=!1,i=di,s=e.contextType;return typeof s=="object"&&s!==null?s=yr(s):(i=Yt(e)?as:Dt.current,n=e.contextTypes,s=(n=n!=null)?oa(r,i):di),e=new e(t,s),r.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Mc,r.stateNode=e,e._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=s),e}function gT(r,e,t,n){r=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==r&&Mc.enqueueReplaceState(e,e.state,null)}function ug(r,e,t,n){var i=r.stateNode;i.props=t,i.state=r.memoizedState,i.refs=YC,x_(r);var s=e.contextType;typeof s=="object"&&s!==null?i.context=yr(s):(s=Yt(e)?as:Dt.current,i.context=oa(r,s)),i.state=r.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(og(r,e,s,t),i.state=r.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Mc.enqueueReplaceState(i,i.state,null),Vh(r,t,i,n),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4194308)}function Ya(r,e,t){if(r=t.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(J(309));var n=t.stateNode}if(!n)throw Error(J(147,r));var i=n,s=""+r;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;o===YC&&(o=i.refs={}),a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof r!="string")throw Error(J(284));if(!t._owner)throw Error(J(290,r))}return r}function xl(r,e){throw r=Object.prototype.toString.call(e),Error(J(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r))}function yT(r){var e=r._init;return e(r._payload)}function KC(r){function e(y,x){if(r){var T=y.deletions;T===null?(y.deletions=[x],y.flags|=16):T.push(x)}}function t(y,x){if(!r)return null;for(;x!==null;)e(y,x),x=x.sibling;return null}function n(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function i(y,x){return y=ai(y,x),y.index=0,y.sibling=null,y}function s(y,x,T){return y.index=T,r?(T=y.alternate,T!==null?(T=T.index,T<x?(y.flags|=2,x):T):(y.flags|=2,x)):(y.flags|=1048576,x)}function a(y){return r&&y.alternate===null&&(y.flags|=2),y}function o(y,x,T,E){return x===null||x.tag!==6?(x=Kf(T,y.mode,E),x.return=y,x):(x=i(x,T),x.return=y,x)}function u(y,x,T,E){var b=T.type;return b===Fs?h(y,x,T.props.children,E,T.key):x!==null&&(x.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===kn&&yT(b)===x.type)?(E=i(x,T.props),E.ref=Ya(y,x,T),E.return=y,E):(E=mh(T.type,T.key,T.props,null,y.mode,E),E.ref=Ya(y,x,T),E.return=y,E)}function l(y,x,T,E){return x===null||x.tag!==4||x.stateNode.containerInfo!==T.containerInfo||x.stateNode.implementation!==T.implementation?(x=Jf(T,y.mode,E),x.return=y,x):(x=i(x,T.children||[]),x.return=y,x)}function h(y,x,T,E,b){return x===null||x.tag!==7?(x=Zi(T,y.mode,E,b),x.return=y,x):(x=i(x,T),x.return=y,x)}function c(y,x,T){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Kf(""+x,y.mode,T),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ll:return T=mh(x.type,x.key,x.props,null,y.mode,T),T.ref=Ya(y,null,x),T.return=y,T;case Ns:return x=Jf(x,y.mode,T),x.return=y,x;case kn:var E=x._init;return c(y,E(x._payload),T)}if(ho(x)||Va(x))return x=Zi(x,y.mode,T,null),x.return=y,x;xl(y,x)}return null}function f(y,x,T,E){var b=x!==null?x.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return b!==null?null:o(y,x,""+T,E);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ll:return T.key===b?u(y,x,T,E):null;case Ns:return T.key===b?l(y,x,T,E):null;case kn:return b=T._init,f(y,x,b(T._payload),E)}if(ho(T)||Va(T))return b!==null?null:h(y,x,T,E,null);xl(y,T)}return null}function p(y,x,T,E,b){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(T)||null,o(x,y,""+E,b);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ll:return y=y.get(E.key===null?T:E.key)||null,u(x,y,E,b);case Ns:return y=y.get(E.key===null?T:E.key)||null,l(x,y,E,b);case kn:var w=E._init;return p(y,x,T,w(E._payload),b)}if(ho(E)||Va(E))return y=y.get(T)||null,h(x,y,E,b,null);xl(x,E)}return null}function v(y,x,T,E){for(var b=null,w=null,C=x,O=x=0,R=null;C!==null&&O<T.length;O++){C.index>O?(R=C,C=null):R=C.sibling;var I=f(y,C,T[O],E);if(I===null){C===null&&(C=R);break}r&&C&&I.alternate===null&&e(y,C),x=s(I,x,O),w===null?b=I:w.sibling=I,w=I,C=R}if(O===T.length)return t(y,C),Ke&&Mi(y,O),b;if(C===null){for(;O<T.length;O++)C=c(y,T[O],E),C!==null&&(x=s(C,x,O),w===null?b=C:w.sibling=C,w=C);return Ke&&Mi(y,O),b}for(C=n(y,C);O<T.length;O++)R=p(C,y,O,T[O],E),R!==null&&(r&&R.alternate!==null&&C.delete(R.key===null?O:R.key),x=s(R,x,O),w===null?b=R:w.sibling=R,w=R);return r&&C.forEach(function(D){return e(y,D)}),Ke&&Mi(y,O),b}function g(y,x,T,E){var b=Va(T);if(typeof b!="function")throw Error(J(150));if(T=b.call(T),T==null)throw Error(J(151));for(var w=b=null,C=x,O=x=0,R=null,I=T.next();C!==null&&!I.done;O++,I=T.next()){C.index>O?(R=C,C=null):R=C.sibling;var D=f(y,C,I.value,E);if(D===null){C===null&&(C=R);break}r&&C&&D.alternate===null&&e(y,C),x=s(D,x,O),w===null?b=D:w.sibling=D,w=D,C=R}if(I.done)return t(y,C),Ke&&Mi(y,O),b;if(C===null){for(;!I.done;O++,I=T.next())I=c(y,I.value,E),I!==null&&(x=s(I,x,O),w===null?b=I:w.sibling=I,w=I);return Ke&&Mi(y,O),b}for(C=n(y,C);!I.done;O++,I=T.next())I=p(C,y,O,I.value,E),I!==null&&(r&&I.alternate!==null&&C.delete(I.key===null?O:I.key),x=s(I,x,O),w===null?b=I:w.sibling=I,w=I);return r&&C.forEach(function(F){return e(y,F)}),Ke&&Mi(y,O),b}function m(y,x,T,E){if(typeof T=="object"&&T!==null&&T.type===Fs&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case ll:e:{for(var b=T.key,w=x;w!==null;){if(w.key===b){if(b=T.type,b===Fs){if(w.tag===7){t(y,w.sibling),x=i(w,T.props.children),x.return=y,y=x;break e}}else if(w.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===kn&&yT(b)===w.type){t(y,w.sibling),x=i(w,T.props),x.ref=Ya(y,w,T),x.return=y,y=x;break e}t(y,w);break}else e(y,w);w=w.sibling}T.type===Fs?(x=Zi(T.props.children,y.mode,E,T.key),x.return=y,y=x):(E=mh(T.type,T.key,T.props,null,y.mode,E),E.ref=Ya(y,x,T),E.return=y,y=E)}return a(y);case Ns:e:{for(w=T.key;x!==null;){if(x.key===w)if(x.tag===4&&x.stateNode.containerInfo===T.containerInfo&&x.stateNode.implementation===T.implementation){t(y,x.sibling),x=i(x,T.children||[]),x.return=y,y=x;break e}else{t(y,x);break}else e(y,x);x=x.sibling}x=Jf(T,y.mode,E),x.return=y,y=x}return a(y);case kn:return w=T._init,m(y,x,w(T._payload),E)}if(ho(T))return v(y,x,T,E);if(Va(T))return g(y,x,T,E);xl(y,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,x!==null&&x.tag===6?(t(y,x.sibling),x=i(x,T),x.return=y,y=x):(t(y,x),x=Kf(T,y.mode,E),x.return=y,y=x),a(y)):t(y,x)}return m}var la=KC(!0),JC=KC(!1),Uu={},Qr=_i(Uu),qo=_i(Uu),Ko=_i(Uu);function Wi(r){if(r===Uu)throw Error(J(174));return r}function T_(r,e){switch(je(Ko,e),je(qo,r),je(Qr,Uu),r=e.nodeType,r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gm(null,"");break;default:r=r===8?e.parentNode:e,e=r.namespaceURI||null,r=r.tagName,e=Gm(e,r)}We(Qr),je(Qr,e)}function ha(){We(Qr),We(qo),We(Ko)}function ZC(r){Wi(Ko.current);var e=Wi(Qr.current),t=Gm(e,r.type);e!==t&&(je(qo,r),je(Qr,t))}function E_(r){qo.current===r&&(We(Qr),We(qo))}var Ze=_i(0);function zh(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zf=[];function b_(){for(var r=0;r<zf.length;r++)zf[r]._workInProgressVersionPrimary=null;zf.length=0}var ch=On.ReactCurrentDispatcher,Xf=On.ReactCurrentBatchConfig,us=0,tt=null,dt=null,_t=null,Xh=!1,Co=!1,Jo=0,mL=0;function It(){throw Error(J(321))}function S_(r,e){if(e===null)return!1;for(var t=0;t<e.length&&t<r.length;t++)if(!Ur(r[t],e[t]))return!1;return!0}function w_(r,e,t,n,i,s){if(us=s,tt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ch.current=r===null||r.memoizedState===null?xL:TL,r=t(n,i),Co){s=0;do{if(Co=!1,Jo=0,25<=s)throw Error(J(301));s+=1,_t=dt=null,e.updateQueue=null,ch.current=EL,r=t(n,i)}while(Co)}if(ch.current=$h,e=dt!==null&&dt.next!==null,us=0,_t=dt=tt=null,Xh=!1,e)throw Error(J(300));return r}function C_(){var r=Jo!==0;return Jo=0,r}function Xr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?tt.memoizedState=_t=r:_t=_t.next=r,_t}function _r(){if(dt===null){var r=tt.alternate;r=r!==null?r.memoizedState:null}else r=dt.next;var e=_t===null?tt.memoizedState:_t.next;if(e!==null)_t=e,dt=r;else{if(r===null)throw Error(J(310));dt=r,r={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},_t===null?tt.memoizedState=_t=r:_t=_t.next=r}return _t}function Zo(r,e){return typeof e=="function"?e(r):e}function $f(r){var e=_r(),t=e.queue;if(t===null)throw Error(J(311));t.lastRenderedReducer=r;var n=dt,i=n.baseQueue,s=t.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,u=null,l=s;do{var h=l.lane;if((us&h)===h)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:r(n,l.action);else{var c={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(o=u=c,a=n):u=u.next=c,tt.lanes|=h,ls|=h}l=l.next}while(l!==null&&l!==s);u===null?a=n:u.next=o,Ur(n,e.memoizedState)||(Xt=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=u,t.lastRenderedState=n}if(r=t.interleaved,r!==null){i=r;do s=i.lane,tt.lanes|=s,ls|=s,i=i.next;while(i!==r)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Wf(r){var e=_r(),t=e.queue;if(t===null)throw Error(J(311));t.lastRenderedReducer=r;var n=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var a=i=i.next;do s=r(s,a.action),a=a.next;while(a!==i);Ur(s,e.memoizedState)||(Xt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,n]}function QC(){}function eI(r,e){var t=tt,n=_r(),i=e(),s=!Ur(n.memoizedState,i);if(s&&(n.memoizedState=i,Xt=!0),n=n.queue,I_(nI.bind(null,t,n,r),[r]),n.getSnapshot!==e||s||_t!==null&&_t.memoizedState.tag&1){if(t.flags|=2048,Qo(9,rI.bind(null,t,n,i,e),void 0,null),Tt===null)throw Error(J(349));us&30||tI(t,e,i)}return i}function tI(r,e,t){r.flags|=16384,r={getSnapshot:e,value:t},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.stores=[r]):(t=e.stores,t===null?e.stores=[r]:t.push(r))}function rI(r,e,t,n){e.value=t,e.getSnapshot=n,iI(e)&&sI(r)}function nI(r,e,t){return t(function(){iI(e)&&sI(r)})}function iI(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!Ur(r,t)}catch{return!0}}function sI(r){var e=Cn(r,1);e!==null&&Nr(e,r,1,-1)}function _T(r){var e=Xr();return typeof r=="function"&&(r=r()),e.memoizedState=e.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zo,lastRenderedState:r},e.queue=r,r=r.dispatch=_L.bind(null,tt,r),[e.memoizedState,r]}function Qo(r,e,t,n){return r={tag:r,create:e,destroy:t,deps:n,next:null},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.lastEffect=r.next=r):(t=e.lastEffect,t===null?e.lastEffect=r.next=r:(n=t.next,t.next=r,r.next=n,e.lastEffect=r)),r}function aI(){return _r().memoizedState}function fh(r,e,t,n){var i=Xr();tt.flags|=r,i.memoizedState=Qo(1|e,t,void 0,n===void 0?null:n)}function Dc(r,e,t,n){var i=_r();n=n===void 0?null:n;var s=void 0;if(dt!==null){var a=dt.memoizedState;if(s=a.destroy,n!==null&&S_(n,a.deps)){i.memoizedState=Qo(e,t,s,n);return}}tt.flags|=r,i.memoizedState=Qo(1|e,t,s,n)}function xT(r,e){return fh(8390656,8,r,e)}function I_(r,e){return Dc(2048,8,r,e)}function oI(r,e){return Dc(4,2,r,e)}function uI(r,e){return Dc(4,4,r,e)}function lI(r,e){if(typeof e=="function")return r=r(),e(r),function(){e(null)};if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function hI(r,e,t){return t=t!=null?t.concat([r]):null,Dc(4,4,lI.bind(null,e,r),t)}function P_(){}function cI(r,e){var t=_r();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&S_(e,n[1])?n[0]:(t.memoizedState=[r,e],r)}function fI(r,e){var t=_r();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&S_(e,n[1])?n[0]:(r=r(),t.memoizedState=[r,e],r)}function dI(r,e,t){return us&21?(Ur(t,e)||(t=mC(),tt.lanes|=t,ls|=t,r.baseState=!0),e):(r.baseState&&(r.baseState=!1,Xt=!0),r.memoizedState=t)}function gL(r,e){var t=Le;Le=t!==0&&4>t?t:4,r(!0);var n=Xf.transition;Xf.transition={};try{r(!1),e()}finally{Le=t,Xf.transition=n}}function pI(){return _r().memoizedState}function yL(r,e,t){var n=si(r);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},vI(r))mI(e,t);else if(t=$C(r,e,t,n),t!==null){var i=Ut();Nr(t,r,n,i),gI(t,e,n)}}function _L(r,e,t){var n=si(r),i={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(vI(r))mI(e,i);else{var s=r.alternate;if(r.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,t);if(i.hasEagerState=!0,i.eagerState=o,Ur(o,a)){var u=e.interleaved;u===null?(i.next=i,__(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}t=$C(r,e,i,n),t!==null&&(i=Ut(),Nr(t,r,n,i),gI(t,e,n))}}function vI(r){var e=r.alternate;return r===tt||e!==null&&e===tt}function mI(r,e){Co=Xh=!0;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}function gI(r,e,t){if(t&4194240){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,s_(r,t)}}var $h={readContext:yr,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},xL={readContext:yr,useCallback:function(r,e){return Xr().memoizedState=[r,e===void 0?null:e],r},useContext:yr,useEffect:xT,useImperativeHandle:function(r,e,t){return t=t!=null?t.concat([r]):null,fh(4194308,4,lI.bind(null,e,r),t)},useLayoutEffect:function(r,e){return fh(4194308,4,r,e)},useInsertionEffect:function(r,e){return fh(4,2,r,e)},useMemo:function(r,e){var t=Xr();return e=e===void 0?null:e,r=r(),t.memoizedState=[r,e],r},useReducer:function(r,e,t){var n=Xr();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:e},n.queue=r,r=r.dispatch=yL.bind(null,tt,r),[n.memoizedState,r]},useRef:function(r){var e=Xr();return r={current:r},e.memoizedState=r},useState:_T,useDebugValue:P_,useDeferredValue:function(r){return Xr().memoizedState=r},useTransition:function(){var r=_T(!1),e=r[0];return r=gL.bind(null,r[1]),Xr().memoizedState=r,[e,r]},useMutableSource:function(){},useSyncExternalStore:function(r,e,t){var n=tt,i=Xr();if(Ke){if(t===void 0)throw Error(J(407));t=t()}else{if(t=e(),Tt===null)throw Error(J(349));us&30||tI(n,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,xT(nI.bind(null,n,s,r),[r]),n.flags|=2048,Qo(9,rI.bind(null,n,s,t,e),void 0,null),t},useId:function(){var r=Xr(),e=Tt.identifierPrefix;if(Ke){var t=gn,n=mn;t=(n&~(1<<32-Lr(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=Jo++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=mL++,e=":"+e+"r"+t.toString(32)+":";return r.memoizedState=e},unstable_isNewReconciler:!1},TL={readContext:yr,useCallback:cI,useContext:yr,useEffect:I_,useImperativeHandle:hI,useInsertionEffect:oI,useLayoutEffect:uI,useMemo:fI,useReducer:$f,useRef:aI,useState:function(){return $f(Zo)},useDebugValue:P_,useDeferredValue:function(r){var e=_r();return dI(e,dt.memoizedState,r)},useTransition:function(){var r=$f(Zo)[0],e=_r().memoizedState;return[r,e]},useMutableSource:QC,useSyncExternalStore:eI,useId:pI,unstable_isNewReconciler:!1},EL={readContext:yr,useCallback:cI,useContext:yr,useEffect:I_,useImperativeHandle:hI,useInsertionEffect:oI,useLayoutEffect:uI,useMemo:fI,useReducer:Wf,useRef:aI,useState:function(){return Wf(Zo)},useDebugValue:P_,useDeferredValue:function(r){var e=_r();return dt===null?e.memoizedState=r:dI(e,dt.memoizedState,r)},useTransition:function(){var r=Wf(Zo)[0],e=_r().memoizedState;return[r,e]},useMutableSource:QC,useSyncExternalStore:eI,useId:pI,unstable_isNewReconciler:!1};function ca(r,e){try{var t="",n=e;do t+=K2(n),n=n.return;while(n);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:r,source:e,stack:i,digest:null}}function Yf(r,e,t){return{value:r,source:null,stack:t??null,digest:e??null}}function lg(r,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var bL=typeof WeakMap=="function"?WeakMap:Map;function yI(r,e,t){t=En(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){Yh||(Yh=!0,_g=n),lg(r,e)},t}function _I(r,e,t){t=En(-1,t),t.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;t.payload=function(){return n(i)},t.callback=function(){lg(r,e)}}var s=r.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){lg(r,e),typeof n!="function"&&(ii===null?ii=new Set([this]):ii.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function TT(r,e,t){var n=r.pingCache;if(n===null){n=r.pingCache=new bL;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(t)||(i.add(t),r=BL.bind(null,r,e,t),e.then(r,r))}function ET(r){do{var e;if((e=r.tag===13)&&(e=r.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return r;r=r.return}while(r!==null);return null}function bT(r,e,t,n,i){return r.mode&1?(r.flags|=65536,r.lanes=i,r):(r===e?r.flags|=65536:(r.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=En(-1,1),e.tag=2,ni(t,e,1))),t.lanes|=1),r)}var SL=On.ReactCurrentOwner,Xt=!1;function Bt(r,e,t,n){e.child=r===null?JC(e,null,t,n):la(e,r.child,t,n)}function ST(r,e,t,n,i){t=t.render;var s=e.ref;return Qs(e,i),n=w_(r,e,t,n,s,i),t=C_(),r!==null&&!Xt?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,In(r,e,i)):(Ke&&t&&d_(e),e.flags|=1,Bt(r,e,n,i),e.child)}function wT(r,e,t,n,i){if(r===null){var s=t.type;return typeof s=="function"&&!F_(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,xI(r,e,s,n,i)):(r=mh(t.type,null,n,e,e.mode,i),r.ref=e.ref,r.return=e,e.child=r)}if(s=r.child,!(r.lanes&i)){var a=s.memoizedProps;if(t=t.compare,t=t!==null?t:Xo,t(a,n)&&r.ref===e.ref)return In(r,e,i)}return e.flags|=1,r=ai(s,n),r.ref=e.ref,r.return=e,e.child=r}function xI(r,e,t,n,i){if(r!==null){var s=r.memoizedProps;if(Xo(s,n)&&r.ref===e.ref)if(Xt=!1,e.pendingProps=n=s,(r.lanes&i)!==0)r.flags&131072&&(Xt=!0);else return e.lanes=r.lanes,In(r,e,i)}return hg(r,e,t,n,i)}function TI(r,e,t){var n=e.pendingProps,i=n.children,s=r!==null?r.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je($s,Qt),Qt|=t;else{if(!(t&1073741824))return r=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:r,cachePool:null,transitions:null},e.updateQueue=null,je($s,Qt),Qt|=r,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:t,je($s,Qt),Qt|=n}else s!==null?(n=s.baseLanes|t,e.memoizedState=null):n=t,je($s,Qt),Qt|=n;return Bt(r,e,i,t),e.child}function EI(r,e){var t=e.ref;(r===null&&t!==null||r!==null&&r.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function hg(r,e,t,n,i){var s=Yt(t)?as:Dt.current;return s=oa(e,s),Qs(e,i),t=w_(r,e,t,n,s,i),n=C_(),r!==null&&!Xt?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,In(r,e,i)):(Ke&&n&&d_(e),e.flags|=1,Bt(r,e,t,i),e.child)}function CT(r,e,t,n,i){if(Yt(t)){var s=!0;Uh(e)}else s=!1;if(Qs(e,i),e.stateNode===null)dh(r,e),qC(e,t,n),ug(e,t,n,i),n=!0;else if(r===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var u=a.context,l=t.contextType;typeof l=="object"&&l!==null?l=yr(l):(l=Yt(t)?as:Dt.current,l=oa(e,l));var h=t.getDerivedStateFromProps,c=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";c||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||u!==l)&&gT(e,a,n,l),Gn=!1;var f=e.memoizedState;a.state=f,Vh(e,n,a,i),u=e.memoizedState,o!==n||f!==u||Wt.current||Gn?(typeof h=="function"&&(og(e,t,h,n),u=e.memoizedState),(o=Gn||mT(e,t,o,n,f,u,l))?(c||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),a.props=n,a.state=u,a.context=l,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,WC(r,e),o=e.memoizedProps,l=e.type===e.elementType?o:Ar(e.type,o),a.props=l,c=e.pendingProps,f=a.context,u=t.contextType,typeof u=="object"&&u!==null?u=yr(u):(u=Yt(t)?as:Dt.current,u=oa(e,u));var p=t.getDerivedStateFromProps;(h=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==c||f!==u)&&gT(e,a,n,u),Gn=!1,f=e.memoizedState,a.state=f,Vh(e,n,a,i);var v=e.memoizedState;o!==c||f!==v||Wt.current||Gn?(typeof p=="function"&&(og(e,t,p,n),v=e.memoizedState),(l=Gn||mT(e,t,l,n,f,v,u)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,v,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,v,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===r.memoizedProps&&f===r.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===r.memoizedProps&&f===r.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),a.props=n,a.state=v,a.context=u,n=l):(typeof a.componentDidUpdate!="function"||o===r.memoizedProps&&f===r.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===r.memoizedProps&&f===r.memoizedState||(e.flags|=1024),n=!1)}return cg(r,e,t,n,s,i)}function cg(r,e,t,n,i,s){EI(r,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&cT(e,t,!1),In(r,e,s);n=e.stateNode,SL.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,r!==null&&a?(e.child=la(e,r.child,null,s),e.child=la(e,null,o,s)):Bt(r,e,o,s),e.memoizedState=n.state,i&&cT(e,t,!0),e.child}function bI(r){var e=r.stateNode;e.pendingContext?hT(r,e.pendingContext,e.pendingContext!==e.context):e.context&&hT(r,e.context,!1),T_(r,e.containerInfo)}function IT(r,e,t,n,i){return ua(),v_(i),e.flags|=256,Bt(r,e,t,n),e.child}var fg={dehydrated:null,treeContext:null,retryLane:0};function dg(r){return{baseLanes:r,cachePool:null,transitions:null}}function SI(r,e,t){var n=e.pendingProps,i=Ze.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=r!==null&&r.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(r===null||r.memoizedState!==null)&&(i|=1),je(Ze,i&1),r===null)return sg(e),r=e.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(e.mode&1?r.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,r=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Fc(a,n,0,null),r=Zi(r,n,t,null),s.return=e,r.return=e,s.sibling=r,e.child=s,e.child.memoizedState=dg(t),e.memoizedState=fg,r):A_(e,a));if(i=r.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return wL(r,e,a,n,o,i,t);if(s){s=n.fallback,a=e.mode,i=r.child,o=i.sibling;var u={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=ai(i,u),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=ai(o,s):(s=Zi(s,a,t,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=r.child.memoizedState,a=a===null?dg(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=r.childLanes&~t,e.memoizedState=fg,n}return s=r.child,r=s.sibling,n=ai(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,r!==null&&(t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)),e.child=n,e.memoizedState=null,n}function A_(r,e){return e=Fc({mode:"visible",children:e},r.mode,0,null),e.return=r,r.child=e}function Tl(r,e,t,n){return n!==null&&v_(n),la(e,r.child,null,t),r=A_(e,e.pendingProps.children),r.flags|=2,e.memoizedState=null,r}function wL(r,e,t,n,i,s,a){if(t)return e.flags&256?(e.flags&=-257,n=Yf(Error(J(422))),Tl(r,e,a,n)):e.memoizedState!==null?(e.child=r.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=Fc({mode:"visible",children:n.children},i,0,null),s=Zi(s,i,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&la(e,r.child,null,a),e.child.memoizedState=dg(a),e.memoizedState=fg,s);if(!(e.mode&1))return Tl(r,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(J(419)),n=Yf(s,n,void 0),Tl(r,e,a,n)}if(o=(a&r.childLanes)!==0,Xt||o){if(n=Tt,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Cn(r,i),Nr(n,r,i,-1))}return N_(),n=Yf(Error(J(421))),Tl(r,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=r.child,e=UL.bind(null,r),i._reactRetry=e,null):(r=s.treeContext,er=ri(i.nextSibling),tr=e,Ke=!0,Or=null,r!==null&&(hr[cr++]=mn,hr[cr++]=gn,hr[cr++]=os,mn=r.id,gn=r.overflow,os=e),e=A_(e,n.children),e.flags|=4096,e)}function PT(r,e,t){r.lanes|=e;var n=r.alternate;n!==null&&(n.lanes|=e),ag(r.return,e,t)}function qf(r,e,t,n,i){var s=r.memoizedState;s===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=t,s.tailMode=i)}function wI(r,e,t){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Bt(r,e,n.children,t),n=Ze.current,n&2)n=n&1|2,e.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&PT(r,t,e);else if(r.tag===19)PT(r,t,e);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(je(Ze,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)r=t.alternate,r!==null&&zh(r)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),qf(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(r=i.alternate,r!==null&&zh(r)===null){e.child=i;break}r=i.sibling,i.sibling=t,t=i,i=r}qf(e,!0,t,null,s);break;case"together":qf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dh(r,e){!(e.mode&1)&&r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2)}function In(r,e,t){if(r!==null&&(e.dependencies=r.dependencies),ls|=e.lanes,!(t&e.childLanes))return null;if(r!==null&&e.child!==r.child)throw Error(J(153));if(e.child!==null){for(r=e.child,t=ai(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=ai(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}function CL(r,e,t){switch(e.tag){case 3:bI(e),ua();break;case 5:ZC(e);break;case 1:Yt(e.type)&&Uh(e);break;case 4:T_(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;je(jh,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(je(Ze,Ze.current&1),e.flags|=128,null):t&e.child.childLanes?SI(r,e,t):(je(Ze,Ze.current&1),r=In(r,e,t),r!==null?r.sibling:null);je(Ze,Ze.current&1);break;case 19:if(n=(t&e.childLanes)!==0,r.flags&128){if(n)return wI(r,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),je(Ze,Ze.current),n)break;return null;case 22:case 23:return e.lanes=0,TI(r,e,t)}return In(r,e,t)}var CI,pg,II,PI;CI=function(r,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)r.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};pg=function(){};II=function(r,e,t,n){var i=r.memoizedProps;if(i!==n){r=e.stateNode,Wi(Qr.current);var s=null;switch(t){case"input":i=Fm(r,i),n=Fm(r,n),s=[];break;case"select":i=nt({},i,{value:void 0}),n=nt({},n,{value:void 0}),s=[];break;case"textarea":i=km(r,i),n=km(r,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=Fh)}jm(t,n);var a;t=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var o=i[l];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Uo.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in n){var u=n[l];if(o=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&u!==o&&(u!=null||o!=null))if(l==="style")if(o){for(a in o)!o.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in u)u.hasOwnProperty(a)&&o[a]!==u[a]&&(t||(t={}),t[a]=u[a])}else t||(s||(s=[]),s.push(l,t)),t=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Uo.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Xe("scroll",r),s||o===u||(s=[])):(s=s||[]).push(l,u))}t&&(s=s||[]).push("style",t);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};PI=function(r,e,t,n){t!==n&&(e.flags|=4)};function qa(r,e){if(!Ke)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function Pt(r){var e=r.alternate!==null&&r.alternate.child===r.child,t=0,n=0;if(e)for(var i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=r,i=i.sibling;else for(i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=r,i=i.sibling;return r.subtreeFlags|=n,r.childLanes=t,e}function IL(r,e,t){var n=e.pendingProps;switch(p_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(e),null;case 1:return Yt(e.type)&&Bh(),Pt(e),null;case 3:return n=e.stateNode,ha(),We(Wt),We(Dt),b_(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(_l(e)?e.flags|=4:r===null||r.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Or!==null&&(Eg(Or),Or=null))),pg(r,e),Pt(e),null;case 5:E_(e);var i=Wi(Ko.current);if(t=e.type,r!==null&&e.stateNode!=null)II(r,e,t,n,i),r.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(J(166));return Pt(e),null}if(r=Wi(Qr.current),_l(e)){n=e.stateNode,t=e.type;var s=e.memoizedProps;switch(n[qr]=e,n[Yo]=s,r=(e.mode&1)!==0,t){case"dialog":Xe("cancel",n),Xe("close",n);break;case"iframe":case"object":case"embed":Xe("load",n);break;case"video":case"audio":for(i=0;i<fo.length;i++)Xe(fo[i],n);break;case"source":Xe("error",n);break;case"img":case"image":case"link":Xe("error",n),Xe("load",n);break;case"details":Xe("toggle",n);break;case"input":Bx(n,s),Xe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Xe("invalid",n);break;case"textarea":kx(n,s),Xe("invalid",n)}jm(t,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&yl(n.textContent,o,r),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&yl(n.textContent,o,r),i=["children",""+o]):Uo.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Xe("scroll",n)}switch(t){case"input":hl(n),Ux(n,s,!0);break;case"textarea":hl(n),Gx(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Fh)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=tC(t)),r==="http://www.w3.org/1999/xhtml"?t==="script"?(r=a.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=a.createElement(t,{is:n.is}):(r=a.createElement(t),t==="select"&&(a=r,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):r=a.createElementNS(r,t),r[qr]=e,r[Yo]=n,CI(r,e,!1,!1),e.stateNode=r;e:{switch(a=Hm(t,n),t){case"dialog":Xe("cancel",r),Xe("close",r),i=n;break;case"iframe":case"object":case"embed":Xe("load",r),i=n;break;case"video":case"audio":for(i=0;i<fo.length;i++)Xe(fo[i],r);i=n;break;case"source":Xe("error",r),i=n;break;case"img":case"image":case"link":Xe("error",r),Xe("load",r),i=n;break;case"details":Xe("toggle",r),i=n;break;case"input":Bx(r,n),i=Fm(r,n),Xe("invalid",r);break;case"option":i=n;break;case"select":r._wrapperState={wasMultiple:!!n.multiple},i=nt({},n,{value:void 0}),Xe("invalid",r);break;case"textarea":kx(r,n),i=km(r,n),Xe("invalid",r);break;default:i=n}jm(t,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var u=o[s];s==="style"?iC(r,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&rC(r,u)):s==="children"?typeof u=="string"?(t!=="textarea"||u!=="")&&ko(r,u):typeof u=="number"&&ko(r,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Uo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Xe("scroll",r):u!=null&&Qy(r,s,u,a))}switch(t){case"input":hl(r),Ux(r,n,!1);break;case"textarea":hl(r),Gx(r);break;case"option":n.value!=null&&r.setAttribute("value",""+fi(n.value));break;case"select":r.multiple=!!n.multiple,s=n.value,s!=null?qs(r,!!n.multiple,s,!1):n.defaultValue!=null&&qs(r,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=Fh)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pt(e),null;case 6:if(r&&e.stateNode!=null)PI(r,e,r.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(J(166));if(t=Wi(Ko.current),Wi(Qr.current),_l(e)){if(n=e.stateNode,t=e.memoizedProps,n[qr]=e,(s=n.nodeValue!==t)&&(r=tr,r!==null))switch(r.tag){case 3:yl(n.nodeValue,t,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&yl(n.nodeValue,t,(r.mode&1)!==0)}s&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[qr]=e,e.stateNode=n}return Pt(e),null;case 13:if(We(Ze),n=e.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ke&&er!==null&&e.mode&1&&!(e.flags&128))XC(),ua(),e.flags|=98560,s=!1;else if(s=_l(e),n!==null&&n.dehydrated!==null){if(r===null){if(!s)throw Error(J(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(J(317));s[qr]=e}else ua(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pt(e),s=!1}else Or!==null&&(Eg(Or),Or=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(r!==null&&r.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(r===null||Ze.current&1?mt===0&&(mt=3):N_())),e.updateQueue!==null&&(e.flags|=4),Pt(e),null);case 4:return ha(),pg(r,e),r===null&&$o(e.stateNode.containerInfo),Pt(e),null;case 10:return y_(e.type._context),Pt(e),null;case 17:return Yt(e.type)&&Bh(),Pt(e),null;case 19:if(We(Ze),s=e.memoizedState,s===null)return Pt(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)qa(s,!1);else{if(mt!==0||r!==null&&r.flags&128)for(r=e.child;r!==null;){if(a=zh(r),a!==null){for(e.flags|=128,qa(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)s=t,r=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,r=a.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t=t.sibling;return je(Ze,Ze.current&1|2),e.child}r=r.sibling}s.tail!==null&&ot()>fa&&(e.flags|=128,n=!0,qa(s,!1),e.lanes=4194304)}else{if(!n)if(r=zh(a),r!==null){if(e.flags|=128,n=!0,t=r.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),qa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Ke)return Pt(e),null}else 2*ot()-s.renderingStartTime>fa&&t!==1073741824&&(e.flags|=128,n=!0,qa(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(t=s.last,t!==null?t.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ot(),e.sibling=null,t=Ze.current,je(Ze,n?t&1|2:t&1),e):(Pt(e),null);case 22:case 23:return L_(),n=e.memoizedState!==null,r!==null&&r.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Qt&1073741824&&(Pt(e),e.subtreeFlags&6&&(e.flags|=8192)):Pt(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function PL(r,e){switch(p_(e),e.tag){case 1:return Yt(e.type)&&Bh(),r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 3:return ha(),We(Wt),We(Dt),b_(),r=e.flags,r&65536&&!(r&128)?(e.flags=r&-65537|128,e):null;case 5:return E_(e),null;case 13:if(We(Ze),r=e.memoizedState,r!==null&&r.dehydrated!==null){if(e.alternate===null)throw Error(J(340));ua()}return r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 19:return We(Ze),null;case 4:return ha(),null;case 10:return y_(e.type._context),null;case 22:case 23:return L_(),null;case 24:return null;default:return null}}var El=!1,Ot=!1,AL=typeof WeakSet=="function"?WeakSet:Set,re=null;function Xs(r,e){var t=r.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){it(r,e,n)}else t.current=null}function vg(r,e,t){try{t()}catch(n){it(r,e,n)}}var AT=!1;function RL(r,e){if(Zm=Dh,r=MC(),f_(r)){if("selectionStart"in r)var t={start:r.selectionStart,end:r.selectionEnd};else e:{t=(t=r.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var a=0,o=-1,u=-1,l=0,h=0,c=r,f=null;t:for(;;){for(var p;c!==t||i!==0&&c.nodeType!==3||(o=a+i),c!==s||n!==0&&c.nodeType!==3||(u=a+n),c.nodeType===3&&(a+=c.nodeValue.length),(p=c.firstChild)!==null;)f=c,c=p;for(;;){if(c===r)break t;if(f===t&&++l===i&&(o=a),f===s&&++h===n&&(u=a),(p=c.nextSibling)!==null)break;c=f,f=c.parentNode}c=p}t=o===-1||u===-1?null:{start:o,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(Qm={focusedElem:r,selectionRange:t},Dh=!1,re=e;re!==null;)if(e=re,r=e.child,(e.subtreeFlags&1028)!==0&&r!==null)r.return=e,re=r;else for(;re!==null;){e=re;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,m=v.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:Ar(e.type,g),m);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(E){it(e,e.return,E)}if(r=e.sibling,r!==null){r.return=e.return,re=r;break}re=e.return}return v=AT,AT=!1,v}function Io(r,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&r)===r){var s=i.destroy;i.destroy=void 0,s!==void 0&&vg(e,t,s)}i=i.next}while(i!==n)}}function Lc(r,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&r)===r){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function mg(r){var e=r.ref;if(e!==null){var t=r.stateNode;switch(r.tag){case 5:r=t;break;default:r=t}typeof e=="function"?e(r):e.current=r}}function AI(r){var e=r.alternate;e!==null&&(r.alternate=null,AI(e)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(e=r.stateNode,e!==null&&(delete e[qr],delete e[Yo],delete e[rg],delete e[fL],delete e[dL])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function RI(r){return r.tag===5||r.tag===3||r.tag===4}function RT(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||RI(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function gg(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(r,e):t.insertBefore(r,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(r,t)):(e=t,e.appendChild(r)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Fh));else if(n!==4&&(r=r.child,r!==null))for(gg(r,e,t),r=r.sibling;r!==null;)gg(r,e,t),r=r.sibling}function yg(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.insertBefore(r,e):t.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(yg(r,e,t),r=r.sibling;r!==null;)yg(r,e,t),r=r.sibling}var bt=null,Rr=!1;function Fn(r,e,t){for(t=t.child;t!==null;)OI(r,e,t),t=t.sibling}function OI(r,e,t){if(Zr&&typeof Zr.onCommitFiberUnmount=="function")try{Zr.onCommitFiberUnmount(Cc,t)}catch{}switch(t.tag){case 5:Ot||Xs(t,e);case 6:var n=bt,i=Rr;bt=null,Fn(r,e,t),bt=n,Rr=i,bt!==null&&(Rr?(r=bt,t=t.stateNode,r.nodeType===8?r.parentNode.removeChild(t):r.removeChild(t)):bt.removeChild(t.stateNode));break;case 18:bt!==null&&(Rr?(r=bt,t=t.stateNode,r.nodeType===8?Hf(r.parentNode,t):r.nodeType===1&&Hf(r,t),Vo(r)):Hf(bt,t.stateNode));break;case 4:n=bt,i=Rr,bt=t.stateNode.containerInfo,Rr=!0,Fn(r,e,t),bt=n,Rr=i;break;case 0:case 11:case 14:case 15:if(!Ot&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&vg(t,e,a),i=i.next}while(i!==n)}Fn(r,e,t);break;case 1:if(!Ot&&(Xs(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(o){it(t,e,o)}Fn(r,e,t);break;case 21:Fn(r,e,t);break;case 22:t.mode&1?(Ot=(n=Ot)||t.memoizedState!==null,Fn(r,e,t),Ot=n):Fn(r,e,t);break;default:Fn(r,e,t)}}function OT(r){var e=r.updateQueue;if(e!==null){r.updateQueue=null;var t=r.stateNode;t===null&&(t=r.stateNode=new AL),e.forEach(function(n){var i=kL.bind(null,r,n);t.has(n)||(t.add(n),n.then(i,i))})}}function Sr(r,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];try{var s=r,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:bt=o.stateNode,Rr=!1;break e;case 3:bt=o.stateNode.containerInfo,Rr=!0;break e;case 4:bt=o.stateNode.containerInfo,Rr=!0;break e}o=o.return}if(bt===null)throw Error(J(160));OI(s,a,i),bt=null,Rr=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){it(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)MI(e,r),e=e.sibling}function MI(r,e){var t=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Sr(e,r),Vr(r),n&4){try{Io(3,r,r.return),Lc(3,r)}catch(g){it(r,r.return,g)}try{Io(5,r,r.return)}catch(g){it(r,r.return,g)}}break;case 1:Sr(e,r),Vr(r),n&512&&t!==null&&Xs(t,t.return);break;case 5:if(Sr(e,r),Vr(r),n&512&&t!==null&&Xs(t,t.return),r.flags&32){var i=r.stateNode;try{ko(i,"")}catch(g){it(r,r.return,g)}}if(n&4&&(i=r.stateNode,i!=null)){var s=r.memoizedProps,a=t!==null?t.memoizedProps:s,o=r.type,u=r.updateQueue;if(r.updateQueue=null,u!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Qw(i,s),Hm(o,a);var l=Hm(o,s);for(a=0;a<u.length;a+=2){var h=u[a],c=u[a+1];h==="style"?iC(i,c):h==="dangerouslySetInnerHTML"?rC(i,c):h==="children"?ko(i,c):Qy(i,h,c,l)}switch(o){case"input":Bm(i,s);break;case"textarea":eC(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?qs(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?qs(i,!!s.multiple,s.defaultValue,!0):qs(i,!!s.multiple,s.multiple?[]:"",!1))}i[Yo]=s}catch(g){it(r,r.return,g)}}break;case 6:if(Sr(e,r),Vr(r),n&4){if(r.stateNode===null)throw Error(J(162));i=r.stateNode,s=r.memoizedProps;try{i.nodeValue=s}catch(g){it(r,r.return,g)}}break;case 3:if(Sr(e,r),Vr(r),n&4&&t!==null&&t.memoizedState.isDehydrated)try{Vo(e.containerInfo)}catch(g){it(r,r.return,g)}break;case 4:Sr(e,r),Vr(r);break;case 13:Sr(e,r),Vr(r),i=r.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(M_=ot())),n&4&&OT(r);break;case 22:if(h=t!==null&&t.memoizedState!==null,r.mode&1?(Ot=(l=Ot)||h,Sr(e,r),Ot=l):Sr(e,r),Vr(r),n&8192){if(l=r.memoizedState!==null,(r.stateNode.isHidden=l)&&!h&&r.mode&1)for(re=r,h=r.child;h!==null;){for(c=re=h;re!==null;){switch(f=re,p=f.child,f.tag){case 0:case 11:case 14:case 15:Io(4,f,f.return);break;case 1:Xs(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,t=f.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(g){it(n,t,g)}}break;case 5:Xs(f,f.return);break;case 22:if(f.memoizedState!==null){DT(c);continue}}p!==null?(p.return=f,re=p):DT(c)}h=h.sibling}e:for(h=null,c=r;;){if(c.tag===5){if(h===null){h=c;try{i=c.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=c.stateNode,u=c.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,o.style.display=nC("display",a))}catch(g){it(r,r.return,g)}}}else if(c.tag===6){if(h===null)try{c.stateNode.nodeValue=l?"":c.memoizedProps}catch(g){it(r,r.return,g)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===r)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===r)break e;for(;c.sibling===null;){if(c.return===null||c.return===r)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Sr(e,r),Vr(r),n&4&&OT(r);break;case 21:break;default:Sr(e,r),Vr(r)}}function Vr(r){var e=r.flags;if(e&2){try{e:{for(var t=r.return;t!==null;){if(RI(t)){var n=t;break e}t=t.return}throw Error(J(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(ko(i,""),n.flags&=-33);var s=RT(r);yg(r,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=RT(r);gg(r,o,a);break;default:throw Error(J(161))}}catch(u){it(r,r.return,u)}r.flags&=-3}e&4096&&(r.flags&=-4097)}function OL(r,e,t){re=r,DI(r)}function DI(r,e,t){for(var n=(r.mode&1)!==0;re!==null;){var i=re,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||El;if(!a){var o=i.alternate,u=o!==null&&o.memoizedState!==null||Ot;o=El;var l=Ot;if(El=a,(Ot=u)&&!l)for(re=i;re!==null;)a=re,u=a.child,a.tag===22&&a.memoizedState!==null?LT(i):u!==null?(u.return=a,re=u):LT(i);for(;s!==null;)re=s,DI(s),s=s.sibling;re=i,El=o,Ot=l}MT(r)}else i.subtreeFlags&8772&&s!==null?(s.return=i,re=s):MT(r)}}function MT(r){for(;re!==null;){var e=re;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||Lc(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ot)if(t===null)n.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Ar(e.type,t.memoizedProps);n.componentDidUpdate(i,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&vT(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}vT(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var h=l.memoizedState;if(h!==null){var c=h.dehydrated;c!==null&&Vo(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Ot||e.flags&512&&mg(e)}catch(f){it(e,e.return,f)}}if(e===r){re=null;break}if(t=e.sibling,t!==null){t.return=e.return,re=t;break}re=e.return}}function DT(r){for(;re!==null;){var e=re;if(e===r){re=null;break}var t=e.sibling;if(t!==null){t.return=e.return,re=t;break}re=e.return}}function LT(r){for(;re!==null;){var e=re;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Lc(4,e)}catch(u){it(e,t,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(u){it(e,i,u)}}var s=e.return;try{mg(e)}catch(u){it(e,s,u)}break;case 5:var a=e.return;try{mg(e)}catch(u){it(e,a,u)}}}catch(u){it(e,e.return,u)}if(e===r){re=null;break}var o=e.sibling;if(o!==null){o.return=e.return,re=o;break}re=e.return}}var ML=Math.ceil,Wh=On.ReactCurrentDispatcher,R_=On.ReactCurrentOwner,mr=On.ReactCurrentBatchConfig,Ae=0,Tt=null,lt=null,St=0,Qt=0,$s=_i(0),mt=0,eu=null,ls=0,Nc=0,O_=0,Po=null,zt=null,M_=0,fa=1/0,cn=null,Yh=!1,_g=null,ii=null,bl=!1,qn=null,qh=0,Ao=0,xg=null,ph=-1,vh=0;function Ut(){return Ae&6?ot():ph!==-1?ph:ph=ot()}function si(r){return r.mode&1?Ae&2&&St!==0?St&-St:vL.transition!==null?(vh===0&&(vh=mC()),vh):(r=Le,r!==0||(r=window.event,r=r===void 0?16:bC(r.type)),r):1}function Nr(r,e,t,n){if(50<Ao)throw Ao=0,xg=null,Error(J(185));Nu(r,t,n),(!(Ae&2)||r!==Tt)&&(r===Tt&&(!(Ae&2)&&(Nc|=t),mt===4&&Vn(r,St)),qt(r,n),t===1&&Ae===0&&!(e.mode&1)&&(fa=ot()+500,Oc&&xi()))}function qt(r,e){var t=r.callbackNode;vD(r,e);var n=Mh(r,r===Tt?St:0);if(n===0)t!==null&&Vx(t),r.callbackNode=null,r.callbackPriority=0;else if(e=n&-n,r.callbackPriority!==e){if(t!=null&&Vx(t),e===1)r.tag===0?pL(NT.bind(null,r)):HC(NT.bind(null,r)),hL(function(){!(Ae&6)&&xi()}),t=null;else{switch(gC(n)){case 1:t=i_;break;case 4:t=pC;break;case 16:t=Oh;break;case 536870912:t=vC;break;default:t=Oh}t=jI(t,LI.bind(null,r))}r.callbackPriority=e,r.callbackNode=t}}function LI(r,e){if(ph=-1,vh=0,Ae&6)throw Error(J(327));var t=r.callbackNode;if(ea()&&r.callbackNode!==t)return null;var n=Mh(r,r===Tt?St:0);if(n===0)return null;if(n&30||n&r.expiredLanes||e)e=Kh(r,n);else{e=n;var i=Ae;Ae|=2;var s=FI();(Tt!==r||St!==e)&&(cn=null,fa=ot()+500,Ji(r,e));do try{NL();break}catch(o){NI(r,o)}while(1);g_(),Wh.current=s,Ae=i,lt!==null?e=0:(Tt=null,St=0,e=mt)}if(e!==0){if(e===2&&(i=Wm(r),i!==0&&(n=i,e=Tg(r,i))),e===1)throw t=eu,Ji(r,0),Vn(r,n),qt(r,ot()),t;if(e===6)Vn(r,n);else{if(i=r.current.alternate,!(n&30)&&!DL(i)&&(e=Kh(r,n),e===2&&(s=Wm(r),s!==0&&(n=s,e=Tg(r,s))),e===1))throw t=eu,Ji(r,0),Vn(r,n),qt(r,ot()),t;switch(r.finishedWork=i,r.finishedLanes=n,e){case 0:case 1:throw Error(J(345));case 2:Di(r,zt,cn);break;case 3:if(Vn(r,n),(n&130023424)===n&&(e=M_+500-ot(),10<e)){if(Mh(r,0)!==0)break;if(i=r.suspendedLanes,(i&n)!==n){Ut(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=tg(Di.bind(null,r,zt,cn),e);break}Di(r,zt,cn);break;case 4:if(Vn(r,n),(n&4194240)===n)break;for(e=r.eventTimes,i=-1;0<n;){var a=31-Lr(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=ot()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ML(n/1960))-n,10<n){r.timeoutHandle=tg(Di.bind(null,r,zt,cn),n);break}Di(r,zt,cn);break;case 5:Di(r,zt,cn);break;default:throw Error(J(329))}}}return qt(r,ot()),r.callbackNode===t?LI.bind(null,r):null}function Tg(r,e){var t=Po;return r.current.memoizedState.isDehydrated&&(Ji(r,e).flags|=256),r=Kh(r,e),r!==2&&(e=zt,zt=t,e!==null&&Eg(e)),r}function Eg(r){zt===null?zt=r:zt.push.apply(zt,r)}function DL(r){for(var e=r;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var i=t[n],s=i.getSnapshot;i=i.value;try{if(!Ur(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vn(r,e){for(e&=~O_,e&=~Nc,r.suspendedLanes|=e,r.pingedLanes&=~e,r=r.expirationTimes;0<e;){var t=31-Lr(e),n=1<<t;r[t]=-1,e&=~n}}function NT(r){if(Ae&6)throw Error(J(327));ea();var e=Mh(r,0);if(!(e&1))return qt(r,ot()),null;var t=Kh(r,e);if(r.tag!==0&&t===2){var n=Wm(r);n!==0&&(e=n,t=Tg(r,n))}if(t===1)throw t=eu,Ji(r,0),Vn(r,e),qt(r,ot()),t;if(t===6)throw Error(J(345));return r.finishedWork=r.current.alternate,r.finishedLanes=e,Di(r,zt,cn),qt(r,ot()),null}function D_(r,e){var t=Ae;Ae|=1;try{return r(e)}finally{Ae=t,Ae===0&&(fa=ot()+500,Oc&&xi())}}function hs(r){qn!==null&&qn.tag===0&&!(Ae&6)&&ea();var e=Ae;Ae|=1;var t=mr.transition,n=Le;try{if(mr.transition=null,Le=1,r)return r()}finally{Le=n,mr.transition=t,Ae=e,!(Ae&6)&&xi()}}function L_(){Qt=$s.current,We($s)}function Ji(r,e){r.finishedWork=null,r.finishedLanes=0;var t=r.timeoutHandle;if(t!==-1&&(r.timeoutHandle=-1,lL(t)),lt!==null)for(t=lt.return;t!==null;){var n=t;switch(p_(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Bh();break;case 3:ha(),We(Wt),We(Dt),b_();break;case 5:E_(n);break;case 4:ha();break;case 13:We(Ze);break;case 19:We(Ze);break;case 10:y_(n.type._context);break;case 22:case 23:L_()}t=t.return}if(Tt=r,lt=r=ai(r.current,null),St=Qt=e,mt=0,eu=null,O_=Nc=ls=0,zt=Po=null,$i!==null){for(e=0;e<$i.length;e++)if(t=$i[e],n=t.interleaved,n!==null){t.interleaved=null;var i=n.next,s=t.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}t.pending=n}$i=null}return r}function NI(r,e){do{var t=lt;try{if(g_(),ch.current=$h,Xh){for(var n=tt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Xh=!1}if(us=0,_t=dt=tt=null,Co=!1,Jo=0,R_.current=null,t===null||t.return===null){mt=1,eu=e,lt=null;break}e:{var s=r,a=t.return,o=t,u=e;if(e=St,o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,h=o,c=h.tag;if(!(h.mode&1)&&(c===0||c===11||c===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ET(a);if(p!==null){p.flags&=-257,bT(p,a,o,s,e),p.mode&1&&TT(s,l,e),e=p,u=l;var v=e.updateQueue;if(v===null){var g=new Set;g.add(u),e.updateQueue=g}else v.add(u);break e}else{if(!(e&1)){TT(s,l,e),N_();break e}u=Error(J(426))}}else if(Ke&&o.mode&1){var m=ET(a);if(m!==null){!(m.flags&65536)&&(m.flags|=256),bT(m,a,o,s,e),v_(ca(u,o));break e}}s=u=ca(u,o),mt!==4&&(mt=2),Po===null?Po=[s]:Po.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=yI(s,u,e);pT(s,y);break e;case 1:o=u;var x=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ii===null||!ii.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=_I(s,o,e);pT(s,E);break e}}s=s.return}while(s!==null)}UI(t)}catch(b){e=b,lt===t&&t!==null&&(lt=t=t.return);continue}break}while(1)}function FI(){var r=Wh.current;return Wh.current=$h,r===null?$h:r}function N_(){(mt===0||mt===3||mt===2)&&(mt=4),Tt===null||!(ls&268435455)&&!(Nc&268435455)||Vn(Tt,St)}function Kh(r,e){var t=Ae;Ae|=2;var n=FI();(Tt!==r||St!==e)&&(cn=null,Ji(r,e));do try{LL();break}catch(i){NI(r,i)}while(1);if(g_(),Ae=t,Wh.current=n,lt!==null)throw Error(J(261));return Tt=null,St=0,mt}function LL(){for(;lt!==null;)BI(lt)}function NL(){for(;lt!==null&&!aD();)BI(lt)}function BI(r){var e=GI(r.alternate,r,Qt);r.memoizedProps=r.pendingProps,e===null?UI(r):lt=e,R_.current=null}function UI(r){var e=r;do{var t=e.alternate;if(r=e.return,e.flags&32768){if(t=PL(t,e),t!==null){t.flags&=32767,lt=t;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{mt=6,lt=null;return}}else if(t=IL(t,e,Qt),t!==null){lt=t;return}if(e=e.sibling,e!==null){lt=e;return}lt=e=r}while(e!==null);mt===0&&(mt=5)}function Di(r,e,t){var n=Le,i=mr.transition;try{mr.transition=null,Le=1,FL(r,e,t,n)}finally{mr.transition=i,Le=n}return null}function FL(r,e,t,n){do ea();while(qn!==null);if(Ae&6)throw Error(J(327));t=r.finishedWork;var i=r.finishedLanes;if(t===null)return null;if(r.finishedWork=null,r.finishedLanes=0,t===r.current)throw Error(J(177));r.callbackNode=null,r.callbackPriority=0;var s=t.lanes|t.childLanes;if(mD(r,s),r===Tt&&(lt=Tt=null,St=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||bl||(bl=!0,jI(Oh,function(){return ea(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=mr.transition,mr.transition=null;var a=Le;Le=1;var o=Ae;Ae|=4,R_.current=null,RL(r,t),MI(t,r),rL(Qm),Dh=!!Zm,Qm=Zm=null,r.current=t,OL(t),oD(),Ae=o,Le=a,mr.transition=s}else r.current=t;if(bl&&(bl=!1,qn=r,qh=i),s=r.pendingLanes,s===0&&(ii=null),hD(t.stateNode),qt(r,ot()),e!==null)for(n=r.onRecoverableError,t=0;t<e.length;t++)i=e[t],n(i.value,{componentStack:i.stack,digest:i.digest});if(Yh)throw Yh=!1,r=_g,_g=null,r;return qh&1&&r.tag!==0&&ea(),s=r.pendingLanes,s&1?r===xg?Ao++:(Ao=0,xg=r):Ao=0,xi(),null}function ea(){if(qn!==null){var r=gC(qh),e=mr.transition,t=Le;try{if(mr.transition=null,Le=16>r?16:r,qn===null)var n=!1;else{if(r=qn,qn=null,qh=0,Ae&6)throw Error(J(331));var i=Ae;for(Ae|=4,re=r.current;re!==null;){var s=re,a=s.child;if(re.flags&16){var o=s.deletions;if(o!==null){for(var u=0;u<o.length;u++){var l=o[u];for(re=l;re!==null;){var h=re;switch(h.tag){case 0:case 11:case 15:Io(8,h,s)}var c=h.child;if(c!==null)c.return=h,re=c;else for(;re!==null;){h=re;var f=h.sibling,p=h.return;if(AI(h),h===l){re=null;break}if(f!==null){f.return=p,re=f;break}re=p}}}var v=s.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(g!==null)}}re=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,re=a;else e:for(;re!==null;){if(s=re,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Io(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,re=y;break e}re=s.return}}var x=r.current;for(re=x;re!==null;){a=re;var T=a.child;if(a.subtreeFlags&2064&&T!==null)T.return=a,re=T;else e:for(a=x;re!==null;){if(o=re,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Lc(9,o)}}catch(b){it(o,o.return,b)}if(o===a){re=null;break e}var E=o.sibling;if(E!==null){E.return=o.return,re=E;break e}re=o.return}}if(Ae=i,xi(),Zr&&typeof Zr.onPostCommitFiberRoot=="function")try{Zr.onPostCommitFiberRoot(Cc,r)}catch{}n=!0}return n}finally{Le=t,mr.transition=e}}return!1}function FT(r,e,t){e=ca(t,e),e=yI(r,e,1),r=ni(r,e,1),e=Ut(),r!==null&&(Nu(r,1,e),qt(r,e))}function it(r,e,t){if(r.tag===3)FT(r,r,t);else for(;e!==null;){if(e.tag===3){FT(e,r,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ii===null||!ii.has(n))){r=ca(t,r),r=_I(e,r,1),e=ni(e,r,1),r=Ut(),e!==null&&(Nu(e,1,r),qt(e,r));break}}e=e.return}}function BL(r,e,t){var n=r.pingCache;n!==null&&n.delete(e),e=Ut(),r.pingedLanes|=r.suspendedLanes&t,Tt===r&&(St&t)===t&&(mt===4||mt===3&&(St&130023424)===St&&500>ot()-M_?Ji(r,0):O_|=t),qt(r,e)}function kI(r,e){e===0&&(r.mode&1?(e=dl,dl<<=1,!(dl&130023424)&&(dl=4194304)):e=1);var t=Ut();r=Cn(r,e),r!==null&&(Nu(r,e,t),qt(r,t))}function UL(r){var e=r.memoizedState,t=0;e!==null&&(t=e.retryLane),kI(r,t)}function kL(r,e){var t=0;switch(r.tag){case 13:var n=r.stateNode,i=r.memoizedState;i!==null&&(t=i.retryLane);break;case 19:n=r.stateNode;break;default:throw Error(J(314))}n!==null&&n.delete(e),kI(r,t)}var GI;GI=function(r,e,t){if(r!==null)if(r.memoizedProps!==e.pendingProps||Wt.current)Xt=!0;else{if(!(r.lanes&t)&&!(e.flags&128))return Xt=!1,CL(r,e,t);Xt=!!(r.flags&131072)}else Xt=!1,Ke&&e.flags&1048576&&VC(e,Gh,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;dh(r,e),r=e.pendingProps;var i=oa(e,Dt.current);Qs(e,t),i=w_(null,e,n,r,i,t);var s=C_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yt(n)?(s=!0,Uh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,x_(e),i.updater=Mc,e.stateNode=i,i._reactInternals=e,ug(e,n,r,t),e=cg(null,e,n,!0,s,t)):(e.tag=0,Ke&&s&&d_(e),Bt(null,e,i,t),e=e.child),e;case 16:n=e.elementType;e:{switch(dh(r,e),r=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=jL(n),r=Ar(n,r),i){case 0:e=hg(null,e,n,r,t);break e;case 1:e=CT(null,e,n,r,t);break e;case 11:e=ST(null,e,n,r,t);break e;case 14:e=wT(null,e,n,Ar(n.type,r),t);break e}throw Error(J(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ar(n,i),hg(r,e,n,i,t);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ar(n,i),CT(r,e,n,i,t);case 3:e:{if(bI(e),r===null)throw Error(J(387));n=e.pendingProps,s=e.memoizedState,i=s.element,WC(r,e),Vh(e,n,null,t);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ca(Error(J(423)),e),e=IT(r,e,n,t,i);break e}else if(n!==i){i=ca(Error(J(424)),e),e=IT(r,e,n,t,i);break e}else for(er=ri(e.stateNode.containerInfo.firstChild),tr=e,Ke=!0,Or=null,t=JC(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(ua(),n===i){e=In(r,e,t);break e}Bt(r,e,n,t)}e=e.child}return e;case 5:return ZC(e),r===null&&sg(e),n=e.type,i=e.pendingProps,s=r!==null?r.memoizedProps:null,a=i.children,eg(n,i)?a=null:s!==null&&eg(n,s)&&(e.flags|=32),EI(r,e),Bt(r,e,a,t),e.child;case 6:return r===null&&sg(e),null;case 13:return SI(r,e,t);case 4:return T_(e,e.stateNode.containerInfo),n=e.pendingProps,r===null?e.child=la(e,null,n,t):Bt(r,e,n,t),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ar(n,i),ST(r,e,n,i,t);case 7:return Bt(r,e,e.pendingProps,t),e.child;case 8:return Bt(r,e,e.pendingProps.children,t),e.child;case 12:return Bt(r,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,je(jh,n._currentValue),n._currentValue=a,s!==null)if(Ur(s.value,a)){if(s.children===i.children&&!Wt.current){e=In(r,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var u=o.firstContext;u!==null;){if(u.context===n){if(s.tag===1){u=En(-1,t&-t),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var h=l.pending;h===null?u.next=u:(u.next=h.next,h.next=u),l.pending=u}}s.lanes|=t,u=s.alternate,u!==null&&(u.lanes|=t),ag(s.return,t,e),o.lanes|=t;break}u=u.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(J(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),ag(a,t,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Bt(r,e,i.children,t),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Qs(e,t),i=yr(i),n=n(i),e.flags|=1,Bt(r,e,n,t),e.child;case 14:return n=e.type,i=Ar(n,e.pendingProps),i=Ar(n.type,i),wT(r,e,n,i,t);case 15:return xI(r,e,e.type,e.pendingProps,t);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ar(n,i),dh(r,e),e.tag=1,Yt(n)?(r=!0,Uh(e)):r=!1,Qs(e,t),qC(e,n,i),ug(e,n,i,t),cg(null,e,n,!0,r,t);case 19:return wI(r,e,t);case 22:return TI(r,e,t)}throw Error(J(156,e.tag))};function jI(r,e){return dC(r,e)}function GL(r,e,t,n){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(r,e,t,n){return new GL(r,e,t,n)}function F_(r){return r=r.prototype,!(!r||!r.isReactComponent)}function jL(r){if(typeof r=="function")return F_(r)?1:0;if(r!=null){if(r=r.$$typeof,r===t_)return 11;if(r===r_)return 14}return 2}function ai(r,e){var t=r.alternate;return t===null?(t=dr(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=r.flags&14680064,t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t}function mh(r,e,t,n,i,s){var a=2;if(n=r,typeof r=="function")F_(r)&&(a=1);else if(typeof r=="string")a=5;else e:switch(r){case Fs:return Zi(t.children,i,s,e);case e_:a=8,i|=8;break;case Mm:return r=dr(12,t,e,i|2),r.elementType=Mm,r.lanes=s,r;case Dm:return r=dr(13,t,e,i),r.elementType=Dm,r.lanes=s,r;case Lm:return r=dr(19,t,e,i),r.elementType=Lm,r.lanes=s,r;case Kw:return Fc(t,i,s,e);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case Yw:a=10;break e;case qw:a=9;break e;case t_:a=11;break e;case r_:a=14;break e;case kn:a=16,n=null;break e}throw Error(J(130,r==null?r:typeof r,""))}return e=dr(a,t,e,i),e.elementType=r,e.type=n,e.lanes=s,e}function Zi(r,e,t,n){return r=dr(7,r,n,e),r.lanes=t,r}function Fc(r,e,t,n){return r=dr(22,r,n,e),r.elementType=Kw,r.lanes=t,r.stateNode={isHidden:!1},r}function Kf(r,e,t){return r=dr(6,r,null,e),r.lanes=t,r}function Jf(r,e,t){return e=dr(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}function HL(r,e,t,n,i){this.tag=e,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Of(0),this.expirationTimes=Of(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Of(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function B_(r,e,t,n,i,s,a,o,u){return r=new HL(r,e,t,o,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=dr(3,null,null,e),r.current=s,s.stateNode=r,s.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},x_(s),r}function VL(r,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ns,key:n==null?null:""+n,children:r,containerInfo:e,implementation:t}}function HI(r){if(!r)return di;r=r._reactInternals;e:{if(_s(r)!==r||r.tag!==1)throw Error(J(170));var e=r;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(r.tag===1){var t=r.type;if(Yt(t))return jC(r,t,e)}return e}function VI(r,e,t,n,i,s,a,o,u){return r=B_(t,n,!0,r,i,s,a,o,u),r.context=HI(null),t=r.current,n=Ut(),i=si(t),s=En(n,i),s.callback=e??null,ni(t,s,i),r.current.lanes=i,Nu(r,i,n),qt(r,n),r}function Bc(r,e,t,n){var i=e.current,s=Ut(),a=si(i);return t=HI(t),e.context===null?e.context=t:e.pendingContext=t,e=En(s,a),e.payload={element:r},n=n===void 0?null:n,n!==null&&(e.callback=n),r=ni(i,e,a),r!==null&&(Nr(r,i,a,s),hh(r,i,a)),a}function Jh(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function BT(r,e){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&&t<e?t:e}}function U_(r,e){BT(r,e),(r=r.alternate)&&BT(r,e)}function zL(){return null}var zI=typeof reportError=="function"?reportError:function(r){console.error(r)};function k_(r){this._internalRoot=r}Uc.prototype.render=k_.prototype.render=function(r){var e=this._internalRoot;if(e===null)throw Error(J(409));Bc(r,e,null,null)};Uc.prototype.unmount=k_.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var e=r.containerInfo;hs(function(){Bc(null,r,null,null)}),e[wn]=null}};function Uc(r){this._internalRoot=r}Uc.prototype.unstable_scheduleHydration=function(r){if(r){var e=xC();r={blockedOn:null,target:r,priority:e};for(var t=0;t<Hn.length&&e!==0&&e<Hn[t].priority;t++);Hn.splice(t,0,r),t===0&&EC(r)}};function G_(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function kc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function UT(){}function XL(r,e,t,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var l=Jh(a);s.call(l)}}var a=VI(e,n,r,0,null,!1,!1,"",UT);return r._reactRootContainer=a,r[wn]=a.current,$o(r.nodeType===8?r.parentNode:r),hs(),a}for(;i=r.lastChild;)r.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var l=Jh(u);o.call(l)}}var u=B_(r,0,!1,null,null,!1,!1,"",UT);return r._reactRootContainer=u,r[wn]=u.current,$o(r.nodeType===8?r.parentNode:r),hs(function(){Bc(e,u,t,n)}),u}function Gc(r,e,t,n,i){var s=t._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var u=Jh(a);o.call(u)}}Bc(e,a,r,i)}else a=XL(t,e,r,i,n);return Jh(a)}yC=function(r){switch(r.tag){case 3:var e=r.stateNode;if(e.current.memoizedState.isDehydrated){var t=co(e.pendingLanes);t!==0&&(s_(e,t|1),qt(e,ot()),!(Ae&6)&&(fa=ot()+500,xi()))}break;case 13:hs(function(){var n=Cn(r,1);if(n!==null){var i=Ut();Nr(n,r,1,i)}}),U_(r,1)}};a_=function(r){if(r.tag===13){var e=Cn(r,134217728);if(e!==null){var t=Ut();Nr(e,r,134217728,t)}U_(r,134217728)}};_C=function(r){if(r.tag===13){var e=si(r),t=Cn(r,e);if(t!==null){var n=Ut();Nr(t,r,e,n)}U_(r,e)}};xC=function(){return Le};TC=function(r,e){var t=Le;try{return Le=r,e()}finally{Le=t}};zm=function(r,e,t){switch(e){case"input":if(Bm(r,t),e=t.name,t.type==="radio"&&e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==r&&n.form===r.form){var i=Rc(n);if(!i)throw Error(J(90));Zw(n),Bm(n,i)}}}break;case"textarea":eC(r,t);break;case"select":e=t.value,e!=null&&qs(r,!!t.multiple,e,!1)}};oC=D_;uC=hs;var $L={usingClientEntryPoint:!1,Events:[Bu,Gs,Rc,sC,aC,D_]},Ka={findFiberByHostInstance:Xi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},WL={bundleType:Ka.bundleType,version:Ka.version,rendererPackageName:Ka.rendererPackageName,rendererConfig:Ka.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:On.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=cC(r),r===null?null:r.stateNode},findFiberByHostInstance:Ka.findFiberByHostInstance||zL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sl.isDisabled&&Sl.supportsFiber)try{Cc=Sl.inject(WL),Zr=Sl}catch{}}nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$L;nr.createPortal=function(r,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!G_(e))throw Error(J(200));return VL(r,e,null,t)};nr.createRoot=function(r,e){if(!G_(r))throw Error(J(299));var t=!1,n="",i=zI;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=B_(r,1,!1,null,null,t,!1,n,i),r[wn]=e.current,$o(r.nodeType===8?r.parentNode:r),new k_(e)};nr.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(J(188)):(r=Object.keys(r).join(","),Error(J(268,r)));return r=cC(e),r=r===null?null:r.stateNode,r};nr.flushSync=function(r){return hs(r)};nr.hydrate=function(r,e,t){if(!kc(e))throw Error(J(200));return Gc(null,r,e,!0,t)};nr.hydrateRoot=function(r,e,t){if(!G_(r))throw Error(J(405));var n=t!=null&&t.hydratedSources||null,i=!1,s="",a=zI;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=VI(e,null,r,1,t??null,i,!1,s,a),r[wn]=e.current,$o(r),n)for(r=0;r<n.length;r++)t=n[r],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Uc(e)};nr.render=function(r,e,t){if(!kc(e))throw Error(J(200));return Gc(null,r,e,!1,t)};nr.unmountComponentAtNode=function(r){if(!kc(r))throw Error(J(40));return r._reactRootContainer?(hs(function(){Gc(null,null,r,!1,function(){r._reactRootContainer=null,r[wn]=null})}),!0):!1};nr.unstable_batchedUpdates=D_;nr.unstable_renderSubtreeIntoContainer=function(r,e,t,n){if(!kc(t))throw Error(J(200));if(r==null||r._reactInternals===void 0)throw Error(J(38));return Gc(r,e,t,!1,n)};nr.version="18.2.0-next-9e3b772b8-20220608";function XI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(XI)}catch(r){console.error(r)}}XI(),Vw.exports=nr;var po=Vw.exports,kT=po;Rm.createRoot=kT.createRoot,Rm.hydrateRoot=kT.hydrateRoot;/**
 * @remix-run/router v1.6.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tu(){return tu=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},tu.apply(this,arguments)}var Kn;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Kn||(Kn={}));const GT="popstate";function YL(r){r===void 0&&(r={});function e(n,i){let{pathname:s,search:a,hash:o}=n.location;return bg("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:Zh(i)}return KL(e,t,null,r)}function ht(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function j_(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qL(){return Math.random().toString(36).substr(2,8)}function jT(r,e){return{usr:r.state,key:r.key,idx:e}}function bg(r,e,t,n){return t===void 0&&(t=null),tu({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Ia(e):e,{state:t,key:e&&e.key||n||qL()})}function Zh(r){let{pathname:e="/",search:t="",hash:n=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Ia(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substr(n),r=r.substr(0,n)),r&&(e.pathname=r)}return e}function KL(r,e,t,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,o=Kn.Pop,u=null,l=h();l==null&&(l=0,a.replaceState(tu({},a.state,{idx:l}),""));function h(){return(a.state||{idx:null}).idx}function c(){o=Kn.Pop;let m=h(),y=m==null?null:m-l;l=m,u&&u({action:o,location:g.location,delta:y})}function f(m,y){o=Kn.Push;let x=bg(g.location,m,y);t&&t(x,m),l=h()+1;let T=jT(x,l),E=g.createHref(x);try{a.pushState(T,"",E)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;i.location.assign(E)}s&&u&&u({action:o,location:g.location,delta:1})}function p(m,y){o=Kn.Replace;let x=bg(g.location,m,y);t&&t(x,m),l=h();let T=jT(x,l),E=g.createHref(x);a.replaceState(T,"",E),s&&u&&u({action:o,location:g.location,delta:0})}function v(m){let y=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof m=="string"?m:Zh(m);return ht(y,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,y)}let g={get action(){return o},get location(){return r(i,a)},listen(m){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(GT,c),u=m,()=>{i.removeEventListener(GT,c),u=null}},createHref(m){return e(i,m)},createURL:v,encodeLocation(m){let y=v(m);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(m){return a.go(m)}};return g}var HT;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(HT||(HT={}));function JL(r,e,t){t===void 0&&(t="/");let n=typeof e=="string"?Ia(e):e,i=H_(n.pathname||"/",t);if(i==null)return null;let s=$I(r);ZL(s);let a=null;for(let o=0;a==null&&o<s.length;++o)a=oN(s[o],hN(i));return a}function $I(r,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let i=(s,a,o)=>{let u={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};u.relativePath.startsWith("/")&&(ht(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let l=oi([n,u.relativePath]),h=t.concat(u);s.children&&s.children.length>0&&(ht(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),$I(s.children,e,h,l)),!(s.path==null&&!s.index)&&e.push({path:l,score:sN(l,s.index),routesMeta:h})};return r.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let u of WI(s.path))i(s,a,u)}),e}function WI(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=WI(n.join("/")),o=[];return o.push(...a.map(u=>u===""?s:[s,u].join("/"))),i&&o.push(...a),o.map(u=>r.startsWith("/")&&u===""?"/":u)}function ZL(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:aN(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const QL=/^:\w+$/,eN=3,tN=2,rN=1,nN=10,iN=-2,VT=r=>r==="*";function sN(r,e){let t=r.split("/"),n=t.length;return t.some(VT)&&(n+=iN),e&&(n+=tN),t.filter(i=>!VT(i)).reduce((i,s)=>i+(QL.test(s)?eN:s===""?rN:nN),n)}function aN(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function oN(r,e){let{routesMeta:t}=r,n={},i="/",s=[];for(let a=0;a<t.length;++a){let o=t[a],u=a===t.length-1,l=i==="/"?e:e.slice(i.length)||"/",h=uN({path:o.relativePath,caseSensitive:o.caseSensitive,end:u},l);if(!h)return null;Object.assign(n,h.params);let c=o.route;s.push({params:n,pathname:oi([i,h.pathname]),pathnameBase:pN(oi([i,h.pathnameBase])),route:c}),h.pathnameBase!=="/"&&(i=oi([i,h.pathnameBase]))}return s}function uN(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=lN(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((l,h,c)=>{if(h==="*"){let f=o[c]||"";a=s.slice(0,s.length-f.length).replace(/(.)\/+$/,"$1")}return l[h]=cN(o[c]||"",h),l},{}),pathname:s,pathnameBase:a,pattern:r}}function lN(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),j_(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(a,o)=>(n.push(o),"/([^\\/]+)"));return r.endsWith("*")?(n.push("*"),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function hN(r){try{return decodeURI(r)}catch(e){return j_(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function cN(r,e){try{return decodeURIComponent(r)}catch(t){return j_(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+r+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+t+").")),r}}function H_(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function fN(r,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?Ia(r):r;return{pathname:t?t.startsWith("/")?t:dN(t,e):e,search:vN(n),hash:mN(i)}}function dN(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Zf(r,e,t,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function YI(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function qI(r,e,t,n){n===void 0&&(n=!1);let i;typeof r=="string"?i=Ia(r):(i=tu({},r),ht(!i.pathname||!i.pathname.includes("?"),Zf("?","pathname","search",i)),ht(!i.pathname||!i.pathname.includes("#"),Zf("#","pathname","hash",i)),ht(!i.search||!i.search.includes("#"),Zf("#","search","hash",i)));let s=r===""||i.pathname==="",a=s?"/":i.pathname,o;if(n||a==null)o=t;else{let c=e.length-1;if(a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),c-=1;i.pathname=f.join("/")}o=c>=0?e[c]:"/"}let u=fN(i,o),l=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(l||h)&&(u.pathname+="/"),u}const oi=r=>r.join("/").replace(/\/\/+/g,"/"),pN=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),vN=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,mN=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function gN(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const KI=["post","put","patch","delete"];new Set(KI);const yN=["get",...KI];new Set(yN);/**
 * React Router v6.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qh(){return Qh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Qh.apply(this,arguments)}const _N="startTransition";var zT=U2[_N];const V_=K.createContext(null),xN=K.createContext(null),Pa=K.createContext(null),jc=K.createContext(null),xs=K.createContext({outlet:null,matches:[],isDataRoute:!1}),JI=K.createContext(null);function TN(r,e){let{relative:t}=e===void 0?{}:e;ku()||ht(!1);let{basename:n,navigator:i}=K.useContext(Pa),{hash:s,pathname:a,search:o}=QI(r,{relative:t}),u=a;return n!=="/"&&(u=a==="/"?n:oi([n,a])),i.createHref({pathname:u,search:o,hash:s})}function ku(){return K.useContext(jc)!=null}function Hc(){return ku()||ht(!1),K.useContext(jc).location}function ZI(r){K.useContext(Pa).static||K.useLayoutEffect(r)}function EN(){let{isDataRoute:r}=K.useContext(xs);return r?NN():bN()}function bN(){ku()||ht(!1);let r=K.useContext(V_),{basename:e,navigator:t}=K.useContext(Pa),{matches:n}=K.useContext(xs),{pathname:i}=Hc(),s=JSON.stringify(YI(n).map(u=>u.pathnameBase)),a=K.useRef(!1);return ZI(()=>{a.current=!0}),K.useCallback(function(u,l){if(l===void 0&&(l={}),!a.current)return;if(typeof u=="number"){t.go(u);return}let h=qI(u,JSON.parse(s),i,l.relative==="path");r==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:oi([e,h.pathname])),(l.replace?t.replace:t.push)(h,l.state,l)},[e,t,s,i,r])}function QI(r,e){let{relative:t}=e===void 0?{}:e,{matches:n}=K.useContext(xs),{pathname:i}=Hc(),s=JSON.stringify(YI(n).map(a=>a.pathnameBase));return K.useMemo(()=>qI(r,JSON.parse(s),i,t==="path"),[r,s,i,t])}function SN(r,e){return wN(r,e)}function wN(r,e,t){ku()||ht(!1);let{navigator:n}=K.useContext(Pa),{matches:i}=K.useContext(xs),s=i[i.length-1],a=s?s.params:{};s&&s.pathname;let o=s?s.pathnameBase:"/";s&&s.route;let u=Hc(),l;if(e){var h;let g=typeof e=="string"?Ia(e):e;o==="/"||(h=g.pathname)!=null&&h.startsWith(o)||ht(!1),l=g}else l=u;let c=l.pathname||"/",f=o==="/"?c:c.slice(o.length)||"/",p=JL(r,{pathname:f}),v=RN(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:oi([o,n.encodeLocation?n.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?o:oi([o,n.encodeLocation?n.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,t);return e&&v?K.createElement(jc.Provider,{value:{location:Qh({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:Kn.Pop}},v):v}function CN(){let r=LN(),e=gN(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:i},t):null,s)}const IN=K.createElement(CN,null);class PN extends K.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?K.createElement(xs.Provider,{value:this.props.routeContext},K.createElement(JI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function AN(r){let{routeContext:e,match:t,children:n}=r,i=K.useContext(V_);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),K.createElement(xs.Provider,{value:e},n)}function RN(r,e,t){var n;if(e===void 0&&(e=[]),t===void 0&&(t=null),r==null){var i;if((i=t)!=null&&i.errors)r=t.matches;else return null}let s=r,a=(n=t)==null?void 0:n.errors;if(a!=null){let o=s.findIndex(u=>u.route.id&&(a==null?void 0:a[u.route.id]));o>=0||ht(!1),s=s.slice(0,Math.min(s.length,o+1))}return s.reduceRight((o,u,l)=>{let h=u.route.id?a==null?void 0:a[u.route.id]:null,c=null;t&&(c=u.route.errorElement||IN);let f=e.concat(s.slice(0,l+1)),p=()=>{let v;return h?v=c:u.route.Component?v=K.createElement(u.route.Component,null):u.route.element?v=u.route.element:v=o,K.createElement(AN,{match:u,routeContext:{outlet:o,matches:f,isDataRoute:t!=null},children:v})};return t&&(u.route.ErrorBoundary||u.route.errorElement||l===0)?K.createElement(PN,{location:t.location,revalidation:t.revalidation,component:c,error:h,children:p(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):p()},null)}var Sg;(function(r){r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate"})(Sg||(Sg={}));var ru;(function(r){r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId"})(ru||(ru={}));function ON(r){let e=K.useContext(V_);return e||ht(!1),e}function MN(r){let e=K.useContext(xN);return e||ht(!1),e}function DN(r){let e=K.useContext(xs);return e||ht(!1),e}function eP(r){let e=DN(),t=e.matches[e.matches.length-1];return t.route.id||ht(!1),t.route.id}function LN(){var r;let e=K.useContext(JI),t=MN(ru.UseRouteError),n=eP(ru.UseRouteError);return e||((r=t.errors)==null?void 0:r[n])}function NN(){let{router:r}=ON(Sg.UseNavigateStable),e=eP(ru.UseNavigateStable),t=K.useRef(!1);return ZI(()=>{t.current=!0}),K.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?r.navigate(i):r.navigate(i,Qh({fromRouteId:e},s)))},[r,e])}function Ds(r){ht(!1)}function FN(r){let{basename:e="/",children:t=null,location:n,navigationType:i=Kn.Pop,navigator:s,static:a=!1}=r;ku()&&ht(!1);let o=e.replace(/^\/*/,"/"),u=K.useMemo(()=>({basename:o,navigator:s,static:a}),[o,s,a]);typeof n=="string"&&(n=Ia(n));let{pathname:l="/",search:h="",hash:c="",state:f=null,key:p="default"}=n,v=K.useMemo(()=>{let g=H_(l,o);return g==null?null:{location:{pathname:g,search:h,hash:c,state:f,key:p},navigationType:i}},[o,l,h,c,f,p,i]);return v==null?null:K.createElement(Pa.Provider,{value:u},K.createElement(jc.Provider,{children:t,value:v}))}function BN(r){let{children:e,location:t}=r;return SN(wg(e),t)}var XT;(function(r){r[r.pending=0]="pending",r[r.success=1]="success",r[r.error=2]="error"})(XT||(XT={}));new Promise(()=>{});function wg(r,e){e===void 0&&(e=[]);let t=[];return K.Children.forEach(r,(n,i)=>{if(!K.isValidElement(n))return;let s=[...e,i];if(n.type===K.Fragment){t.push.apply(t,wg(n.props.children,s));return}n.type!==Ds&&ht(!1),!n.props.index||!n.props.children||ht(!1);let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=wg(n.props.children,s)),t.push(a)}),t}/**
 * React Router DOM v6.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cg(){return Cg=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Cg.apply(this,arguments)}function UN(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function kN(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function GN(r,e){return r.button===0&&(!e||e==="_self")&&!kN(r)}const jN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function HN(r){let{basename:e,children:t,future:n,window:i}=r,s=K.useRef();s.current==null&&(s.current=YL({window:i,v5Compat:!0}));let a=s.current,[o,u]=K.useState({action:a.action,location:a.location}),{v7_startTransition:l}=n||{},h=K.useCallback(c=>{l&&zT?zT(()=>u(c)):u(c)},[u,l]);return K.useLayoutEffect(()=>a.listen(h),[a,h]),K.createElement(FN,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a})}const VN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,XN=K.forwardRef(function(e,t){let{onClick:n,relative:i,reloadDocument:s,replace:a,state:o,target:u,to:l,preventScrollReset:h}=e,c=UN(e,jN),{basename:f}=K.useContext(Pa),p,v=!1;if(typeof l=="string"&&zN.test(l)&&(p=l,VN))try{let x=new URL(window.location.href),T=l.startsWith("//")?new URL(x.protocol+l):new URL(l),E=H_(T.pathname,f);T.origin===x.origin&&E!=null?l=E+T.search+T.hash:v=!0}catch{}let g=TN(l,{relative:i}),m=$N(l,{replace:a,state:o,target:u,preventScrollReset:h,relative:i});function y(x){n&&n(x),x.defaultPrevented||m(x)}return K.createElement("a",Cg({},c,{href:p||g,onClick:v||s?n:y,ref:t,target:u}))});var $T;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmitImpl="useSubmitImpl",r.UseFetcher="useFetcher"})($T||($T={}));var WT;(function(r){r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(WT||(WT={}));function $N(r,e){let{target:t,replace:n,state:i,preventScrollReset:s,relative:a}=e===void 0?{}:e,o=EN(),u=Hc(),l=QI(r,{relative:a});return K.useCallback(h=>{if(GN(h,t)){h.preventDefault();let c=n!==void 0?n:Zh(u)===Zh(l);o(r,{replace:c,state:i,preventScrollReset:s,relative:a})}},[u,o,l,n,i,t,r,s,a])}const WN="_amadeusbg2_s8s6d_9",YN="_wrapper_s8s6d_36",qN="_grid_s8s6d_47",KN="_show_s8s6d_65",Ci={amadeusbg2:WN,"text-blink":"_text-blink_s8s6d_1",wrapper:YN,grid:qN,show:KN,"boot-logo":"_boot-logo_s8s6d_69"};const YT="/assets/boot_bg_noises-e0a55eae.mp3",qT="/assets/boot_logo-5768e967.mp3",JN="/assets/bg-a8c029b3.jpg",ZN="/assets/01-0375fa4e.png",QN="/assets/02-a2a8cd74.png",eF="/assets/03-987af165.png",tF="/assets/04-ab7899b0.png",rF="/assets/05-b83639fe.png",nF="/assets/06-b3e4b5ad.png",iF="/assets/07-d695bccb.png",sF="/assets/08-8a768332.png",aF="/assets/09-03e515a4.png",oF="/assets/10-69787c1d.png",uF="/assets/11-62ccc8f3.png",lF="/assets/12-84184112.png",hF="/assets/13-f94e210d.png",cF="/assets/14-84a8a736.png",fF="/assets/15-638309f7.png",dF="/assets/16-b1b546e4.png",pF="/assets/17-f923c0bf.png",vF="/assets/18-0038d084.png",mF="/assets/19-f5fdb8a4.png",gF="/assets/20-52abdec0.png",yF="/assets/21-cb2aa18f.png",_F="/assets/22-d9143fe5.png",xF="/assets/23-f082fe13.png",TF="/assets/24-149b8f71.png",EF="/assets/25-89c2ecf1.png",bF="/assets/26-9296779c.png",SF="/assets/27-56296eca.png",wF="/assets/28-fa9b6490.png",CF="/assets/29-d2722b4c.png",IF="/assets/30-830d6e93.png",PF="/assets/31-52fb2ae3.png",AF="/assets/32-ed188fb3.png",RF="/assets/33-a852ae62.png",OF="/assets/34-e772c4fe.png",MF="/assets/35-8685202a.png",DF="/assets/36-d39b5e5c.png",LF="/assets/37-5c283f0f.png",NF="/assets/38-13726bb3.png";function FF(){const[r,e]=K.useState([]),[t,n]=K.useState(!0),[i,s]=K.useState(!1),[a,o]=K.useState(!1),[u,l]=K.useState(0),h=[ZN,QN,eF,tF,rF,nF,iF,sF,aF,oF,uF,lF,hF,cF,fF,dF,pF,vF,mF,gF,yF,_F,xF,TF,EF,bF,SF,wF,CF,IF,PF,AF,RF,OF,MF,DF,LF,NF],c=()=>{l(g=>{const m=g+1;return m>=h.length?0:m})},f=`Amadeus system ver.1.09.2 rev.2123
  ‏‏‎ ‎
>>Initialize System ... ok
>>Detecting boot device ... ok
>>Loading kerner ...ok
>>Detecting OS control device ... ok
>>Booting...
>>Processor 0 is Active ... ok
>>Processor 1 is Active ... OK
>>Processor 2 is Active ... ok
>>Processor 3 is Active ... ok
>>Memory Initialize 0/32767MBytes`,p=`‏‏‎ ‎
Init: Kernel version 2.04 booting...
‏‏‎ ‎
ROSS:
‏‏‎ ‎
Mounting proc at /proc ...				[ok]
Mounting sysfs at /sts ...				[ok]
Initakising network
Setting up localhost ...				[ok]
Setting up inet1 ...					[ok]
Setting up route ...					[ok]
Accessing Croud ...					[ok]
Starting system log at /log/sys...			[ok]
Cleaning /var/lock					[ok]
Cleaning /tmp						[ok]
Updating init.rc					[ok]`,v=32767;return K.useEffect(()=>{const g=new Audio(YT),m=new Audio(qT);return async function(){const y=I=>new Promise(D=>setTimeout(D,I)),x=[];g.loop=!0,g.play();const T=f.split(`
`);for(let I=0;I<T.length;I++){const D=T[I];for(let F=0;F<=D.length;F++)await y(10),x[I]=D.substring(0,F),po.unstable_batchedUpdates(()=>{e([...x])});await y(200)}let E=x.length-1,b=0;const w=Math.floor(v/10),C=10;for(let I=0;I<=C;I++){const D=`>>Memory Initialize ${b}/${v}MBytes`;await y(50),x[E]=D,po.unstable_batchedUpdates(()=>{e([...x])}),b+=w}const O=`>>Memory Initialize ${v}/${v}MBytes`;await y(50),x[E]=O,po.unstable_batchedUpdates(()=>{e([...x])});const R=p.split(`
`);for(let I=0;I<R.length;I++){const D=R[I];for(let F=0;F<=D.length;F++)await y(10),x[I+T.length]=D.substring(0,F),po.unstable_batchedUpdates(()=>{e([...x])});await y(200)}setTimeout(()=>{n(!1),s(!0)},4e3),setTimeout(()=>{s(!1),o(!0),g.pause(),m.play();const I=setInterval(c,3700/(h.length-1));setTimeout(()=>{o(!1),clearInterval(I)},2e3)},7e3)}(),()=>{g.pause(),m.pause()}},[]),V.jsx("div",{className:"scanlines",children:V.jsx("div",{className:Ci.amadeusbg2,style:{backgroundImage:`url(${JN})`},children:V.jsxs("div",{className:Ci.wrapper,children:[V.jsx("audio",{id:"bg-noises",src:YT,loop:!0}),V.jsx("audio",{id:"boot-sound",src:qT}),t&&V.jsxs("pre",{children:[V.jsx("output",{id:"output",children:r.map((g,m)=>V.jsx(Ky.Fragment,{children:m===r.length-1?V.jsx("span",{children:g}):V.jsx("div",{children:g})},m))}),V.jsxs("div",{className:"user-input",children:[V.jsx("span",{className:"incentive",children:"$"}),V.jsx("input",{type:"text",className:`${Ci.inputText} invisible`})]})]}),V.jsx("div",{className:`${Ci.grid} ${i?Ci["grid-show"]:""}`}),a&&V.jsx("div",{className:`${Ci["boot-logo"]}${a?` ${Ci.show}`:""}`,children:V.jsx("img",{src:h[u],alt:"boot logo"})})]})})})}const BF="_container_h84hr_21",UF="_errorText_h84hr_35",kF="_formContainer_h84hr_45",GF="_heading_h84hr_73",jF="_label_h84hr_85",HF="_input_h84hr_103",VF="_toggleBtn_h84hr_125",zF="_submitBtn_h84hr_141",gt={container:BF,errorText:UF,formContainer:kF,heading:GF,label:jF,input:HF,toggleBtn:VF,submitBtn:zF};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},XF=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=r[t++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=r[t++],a=r[t++],o=r[t++],u=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const s=r[t++],a=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},rP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const s=r[i],a=i+1<r.length,o=a?r[i+1]:0,u=i+2<r.length,l=u?r[i+2]:0,h=s>>2,c=(s&3)<<4|o>>4;let f=(o&15)<<2|l>>6,p=l&63;u||(p=64,a||(f=64)),n.push(t[h],t[c],t[f],t[p])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(tP(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):XF(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const s=t[r.charAt(i++)],o=i<r.length?t[r.charAt(i)]:0;++i;const l=i<r.length?t[r.charAt(i)]:64;++i;const c=i<r.length?t[r.charAt(i)]:64;if(++i,s==null||o==null||l==null||c==null)throw new $F;const f=s<<2|o>>4;if(n.push(f),l!==64){const p=o<<4&240|l>>2;if(n.push(p),c!==64){const v=l<<6&192|c;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class $F extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WF=function(r){const e=tP(r);return rP.encodeByteArray(e,!0)},nP=function(r){return WF(r).replace(/\./g,"")},iP=function(r){try{return rP.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qF=()=>YF().__FIREBASE_DEFAULTS__,KF=()=>{if(typeof process>"u"||typeof process.env>"u")return;const r={}.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},JF=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&iP(r[1]);return e&&JSON.parse(e)},z_=()=>{try{return qF()||KF()||JF()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},ZF=r=>{var e,t;return(t=(e=z_())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},sP=()=>{var r;return(r=z_())===null||r===void 0?void 0:r.config},aP=r=>{var e;return(e=z_())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eB(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lt())}function tB(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function rB(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nB(){const r=Lt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function iB(){try{return typeof indexedDB=="object"}catch{return!1}}function sB(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB="FirebaseError";class Ti extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=aB,Object.setPrototypeOf(this,Ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gu.prototype.create)}}class Gu{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?oB(s,n):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new Ti(i,o,n)}}function oB(r,e){return r.replace(uB,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const uB=/\{\$([^}]+)}/g;function lB(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ec(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const s=r[i],a=e[i];if(KT(s)&&KT(a)){if(!ec(s,a))return!1}else if(s!==a)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function KT(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function vo(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,s]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function mo(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function hB(r,e){const t=new cB(r,e);return t.subscribe.bind(t)}class cB{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");fB(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=Qf),i.error===void 0&&(i.error=Qf),i.complete===void 0&&(i.complete=Qf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fB(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Qf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(r){return r&&r._delegate?r._delegate:r}class da{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new QF;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vB(e))try{this.getOrInitializeService({instanceIdentifier:Li})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=Li){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Li){return this.instances.has(e)}getOptions(e=Li){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&a.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),s=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:pB(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Li){return this.component?this.component.multipleInstances?e:Li:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pB(r){return r===Li?void 0:r}function vB(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mB{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new dB(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ue||(Ue={}));const gB={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},yB=Ue.INFO,_B={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},xB=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=_B[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class oP{constructor(e){this.name=e,this._logLevel=yB,this._logHandler=xB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const TB=(r,e)=>e.some(t=>r instanceof t);let JT,ZT;function EB(){return JT||(JT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bB(){return ZT||(ZT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uP=new WeakMap,Ig=new WeakMap,lP=new WeakMap,ed=new WeakMap,X_=new WeakMap;function SB(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",s),r.removeEventListener("error",a)},s=()=>{t(ui(r.result)),i()},a=()=>{n(r.error),i()};r.addEventListener("success",s),r.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&uP.set(t,r)}).catch(()=>{}),X_.set(e,r),e}function wB(r){if(Ig.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",s),r.removeEventListener("error",a),r.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",s),r.addEventListener("error",a),r.addEventListener("abort",a)});Ig.set(r,e)}let Pg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Ig.get(r);if(e==="objectStoreNames")return r.objectStoreNames||lP.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ui(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function CB(r){Pg=r(Pg)}function IB(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(td(this),e,...t);return lP.set(n,e.sort?e.sort():[e]),ui(n)}:bB().includes(r)?function(...e){return r.apply(td(this),e),ui(uP.get(this))}:function(...e){return ui(r.apply(td(this),e))}}function PB(r){return typeof r=="function"?IB(r):(r instanceof IDBTransaction&&wB(r),TB(r,EB())?new Proxy(r,Pg):r)}function ui(r){if(r instanceof IDBRequest)return SB(r);if(ed.has(r))return ed.get(r);const e=PB(r);return e!==r&&(ed.set(r,e),X_.set(e,r)),e}const td=r=>X_.get(r);function AB(r,e,{blocked:t,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(r,e),o=ui(a);return n&&a.addEventListener("upgradeneeded",u=>{n(ui(a.result),u.oldVersion,u.newVersion,ui(a.transaction),u)}),t&&a.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),o.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),o}const RB=["get","getKey","getAll","getAllKeys","count"],OB=["put","add","delete","clear"],rd=new Map;function QT(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(rd.get(e))return rd.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=OB.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||RB.includes(t)))return;const s=async function(a,...o){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return n&&(l=l.index(o.shift())),(await Promise.all([l[t](...o),i&&u.done]))[0]};return rd.set(e,s),s}CB(r=>({...r,get:(e,t,n)=>QT(e,t)||r.get(e,t,n),has:(e,t)=>!!QT(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(DB(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function DB(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ag="@firebase/app",eE="0.9.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs=new oP("@firebase/app"),LB="@firebase/app-compat",NB="@firebase/analytics-compat",FB="@firebase/analytics",BB="@firebase/app-check-compat",UB="@firebase/app-check",kB="@firebase/auth",GB="@firebase/auth-compat",jB="@firebase/database",HB="@firebase/database-compat",VB="@firebase/functions",zB="@firebase/functions-compat",XB="@firebase/installations",$B="@firebase/installations-compat",WB="@firebase/messaging",YB="@firebase/messaging-compat",qB="@firebase/performance",KB="@firebase/performance-compat",JB="@firebase/remote-config",ZB="@firebase/remote-config-compat",QB="@firebase/storage",eU="@firebase/storage-compat",tU="@firebase/firestore",rU="@firebase/firestore-compat",nU="firebase",iU="9.22.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg="[DEFAULT]",sU={[Ag]:"fire-core",[LB]:"fire-core-compat",[FB]:"fire-analytics",[NB]:"fire-analytics-compat",[UB]:"fire-app-check",[BB]:"fire-app-check-compat",[kB]:"fire-auth",[GB]:"fire-auth-compat",[jB]:"fire-rtdb",[HB]:"fire-rtdb-compat",[VB]:"fire-fn",[zB]:"fire-fn-compat",[XB]:"fire-iid",[$B]:"fire-iid-compat",[WB]:"fire-fcm",[YB]:"fire-fcm-compat",[qB]:"fire-perf",[KB]:"fire-perf-compat",[JB]:"fire-rc",[ZB]:"fire-rc-compat",[QB]:"fire-gcs",[eU]:"fire-gcs-compat",[tU]:"fire-fst",[rU]:"fire-fst-compat","fire-js":"fire-js",[nU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=new Map,Og=new Map;function aU(r,e){try{r.container.addComponent(e)}catch(t){cs.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function nu(r){const e=r.name;if(Og.has(e))return cs.debug(`There were multiple attempts to register component ${e}.`),!1;Og.set(e,r);for(const t of tc.values())aU(t,r);return!0}function hP(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},li=new Gu("app","Firebase",oU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new da("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw li.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu=iU;function cP(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Rg,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw li.create("bad-app-name",{appName:String(i)});if(t||(t=sP()),!t)throw li.create("no-options");const s=tc.get(i);if(s){if(ec(t,s.options)&&ec(n,s.config))return s;throw li.create("duplicate-app",{appName:i})}const a=new mB(i);for(const u of Og.values())a.addComponent(u);const o=new uU(t,n,a);return tc.set(i,o),o}function lU(r=Rg){const e=tc.get(r);if(!e&&r===Rg&&sP())return cP();if(!e)throw li.create("no-app",{appName:r});return e}function ta(r,e,t){var n;let i=(n=sU[r])!==null&&n!==void 0?n:r;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cs.warn(o.join(" "));return}nu(new da(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hU="firebase-heartbeat-database",cU=1,iu="firebase-heartbeat-store";let nd=null;function fP(){return nd||(nd=AB(hU,cU,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(iu)}}}).catch(r=>{throw li.create("idb-open",{originalErrorMessage:r.message})})),nd}async function fU(r){try{return await(await fP()).transaction(iu).objectStore(iu).get(dP(r))}catch(e){if(e instanceof Ti)cs.warn(e.message);else{const t=li.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});cs.warn(t.message)}}}async function tE(r,e){try{const n=(await fP()).transaction(iu,"readwrite");await n.objectStore(iu).put(e,dP(r)),await n.done}catch(t){if(t instanceof Ti)cs.warn(t.message);else{const n=li.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});cs.warn(n.message)}}}function dP(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU=1024,pU=30*24*60*60*1e3;class vU{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new gU(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=rE();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(i=>i.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=pU}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=rE(),{heartbeatsToSend:t,unsentEntries:n}=mU(this._heartbeatsCache.heartbeats),i=nP(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function rE(){return new Date().toISOString().substring(0,10)}function mU(r,e=dU){const t=[];let n=r.slice();for(const i of r){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),nE(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),nE(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class gU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iB()?sB().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await fU(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return tE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return tE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function nE(r){return nP(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yU(r){nu(new da("platform-logger",e=>new MB(e),"PRIVATE")),nu(new da("heartbeat",e=>new vU(e),"PRIVATE")),ta(Ag,eE,r),ta(Ag,eE,"esm2017"),ta("fire-js","")}yU("");function $_(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function pP(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _U=pP,vP=new Gu("auth","Firebase",pP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc=new oP("@firebase/auth");function xU(r,...e){rc.logLevel<=Ue.WARN&&rc.warn(`Auth (${Hu}): ${r}`,...e)}function gh(r,...e){rc.logLevel<=Ue.ERROR&&rc.error(`Auth (${Hu}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(r,...e){throw W_(r,...e)}function en(r,...e){return W_(r,...e)}function TU(r,e,t){const n=Object.assign(Object.assign({},_U()),{[e]:t});return new Gu("auth","Firebase",n).create(e,{appName:r.name})}function W_(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return vP.create(r,...e)}function fe(r,e,...t){if(!r)throw W_(e,...t)}function yn(r){const e="INTERNAL ASSERTION FAILED: "+r;throw gh(e),new Error(e)}function Pn(r,e){r||yn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function EU(){return iE()==="http:"||iE()==="https:"}function iE(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(EU()||tB()||"connection"in navigator)?navigator.onLine:!0}function SU(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Pn(t>e,"Short delay should be less than long delay!"),this.isMobile=eB()||rB()}get(){return bU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(r,e){Pn(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU=new Vu(3e4,6e4);function Aa(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Ra(r,e,t,n,i={}){return gP(r,i,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const o=ju(Object.assign({key:r.config.apiKey},a)).slice(1),u=await r._getAdditionalHeaders();return u["Content-Type"]="application/json",r.languageCode&&(u["X-Firebase-Locale"]=r.languageCode),mP.fetch()(yP(r,r.config.apiHost,t,o),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))})}async function gP(r,e,t){r._canInitEmulator=!1;const n=Object.assign(Object.assign({},wU),e);try{const i=new IU(r),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw wl(r,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[u,l]=o.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw wl(r,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw wl(r,"email-already-in-use",a);if(u==="USER_DISABLED")throw wl(r,"user-disabled",a);const h=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw TU(r,h,l);kr(r,h)}}catch(i){if(i instanceof Ti)throw i;kr(r,"network-request-failed",{message:String(i)})}}async function zu(r,e,t,n,i={}){const s=await Ra(r,e,t,n,i);return"mfaPendingCredential"in s&&kr(r,"multi-factor-auth-required",{_serverResponse:s}),s}function yP(r,e,t,n){const i=`${e}${t}?${n}`;return r.config.emulator?Y_(r.config,i):`${r.config.apiScheme}://${i}`}class IU{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(en(this.auth,"network-request-failed")),CU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function wl(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const i=en(r,e,n);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PU(r,e){return Ra(r,"POST","/v1/accounts:delete",e)}async function AU(r,e){return Ra(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RU(r,e=!1){const t=Ts(r),n=await t.getIdToken(e),i=q_(n);fe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:n,authTime:Ro(id(i.auth_time)),issuedAtTime:Ro(id(i.iat)),expirationTime:Ro(id(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function id(r){return Number(r)*1e3}function q_(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return gh("JWT malformed, contained fewer than 3 sections"),null;try{const i=iP(t);return i?JSON.parse(i):(gh("Failed to decode base64 JWT payload"),null)}catch(i){return gh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function OU(r){const e=q_(r);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function su(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Ti&&MU(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function MU({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ro(this.lastLoginAt),this.creationTime=Ro(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nc(r){var e;const t=r.auth,n=await r.getIdToken(),i=await su(r,AU(t,{idToken:n}));fe(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];r._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?FU(s.providerUserInfo):[],o=NU(r.providerData,a),u=r.isAnonymous,l=!(r.email&&s.passwordHash)&&!(o!=null&&o.length),h=u?l:!1,c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new _P(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(r,c)}async function LU(r){const e=Ts(r);await nc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NU(r,e){return[...r.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function FU(r){return r.map(e=>{var{providerId:t}=e,n=$_(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BU(r,e){const t=await gP(r,{},async()=>{const n=ju({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=r.config,a=yP(r,i,"/v1/token",`key=${s}`),o=await r._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",mP.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):OU(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return fe(!this.accessToken||this.refreshToken,e,"user-token-expired"),!t&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await BU(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:s}=t,a=new au;return n&&(fe(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(fe(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(fe(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new au,this.toJSON())}_performRefresh(){return yn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(r,e){fe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Qi{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,s=$_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _P(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await su(this,this.stsTokenManager.getToken(this.auth,e));return fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return RU(this,e)}reload(){return LU(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Qi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await nc(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await su(this,PU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,s,a,o,u,l,h;const c=(n=t.displayName)!==null&&n!==void 0?n:void 0,f=(i=t.email)!==null&&i!==void 0?i:void 0,p=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,v=(a=t.photoURL)!==null&&a!==void 0?a:void 0,g=(o=t.tenantId)!==null&&o!==void 0?o:void 0,m=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=t.createdAt)!==null&&l!==void 0?l:void 0,x=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:T,emailVerified:E,isAnonymous:b,providerData:w,stsTokenManager:C}=t;fe(T&&C,e,"internal-error");const O=au.fromJSON(this.name,C);fe(typeof T=="string",e,"internal-error"),Bn(c,e.name),Bn(f,e.name),fe(typeof E=="boolean",e,"internal-error"),fe(typeof b=="boolean",e,"internal-error"),Bn(p,e.name),Bn(v,e.name),Bn(g,e.name),Bn(m,e.name),Bn(y,e.name),Bn(x,e.name);const R=new Qi({uid:T,auth:e,email:f,emailVerified:E,displayName:c,isAnonymous:b,photoURL:v,phoneNumber:p,tenantId:g,stsTokenManager:O,createdAt:y,lastLoginAt:x});return w&&Array.isArray(w)&&(R.providerData=w.map(I=>Object.assign({},I))),m&&(R._redirectEventId=m),R}static async _fromIdTokenResponse(e,t,n=!1){const i=new au;i.updateFromServerResponse(t);const s=new Qi({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await nc(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=new Map;function _n(r){Pn(r instanceof Function,"Expected a class definition");let e=sE.get(r);return e?(Pn(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,sE.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}xP.type="NONE";const aE=xP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(r,e,t){return`firebase:${r}:${e}:${t}`}class ra{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=yh(this.userKey,i.apiKey,s),this.fullPersistenceKey=yh("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Qi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new ra(_n(aE),e,n);const i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||_n(aE);const a=yh(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const h=await l._get(a);if(h){const c=Qi._fromJSON(e,h);l!==s&&(o=c),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new ra(s,e,n):(s=u[0],o&&await s._set(a,o.toJSON()),await Promise.all(t.map(async l=>{if(l!==s)try{await l._remove(a)}catch{}})),new ra(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wP(e))return"Blackberry";if(CP(e))return"Webos";if(K_(e))return"Safari";if((e.includes("chrome/")||EP(e))&&!e.includes("edge/"))return"Chrome";if(SP(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function TP(r=Lt()){return/firefox\//i.test(r)}function K_(r=Lt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function EP(r=Lt()){return/crios\//i.test(r)}function bP(r=Lt()){return/iemobile/i.test(r)}function SP(r=Lt()){return/android/i.test(r)}function wP(r=Lt()){return/blackberry/i.test(r)}function CP(r=Lt()){return/webos/i.test(r)}function Vc(r=Lt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function UU(r=Lt()){var e;return Vc(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kU(){return nB()&&document.documentMode===10}function IP(r=Lt()){return Vc(r)||SP(r)||CP(r)||wP(r)||/windows phone/i.test(r)||bP(r)}function GU(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(r,e=[]){let t;switch(r){case"Browser":t=oE(Lt());break;case"Worker":t=`${oE(Lt())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Hu}/${n}`}async function AP(r,e){return Ra(r,"GET","/v2/recaptchaConfig",Aa(r,e))}function uE(r){return r!==void 0&&r.enterprise!==void 0}class RP{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(t=>t.provider==="EMAIL_PASSWORD_PROVIDER"&&t.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jU(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}function OP(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=i=>{const s=en("internal-error");s.customData=i,t(s)},n.type="text/javascript",n.charset="UTF-8",jU().appendChild(n)})}function HU(r){return`__${r}${Math.floor(Math.random()*1e6)}`}const VU="https://www.google.com/recaptcha/enterprise.js?render=",zU="recaptcha-enterprise",XU="NO_RECAPTCHA";class MP{constructor(e){this.type=zU,this.auth=Oa(e)}async verify(e="verify",t=!1){async function n(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{AP(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const l=new RP(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,a(l.siteKey)}}).catch(u=>{o(u)})})}function i(s,a,o){const u=window.grecaptcha;uE(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{a(l)}).catch(()=>{a(XU)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{n(this.auth).then(o=>{if(!t&&uE(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}OP(VU+o).then(()=>{i(o,s,a)}).catch(u=>{a(u)})}}).catch(o=>{a(o)})})}}async function ic(r,e,t,n=!1){const i=new MP(r);let s;try{s=await i.verify(t)}catch{s=await i.verify(t,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=s=>new Promise((a,o)=>{try{const u=e(s);a(u)}catch(u){o(u)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lE(this),this.idTokenSubscription=new lE(this),this.beforeStateQueue=new $U(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_n(t)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await ra.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,o=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===o)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await nc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Ts(e):null;return t&&fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(_n(e))})}async initializeRecaptchaConfig(){const e=await AP(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new RP(e);this.tenantId==null?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled&&new MP(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Gu("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_n(e)||this._popupRedirectResolver;fe(t,this,"argument-error"),this.redirectPersistenceManager=await ra.create(this,[_n(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t),a=this._isInitialized?Promise.resolve():this._initializationPromise;return fe(a,this,"internal-error"),a.then(()=>s(this.currentUser)),typeof t=="function"?e.addObserver(t,n,i):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&xU(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Oa(r){return Ts(r)}class lE{constructor(e){this.auth=e,this.observer=null,this.addObserver=hB(t=>this.observer=t)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YU(r,e){const t=hP(r,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(ec(s,e??{}))return i;kr(i,"already-initialized")}return t.initialize({options:e})}function qU(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(_n);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function KU(r,e,t){const n=Oa(r);fe(n._canInitEmulator,n,"emulator-config-failed"),fe(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=DP(e),{host:a,port:o}=JU(e),u=o===null?"":`:${o}`;n.config.emulator={url:`${s}//${a}${u}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||ZU()}function DP(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function JU(r){const e=DP(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:hE(n.substr(s.length+1))}}else{const[s,a]=n.split(":");return{host:s,port:hE(a)}}}function hE(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function ZU(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return yn("not implemented")}_getIdTokenResponse(e){return yn("not implemented")}_linkToIdToken(e,t){return yn("not implemented")}_getReauthenticationResolver(e){return yn("not implemented")}}async function QU(r,e){return Ra(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sd(r,e){return zu(r,"POST","/v1/accounts:signInWithPassword",Aa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ek(r,e){return zu(r,"POST","/v1/accounts:signInWithEmailLink",Aa(r,e))}async function tk(r,e){return zu(r,"POST","/v1/accounts:signInWithEmailLink",Aa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou extends J_{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new ou(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new ou(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((t=e._getRecaptchaConfig())===null||t===void 0)&&t.emailPasswordEnabled){const i=await ic(e,n,"signInWithPassword");return sd(e,i)}else return sd(e,n).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const s=await ic(e,n,"signInWithPassword");return sd(e,s)}else return Promise.reject(i)});case"emailLink":return ek(e,{email:this._email,oobCode:this._password});default:kr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return QU(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return tk(e,{idToken:t,email:this._email,oobCode:this._password});default:kr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function na(r,e){return zu(r,"POST","/v1/accounts:signInWithIdp",Aa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk="http://localhost";class fs extends J_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new fs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):kr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,s=$_(t,["providerId","signInMethod"]);if(!n||!i)return null;const a=new fs(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return na(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,na(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,na(e,t)}buildRequest(){const e={requestUri:rk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ju(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ik(r){const e=vo(mo(r)).link,t=e?vo(mo(e)).deep_link_id:null,n=vo(mo(r)).deep_link_id;return(n?vo(mo(n)).link:null)||n||t||e||r}class Z_{constructor(e){var t,n,i,s,a,o;const u=vo(mo(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(n=u.oobCode)!==null&&n!==void 0?n:null,c=nk((i=u.mode)!==null&&i!==void 0?i:null);fe(l&&h&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=u.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const t=ik(e);try{return new Z_(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(){this.providerId=Ma.PROVIDER_ID}static credential(e,t){return ou._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Z_.parseLink(t);return fe(n,"argument-error"),ou._fromEmailAndCode(e,n.code,n.tenantId)}}Ma.PROVIDER_ID="password";Ma.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ma.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu extends LP{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn extends Xu{constructor(){super("facebook.com")}static credential(e){return fs._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zn.credential(e.oauthAccessToken)}catch{return null}}}zn.FACEBOOK_SIGN_IN_METHOD="facebook.com";zn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn extends Xu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return fs._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Xn.credentialFromTaggedObject(e)}static credentialFromError(e){return Xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Xn.credential(t,n)}catch{return null}}}Xn.GOOGLE_SIGN_IN_METHOD="google.com";Xn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n extends Xu{constructor(){super("github.com")}static credential(e){return fs._fromParams({providerId:$n.PROVIDER_ID,signInMethod:$n.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $n.credentialFromTaggedObject(e)}static credentialFromError(e){return $n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $n.credential(e.oauthAccessToken)}catch{return null}}}$n.GITHUB_SIGN_IN_METHOD="github.com";$n.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn extends Xu{constructor(){super("twitter.com")}static credential(e,t){return fs._fromParams({providerId:Wn.PROVIDER_ID,signInMethod:Wn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Wn.credentialFromTaggedObject(e)}static credentialFromError(e){return Wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Wn.credential(t,n)}catch{return null}}}Wn.TWITTER_SIGN_IN_METHOD="twitter.com";Wn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ad(r,e){return zu(r,"POST","/v1/accounts:signUp",Aa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const s=await Qi._fromIdTokenResponse(e,n,i),a=cE(n);return new ds({user:s,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=cE(n);return new ds({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function cE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc extends Ti{constructor(e,t,n,i){var s;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,sc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new sc(e,t,n,i)}}function NP(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?sc._fromErrorAndOperation(r,s,e,n):s})}async function sk(r,e,t=!1){const n=await su(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return ds._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ak(r,e,t=!1){const{auth:n}=r,i="reauthenticate";try{const s=await su(r,NP(n,i,e,r),t);fe(s.idToken,n,"internal-error");const a=q_(s.idToken);fe(a,n,"internal-error");const{sub:o}=a;return fe(r.uid===o,n,"user-mismatch"),ds._forOperation(r,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&kr(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FP(r,e,t=!1){const n="signIn",i=await NP(r,n,e),s=await ds._fromIdTokenResponse(r,n,i);return t||await r._updateCurrentUser(s.user),s}async function ok(r,e){return FP(Oa(r),e)}async function uk(r,e,t){var n;const i=Oa(r),s={returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"};let a;if(!((n=i._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const l=await ic(i,s,"signUpPassword");a=ad(i,l)}else a=ad(i,s).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const h=await ic(i,s,"signUpPassword");return ad(i,h)}else return Promise.reject(l)});const o=await a.catch(l=>Promise.reject(l)),u=await ds._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(u.user),u}function lk(r,e,t){return ok(Ts(r),Ma.credential(e,t))}function hk(r,e,t,n){return Ts(r).onIdTokenChanged(e,t,n)}function ck(r,e,t){return Ts(r).beforeAuthStateChanged(e,t)}const ac="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ac,"1"),this.storage.removeItem(ac),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(){const r=Lt();return K_(r)||Vc(r)}const dk=1e3,pk=10;class UP extends BP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=fk()&&GU(),this.fallbackToPolling=IP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,o,u)=>{this.notifyListeners(a,u)});return}const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(n);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const a=this.storage.getItem(n);!t&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);kU()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,pk):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},dk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}UP.type="LOCAL";const vk=UP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP extends BP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}kP.type="SESSION";const GP=kP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const n=new zc(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(a).map(async l=>l(t.origin,s)),u=await mk(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,u)=>{const l=Q_("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(c){const f=c;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(f.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return window}function yk(r){tn().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(){return typeof tn().WorkerGlobalScope<"u"&&typeof tn().importScripts=="function"}async function _k(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xk(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function Tk(){return jP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP="firebaseLocalStorageDb",Ek=1,oc="firebaseLocalStorage",VP="fbase_key";class $u{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Xc(r,e){return r.transaction([oc],e?"readwrite":"readonly").objectStore(oc)}function bk(){const r=indexedDB.deleteDatabase(HP);return new $u(r).toPromise()}function Dg(){const r=indexedDB.open(HP,Ek);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(oc,{keyPath:VP})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(oc)?e(n):(n.close(),await bk(),e(await Dg()))})})}async function fE(r,e,t){const n=Xc(r,!0).put({[VP]:e,value:t});return new $u(n).toPromise()}async function Sk(r,e){const t=Xc(r,!1).get(e),n=await new $u(t).toPromise();return n===void 0?null:n.value}function dE(r,e){const t=Xc(r,!0).delete(e);return new $u(t).toPromise()}const wk=800,Ck=3;class zP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>Ck)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zc._getInstance(Tk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await _k(),!this.activeServiceWorker)return;this.sender=new gk(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dg();return await fE(e,ac,"1"),await dE(e,ac),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>fE(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>Sk(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>dE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Xc(i,!1).getAll();return new $u(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zP.type="LOCAL";const Ik=zP;new Vu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(r,e){return e?_n(e):(fe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0 extends J_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return na(e,this._buildIdpRequest())}_linkToIdToken(e,t){return na(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return na(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ak(r){return FP(r.auth,new e0(r),r.bypassAuthState)}function Rk(r){const{auth:e,user:t}=r;return fe(t,e,"internal-error"),ak(t,new e0(r),r.bypassAuthState)}async function Ok(r){const{auth:e,user:t}=r;return fe(t,e,"internal-error"),sk(t,new e0(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,t,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ak;case"linkViaPopup":case"linkViaRedirect":return Ok;case"reauthViaPopup":case"reauthViaRedirect":return Rk;default:kr(this.auth,"internal-error")}}resolve(e){Pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=new Vu(2e3,1e4);class Ws extends XP{constructor(e,t,n,i,s){super(e,t,i,s),this.provider=n,this.authWindow=null,this.pollId=null,Ws.currentPopupAction&&Ws.currentPopupAction.cancel(),Ws.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){Pn(this.filter.length===1,"Popup operations only handle one event");const e=Q_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(en(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(en(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ws.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(en(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Mk.get())};e()}}Ws.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk="pendingRedirect",_h=new Map;class Lk extends XP{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=_h.get(this.auth._key());if(!e){try{const n=await Nk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}_h.set(this.auth._key(),e)}return this.bypassAuthState||_h.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Nk(r,e){const t=Uk(e),n=Bk(r);if(!await n._isAvailable())return!1;const i=await n._get(t)==="true";return await n._remove(t),i}function Fk(r,e){_h.set(r._key(),e)}function Bk(r){return _n(r._redirectPersistence)}function Uk(r){return yh(Dk,r.config.apiKey,r.name)}async function kk(r,e,t=!1){const n=Oa(r),i=Pk(n,e),a=await new Lk(n,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=10*60*1e3;class jk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Hk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!$P(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(en(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Gk&&this.cachedEventUids.clear(),this.cachedEventUids.has(pE(e))}saveEventToCache(e){this.cachedEventUids.add(pE(e)),this.lastProcessedEventTime=Date.now()}}function pE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function $P({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Hk(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $P(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vk(r,e={}){return Ra(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xk=/^https?/;async function $k(r){if(r.config.emulator)return;const{authorizedDomains:e}=await Vk(r);for(const t of e)try{if(Wk(t))return}catch{}kr(r,"unauthorized-domain")}function Wk(r){const e=Mg(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const a=new URL(r);return a.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===n}if(!Xk.test(t))return!1;if(zk.test(r))return n===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=new Vu(3e4,6e4);function vE(){const r=tn().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function qk(r){return new Promise((e,t)=>{var n,i,s;function a(){vE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vE(),t(en(r,"network-request-failed"))},timeout:Yk.get()})}if(!((i=(n=tn().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=tn().gapi)===null||s===void 0)&&s.load)a();else{const o=HU("iframefcb");return tn()[o]=()=>{gapi.load?a():t(en(r,"network-request-failed"))},OP(`https://apis.google.com/js/api.js?onload=${o}`).catch(u=>t(u))}}).catch(e=>{throw xh=null,e})}let xh=null;function Kk(r){return xh=xh||qk(r),xh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk=new Vu(5e3,15e3),Zk="__/auth/iframe",Qk="emulator/auth/iframe",e3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},t3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function r3(r){const e=r.config;fe(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Y_(e,Qk):`https://${r.config.authDomain}/${Zk}`,n={apiKey:e.apiKey,appName:r.name,v:Hu},i=t3.get(r.config.apiHost);i&&(n.eid=i);const s=r._getFrameworks();return s.length&&(n.fw=s.join(",")),`${t}?${ju(n).slice(1)}`}async function n3(r){const e=await Kk(r),t=tn().gapi;return fe(t,r,"internal-error"),e.open({where:document.body,url:r3(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:e3,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const a=en(r,"network-request-failed"),o=tn().setTimeout(()=>{s(a)},Jk.get());function u(){tn().clearTimeout(o),i(n)}n.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},s3=500,a3=600,o3="_blank",u3="http://localhost";class mE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function l3(r,e,t,n=s3,i=a3){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const u=Object.assign(Object.assign({},i3),{width:n.toString(),height:i.toString(),top:s,left:a}),l=Lt().toLowerCase();t&&(o=EP(l)?o3:t),TP(l)&&(e=e||u3,u.scrollbars="yes");const h=Object.entries(u).reduce((f,[p,v])=>`${f}${p}=${v},`,"");if(UU(l)&&o!=="_self")return h3(e||"",o),new mE(null);const c=window.open(e||"",o,h);fe(c,r,"popup-blocked");try{c.focus()}catch{}return new mE(c)}function h3(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3="__/auth/handler",f3="emulator/auth/handler",d3=encodeURIComponent("fac");async function gE(r,e,t,n,i,s){fe(r.config.authDomain,r,"auth-domain-config-required"),fe(r.config.apiKey,r,"invalid-api-key");const a={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:Hu,eventId:i};if(e instanceof LP){e.setDefaultLanguage(r.languageCode),a.providerId=e.providerId||"",lB(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,c]of Object.entries(s||{}))a[h]=c}if(e instanceof Xu){const h=e.getScopes().filter(c=>c!=="");h.length>0&&(a.scopes=h.join(","))}r.tenantId&&(a.tid=r.tenantId);const o=a;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const u=await r._getAppCheckToken(),l=u?`#${d3}=${encodeURIComponent(u)}`:"";return`${p3(r)}?${ju(o).slice(1)}${l}`}function p3({config:r}){return r.emulator?Y_(r,f3):`https://${r.authDomain}/${c3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od="webStorageSupport";class v3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GP,this._completeRedirectFn=kk,this._overrideRedirectResult=Fk}async _openPopup(e,t,n,i){var s;Pn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await gE(e,t,n,Mg(),i);return l3(e,a,Q_())}async _openRedirect(e,t,n,i){await this._originValidation(e);const s=await gE(e,t,n,Mg(),i);return yk(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Pn(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await n3(e),n=new jk(e);return t.register("authEvent",i=>(fe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(od,{type:od},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[od];a!==void 0&&t(!!a),kr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=$k(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return IP()||K_()||Vc()}}const m3=v3;var yE="@firebase/auth",_E="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function _3(r){nu(new da("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;fe(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:a,authDomain:o,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PP(r)},l=new WU(n,i,s,u);return qU(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),nu(new da("auth-internal",e=>{const t=Oa(e.getProvider("auth").getImmediate());return(n=>new g3(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ta(yE,_E,y3(r)),ta(yE,_E,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3=5*60,T3=aP("authIdTokenMaxAge")||x3;let xE=null;const E3=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>T3)return;const i=t==null?void 0:t.token;xE!==i&&(xE=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function b3(r=lU()){const e=hP(r,"auth");if(e.isInitialized())return e.getImmediate();const t=YU(r,{popupRedirectResolver:m3,persistence:[Ik,vk,GP]}),n=aP("authTokenSyncURL");if(n){const s=E3(n);ck(t,s,()=>s(t.currentUser)),hk(t,a=>s(a))}const i=ZF("auth");return i&&KU(t,`http://${i}`),t}_3("Browser");var S3="firebase",w3="9.22.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ta(S3,w3,"app");const C3={apiKey:"AIzaSyBUPOvDD0gzocaZtuENcT9mSooBmwxwHz8",authDomain:"amadeus-a6ced.firebaseapp.com",projectId:"amadeus-a6ced",storageBucket:"amadeus-a6ced.appspot.com",messagingSenderId:"204058056589",appId:"1:204058056589:web:4bbdb751dd65fff23d0fc4",measurementId:"G-6Z8VRGR9BF"},I3=cP(C3),TE=b3(I3),P3=()=>{const[r,e]=K.useState(""),[t,n]=K.useState(""),[i,s]=K.useState(""),[a,o]=K.useState(!0),[u,l]=K.useState(""),h=async p=>{p.preventDefault();try{await lk(TE,r,t)}catch(v){console.error("Error signing in: ",v),l("Invalid email or password")}},c=async p=>{if(p.preventDefault(),t!==i){l("Passwords do not match");return}try{await uk(TE,r,t)}catch(v){console.error("Error registering: ",v),l("Something went wrong. Please try again later.")}},f=()=>{o(!a),l("")};return V.jsx("div",{className:"amadeusbg2",children:V.jsx("div",{className:gt.container,children:V.jsxs("div",{className:gt.formContainer,children:[V.jsx("button",{onClick:f,className:gt.toggleBtn,children:a?"Go to Register":"Go to Login"}),u&&V.jsx("div",{className:gt.errorText,children:u}),a?V.jsxs("div",{children:[V.jsx("h2",{className:gt.heading,children:"Login"}),V.jsxs("form",{onSubmit:h,children:[V.jsxs("label",{className:gt.label,children:["Email:",V.jsx("input",{type:"email",value:r,onChange:p=>e(p.target.value),className:gt.input})]}),V.jsx("br",{}),V.jsxs("label",{className:gt.label,children:["Password:",V.jsx("input",{type:"password",value:t,onChange:p=>n(p.target.value),className:gt.input})]}),V.jsx("br",{}),V.jsx("button",{type:"submit",className:gt.submitBtn,children:"Login"})]})]}):V.jsxs("div",{children:[V.jsx("h2",{className:gt.heading,children:"Register"}),V.jsxs("form",{onSubmit:c,children:[V.jsxs("label",{className:gt.label,children:["Email:",V.jsx("input",{type:"email",value:r,onChange:p=>e(p.target.value),className:gt.input})]}),V.jsx("br",{}),V.jsxs("label",{className:gt.label,children:["Password:",V.jsx("input",{type:"password",value:t,onChange:p=>n(p.target.value),className:gt.input})]}),V.jsx("br",{}),V.jsxs("label",{className:gt.label,children:["Confirm Password:",V.jsx("input",{type:"password",value:i,onChange:p=>s(p.target.value),className:gt.input})]}),V.jsx("br",{}),V.jsx("button",{type:"submit",className:gt.submitBtn,children:"Register"})]})]})]})})})};const WP="/assets/bg_character_-de1de47f.png";const A3="/assets/Amadeus_logo-4fd81a55.webp";function YP({userAPIKey:r,setUserAPIKey:e,handleSaveAPIKey:t,username:n,setUsername:i,isModalVisible:s,setIsModalVisible:a}){if(!s)return null;const o=()=>{localStorage.clear()};return V.jsxs("div",{className:"api-key-modal",children:[V.jsx("img",{src:A3,alt:"Amadeus Logo",className:"logo_settings"}),V.jsxs("div",{className:"api-key-container",children:[V.jsxs("form",{onSubmit:u=>{u.preventDefault(),t(),a(!1)},children:[V.jsx("label",{htmlFor:"api-key",children:"API Key:"}),V.jsx("input",{id:"api-key",type:"password",value:r,onChange:u=>e(u.target.value),placeholder:"Enter API Key"}),V.jsx("label",{htmlFor:"username",children:"Username:"}),V.jsx("input",{id:"username",type:"text",value:n,onChange:u=>i(u.target.value),placeholder:"Enter username"}),V.jsx("button",{type:"submit",children:"Save"}),V.jsx("button",{type:"button",onClick:o,children:"Clear All Local Storage"}),V.jsx("a",{href:"https://www.youtube.com/watch?v=nafDyRsVnXU",children:"Click here if you want to know how to get an Api Key"})]}),V.jsxs("div",{class:"discord-invite",children:[V.jsx("h5",{class:"discord-invite-text",children:"You can join our discord server"}),V.jsxs("div",{class:"discord-invite-body",children:[V.jsx("div",{class:"discord-invite-image"}),V.jsx("div",{class:"discord-invite-details",children:V.jsxs("h3",{class:"discord-invite-name",children:[V.jsxs("div",{class:"discord-invite-verified",children:[V.jsx("svg",{class:"discord-invite-verified-svg","aria-hidden":"false",width:"16",height:"16",viewBox:"0 0 16 15.2",children:V.jsx("path",{fill:"currentColor","fill-rule":"evenodd",d:"m16 7.6c0 .79-1.28 1.38-1.52 2.09s.44 2 0 2.59-1.84.35-2.46.8-.79 1.84-1.54 2.09-1.67-.8-2.47-.8-1.75 1-2.47.8-.92-1.64-1.54-2.09-2-.18-2.46-.8.23-1.84 0-2.59-1.54-1.3-1.54-2.09 1.28-1.38 1.52-2.09-.44-2 0-2.59 1.85-.35 2.48-.8.78-1.84 1.53-2.12 1.67.83 2.47.83 1.75-1 2.47-.8.91 1.64 1.53 2.09 2 .18 2.46.8-.23 1.84 0 2.59 1.54 1.3 1.54 2.09z"})}),V.jsx("div",{class:"discord-invite-verified-tick",children:V.jsx("svg",{class:"discord-invite-verified-tick-svg","aria-hidden":"false",width:"16",height:"16",viewBox:"0 0 16 15.2",children:V.jsx("path",{d:"M7.4,11.17,4,8.62,5,7.26l2,1.53L10.64,4l1.36,1Z",fill:"currentColor"})})})]}),"ＬＡＢＯ・ＤＥＳＵ"]})}),V.jsx("a",{type:"button",class:"discord-invite-join-button",href:"https://discord.gg/32habcPdkn",children:"Join"})]})]})]})]})}function uc({messages:r,isTyping:e,lastMessageRef:t}){return V.jsxs("div",{className:"messageList",children:[e&&V.jsx("div",{className:"typingIndicator",children:"Amadeus is typing..."}),r.map((n,i)=>V.jsx("div",{className:`message ${n.sender==="Amadeus"?"assistant":"user"}`,ref:i===r.length-1?t:null,children:n.message},i))]})}const qP=({handleSend:r})=>{const[e,t]=K.useState(""),n=a=>{a.key==="Enter"&&(r(e),t(""))},i=a=>{t(a.target.value)},s=()=>{e===""&&t("")};return V.jsx("div",{className:"messageInputChatting",children:V.jsx("input",{type:"text",placeholder:"メッセージを入れて下さい",onKeyDown:n,onChange:i,onFocus:s,value:e})})};function R3(r){var e=this.constructor;return this.then(function(t){return e.resolve(r()).then(function(){return t})},function(t){return e.resolve(r()).then(function(){return e.reject(t)})})}function O3(r){var e=this;return new e(function(t,n){if(!(r&&typeof r.length<"u"))return n(new TypeError(typeof r+" "+r+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(r);if(i.length===0)return t([]);var s=i.length;function a(u,l){if(l&&(typeof l=="object"||typeof l=="function")){var h=l.then;if(typeof h=="function"){h.call(l,function(c){a(u,c)},function(c){i[u]={status:"rejected",reason:c},--s===0&&t(i)});return}}i[u]={status:"fulfilled",value:l},--s===0&&t(i)}for(var o=0;o<i.length;o++)a(o,i[o])})}function KP(r,e){this.name="AggregateError",this.errors=r,this.message=e||""}KP.prototype=Error.prototype;function M3(r){var e=this;return new e(function(t,n){if(!(r&&typeof r.length<"u"))return n(new TypeError("Promise.any accepts an array"));var i=Array.prototype.slice.call(r);if(i.length===0)return n();for(var s=[],a=0;a<i.length;a++)try{e.resolve(i[a]).then(t).catch(function(o){s.push(o),s.length===i.length&&n(new KP(s,"All promises were rejected"))})}catch(o){n(o)}})}var D3=setTimeout;function JP(r){return!!(r&&typeof r.length<"u")}function L3(){}function N3(r,e){return function(){r.apply(e,arguments)}}function rt(r){if(!(this instanceof rt))throw new TypeError("Promises must be constructed via new");if(typeof r!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],QP(r,this)}function ZP(r,e){for(;r._state===3;)r=r._value;if(r._state===0){r._deferreds.push(e);return}r._handled=!0,rt._immediateFn(function(){var t=r._state===1?e.onFulfilled:e.onRejected;if(t===null){(r._state===1?Lg:uu)(e.promise,r._value);return}var n;try{n=t(r._value)}catch(i){uu(e.promise,i);return}Lg(e.promise,n)})}function Lg(r,e){try{if(e===r)throw new TypeError("A promise cannot be resolved with itself.");if(e&&(typeof e=="object"||typeof e=="function")){var t=e.then;if(e instanceof rt){r._state=3,r._value=e,Ng(r);return}else if(typeof t=="function"){QP(N3(t,e),r);return}}r._state=1,r._value=e,Ng(r)}catch(n){uu(r,n)}}function uu(r,e){r._state=2,r._value=e,Ng(r)}function Ng(r){r._state===2&&r._deferreds.length===0&&rt._immediateFn(function(){r._handled||rt._unhandledRejectionFn(r._value)});for(var e=0,t=r._deferreds.length;e<t;e++)ZP(r,r._deferreds[e]);r._deferreds=null}function F3(r,e,t){this.onFulfilled=typeof r=="function"?r:null,this.onRejected=typeof e=="function"?e:null,this.promise=t}function QP(r,e){var t=!1;try{r(function(n){t||(t=!0,Lg(e,n))},function(n){t||(t=!0,uu(e,n))})}catch(n){if(t)return;t=!0,uu(e,n)}}rt.prototype.catch=function(r){return this.then(null,r)};rt.prototype.then=function(r,e){var t=new this.constructor(L3);return ZP(this,new F3(r,e,t)),t};rt.prototype.finally=R3;rt.all=function(r){return new rt(function(e,t){if(!JP(r))return t(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(r);if(n.length===0)return e([]);var i=n.length;function s(o,u){try{if(u&&(typeof u=="object"||typeof u=="function")){var l=u.then;if(typeof l=="function"){l.call(u,function(h){s(o,h)},t);return}}n[o]=u,--i===0&&e(n)}catch(h){t(h)}}for(var a=0;a<n.length;a++)s(a,n[a])})};rt.any=M3;rt.allSettled=O3;rt.resolve=function(r){return r&&typeof r=="object"&&r.constructor===rt?r:new rt(function(e){e(r)})};rt.reject=function(r){return new rt(function(e,t){t(r)})};rt.race=function(r){return new rt(function(e,t){if(!JP(r))return t(new TypeError("Promise.race accepts an array"));for(var n=0,i=r.length;n<i;n++)rt.resolve(r[n]).then(e,t)})};rt._immediateFn=typeof setImmediate=="function"&&function(r){setImmediate(r)}||function(r){D3(r,0)};rt._unhandledRejectionFn=function(e){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var EE=Object.getOwnPropertySymbols,B3=Object.prototype.hasOwnProperty,U3=Object.prototype.propertyIsEnumerable;function k3(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function G3(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de",Object.getOwnPropertyNames(r)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var j3=G3()?Object.assign:function(r,e){for(var t,n=k3(r),i,s=1;s<arguments.length;s++){t=Object(arguments[s]);for(var a in t)B3.call(t,a)&&(n[a]=t[a]);if(EE){i=EE(t);for(var o=0;o<i.length;o++)U3.call(t,i[o])&&(n[i[o]]=t[i[o]])}}return n};const H3=Sc(j3);/*!
 * @pixi/polyfill - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */typeof globalThis>"u"&&(typeof self<"u"?self.globalThis=self:typeof global<"u"&&(global.globalThis=global));globalThis.Promise||(globalThis.Promise=rt);Object.assign||(Object.assign=H3);var V3=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(globalThis.performance&&globalThis.performance.now)){var z3=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-z3}}var ud=Date.now(),bE=["ms","moz","webkit","o"];for(var ld=0;ld<bE.length&&!globalThis.requestAnimationFrame;++ld){var hd=bE[ld];globalThis.requestAnimationFrame=globalThis[hd+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[hd+"CancelAnimationFrame"]||globalThis[hd+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(r){if(typeof r!="function")throw new TypeError(r+"is not a function");var e=Date.now(),t=V3+ud-e;return t<0&&(t=0),ud=e,globalThis.self.setTimeout(function(){ud=Date.now(),r(performance.now())},t)});globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(r){return clearTimeout(r)});Math.sign||(Math.sign=function(e){return e=Number(e),e===0||isNaN(e)?e:e>0?1:-1});Number.isInteger||(Number.isInteger=function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e});globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array);globalThis.Float32Array||(globalThis.Float32Array=Array);globalThis.Uint32Array||(globalThis.Uint32Array=Array);globalThis.Uint16Array||(globalThis.Uint16Array=Array);globalThis.Uint8Array||(globalThis.Uint8Array=Array);globalThis.Int32Array||(globalThis.Int32Array=Array);/*!
 * @pixi/constants - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var rn;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(rn||(rn={}));var pa;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(pa||(pa={}));var lu;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(lu||(lu={}));var he;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(he||(he={}));var pr;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(pr||(pr={}));var Z;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Z||(Z={}));var hi;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(hi||(hi={}));var ue;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(ue||(ue={}));var hu;(function(r){r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT"})(hu||(hu={}));var Mr;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(Mr||(Mr={}));var Fr;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Fr||(Fr={}));var xr;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL"})(xr||(xr={}));var Tr;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Tr||(Tr={}));var fr;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(fr||(fr={}));var cu;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(cu||(cu={}));var $t;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})($t||($t={}));var at;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR"})(at||(at={}));var Fg;(function(r){r[r.RED=1]="RED",r[r.GREEN=2]="GREEN",r[r.BLUE=4]="BLUE",r[r.ALPHA=8]="ALPHA"})(Fg||(Fg={}));var $e;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})($e||($e={}));var Br;(function(r){r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Br||(Br={}));/*!
 * @pixi/settings - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var eA={createCanvas:function(r,e){var t=document.createElement("canvas");return t.width=r,t.height=e,t},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var r;return(r=document.baseURI)!==null&&r!==void 0?r:window.location.href},fetch:function(r,e){return fetch(r,e)}},cd=/iPhone/i,SE=/iPod/i,wE=/iPad/i,CE=/\biOS-universal(?:.+)Mac\b/i,fd=/\bAndroid(?:.+)Mobile\b/i,IE=/Android/i,Is=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Cl=/Silk/i,un=/Windows Phone/i,PE=/\bWindows(?:.+)ARM\b/i,AE=/BlackBerry/i,RE=/BB10/i,OE=/Opera Mini/i,ME=/\b(CriOS|Chrome)(?:.+)Mobile/i,DE=/Mobile(?:.+)Firefox\b/i,LE=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function X3(r){return function(e){return e.test(r)}}function $3(r){var e={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?e.userAgent=r:r&&r.userAgent&&(e={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var t=e.userAgent,n=t.split("[FBAN");typeof n[1]<"u"&&(t=n[0]),n=t.split("Twitter"),typeof n[1]<"u"&&(t=n[0]);var i=X3(t),s={apple:{phone:i(cd)&&!i(un),ipod:i(SE),tablet:!i(cd)&&(i(wE)||LE(e))&&!i(un),universal:i(CE),device:(i(cd)||i(SE)||i(wE)||i(CE)||LE(e))&&!i(un)},amazon:{phone:i(Is),tablet:!i(Is)&&i(Cl),device:i(Is)||i(Cl)},android:{phone:!i(un)&&i(Is)||!i(un)&&i(fd),tablet:!i(un)&&!i(Is)&&!i(fd)&&(i(Cl)||i(IE)),device:!i(un)&&(i(Is)||i(Cl)||i(fd)||i(IE))||i(/\bokhttp\b/i)},windows:{phone:i(un),tablet:i(PE),device:i(un)||i(PE)},other:{blackberry:i(AE),blackberry10:i(RE),opera:i(OE),firefox:i(DE),chrome:i(ME),device:i(AE)||i(RE)||i(OE)||i(DE)||i(ME)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}var vr=$3(globalThis.navigator);function W3(){return!vr.apple.device}function Y3(r){var e=!0;if(vr.tablet||vr.phone){if(vr.apple.device){var t=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(t){var n=parseInt(t[1],10);n<11&&(e=!1)}}if(vr.android.device){var t=navigator.userAgent.match(/Android\s([0-9.]*)/);if(t){var n=parseInt(t[1],10);n<7&&(e=!1)}}}return e?r:4}var te={ADAPTER:eA,MIPMAP_TEXTURES:xr.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:$e.NONE,SPRITE_MAX_TEXTURES:Y3(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,width:800,height:600,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,antialias:!1,preserveDrawingBuffer:!1},GC_MODE:cu.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:Fr.CLAMP,SCALE_MODE:Mr.LINEAR,PRECISION_VERTEX:$t.HIGH,PRECISION_FRAGMENT:vr.apple.device?$t.HIGH:$t.MEDIUM,CAN_UPLOAD_SAME_BUFFER:W3(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},tA={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(u,l,h){this.fn=u,this.context=l,this.once=h||!1}function s(u,l,h,c,f){if(typeof h!="function")throw new TypeError("The listener must be a function");var p=new i(h,c||u,f),v=t?t+l:l;return u._events[v]?u._events[v].fn?u._events[v]=[u._events[v],p]:u._events[v].push(p):(u._events[v]=p,u._eventsCount++),u}function a(u,l){--u._eventsCount===0?u._events=new n:delete u._events[l]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var l=[],h,c;if(this._eventsCount===0)return l;for(c in h=this._events)e.call(h,c)&&l.push(t?c.slice(1):c);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(h)):l},o.prototype.listeners=function(l){var h=t?t+l:l,c=this._events[h];if(!c)return[];if(c.fn)return[c.fn];for(var f=0,p=c.length,v=new Array(p);f<p;f++)v[f]=c[f].fn;return v},o.prototype.listenerCount=function(l){var h=t?t+l:l,c=this._events[h];return c?c.fn?1:c.length:0},o.prototype.emit=function(l,h,c,f,p,v){var g=t?t+l:l;if(!this._events[g])return!1;var m=this._events[g],y=arguments.length,x,T;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,h),!0;case 3:return m.fn.call(m.context,h,c),!0;case 4:return m.fn.call(m.context,h,c,f),!0;case 5:return m.fn.call(m.context,h,c,f,p),!0;case 6:return m.fn.call(m.context,h,c,f,p,v),!0}for(T=1,x=new Array(y-1);T<y;T++)x[T-1]=arguments[T];m.fn.apply(m.context,x)}else{var E=m.length,b;for(T=0;T<E;T++)switch(m[T].once&&this.removeListener(l,m[T].fn,void 0,!0),y){case 1:m[T].fn.call(m[T].context);break;case 2:m[T].fn.call(m[T].context,h);break;case 3:m[T].fn.call(m[T].context,h,c);break;case 4:m[T].fn.call(m[T].context,h,c,f);break;default:if(!x)for(b=1,x=new Array(y-1);b<y;b++)x[b-1]=arguments[b];m[T].fn.apply(m[T].context,x)}}return!0},o.prototype.on=function(l,h,c){return s(this,l,h,c,!1)},o.prototype.once=function(l,h,c){return s(this,l,h,c,!0)},o.prototype.removeListener=function(l,h,c,f){var p=t?t+l:l;if(!this._events[p])return this;if(!h)return a(this,p),this;var v=this._events[p];if(v.fn)v.fn===h&&(!f||v.once)&&(!c||v.context===c)&&a(this,p);else{for(var g=0,m=[],y=v.length;g<y;g++)(v[g].fn!==h||f&&!v[g].once||c&&v[g].context!==c)&&m.push(v[g]);m.length?this._events[p]=m.length===1?m[0]:m:a(this,p)}return this},o.prototype.removeAllListeners=function(l){var h;return l?(h=t?t+l:l,this._events[h]&&a(this,h)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o})(tA);var q3=tA.exports;const jr=Sc(q3);var t0={exports:{}};t0.exports=$c;t0.exports.default=$c;function $c(r,e,t){t=t||2;var n=e&&e.length,i=n?e[0]*t:r.length,s=rA(r,0,i,t,!0),a=[];if(!s||s.next===s.prev)return a;var o,u,l,h,c,f,p;if(n&&(s=eG(r,e,s,t)),r.length>80*t){o=l=r[0],u=h=r[1];for(var v=t;v<i;v+=t)c=r[v],f=r[v+1],c<o&&(o=c),f<u&&(u=f),c>l&&(l=c),f>h&&(h=f);p=Math.max(l-o,h-u),p=p!==0?32767/p:0}return fu(s,a,t,o,u,p,0),a}function rA(r,e,t,n,i){var s,a;if(i===kg(r,e,t,n)>0)for(s=e;s<t;s+=n)a=NE(s,r[s],r[s+1],a);else for(s=t-n;s>=e;s-=n)a=NE(s,r[s],r[s+1],a);return a&&Wc(a,a.next)&&(pu(a),a=a.next),a}function ps(r,e){if(!r)return r;e||(e=r);var t=r,n;do if(n=!1,!t.steiner&&(Wc(t,t.next)||Qe(t.prev,t,t.next)===0)){if(pu(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function fu(r,e,t,n,i,s,a){if(r){!a&&s&&sG(r,n,i,s);for(var o=r,u,l;r.prev!==r.next;){if(u=r.prev,l=r.next,s?J3(r,n,i,s):K3(r)){e.push(u.i/t|0),e.push(r.i/t|0),e.push(l.i/t|0),pu(r),r=l.next,o=l.next;continue}if(r=l,r===o){a?a===1?(r=Z3(ps(r),e,t),fu(r,e,t,n,i,s,2)):a===2&&Q3(r,e,t,n,i,s):fu(ps(r),e,t,n,i,s,1);break}}}}function K3(r){var e=r.prev,t=r,n=r.next;if(Qe(e,t,n)>=0)return!1;for(var i=e.x,s=t.x,a=n.x,o=e.y,u=t.y,l=n.y,h=i<s?i<a?i:a:s<a?s:a,c=o<u?o<l?o:l:u<l?u:l,f=i>s?i>a?i:a:s>a?s:a,p=o>u?o>l?o:l:u>l?u:l,v=n.next;v!==e;){if(v.x>=h&&v.x<=f&&v.y>=c&&v.y<=p&&Ys(i,o,s,u,a,l,v.x,v.y)&&Qe(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function J3(r,e,t,n){var i=r.prev,s=r,a=r.next;if(Qe(i,s,a)>=0)return!1;for(var o=i.x,u=s.x,l=a.x,h=i.y,c=s.y,f=a.y,p=o<u?o<l?o:l:u<l?u:l,v=h<c?h<f?h:f:c<f?c:f,g=o>u?o>l?o:l:u>l?u:l,m=h>c?h>f?h:f:c>f?c:f,y=Bg(p,v,e,t,n),x=Bg(g,m,e,t,n),T=r.prevZ,E=r.nextZ;T&&T.z>=y&&E&&E.z<=x;){if(T.x>=p&&T.x<=g&&T.y>=v&&T.y<=m&&T!==i&&T!==a&&Ys(o,h,u,c,l,f,T.x,T.y)&&Qe(T.prev,T,T.next)>=0||(T=T.prevZ,E.x>=p&&E.x<=g&&E.y>=v&&E.y<=m&&E!==i&&E!==a&&Ys(o,h,u,c,l,f,E.x,E.y)&&Qe(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;T&&T.z>=y;){if(T.x>=p&&T.x<=g&&T.y>=v&&T.y<=m&&T!==i&&T!==a&&Ys(o,h,u,c,l,f,T.x,T.y)&&Qe(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;E&&E.z<=x;){if(E.x>=p&&E.x<=g&&E.y>=v&&E.y<=m&&E!==i&&E!==a&&Ys(o,h,u,c,l,f,E.x,E.y)&&Qe(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function Z3(r,e,t){var n=r;do{var i=n.prev,s=n.next.next;!Wc(i,s)&&nA(i,n,n.next,s)&&du(i,s)&&du(s,i)&&(e.push(i.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),pu(n),pu(n.next),n=r=s),n=n.next}while(n!==r);return ps(n)}function Q3(r,e,t,n,i,s){var a=r;do{for(var o=a.next.next;o!==a.prev;){if(a.i!==o.i&&uG(a,o)){var u=iA(a,o);a=ps(a,a.next),u=ps(u,u.next),fu(a,e,t,n,i,s,0),fu(u,e,t,n,i,s,0);return}o=o.next}a=a.next}while(a!==r)}function eG(r,e,t,n){var i=[],s,a,o,u,l;for(s=0,a=e.length;s<a;s++)o=e[s]*n,u=s<a-1?e[s+1]*n:r.length,l=rA(r,o,u,n,!1),l===l.next&&(l.steiner=!0),i.push(oG(l));for(i.sort(tG),s=0;s<i.length;s++)t=rG(i[s],t);return t}function tG(r,e){return r.x-e.x}function rG(r,e){var t=nG(r,e);if(!t)return e;var n=iA(t,r);return ps(n,n.next),ps(t,t.next)}function nG(r,e){var t=e,n=r.x,i=r.y,s=-1/0,a;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){var o=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(o<=n&&o>s&&(s=o,a=t.x<t.next.x?t:t.next,o===n))return a}t=t.next}while(t!==e);if(!a)return null;var u=a,l=a.x,h=a.y,c=1/0,f;t=a;do n>=t.x&&t.x>=l&&n!==t.x&&Ys(i<h?n:s,i,l,h,i<h?s:n,i,t.x,t.y)&&(f=Math.abs(i-t.y)/(n-t.x),du(t,r)&&(f<c||f===c&&(t.x>a.x||t.x===a.x&&iG(a,t)))&&(a=t,c=f)),t=t.next;while(t!==u);return a}function iG(r,e){return Qe(r.prev,r,e.prev)<0&&Qe(e.next,r,r.next)<0}function sG(r,e,t,n){var i=r;do i.z===0&&(i.z=Bg(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,aG(i)}function aG(r){var e,t,n,i,s,a,o,u,l=1;do{for(t=r,r=null,s=null,a=0;t;){for(a++,n=t,o=0,e=0;e<l&&(o++,n=n.nextZ,!!n);e++);for(u=l;o>0||u>0&&n;)o!==0&&(u===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,o--):(i=n,n=n.nextZ,u--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;t=n}s.nextZ=null,l*=2}while(a>1);return r}function Bg(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function oG(r){var e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function Ys(r,e,t,n,i,s,a,o){return(i-a)*(e-o)>=(r-a)*(s-o)&&(r-a)*(n-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(i-a)*(n-o)}function uG(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!lG(r,e)&&(du(r,e)&&du(e,r)&&hG(r,e)&&(Qe(r.prev,r,e.prev)||Qe(r,e.prev,e))||Wc(r,e)&&Qe(r.prev,r,r.next)>0&&Qe(e.prev,e,e.next)>0)}function Qe(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function Wc(r,e){return r.x===e.x&&r.y===e.y}function nA(r,e,t,n){var i=Pl(Qe(r,e,t)),s=Pl(Qe(r,e,n)),a=Pl(Qe(t,n,r)),o=Pl(Qe(t,n,e));return!!(i!==s&&a!==o||i===0&&Il(r,t,e)||s===0&&Il(r,n,e)||a===0&&Il(t,r,n)||o===0&&Il(t,e,n))}function Il(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function Pl(r){return r>0?1:r<0?-1:0}function lG(r,e){var t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&nA(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function du(r,e){return Qe(r.prev,r,r.next)<0?Qe(r,e,r.next)>=0&&Qe(r,r.prev,e)>=0:Qe(r,e,r.prev)<0||Qe(r,r.next,e)<0}function hG(r,e){var t=r,n=!1,i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function iA(r,e){var t=new Ug(r.i,r.x,r.y),n=new Ug(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function NE(r,e,t,n){var i=new Ug(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function pu(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Ug(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}$c.deviation=function(r,e,t,n){var i=e&&e.length,s=i?e[0]*t:r.length,a=Math.abs(kg(r,0,s,t));if(i)for(var o=0,u=e.length;o<u;o++){var l=e[o]*t,h=o<u-1?e[o+1]*t:r.length;a-=Math.abs(kg(r,l,h,t))}var c=0;for(o=0;o<n.length;o+=3){var f=n[o]*t,p=n[o+1]*t,v=n[o+2]*t;c+=Math.abs((r[f]-r[v])*(r[p+1]-r[f+1])-(r[f]-r[p])*(r[v+1]-r[f+1]))}return a===0&&c===0?0:Math.abs((c-a)/a)};function kg(r,e,t,n){for(var i=0,s=e,a=t-n;s<t;s+=n)i+=(r[a]-r[s])*(r[s+1]+r[a+1]),a=s;return i}$c.flatten=function(r){for(var e=r[0][0].length,t={vertices:[],holes:[],dimensions:e},n=0,i=0;i<r.length;i++){for(var s=0;s<r[i].length;s++)for(var a=0;a<e;a++)t.vertices.push(r[i][s][a]);i>0&&(n+=r[i-1].length,t.holes.push(n))}return t};var cG=t0.exports;const Yc=Sc(cG);var Da={},lc={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */lc.exports;(function(r,e){(function(t){var n=e&&!e.nodeType&&e,i=r&&!r.nodeType&&r,s=typeof zi=="object"&&zi;(s.global===s||s.window===s||s.self===s)&&(t=s);var a,o=2147483647,u=36,l=1,h=26,c=38,f=700,p=72,v=128,g="-",m=/^xn--/,y=/[^\x20-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=u-l,b=Math.floor,w=String.fromCharCode,C;function O(N){throw new RangeError(T[N])}function R(N,U){for(var q=N.length,Q=[];q--;)Q[q]=U(N[q]);return Q}function I(N,U){var q=N.split("@"),Q="";q.length>1&&(Q=q[0]+"@",N=q[1]),N=N.replace(x,".");var ne=N.split("."),de=R(ne,U).join(".");return Q+de}function D(N){for(var U=[],q=0,Q=N.length,ne,de;q<Q;)ne=N.charCodeAt(q++),ne>=55296&&ne<=56319&&q<Q?(de=N.charCodeAt(q++),(de&64512)==56320?U.push(((ne&1023)<<10)+(de&1023)+65536):(U.push(ne),q--)):U.push(ne);return U}function F(N){return R(N,function(U){var q="";return U>65535&&(U-=65536,q+=w(U>>>10&1023|55296),U=56320|U&1023),q+=w(U),q}).join("")}function j(N){return N-48<10?N-22:N-65<26?N-65:N-97<26?N-97:u}function z(N,U){return N+22+75*(N<26)-((U!=0)<<5)}function $(N,U,q){var Q=0;for(N=q?b(N/f):N>>1,N+=b(N/U);N>E*h>>1;Q+=u)N=b(N/E);return b(Q+(E+1)*N/(N+c))}function H(N){var U=[],q=N.length,Q,ne=0,de=v,ge=p,oe,Ee,ke,Je,Me,Be,Ge,be,Et;for(oe=N.lastIndexOf(g),oe<0&&(oe=0),Ee=0;Ee<oe;++Ee)N.charCodeAt(Ee)>=128&&O("not-basic"),U.push(N.charCodeAt(Ee));for(ke=oe>0?oe+1:0;ke<q;){for(Je=ne,Me=1,Be=u;ke>=q&&O("invalid-input"),Ge=j(N.charCodeAt(ke++)),(Ge>=u||Ge>b((o-ne)/Me))&&O("overflow"),ne+=Ge*Me,be=Be<=ge?l:Be>=ge+h?h:Be-ge,!(Ge<be);Be+=u)Et=u-be,Me>b(o/Et)&&O("overflow"),Me*=Et;Q=U.length+1,ge=$(ne-Je,Q,Je==0),b(ne/Q)>o-de&&O("overflow"),de+=b(ne/Q),ne%=Q,U.splice(ne++,0,de)}return F(U)}function Y(N){var U,q,Q,ne,de,ge,oe,Ee,ke,Je,Me,Be=[],Ge,be,Et,Ct;for(N=D(N),Ge=N.length,U=v,q=0,de=p,ge=0;ge<Ge;++ge)Me=N[ge],Me<128&&Be.push(w(Me));for(Q=ne=Be.length,ne&&Be.push(g);Q<Ge;){for(oe=o,ge=0;ge<Ge;++ge)Me=N[ge],Me>=U&&Me<oe&&(oe=Me);for(be=Q+1,oe-U>b((o-q)/be)&&O("overflow"),q+=(oe-U)*be,U=oe,ge=0;ge<Ge;++ge)if(Me=N[ge],Me<U&&++q>o&&O("overflow"),Me==U){for(Ee=q,ke=u;Je=ke<=de?l:ke>=de+h?h:ke-de,!(Ee<Je);ke+=u)Ct=Ee-Je,Et=u-Je,Be.push(w(z(Je+Ct%Et,0))),Ee=b(Ct/Et);Be.push(w(z(Ee,0))),de=$(q,be,Q==ne),q=0,++Q}++q,++U}return Be.join("")}function L(N){return I(N,function(U){return m.test(U)?H(U.slice(4).toLowerCase()):U})}function B(N){return I(N,function(U){return y.test(U)?"xn--"+Y(U):U})}if(a={version:"1.4.1",ucs2:{decode:D,encode:F},decode:H,encode:Y,toASCII:B,toUnicode:L},n&&i)if(r.exports==n)i.exports=a;else for(C in a)a.hasOwnProperty(C)&&(n[C]=a[C]);else t.punycode=a})(zi)})(lc,lc.exports);var fG=lc.exports,dG=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==i||a.enumerable!==!0)return!1}return!0},FE=typeof Symbol<"u"&&Symbol,pG=dG,vG=function(){return typeof FE!="function"||typeof Symbol!="function"||typeof FE("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:pG()},mG="Function.prototype.bind called on incompatible ",dd=Array.prototype.slice,gG=Object.prototype.toString,yG="[object Function]",_G=function(e){var t=this;if(typeof t!="function"||gG.call(t)!==yG)throw new TypeError(mG+t);for(var n=dd.call(arguments,1),i,s=function(){if(this instanceof i){var h=t.apply(this,n.concat(dd.call(arguments)));return Object(h)===h?h:this}else return t.apply(e,n.concat(dd.call(arguments)))},a=Math.max(0,t.length-n.length),o=[],u=0;u<a;u++)o.push("$"+u);if(i=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var l=function(){};l.prototype=t.prototype,i.prototype=new l,l.prototype=null}return i},xG=_G,r0=Function.prototype.bind||xG,TG=r0,EG=TG.call(Function.call,Object.prototype.hasOwnProperty),Se,va=SyntaxError,sA=Function,ia=TypeError,pd=function(r){try{return sA('"use strict"; return ('+r+").constructor;")()}catch{}},es=Object.getOwnPropertyDescriptor;if(es)try{es({},"")}catch{es=null}var vd=function(){throw new ia},bG=es?function(){try{return arguments.callee,vd}catch{try{return es(arguments,"callee").get}catch{return vd}}}():vd,Ps=vG(),Wr=Object.getPrototypeOf||function(r){return r.__proto__},Ls={},SG=typeof Uint8Array>"u"?Se:Wr(Uint8Array),ts={"%AggregateError%":typeof AggregateError>"u"?Se:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Se:ArrayBuffer,"%ArrayIteratorPrototype%":Ps?Wr([][Symbol.iterator]()):Se,"%AsyncFromSyncIteratorPrototype%":Se,"%AsyncFunction%":Ls,"%AsyncGenerator%":Ls,"%AsyncGeneratorFunction%":Ls,"%AsyncIteratorPrototype%":Ls,"%Atomics%":typeof Atomics>"u"?Se:Atomics,"%BigInt%":typeof BigInt>"u"?Se:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Se:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Se:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Se:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Se:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Se:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Se:FinalizationRegistry,"%Function%":sA,"%GeneratorFunction%":Ls,"%Int8Array%":typeof Int8Array>"u"?Se:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Se:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Se:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ps?Wr(Wr([][Symbol.iterator]())):Se,"%JSON%":typeof JSON=="object"?JSON:Se,"%Map%":typeof Map>"u"?Se:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ps?Se:Wr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Se:Promise,"%Proxy%":typeof Proxy>"u"?Se:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Se:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Se:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ps?Se:Wr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Se:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ps?Wr(""[Symbol.iterator]()):Se,"%Symbol%":Ps?Symbol:Se,"%SyntaxError%":va,"%ThrowTypeError%":bG,"%TypedArray%":SG,"%TypeError%":ia,"%Uint8Array%":typeof Uint8Array>"u"?Se:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Se:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Se:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Se:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Se:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Se:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Se:WeakSet};try{null.error}catch(r){var wG=Wr(Wr(r));ts["%Error.prototype%"]=wG}var CG=function r(e){var t;if(e==="%AsyncFunction%")t=pd("async function () {}");else if(e==="%GeneratorFunction%")t=pd("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=pd("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=r("%AsyncGenerator%");i&&(t=Wr(i.prototype))}return ts[e]=t,t},BE={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Wu=r0,hc=EG,IG=Wu.call(Function.call,Array.prototype.concat),PG=Wu.call(Function.apply,Array.prototype.splice),UE=Wu.call(Function.call,String.prototype.replace),cc=Wu.call(Function.call,String.prototype.slice),AG=Wu.call(Function.call,RegExp.prototype.exec),RG=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,OG=/\\(\\)?/g,MG=function(e){var t=cc(e,0,1),n=cc(e,-1);if(t==="%"&&n!=="%")throw new va("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new va("invalid intrinsic syntax, expected opening `%`");var i=[];return UE(e,RG,function(s,a,o,u){i[i.length]=o?UE(u,OG,"$1"):a||s}),i},DG=function(e,t){var n=e,i;if(hc(BE,n)&&(i=BE[n],n="%"+i[0]+"%"),hc(ts,n)){var s=ts[n];if(s===Ls&&(s=CG(n)),typeof s>"u"&&!t)throw new ia("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new va("intrinsic "+e+" does not exist!")},n0=function(e,t){if(typeof e!="string"||e.length===0)throw new ia("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new ia('"allowMissing" argument must be a boolean');if(AG(/^%?[^%]*%?$/,e)===null)throw new va("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=MG(e),i=n.length>0?n[0]:"",s=DG("%"+i+"%",t),a=s.name,o=s.value,u=!1,l=s.alias;l&&(i=l[0],PG(n,IG([0,1],l)));for(var h=1,c=!0;h<n.length;h+=1){var f=n[h],p=cc(f,0,1),v=cc(f,-1);if((p==='"'||p==="'"||p==="`"||v==='"'||v==="'"||v==="`")&&p!==v)throw new va("property names with quotes must have matching quotes");if((f==="constructor"||!c)&&(u=!0),i+="."+f,a="%"+i+"%",hc(ts,a))o=ts[a];else if(o!=null){if(!(f in o)){if(!t)throw new ia("base intrinsic for "+e+" exists, but the property is not available.");return}if(es&&h+1>=n.length){var g=es(o,f);c=!!g,c&&"get"in g&&!("originalValue"in g.get)?o=g.get:o=o[f]}else c=hc(o,f),o=o[f];c&&!u&&(ts[a]=o)}}return o},aA={exports:{}};(function(r){var e=r0,t=n0,n=t("%Function.prototype.apply%"),i=t("%Function.prototype.call%"),s=t("%Reflect.apply%",!0)||e.call(i,n),a=t("%Object.getOwnPropertyDescriptor%",!0),o=t("%Object.defineProperty%",!0),u=t("%Math.max%");if(o)try{o({},"a",{value:1})}catch{o=null}r.exports=function(c){var f=s(e,i,arguments);if(a&&o){var p=a(f,"length");p.configurable&&o(f,"length",{value:1+u(0,c.length-(arguments.length-1))})}return f};var l=function(){return s(e,n,arguments)};o?o(r.exports,"apply",{value:l}):r.exports.apply=l})(aA);var LG=aA.exports,oA=n0,uA=LG,NG=uA(oA("String.prototype.indexOf")),FG=function(e,t){var n=oA(e,!!t);return typeof n=="function"&&NG(e,".prototype.")>-1?uA(n):n};const BG={},UG=Object.freeze(Object.defineProperty({__proto__:null,default:BG},Symbol.toStringTag,{value:"Module"})),kG=Du(UG);var i0=typeof Map=="function"&&Map.prototype,md=Object.getOwnPropertyDescriptor&&i0?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,fc=i0&&md&&typeof md.get=="function"?md.get:null,kE=i0&&Map.prototype.forEach,s0=typeof Set=="function"&&Set.prototype,gd=Object.getOwnPropertyDescriptor&&s0?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,dc=s0&&gd&&typeof gd.get=="function"?gd.get:null,GE=s0&&Set.prototype.forEach,GG=typeof WeakMap=="function"&&WeakMap.prototype,Oo=GG?WeakMap.prototype.has:null,jG=typeof WeakSet=="function"&&WeakSet.prototype,Mo=jG?WeakSet.prototype.has:null,HG=typeof WeakRef=="function"&&WeakRef.prototype,jE=HG?WeakRef.prototype.deref:null,VG=Boolean.prototype.valueOf,zG=Object.prototype.toString,XG=Function.prototype.toString,$G=String.prototype.match,a0=String.prototype.slice,Jn=String.prototype.replace,WG=String.prototype.toUpperCase,HE=String.prototype.toLowerCase,lA=RegExp.prototype.test,VE=Array.prototype.concat,Yr=Array.prototype.join,YG=Array.prototype.slice,zE=Math.floor,Gg=typeof BigInt=="function"?BigInt.prototype.valueOf:null,yd=Object.getOwnPropertySymbols,jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,ma=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Nt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===ma||"symbol")?Symbol.toStringTag:null,hA=Object.prototype.propertyIsEnumerable,XE=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function $E(r,e){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||lA.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var n=r<0?-zE(-r):zE(r);if(n!==r){var i=String(n),s=a0.call(e,i.length+1);return Jn.call(i,t,"$&_")+"."+Jn.call(Jn.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Jn.call(e,t,"$&_")}var Hg=kG,WE=Hg.custom,YE=fA(WE)?WE:null,qG=function r(e,t,n,i){var s=t||{};if(jn(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(jn(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=jn(s,"customInspect")?s.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(jn(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(jn(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var o=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return pA(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var u=String(e);return o?$E(e,u):u}if(typeof e=="bigint"){var l=String(e)+"n";return o?$E(e,l):l}var h=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=h&&h>0&&typeof e=="object")return Vg(e)?"[Array]":"[Object]";var c=d4(s,n);if(typeof i>"u")i=[];else if(dA(i,e)>=0)return"[Circular]";function f(j,z,$){if(z&&(i=YG.call(i),i.push(z)),$){var H={depth:s.depth};return jn(s,"quoteStyle")&&(H.quoteStyle=s.quoteStyle),r(j,H,n+1,i)}return r(j,s,n+1,i)}if(typeof e=="function"&&!qE(e)){var p=i4(e),v=Al(e,f);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(v.length>0?" { "+Yr.call(v,", ")+" }":"")}if(fA(e)){var g=ma?Jn.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):jg.call(e);return typeof e=="object"&&!ma?Ja(g):g}if(h4(e)){for(var m="<"+HE.call(String(e.nodeName)),y=e.attributes||[],x=0;x<y.length;x++)m+=" "+y[x].name+"="+cA(KG(y[x].value),"double",s);return m+=">",e.childNodes&&e.childNodes.length&&(m+="..."),m+="</"+HE.call(String(e.nodeName))+">",m}if(Vg(e)){if(e.length===0)return"[]";var T=Al(e,f);return c&&!f4(T)?"["+zg(T,c)+"]":"[ "+Yr.call(T,", ")+" ]"}if(ZG(e)){var E=Al(e,f);return!("cause"in Error.prototype)&&"cause"in e&&!hA.call(e,"cause")?"{ ["+String(e)+"] "+Yr.call(VE.call("[cause]: "+f(e.cause),E),", ")+" }":E.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Yr.call(E,", ")+" }"}if(typeof e=="object"&&a){if(YE&&typeof e[YE]=="function"&&Hg)return Hg(e,{depth:h-n});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(s4(e)){var b=[];return kE&&kE.call(e,function(j,z){b.push(f(z,e,!0)+" => "+f(j,e))}),KE("Map",fc.call(e),b,c)}if(u4(e)){var w=[];return GE&&GE.call(e,function(j){w.push(f(j,e))}),KE("Set",dc.call(e),w,c)}if(a4(e))return _d("WeakMap");if(l4(e))return _d("WeakSet");if(o4(e))return _d("WeakRef");if(e4(e))return Ja(f(Number(e)));if(r4(e))return Ja(f(Gg.call(e)));if(t4(e))return Ja(VG.call(e));if(QG(e))return Ja(f(String(e)));if(!JG(e)&&!qE(e)){var C=Al(e,f),O=XE?XE(e)===Object.prototype:e instanceof Object||e.constructor===Object,R=e instanceof Object?"":"null prototype",I=!O&&Nt&&Object(e)===e&&Nt in e?a0.call(Ei(e),8,-1):R?"Object":"",D=O||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",F=D+(I||R?"["+Yr.call(VE.call([],I||[],R||[]),": ")+"] ":"");return C.length===0?F+"{}":c?F+"{"+zg(C,c)+"}":F+"{ "+Yr.call(C,", ")+" }"}return String(e)};function cA(r,e,t){var n=(t.quoteStyle||e)==="double"?'"':"'";return n+r+n}function KG(r){return Jn.call(String(r),/"/g,"&quot;")}function Vg(r){return Ei(r)==="[object Array]"&&(!Nt||!(typeof r=="object"&&Nt in r))}function JG(r){return Ei(r)==="[object Date]"&&(!Nt||!(typeof r=="object"&&Nt in r))}function qE(r){return Ei(r)==="[object RegExp]"&&(!Nt||!(typeof r=="object"&&Nt in r))}function ZG(r){return Ei(r)==="[object Error]"&&(!Nt||!(typeof r=="object"&&Nt in r))}function QG(r){return Ei(r)==="[object String]"&&(!Nt||!(typeof r=="object"&&Nt in r))}function e4(r){return Ei(r)==="[object Number]"&&(!Nt||!(typeof r=="object"&&Nt in r))}function t4(r){return Ei(r)==="[object Boolean]"&&(!Nt||!(typeof r=="object"&&Nt in r))}function fA(r){if(ma)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!jg)return!1;try{return jg.call(r),!0}catch{}return!1}function r4(r){if(!r||typeof r!="object"||!Gg)return!1;try{return Gg.call(r),!0}catch{}return!1}var n4=Object.prototype.hasOwnProperty||function(r){return r in this};function jn(r,e){return n4.call(r,e)}function Ei(r){return zG.call(r)}function i4(r){if(r.name)return r.name;var e=$G.call(XG.call(r),/^function\s*([\w$]+)/);return e?e[1]:null}function dA(r,e){if(r.indexOf)return r.indexOf(e);for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}function s4(r){if(!fc||!r||typeof r!="object")return!1;try{fc.call(r);try{dc.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function a4(r){if(!Oo||!r||typeof r!="object")return!1;try{Oo.call(r,Oo);try{Mo.call(r,Mo)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function o4(r){if(!jE||!r||typeof r!="object")return!1;try{return jE.call(r),!0}catch{}return!1}function u4(r){if(!dc||!r||typeof r!="object")return!1;try{dc.call(r);try{fc.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function l4(r){if(!Mo||!r||typeof r!="object")return!1;try{Mo.call(r,Mo);try{Oo.call(r,Oo)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function h4(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function pA(r,e){if(r.length>e.maxStringLength){var t=r.length-e.maxStringLength,n="... "+t+" more character"+(t>1?"s":"");return pA(a0.call(r,0,e.maxStringLength),e)+n}var i=Jn.call(Jn.call(r,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,c4);return cA(i,"single",e)}function c4(r){var e=r.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+WG.call(e.toString(16))}function Ja(r){return"Object("+r+")"}function _d(r){return r+" { ? }"}function KE(r,e,t,n){var i=n?zg(t,n):Yr.call(t,", ");return r+" ("+e+") {"+i+"}"}function f4(r){for(var e=0;e<r.length;e++)if(dA(r[e],`
`)>=0)return!1;return!0}function d4(r,e){var t;if(r.indent==="	")t="	";else if(typeof r.indent=="number"&&r.indent>0)t=Yr.call(Array(r.indent+1)," ");else return null;return{base:t,prev:Yr.call(Array(e+1),t)}}function zg(r,e){if(r.length===0)return"";var t=`
`+e.prev+e.base;return t+Yr.call(r,","+t)+`
`+e.prev}function Al(r,e){var t=Vg(r),n=[];if(t){n.length=r.length;for(var i=0;i<r.length;i++)n[i]=jn(r,i)?e(r[i],r):""}var s=typeof yd=="function"?yd(r):[],a;if(ma){a={};for(var o=0;o<s.length;o++)a["$"+s[o]]=s[o]}for(var u in r)jn(r,u)&&(t&&String(Number(u))===u&&u<r.length||ma&&a["$"+u]instanceof Symbol||(lA.call(/[^\w$]/,u)?n.push(e(u,r)+": "+e(r[u],r)):n.push(u+": "+e(r[u],r))));if(typeof yd=="function")for(var l=0;l<s.length;l++)hA.call(r,s[l])&&n.push("["+e(s[l])+"]: "+e(r[s[l]],r));return n}var o0=n0,La=FG,p4=qG,v4=o0("%TypeError%"),Rl=o0("%WeakMap%",!0),Ol=o0("%Map%",!0),m4=La("WeakMap.prototype.get",!0),g4=La("WeakMap.prototype.set",!0),y4=La("WeakMap.prototype.has",!0),_4=La("Map.prototype.get",!0),x4=La("Map.prototype.set",!0),T4=La("Map.prototype.has",!0),u0=function(r,e){for(var t=r,n;(n=t.next)!==null;t=n)if(n.key===e)return t.next=n.next,n.next=r.next,r.next=n,n},E4=function(r,e){var t=u0(r,e);return t&&t.value},b4=function(r,e,t){var n=u0(r,e);n?n.value=t:r.next={key:e,next:r.next,value:t}},S4=function(r,e){return!!u0(r,e)},w4=function(){var e,t,n,i={assert:function(s){if(!i.has(s))throw new v4("Side channel does not contain "+p4(s))},get:function(s){if(Rl&&s&&(typeof s=="object"||typeof s=="function")){if(e)return m4(e,s)}else if(Ol){if(t)return _4(t,s)}else if(n)return E4(n,s)},has:function(s){if(Rl&&s&&(typeof s=="object"||typeof s=="function")){if(e)return y4(e,s)}else if(Ol){if(t)return T4(t,s)}else if(n)return S4(n,s);return!1},set:function(s,a){Rl&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new Rl),g4(e,s,a)):Ol?(t||(t=new Ol),x4(t,s,a)):(n||(n={key:{},next:null}),b4(n,s,a))}};return i},C4=String.prototype.replace,I4=/%20/g,xd={RFC1738:"RFC1738",RFC3986:"RFC3986"},l0={default:xd.RFC3986,formatters:{RFC1738:function(r){return C4.call(r,I4,"+")},RFC3986:function(r){return String(r)}},RFC1738:xd.RFC1738,RFC3986:xd.RFC3986},P4=l0,Td=Object.prototype.hasOwnProperty,Vi=Array.isArray,zr=function(){for(var r=[],e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r}(),A4=function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(Vi(n)){for(var i=[],s=0;s<n.length;++s)typeof n[s]<"u"&&i.push(n[s]);t.obj[t.prop]=i}}},vA=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},R4=function r(e,t,n){if(!t)return e;if(typeof t!="object"){if(Vi(e))e.push(t);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!Td.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var i=e;return Vi(e)&&!Vi(t)&&(i=vA(e,n)),Vi(e)&&Vi(t)?(t.forEach(function(s,a){if(Td.call(e,a)){var o=e[a];o&&typeof o=="object"&&s&&typeof s=="object"?e[a]=r(o,s,n):e.push(s)}else e[a]=s}),e):Object.keys(t).reduce(function(s,a){var o=t[a];return Td.call(s,a)?s[a]=r(s[a],o,n):s[a]=o,s},i)},O4=function(e,t){return Object.keys(t).reduce(function(n,i){return n[i]=t[i],n},e)},M4=function(r,e,t){var n=r.replace(/\+/g," ");if(t==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},D4=function(e,t,n,i,s){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});for(var o="",u=0;u<a.length;++u){var l=a.charCodeAt(u);if(l===45||l===46||l===95||l===126||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||s===P4.RFC1738&&(l===40||l===41)){o+=a.charAt(u);continue}if(l<128){o=o+zr[l];continue}if(l<2048){o=o+(zr[192|l>>6]+zr[128|l&63]);continue}if(l<55296||l>=57344){o=o+(zr[224|l>>12]+zr[128|l>>6&63]+zr[128|l&63]);continue}u+=1,l=65536+((l&1023)<<10|a.charCodeAt(u)&1023),o+=zr[240|l>>18]+zr[128|l>>12&63]+zr[128|l>>6&63]+zr[128|l&63]}return o},L4=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],i=0;i<t.length;++i)for(var s=t[i],a=s.obj[s.prop],o=Object.keys(a),u=0;u<o.length;++u){var l=o[u],h=a[l];typeof h=="object"&&h!==null&&n.indexOf(h)===-1&&(t.push({obj:a,prop:l}),n.push(h))}return A4(t),e},N4=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},F4=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},B4=function(e,t){return[].concat(e,t)},U4=function(e,t){if(Vi(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(t(e[i]));return n}return t(e)},mA={arrayToObject:vA,assign:O4,combine:B4,compact:L4,decode:M4,encode:D4,isBuffer:F4,isRegExp:N4,maybeMap:U4,merge:R4},gA=w4,Th=mA,Do=l0,k4=Object.prototype.hasOwnProperty,JE={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},pn=Array.isArray,G4=Array.prototype.push,yA=function(r,e){G4.apply(r,pn(e)?e:[e])},j4=Date.prototype.toISOString,ZE=Do.default,At={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Th.encode,encodeValuesOnly:!1,format:ZE,formatter:Do.formatters[ZE],indices:!1,serializeDate:function(e){return j4.call(e)},skipNulls:!1,strictNullHandling:!1},H4=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Ed={},V4=function r(e,t,n,i,s,a,o,u,l,h,c,f,p,v,g,m){for(var y=e,x=m,T=0,E=!1;(x=x.get(Ed))!==void 0&&!E;){var b=x.get(e);if(T+=1,typeof b<"u"){if(b===T)throw new RangeError("Cyclic object value");E=!0}typeof x.get(Ed)>"u"&&(T=0)}if(typeof u=="function"?y=u(t,y):y instanceof Date?y=c(y):n==="comma"&&pn(y)&&(y=Th.maybeMap(y,function(H){return H instanceof Date?c(H):H})),y===null){if(s)return o&&!v?o(t,At.encoder,g,"key",f):t;y=""}if(H4(y)||Th.isBuffer(y)){if(o){var w=v?t:o(t,At.encoder,g,"key",f);return[p(w)+"="+p(o(y,At.encoder,g,"value",f))]}return[p(t)+"="+p(String(y))]}var C=[];if(typeof y>"u")return C;var O;if(n==="comma"&&pn(y))v&&o&&(y=Th.maybeMap(y,o)),O=[{value:y.length>0?y.join(",")||null:void 0}];else if(pn(u))O=u;else{var R=Object.keys(y);O=l?R.sort(l):R}for(var I=i&&pn(y)&&y.length===1?t+"[]":t,D=0;D<O.length;++D){var F=O[D],j=typeof F=="object"&&typeof F.value<"u"?F.value:y[F];if(!(a&&j===null)){var z=pn(y)?typeof n=="function"?n(I,F):I:I+(h?"."+F:"["+F+"]");m.set(e,T);var $=gA();$.set(Ed,m),yA(C,r(j,z,n,i,s,a,n==="comma"&&v&&pn(y)?null:o,u,l,h,c,f,p,v,g,$))}}return C},z4=function(e){if(!e)return At;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||At.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Do.default;if(typeof e.format<"u"){if(!k4.call(Do.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=Do.formatters[n],s=At.filter;return(typeof e.filter=="function"||pn(e.filter))&&(s=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:At.addQueryPrefix,allowDots:typeof e.allowDots>"u"?At.allowDots:!!e.allowDots,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:At.charsetSentinel,delimiter:typeof e.delimiter>"u"?At.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:At.encode,encoder:typeof e.encoder=="function"?e.encoder:At.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:At.encodeValuesOnly,filter:s,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:At.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:At.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:At.strictNullHandling}},X4=function(r,e){var t=r,n=z4(e),i,s;typeof n.filter=="function"?(s=n.filter,t=s("",t)):pn(n.filter)&&(s=n.filter,i=s);var a=[];if(typeof t!="object"||t===null)return"";var o;e&&e.arrayFormat in JE?o=e.arrayFormat:e&&"indices"in e?o=e.indices?"indices":"repeat":o="indices";var u=JE[o];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=u==="comma"&&e&&e.commaRoundTrip;i||(i=Object.keys(t)),n.sort&&i.sort(n.sort);for(var h=gA(),c=0;c<i.length;++c){var f=i[c];n.skipNulls&&t[f]===null||yA(a,V4(t[f],f,u,l,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,h))}var p=a.join(n.delimiter),v=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?v+="utf8=%26%2310003%3B&":v+="utf8=%E2%9C%93&"),p.length>0?v+p:""},ga=mA,Xg=Object.prototype.hasOwnProperty,$4=Array.isArray,yt={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:ga.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},W4=function(r){return r.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},_A=function(r,e){return r&&typeof r=="string"&&e.comma&&r.indexOf(",")>-1?r.split(","):r},Y4="utf8=%26%2310003%3B",q4="utf8=%E2%9C%93",K4=function(e,t){var n={__proto__:null},i=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=t.parameterLimit===1/0?void 0:t.parameterLimit,a=i.split(t.delimiter,s),o=-1,u,l=t.charset;if(t.charsetSentinel)for(u=0;u<a.length;++u)a[u].indexOf("utf8=")===0&&(a[u]===q4?l="utf-8":a[u]===Y4&&(l="iso-8859-1"),o=u,u=a.length);for(u=0;u<a.length;++u)if(u!==o){var h=a[u],c=h.indexOf("]="),f=c===-1?h.indexOf("="):c+1,p,v;f===-1?(p=t.decoder(h,yt.decoder,l,"key"),v=t.strictNullHandling?null:""):(p=t.decoder(h.slice(0,f),yt.decoder,l,"key"),v=ga.maybeMap(_A(h.slice(f+1),t),function(g){return t.decoder(g,yt.decoder,l,"value")})),v&&t.interpretNumericEntities&&l==="iso-8859-1"&&(v=W4(v)),h.indexOf("[]=")>-1&&(v=$4(v)?[v]:v),Xg.call(n,p)?n[p]=ga.combine(n[p],v):n[p]=v}return n},J4=function(r,e,t,n){for(var i=n?e:_A(e,t),s=r.length-1;s>=0;--s){var a,o=r[s];if(o==="[]"&&t.parseArrays)a=[].concat(i);else{a=t.plainObjects?Object.create(null):{};var u=o.charAt(0)==="["&&o.charAt(o.length-1)==="]"?o.slice(1,-1):o,l=parseInt(u,10);!t.parseArrays&&u===""?a={0:i}:!isNaN(l)&&o!==u&&String(l)===u&&l>=0&&t.parseArrays&&l<=t.arrayLimit?(a=[],a[l]=i):u!=="__proto__"&&(a[u]=i)}i=a}return i},Z4=function(e,t,n,i){if(e){var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,o=/(\[[^[\]]*])/g,u=n.depth>0&&a.exec(s),l=u?s.slice(0,u.index):s,h=[];if(l){if(!n.plainObjects&&Xg.call(Object.prototype,l)&&!n.allowPrototypes)return;h.push(l)}for(var c=0;n.depth>0&&(u=o.exec(s))!==null&&c<n.depth;){if(c+=1,!n.plainObjects&&Xg.call(Object.prototype,u[1].slice(1,-1))&&!n.allowPrototypes)return;h.push(u[1])}return u&&h.push("["+s.slice(u.index)+"]"),J4(h,t,n,i)}},Q4=function(e){if(!e)return yt;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset>"u"?yt.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?yt.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:yt.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:yt.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:yt.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:yt.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:yt.comma,decoder:typeof e.decoder=="function"?e.decoder:yt.decoder,delimiter:typeof e.delimiter=="string"||ga.isRegExp(e.delimiter)?e.delimiter:yt.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:yt.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:yt.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:yt.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:yt.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:yt.strictNullHandling}},ej=function(r,e){var t=Q4(e);if(r===""||r===null||typeof r>"u")return t.plainObjects?Object.create(null):{};for(var n=typeof r=="string"?K4(r,t):r,i=t.plainObjects?Object.create(null):{},s=Object.keys(n),a=0;a<s.length;++a){var o=s[a],u=Z4(o,n[o],t,typeof r=="string");i=ga.merge(i,u,t)}return t.allowSparse===!0?i:ga.compact(i)},tj=X4,rj=ej,nj=l0,ij={formats:nj,parse:rj,stringify:tj},sj=fG;function gr(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var aj=/^([a-z0-9.+-]+:)/i,oj=/:[0-9]*$/,uj=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,lj=["<",">",'"',"`"," ","\r",`
`,"	"],hj=["{","}","|","\\","^","`"].concat(lj),$g=["'"].concat(hj),QE=["%","/","?",";","#"].concat($g),e1=["/","?","#"],cj=255,t1=/^[+a-z0-9A-Z_-]{0,63}$/,fj=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,dj={javascript:!0,"javascript:":!0},Wg={javascript:!0,"javascript:":!0},sa={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Yg=ij;function Yu(r,e,t){if(r&&typeof r=="object"&&r instanceof gr)return r;var n=new gr;return n.parse(r,e,t),n}gr.prototype.parse=function(r,e,t){if(typeof r!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var n=r.indexOf("?"),i=n!==-1&&n<r.indexOf("#")?"?":"#",s=r.split(i),a=/\\/g;s[0]=s[0].replace(a,"/"),r=s.join(i);var o=r;if(o=o.trim(),!t&&r.split("#").length===1){var u=uj.exec(o);if(u)return this.path=o,this.href=o,this.pathname=u[1],u[2]?(this.search=u[2],e?this.query=Yg.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var l=aj.exec(o);if(l){l=l[0];var h=l.toLowerCase();this.protocol=h,o=o.substr(l.length)}if(t||l||o.match(/^\/\/[^@/]+@[^@/]+/)){var c=o.substr(0,2)==="//";c&&!(l&&Wg[l])&&(o=o.substr(2),this.slashes=!0)}if(!Wg[l]&&(c||l&&!sa[l])){for(var f=-1,p=0;p<e1.length;p++){var v=o.indexOf(e1[p]);v!==-1&&(f===-1||v<f)&&(f=v)}var g,m;f===-1?m=o.lastIndexOf("@"):m=o.lastIndexOf("@",f),m!==-1&&(g=o.slice(0,m),o=o.slice(m+1),this.auth=decodeURIComponent(g)),f=-1;for(var p=0;p<QE.length;p++){var v=o.indexOf(QE[p]);v!==-1&&(f===-1||v<f)&&(f=v)}f===-1&&(f=o.length),this.host=o.slice(0,f),o=o.slice(f),this.parseHost(),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y)for(var x=this.hostname.split(/\./),p=0,T=x.length;p<T;p++){var E=x[p];if(E&&!E.match(t1)){for(var b="",w=0,C=E.length;w<C;w++)E.charCodeAt(w)>127?b+="x":b+=E[w];if(!b.match(t1)){var O=x.slice(0,p),R=x.slice(p+1),I=E.match(fj);I&&(O.push(I[1]),R.unshift(I[2])),R.length&&(o="/"+R.join(".")+o),this.hostname=O.join(".");break}}}this.hostname.length>cj?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=sj.toASCII(this.hostname));var D=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+D,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),o[0]!=="/"&&(o="/"+o))}if(!dj[h])for(var p=0,T=$g.length;p<T;p++){var j=$g[p];if(o.indexOf(j)!==-1){var z=encodeURIComponent(j);z===j&&(z=escape(j)),o=o.split(j).join(z)}}var $=o.indexOf("#");$!==-1&&(this.hash=o.substr($),o=o.slice(0,$));var H=o.indexOf("?");if(H!==-1?(this.search=o.substr(H),this.query=o.substr(H+1),e&&(this.query=Yg.parse(this.query)),o=o.slice(0,H)):e&&(this.search="",this.query={}),o&&(this.pathname=o),sa[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var D=this.pathname||"",Y=this.search||"";this.path=D+Y}return this.href=this.format(),this};function pj(r){return typeof r=="string"&&(r=Yu(r)),r instanceof gr?r.format():gr.prototype.format.call(r)}gr.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var e=this.protocol||"",t=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=r+this.host:this.hostname&&(i=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=Yg.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||sa[e])&&i!==!1?(i="//"+(i||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),a&&a.charAt(0)!=="?"&&(a="?"+a),t=t.replace(/[?#]/g,function(o){return encodeURIComponent(o)}),a=a.replace("#","%23"),e+i+t+a+n};function vj(r,e){return Yu(r,!1,!0).resolve(e)}gr.prototype.resolve=function(r){return this.resolveObject(Yu(r,!1,!0)).format()};function mj(r,e){return r?Yu(r,!1,!0).resolveObject(e):e}gr.prototype.resolveObject=function(r){if(typeof r=="string"){var e=new gr;e.parse(r,!1,!0),r=e}for(var t=new gr,n=Object.keys(this),i=0;i<n.length;i++){var s=n[i];t[s]=this[s]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var a=Object.keys(r),o=0;o<a.length;o++){var u=a[o];u!=="protocol"&&(t[u]=r[u])}return sa[t.protocol]&&t.hostname&&!t.pathname&&(t.pathname="/",t.path=t.pathname),t.href=t.format(),t}if(r.protocol&&r.protocol!==t.protocol){if(!sa[r.protocol]){for(var l=Object.keys(r),h=0;h<l.length;h++){var c=l[h];t[c]=r[c]}return t.href=t.format(),t}if(t.protocol=r.protocol,!r.host&&!Wg[r.protocol]){for(var T=(r.pathname||"").split("/");T.length&&!(r.host=T.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),T[0]!==""&&T.unshift(""),T.length<2&&T.unshift(""),t.pathname=T.join("/")}else t.pathname=r.pathname;if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var f=t.pathname||"",p=t.search||"";t.path=f+p}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var v=t.pathname&&t.pathname.charAt(0)==="/",g=r.host||r.pathname&&r.pathname.charAt(0)==="/",m=g||v||t.host&&r.pathname,y=m,x=t.pathname&&t.pathname.split("/")||[],T=r.pathname&&r.pathname.split("/")||[],E=t.protocol&&!sa[t.protocol];if(E&&(t.hostname="",t.port=null,t.host&&(x[0]===""?x[0]=t.host:x.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(T[0]===""?T[0]=r.host:T.unshift(r.host)),r.host=null),m=m&&(T[0]===""||x[0]==="")),g)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,x=T;else if(T.length)x||(x=[]),x.pop(),x=x.concat(T),t.search=r.search,t.query=r.query;else if(r.search!=null){if(E){t.host=x.shift(),t.hostname=t.host;var b=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;b&&(t.auth=b.shift(),t.hostname=b.shift(),t.host=t.hostname)}return t.search=r.search,t.query=r.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!x.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var w=x.slice(-1)[0],C=(t.host||r.host||x.length>1)&&(w==="."||w==="..")||w==="",O=0,R=x.length;R>=0;R--)w=x[R],w==="."?x.splice(R,1):w===".."?(x.splice(R,1),O++):O&&(x.splice(R,1),O--);if(!m&&!y)for(;O--;O)x.unshift("..");m&&x[0]!==""&&(!x[0]||x[0].charAt(0)!=="/")&&x.unshift(""),C&&x.join("/").substr(-1)!=="/"&&x.push("");var I=x[0]===""||x[0]&&x[0].charAt(0)==="/";if(E){t.hostname=I?"":x.length?x.shift():"",t.host=t.hostname;var b=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;b&&(t.auth=b.shift(),t.hostname=b.shift(),t.host=t.hostname)}return m=m||t.host&&x.length,m&&!I&&x.unshift(""),x.length>0?t.pathname=x.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t};gr.prototype.parseHost=function(){var r=this.host,e=oj.exec(r);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)};var xA=Da.parse=Yu,gj=Da.resolve=vj;Da.resolveObject=mj;var yj=Da.format=pj;Da.Url=gr;/*!
 * @pixi/utils - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Yi={parse:xA,format:yj,resolve:gj};function wr(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}function r1(r){var e=r.split("?")[0];return e.split("#")[0]}function _j(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function xj(r,e,t){return r.replace(new RegExp(_j(e),"g"),t)}function Tj(r,e){for(var t="",n=0,i=-1,s=0,a,o=0;o<=r.length;++o){if(o<r.length)a=r.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(t.length<2||n!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var u=t.lastIndexOf("/");if(u!==t.length-1){u===-1?(t="",n=0):(t=t.slice(0,u),n=t.length-1-t.lastIndexOf("/")),i=o,s=0;continue}}else if(t.length===2||t.length===1){t="",n=0,i=o,s=0;continue}}e&&(t.length>0?t+="/..":t="..",n=2)}else t.length>0?t+="/"+r.slice(i+1,o):t=r.slice(i+1,o),n=o-i-1;i=o,s=0}else a===46&&s!==-1?++s:s=-1}return t}var TA={toPosix:function(r){return xj(r,"\\","/")},isUrl:function(r){return/^https?:/.test(this.toPosix(r))},isDataUrl:function(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},hasProtocol:function(r){return/^[^/:]+:\//.test(this.toPosix(r))},getProtocol:function(r){wr(r),r=this.toPosix(r);var e="",t=/^file:\/\/\//.exec(r),n=/^[^/:]+:\/\//.exec(r),i=/^[^/:]+:\//.exec(r);if(t||n||i){var s=(t==null?void 0:t[0])||(n==null?void 0:n[0])||(i==null?void 0:i[0]);e=s,r=r.slice(s.length)}return e},toAbsolute:function(r,e,t){if(this.isDataUrl(r))return r;var n=r1(this.toPosix(e??te.ADAPTER.getBaseUrl())),i=r1(this.toPosix(t??this.rootname(n)));if(wr(r),r=this.toPosix(r),r.startsWith("/"))return TA.join(i,r.slice(1));var s=this.isAbsolute(r)?r:this.join(n,r);return s},normalize:function(r){if(r=this.toPosix(r),wr(r),r.length===0)return".";var e="",t=r.startsWith("/");this.hasProtocol(r)&&(e=this.rootname(r),r=r.slice(e.length));var n=r.endsWith("/");return r=Tj(r,!1),r.length>0&&n&&(r+="/"),t?"/"+r:e+r},isAbsolute:function(r){return wr(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join:function(){for(var r=arguments,e,t=[],n=0;n<arguments.length;n++)t[n]=r[n];if(t.length===0)return".";for(var i,s=0;s<t.length;++s){var a=t[s];if(wr(a),a.length>0)if(i===void 0)i=a;else{var o=(e=t[s-1])!==null&&e!==void 0?e:"";this.extname(o)?i+="/../"+a:i+="/"+a}}return i===void 0?".":this.normalize(i)},dirname:function(r){if(wr(r),r.length===0)return".";r=this.toPosix(r);var e=r.charCodeAt(0),t=e===47,n=-1,i=!0,s=this.getProtocol(r),a=r;r=r.slice(s.length);for(var o=r.length-1;o>=1;--o)if(e=r.charCodeAt(o),e===47){if(!i){n=o;break}}else i=!1;return n===-1?t?"/":this.isUrl(a)?s+r:s:t&&n===1?"//":s+r.slice(0,n)},rootname:function(r){wr(r),r=this.toPosix(r);var e="";if(r.startsWith("/")?e="/":e=this.getProtocol(r),this.isUrl(r)){var t=r.indexOf("/",e.length);t!==-1?e=r.slice(0,t):e=r,e.endsWith("/")||(e+="/")}return e},basename:function(r,e){wr(r),e&&wr(e),r=this.toPosix(r);var t=0,n=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e.length===r.length&&e===r)return"";var a=e.length-1,o=-1;for(s=r.length-1;s>=0;--s){var u=r.charCodeAt(s);if(u===47){if(!i){t=s+1;break}}else o===-1&&(i=!1,o=s+1),a>=0&&(u===e.charCodeAt(a)?--a===-1&&(n=s):(a=-1,n=o))}return t===n?n=o:n===-1&&(n=r.length),r.slice(t,n)}for(s=r.length-1;s>=0;--s)if(r.charCodeAt(s)===47){if(!i){t=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":r.slice(t,n)},extname:function(r){wr(r),r=this.toPosix(r);for(var e=-1,t=0,n=-1,i=!0,s=0,a=r.length-1;a>=0;--a){var o=r.charCodeAt(a);if(o===47){if(!i){t=a+1;break}continue}n===-1&&(i=!1,n=a+1),o===46?e===-1?e=a:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===t+1?"":r.slice(e,n)},parse:function(r){wr(r);var e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;r=this.toPosix(r);var t=r.charCodeAt(0),n=this.isAbsolute(r),i;e.root=this.rootname(r),n||this.hasProtocol(r)?i=1:i=0;for(var s=-1,a=0,o=-1,u=!0,l=r.length-1,h=0;l>=i;--l){if(t=r.charCodeAt(l),t===47){if(!u){a=l+1;break}continue}o===-1&&(u=!1,o=l+1),t===46?s===-1?s=l:h!==1&&(h=1):s!==-1&&(h=-1)}return s===-1||o===-1||h===0||h===1&&s===o-1&&s===a+1?o!==-1&&(a===0&&n?e.base=e.name=r.slice(1,o):e.base=e.name=r.slice(a,o)):(a===0&&n?(e.name=r.slice(1,s),e.base=r.slice(1,o)):(e.name=r.slice(a,s),e.base=r.slice(a,o)),e.ext=r.slice(s,o)),e.dir=this.dirname(r),e},sep:"/",delimiter:":"};te.RETINA_PREFIX=/@([0-9\.]+)x/;te.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var qg=!1,n1="6.5.10";function Ej(){qg=!0}function EA(r){var e;if(!qg){if(te.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){var t=[`
 %c %c %c PixiJS `+n1+" - ✰ "+r+` ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=globalThis.console).log.apply(e,t)}else globalThis.console&&globalThis.console.log("PixiJS "+n1+" - "+r+" - http://www.pixijs.com/");qg=!0}}var bd;function bA(){return typeof bd>"u"&&(bd=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:te.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!te.ADAPTER.getWebGLRenderingContext())return!1;var t=te.ADAPTER.createCanvas(),n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),i=!!(n&&n.getContextAttributes().stencil);if(n){var s=n.getExtension("WEBGL_lose_context");s&&s.loseContext()}return n=null,i}catch{return!1}}()),bd}var bj="#f0f8ff",Sj="#faebd7",wj="#00ffff",Cj="#7fffd4",Ij="#f0ffff",Pj="#f5f5dc",Aj="#ffe4c4",Rj="#000000",Oj="#ffebcd",Mj="#0000ff",Dj="#8a2be2",Lj="#a52a2a",Nj="#deb887",Fj="#5f9ea0",Bj="#7fff00",Uj="#d2691e",kj="#ff7f50",Gj="#6495ed",jj="#fff8dc",Hj="#dc143c",Vj="#00ffff",zj="#00008b",Xj="#008b8b",$j="#b8860b",Wj="#a9a9a9",Yj="#006400",qj="#a9a9a9",Kj="#bdb76b",Jj="#8b008b",Zj="#556b2f",Qj="#ff8c00",e8="#9932cc",t8="#8b0000",r8="#e9967a",n8="#8fbc8f",i8="#483d8b",s8="#2f4f4f",a8="#2f4f4f",o8="#00ced1",u8="#9400d3",l8="#ff1493",h8="#00bfff",c8="#696969",f8="#696969",d8="#1e90ff",p8="#b22222",v8="#fffaf0",m8="#228b22",g8="#ff00ff",y8="#dcdcdc",_8="#f8f8ff",x8="#daa520",T8="#ffd700",E8="#808080",b8="#008000",S8="#adff2f",w8="#808080",C8="#f0fff0",I8="#ff69b4",P8="#cd5c5c",A8="#4b0082",R8="#fffff0",O8="#f0e68c",M8="#fff0f5",D8="#e6e6fa",L8="#7cfc00",N8="#fffacd",F8="#add8e6",B8="#f08080",U8="#e0ffff",k8="#fafad2",G8="#d3d3d3",j8="#90ee90",H8="#d3d3d3",V8="#ffb6c1",z8="#ffa07a",X8="#20b2aa",$8="#87cefa",W8="#778899",Y8="#778899",q8="#b0c4de",K8="#ffffe0",J8="#00ff00",Z8="#32cd32",Q8="#faf0e6",e6="#ff00ff",t6="#800000",r6="#66cdaa",n6="#0000cd",i6="#ba55d3",s6="#9370db",a6="#3cb371",o6="#7b68ee",u6="#00fa9a",l6="#48d1cc",h6="#c71585",c6="#191970",f6="#f5fffa",d6="#ffe4e1",p6="#ffe4b5",v6="#ffdead",m6="#000080",g6="#fdf5e6",y6="#808000",_6="#6b8e23",x6="#ffa500",T6="#ff4500",E6="#da70d6",b6="#eee8aa",S6="#98fb98",w6="#afeeee",C6="#db7093",I6="#ffefd5",P6="#ffdab9",A6="#cd853f",R6="#ffc0cb",O6="#dda0dd",M6="#b0e0e6",D6="#800080",L6="#663399",N6="#ff0000",F6="#bc8f8f",B6="#4169e1",U6="#8b4513",k6="#fa8072",G6="#f4a460",j6="#2e8b57",H6="#fff5ee",V6="#a0522d",z6="#c0c0c0",X6="#87ceeb",$6="#6a5acd",W6="#708090",Y6="#708090",q6="#fffafa",K6="#00ff7f",J6="#4682b4",Z6="#d2b48c",Q6="#008080",e5="#d8bfd8",t5="#ff6347",r5="#40e0d0",n5="#ee82ee",i5="#f5deb3",s5="#ffffff",a5="#f5f5f5",o5="#ffff00",u5="#9acd32",l5={aliceblue:bj,antiquewhite:Sj,aqua:wj,aquamarine:Cj,azure:Ij,beige:Pj,bisque:Aj,black:Rj,blanchedalmond:Oj,blue:Mj,blueviolet:Dj,brown:Lj,burlywood:Nj,cadetblue:Fj,chartreuse:Bj,chocolate:Uj,coral:kj,cornflowerblue:Gj,cornsilk:jj,crimson:Hj,cyan:Vj,darkblue:zj,darkcyan:Xj,darkgoldenrod:$j,darkgray:Wj,darkgreen:Yj,darkgrey:qj,darkkhaki:Kj,darkmagenta:Jj,darkolivegreen:Zj,darkorange:Qj,darkorchid:e8,darkred:t8,darksalmon:r8,darkseagreen:n8,darkslateblue:i8,darkslategray:s8,darkslategrey:a8,darkturquoise:o8,darkviolet:u8,deeppink:l8,deepskyblue:h8,dimgray:c8,dimgrey:f8,dodgerblue:d8,firebrick:p8,floralwhite:v8,forestgreen:m8,fuchsia:g8,gainsboro:y8,ghostwhite:_8,goldenrod:x8,gold:T8,gray:E8,green:b8,greenyellow:S8,grey:w8,honeydew:C8,hotpink:I8,indianred:P8,indigo:A8,ivory:R8,khaki:O8,lavenderblush:M8,lavender:D8,lawngreen:L8,lemonchiffon:N8,lightblue:F8,lightcoral:B8,lightcyan:U8,lightgoldenrodyellow:k8,lightgray:G8,lightgreen:j8,lightgrey:H8,lightpink:V8,lightsalmon:z8,lightseagreen:X8,lightskyblue:$8,lightslategray:W8,lightslategrey:Y8,lightsteelblue:q8,lightyellow:K8,lime:J8,limegreen:Z8,linen:Q8,magenta:e6,maroon:t6,mediumaquamarine:r6,mediumblue:n6,mediumorchid:i6,mediumpurple:s6,mediumseagreen:a6,mediumslateblue:o6,mediumspringgreen:u6,mediumturquoise:l6,mediumvioletred:h6,midnightblue:c6,mintcream:f6,mistyrose:d6,moccasin:p6,navajowhite:v6,navy:m6,oldlace:g6,olive:y6,olivedrab:_6,orange:x6,orangered:T6,orchid:E6,palegoldenrod:b6,palegreen:S6,paleturquoise:w6,palevioletred:C6,papayawhip:I6,peachpuff:P6,peru:A6,pink:R6,plum:O6,powderblue:M6,purple:D6,rebeccapurple:L6,red:N6,rosybrown:F6,royalblue:B6,saddlebrown:U6,salmon:k6,sandybrown:G6,seagreen:j6,seashell:H6,sienna:V6,silver:z6,skyblue:X6,slateblue:$6,slategray:W6,slategrey:Y6,snow:q6,springgreen:K6,steelblue:J6,tan:Z6,teal:Q6,thistle:e5,tomato:t5,turquoise:r5,violet:n5,wheat:i5,white:s5,whitesmoke:a5,yellow:o5,yellowgreen:u5};function vs(r,e){return e===void 0&&(e=[]),e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255,e}function h0(r){var e=r.toString(16);return e="000000".substring(0,6-e.length)+e,"#"+e}function c0(r){return typeof r=="string"&&(r=l5[r.toLowerCase()]||r,r[0]==="#"&&(r=r.slice(1))),parseInt(r,16)}function h5(r){return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)}function c5(){for(var r=[],e=[],t=0;t<32;t++)r[t]=t,e[t]=t;r[he.NORMAL_NPM]=he.NORMAL,r[he.ADD_NPM]=he.ADD,r[he.SCREEN_NPM]=he.SCREEN,e[he.NORMAL]=he.NORMAL_NPM,e[he.ADD]=he.ADD_NPM,e[he.SCREEN]=he.SCREEN_NPM;var n=[];return n.push(e),n.push(r),n}var f0=c5();function d0(r,e){return f0[e?1:0][r]}function SA(r,e,t,n){return t=t||new Float32Array(4),n||n===void 0?(t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e):(t[0]=r[0],t[1]=r[1],t[2]=r[2]),t[3]=e,t}function qc(r,e){if(e===1)return(e*255<<24)+r;if(e===0)return 0;var t=r>>16&255,n=r>>8&255,i=r&255;return t=t*e+.5|0,n=n*e+.5|0,i=i*e+.5|0,(e*255<<24)+(t<<16)+(n<<8)+i}function p0(r,e,t,n){return t=t||new Float32Array(4),t[0]=(r>>16&255)/255,t[1]=(r>>8&255)/255,t[2]=(r&255)/255,(n||n===void 0)&&(t[0]*=e,t[1]*=e,t[2]*=e),t[3]=e,t}function wA(r,e){e===void 0&&(e=null);var t=r*6;if(e=e||new Uint16Array(t),e.length!==t)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+t);for(var n=0,i=0;n<t;n+=6,i+=4)e[n+0]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3;return e}function Kc(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}var f5={Float32Array,Uint32Array,Int32Array,Uint8Array};function d5(r,e){for(var t=0,n=0,i={},s=0;s<r.length;s++)n+=e[s],t+=r[s].length;for(var a=new ArrayBuffer(t*4),o=null,u=0,s=0;s<r.length;s++){var l=e[s],h=r[s],c=Kc(h);i[c]||(i[c]=new f5[c](a)),o=i[c];for(var f=0;f<h.length;f++){var p=(f/l|0)*n+u,v=f%l;o[p+v]=h[f]}u+=l}return new Float32Array(a)}function vu(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function Kg(r){return!(r&r-1)&&!!r}function Jg(r){var e=(r>65535?1:0)<<4;r>>>=e;var t=(r>255?1:0)<<3;return r>>>=t,e|=t,t=(r>15?1:0)<<2,r>>>=t,e|=t,t=(r>3?1:0)<<1,r>>>=t,e|=t,e|r>>1}function rs(r,e,t){var n=r.length,i;if(!(e>=n||t===0)){t=e+t>n?n-e:t;var s=n-t;for(i=e;i<s;++i)r[i]=r[i+t];r.length=s}}function qi(r){return r===0?0:r<0?-1:1}var p5=0;function pi(){return++p5}var i1={};function kt(r,e,t){if(t===void 0&&(t=3),!i1[e]){var n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+r):(n=n.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+`
Deprecated since v`+r),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+r),console.warn(n))),i1[e]=!0}}var Zg={},Ht=Object.create(null),or=Object.create(null);function v5(){var r;for(r in Ht)Ht[r].destroy();for(r in or)or[r].destroy()}function m5(){var r;for(r in Ht)delete Ht[r];for(r in or)delete or[r]}var Qg=function(){function r(e,t,n){this.canvas=te.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=n||te.RESOLUTION,this.resize(e,t)}return r.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},r.prototype.resize=function(e,t){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(t*this.resolution)},r.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(r.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0}),r}();function CA(r){var e=r.width,t=r.height,n=r.getContext("2d",{willReadFrequently:!0}),i=n.getImageData(0,0,e,t),s=i.data,a=s.length,o={top:null,left:null,right:null,bottom:null},u=null,l,h,c;for(l=0;l<a;l+=4)s[l+3]!==0&&(h=l/4%e,c=~~(l/4/e),o.top===null&&(o.top=c),(o.left===null||h<o.left)&&(o.left=h),(o.right===null||o.right<h)&&(o.right=h+1),(o.bottom===null||o.bottom<c)&&(o.bottom=c));return o.top!==null&&(e=o.right-o.left,t=o.bottom-o.top+1,u=n.getImageData(o.left,o.top,e,t)),{height:t,width:e,data:u}}var IA=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function g5(r){var e=IA.exec(r);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}var Ml;function PA(r,e){if(e===void 0&&(e=globalThis.location),r.indexOf("data:")===0)return"";e=e||globalThis.location,Ml||(Ml=document.createElement("a")),Ml.href=r;var t=Yi.parse(Ml.href),n=!t.port&&e.port===""||t.port===e.port;return t.hostname!==e.hostname||!n||t.protocol!==e.protocol?"anonymous":""}function mu(r,e){var t=te.RETINA_PREFIX.exec(r);return t?parseFloat(t[1]):e!==void 0?e:1}const y5=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:or,CanvasRenderTarget:Qg,DATA_URI:IA,EventEmitter:jr,ProgramCache:Zg,TextureCache:Ht,clearTextureCache:m5,correctBlendMode:d0,createIndicesForQuads:wA,decomposeDataUri:g5,deprecation:kt,destroyTextureCache:v5,determineCrossOrigin:PA,earcut:Yc,getBufferType:Kc,getResolutionOfUrl:mu,hex2rgb:vs,hex2string:h0,interleaveTypedArrays:d5,isMobile:vr,isPow2:Kg,isWebGLSupported:bA,log2:Jg,nextPow2:vu,path:TA,premultiplyBlendMode:f0,premultiplyRgba:SA,premultiplyTint:qc,premultiplyTintToRgba:p0,removeItems:rs,rgb2hex:h5,sayHello:EA,sign:qi,skipHello:Ej,string2hex:c0,trimCanvas:CA,uid:pi,url:Yi},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/math - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var gu=Math.PI*2,AA=180/Math.PI,RA=Math.PI/180,vt;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(vt||(vt={}));var He=function(){function r(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this.x=0,this.y=0,this.x=e,this.y=t}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},r.prototype.copyTo=function(e){return e.set(this.x,this.y),e},r.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},r.prototype.set=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x=e,this.y=t,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r}(),Dl=[new He,new He,new He,new He],Pe=function(){function r(e,t,n,i){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=Number(e),this.y=Number(t),this.width=Number(n),this.height=Number(i),this.type=vt.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},r.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},r.prototype.contains=function(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height},r.prototype.intersects=function(e,t){if(!t){var n=this.x<e.x?e.x:this.x,i=this.right>e.right?e.right:this.right;if(i<=n)return!1;var s=this.y<e.y?e.y:this.y,a=this.bottom>e.bottom?e.bottom:this.bottom;return a>s}var o=this.left,u=this.right,l=this.top,h=this.bottom;if(u<=o||h<=l)return!1;var c=Dl[0].set(e.left,e.top),f=Dl[1].set(e.left,e.bottom),p=Dl[2].set(e.right,e.top),v=Dl[3].set(e.right,e.bottom);if(p.x<=c.x||f.y<=c.y)return!1;var g=Math.sign(t.a*t.d-t.b*t.c);if(g===0||(t.apply(c,c),t.apply(f,f),t.apply(p,p),t.apply(v,v),Math.max(c.x,f.x,p.x,v.x)<=o||Math.min(c.x,f.x,p.x,v.x)>=u||Math.max(c.y,f.y,p.y,v.y)<=l||Math.min(c.y,f.y,p.y,v.y)>=h))return!1;var m=g*(f.y-c.y),y=g*(c.x-f.x),x=m*o+y*l,T=m*u+y*l,E=m*o+y*h,b=m*u+y*h;if(Math.max(x,T,E,b)<=m*c.x+y*c.y||Math.min(x,T,E,b)>=m*v.x+y*v.y)return!1;var w=g*(c.y-p.y),C=g*(p.x-c.x),O=w*o+C*l,R=w*u+C*l,I=w*o+C*h,D=w*u+C*h;return!(Math.max(O,R,I,D)<=w*c.x+C*c.y||Math.min(O,R,I,D)>=w*v.x+C*v.y)},r.prototype.pad=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this},r.prototype.fit=function(e){var t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=i,this.height=Math.max(s-i,0),this},r.prototype.ceil=function(e,t){e===void 0&&(e=1),t===void 0&&(t=.001);var n=Math.ceil((this.x+this.width-t)*e)/e,i=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=i-this.y,this},r.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=i,this.height=s-i,this},r.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),OA=function(){function r(e,t,n){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),this.x=e,this.y=t,this.radius=n,this.type=vt.CIRC}return r.prototype.clone=function(){return new r(this.x,this.y,this.radius)},r.prototype.contains=function(e,t){if(this.radius<=0)return!1;var n=this.radius*this.radius,i=this.x-e,s=this.y-t;return i*=i,s*=s,i+s<=n},r.prototype.getBounds=function(){return new Pe(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},r.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},r}(),MA=function(){function r(e,t,n,i){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=e,this.y=t,this.width=n,this.height=i,this.type=vt.ELIP}return r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var n=(e-this.x)/this.width,i=(t-this.y)/this.height;return n*=n,i*=i,n+i<=1},r.prototype.getBounds=function(){return new Pe(this.x-this.width,this.y-this.height,this.width,this.height)},r.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),Lo=function(){function r(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];var i=Array.isArray(t[0])?t[0]:t;if(typeof i[0]!="number"){for(var s=[],a=0,o=i.length;a<o;a++)s.push(i[a].x,i[a].y);i=s}this.points=i,this.type=vt.POLY,this.closeStroke=!0}return r.prototype.clone=function(){var e=this.points.slice(),t=new r(e);return t.closeStroke=this.closeStroke,t},r.prototype.contains=function(e,t){for(var n=!1,i=this.points.length/2,s=0,a=i-1;s<i;a=s++){var o=this.points[s*2],u=this.points[s*2+1],l=this.points[a*2],h=this.points[a*2+1],c=u>t!=h>t&&e<(l-o)*((t-u)/(h-u))+o;c&&(n=!n)}return n},r.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(e,t){return e+", "+t},"")+"]")},r}(),DA=function(){function r(e,t,n,i,s){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=0),s===void 0&&(s=20),this.x=e,this.y=t,this.width=n,this.height=i,this.radius=s,this.type=vt.RREC}return r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.radius)},r.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){var n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+n&&t<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;var i=e-(this.x+n),s=t-(this.y+n),a=n*n;if(i*i+s*s<=a||(i=e-(this.x+this.width-n),i*i+s*s<=a)||(s=t-(this.y+this.height-n),i*i+s*s<=a)||(i=e-(this.x+n),i*i+s*s<=a))return!0}return!1},r.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},r}(),Ki=function(){function r(e,t,n,i){n===void 0&&(n=0),i===void 0&&(i=0),this._x=n,this._y=i,this.cb=e,this.scope=t}return r.prototype.clone=function(e,t){return e===void 0&&(e=this.cb),t===void 0&&(t=this.scope),new r(e,t,this._x,this._y)},r.prototype.set=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(e){return e.set(this._x,this._y),e},r.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},r.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),ct=function(){function r(e,t,n,i,s,a){e===void 0&&(e=1),t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=e,this.b=t,this.c=n,this.d=i,this.tx=s,this.ty=a}return r.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},r.prototype.set=function(e,t,n,i,s,a){return this.a=e,this.b=t,this.c=n,this.d=i,this.tx=s,this.ty=a,this},r.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},r.prototype.apply=function(e,t){t=t||new He;var n=e.x,i=e.y;return t.x=this.a*n+this.c*i+this.tx,t.y=this.b*n+this.d*i+this.ty,t},r.prototype.applyInverse=function(e,t){t=t||new He;var n=1/(this.a*this.d+this.c*-this.b),i=e.x,s=e.y;return t.x=this.d*n*i+-this.c*n*s+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*s+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,t},r.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},r.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},r.prototype.rotate=function(e){var t=Math.cos(e),n=Math.sin(e),i=this.a,s=this.c,a=this.tx;return this.a=i*t-this.b*n,this.b=i*n+this.b*t,this.c=s*t-this.d*n,this.d=s*n+this.d*t,this.tx=a*t-this.ty*n,this.ty=a*n+this.ty*t,this},r.prototype.append=function(e){var t=this.a,n=this.b,i=this.c,s=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*n+e.b*s,this.c=e.c*t+e.d*i,this.d=e.c*n+e.d*s,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*n+e.ty*s+this.ty,this},r.prototype.setTransform=function(e,t,n,i,s,a,o,u,l){return this.a=Math.cos(o+l)*s,this.b=Math.sin(o+l)*s,this.c=-Math.sin(o-u)*a,this.d=Math.cos(o-u)*a,this.tx=e-(n*this.a+i*this.c),this.ty=t-(n*this.b+i*this.d),this},r.prototype.prepend=function(e){var t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){var n=this.a,i=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},r.prototype.decompose=function(e){var t=this.a,n=this.b,i=this.c,s=this.d,a=e.pivot,o=-Math.atan2(-i,s),u=Math.atan2(n,t),l=Math.abs(o+u);return l<1e-5||Math.abs(gu-l)<1e-5?(e.rotation=u,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=u),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(a.x*t+a.y*i),e.position.y=this.ty+(a.x*n+a.y*s),e},r.prototype.invert=function(){var e=this.a,t=this.b,n=this.c,i=this.d,s=this.tx,a=e*i-t*n;return this.a=i/a,this.b=-t/a,this.c=-n/a,this.d=e/a,this.tx=(n*this.ty-i*s)/a,this.ty=-(e*this.ty-t*s)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var e=new r;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},r.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},r.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},r.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),Ni=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Fi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Bi=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ui=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],ey=[],LA=[],Ll=Math.sign;function _5(){for(var r=0;r<16;r++){var e=[];ey.push(e);for(var t=0;t<16;t++)for(var n=Ll(Ni[r]*Ni[t]+Bi[r]*Fi[t]),i=Ll(Fi[r]*Ni[t]+Ui[r]*Fi[t]),s=Ll(Ni[r]*Bi[t]+Bi[r]*Ui[t]),a=Ll(Fi[r]*Bi[t]+Ui[r]*Ui[t]),o=0;o<16;o++)if(Ni[o]===n&&Fi[o]===i&&Bi[o]===s&&Ui[o]===a){e.push(o);break}}for(var r=0;r<16;r++){var u=new ct;u.set(Ni[r],Fi[r],Bi[r],Ui[r],0,0),LA.push(u)}}_5();var Ye={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(r){return Ni[r]},uY:function(r){return Fi[r]},vX:function(r){return Bi[r]},vY:function(r){return Ui[r]},inv:function(r){return r&8?r&15:-r&7},add:function(r,e){return ey[r][e]},sub:function(r,e){return ey[r][Ye.inv(e)]},rotate180:function(r){return r^4},isVertical:function(r){return(r&3)===2},byDirection:function(r,e){return Math.abs(r)*2<=Math.abs(e)?e>=0?Ye.S:Ye.N:Math.abs(e)*2<=Math.abs(r)?r>0?Ye.E:Ye.W:e>0?r>0?Ye.SE:Ye.SW:r>0?Ye.NE:Ye.NW},matrixAppendRotationInv:function(r,e,t,n){t===void 0&&(t=0),n===void 0&&(n=0);var i=LA[Ye.inv(e)];i.tx=t,i.ty=n,r.append(i)}},v0=function(){function r(){this.worldTransform=new ct,this.localTransform=new ct,this.position=new Ki(this.onChange,this,0,0),this.scale=new Ki(this.onChange,this,1,1),this.pivot=new Ki(this.onChange,this,0,0),this.skew=new Ki(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},r.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var n=e.worldTransform,i=this.worldTransform;i.a=t.a*n.a+t.b*n.c,i.b=t.a*n.b+t.b*n.d,i.c=t.c*n.a+t.d*n.c,i.d=t.c*n.b+t.d*n.d,i.tx=t.tx*n.a+t.ty*n.c+n.tx,i.ty=t.tx*n.b+t.ty*n.d+n.ty,this._parentID=e._worldID,this._worldID++}},r.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r}();/*!
 * @pixi/display - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */te.SORTABLE_CHILDREN=!1;var yu=function(){function r(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return r.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},r.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},r.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?Pe.EMPTY:(e=e||new Pe(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},r.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},r.prototype.addPointMatrix=function(e,t){var n=e.a,i=e.b,s=e.c,a=e.d,o=e.tx,u=e.ty,l=n*t.x+s*t.y+o,h=i*t.x+a*t.y+u;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)},r.prototype.addQuad=function(e){var t=this.minX,n=this.minY,i=this.maxX,s=this.maxY,a=e[0],o=e[1];t=a<t?a:t,n=o<n?o:n,i=a>i?a:i,s=o>s?o:s,a=e[2],o=e[3],t=a<t?a:t,n=o<n?o:n,i=a>i?a:i,s=o>s?o:s,a=e[4],o=e[5],t=a<t?a:t,n=o<n?o:n,i=a>i?a:i,s=o>s?o:s,a=e[6],o=e[7],t=a<t?a:t,n=o<n?o:n,i=a>i?a:i,s=o>s?o:s,this.minX=t,this.minY=n,this.maxX=i,this.maxY=s},r.prototype.addFrame=function(e,t,n,i,s){this.addFrameMatrix(e.worldTransform,t,n,i,s)},r.prototype.addFrameMatrix=function(e,t,n,i,s){var a=e.a,o=e.b,u=e.c,l=e.d,h=e.tx,c=e.ty,f=this.minX,p=this.minY,v=this.maxX,g=this.maxY,m=a*t+u*n+h,y=o*t+l*n+c;f=m<f?m:f,p=y<p?y:p,v=m>v?m:v,g=y>g?y:g,m=a*i+u*n+h,y=o*i+l*n+c,f=m<f?m:f,p=y<p?y:p,v=m>v?m:v,g=y>g?y:g,m=a*t+u*s+h,y=o*t+l*s+c,f=m<f?m:f,p=y<p?y:p,v=m>v?m:v,g=y>g?y:g,m=a*i+u*s+h,y=o*i+l*s+c,f=m<f?m:f,p=y<p?y:p,v=m>v?m:v,g=y>g?y:g,this.minX=f,this.minY=p,this.maxX=v,this.maxY=g},r.prototype.addVertexData=function(e,t,n){for(var i=this.minX,s=this.minY,a=this.maxX,o=this.maxY,u=t;u<n;u+=2){var l=e[u],h=e[u+1];i=l<i?l:i,s=h<s?h:s,a=l>a?l:a,o=h>o?h:o}this.minX=i,this.minY=s,this.maxX=a,this.maxY=o},r.prototype.addVertices=function(e,t,n,i){this.addVerticesMatrix(e.worldTransform,t,n,i)},r.prototype.addVerticesMatrix=function(e,t,n,i,s,a){s===void 0&&(s=0),a===void 0&&(a=s);for(var o=e.a,u=e.b,l=e.c,h=e.d,c=e.tx,f=e.ty,p=this.minX,v=this.minY,g=this.maxX,m=this.maxY,y=n;y<i;y+=2){var x=t[y],T=t[y+1],E=o*x+l*T+c,b=h*T+u*x+f;p=Math.min(p,E-s),g=Math.max(g,E+s),v=Math.min(v,b-a),m=Math.max(m,b+a)}this.minX=p,this.minY=v,this.maxX=g,this.maxY=m},r.prototype.addBounds=function(e){var t=this.minX,n=this.minY,i=this.maxX,s=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>s?e.maxY:s},r.prototype.addBoundsMask=function(e,t){var n=e.minX>t.minX?e.minX:t.minX,i=e.minY>t.minY?e.minY:t.minY,s=e.maxX<t.maxX?e.maxX:t.maxX,a=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=s&&i<=a){var o=this.minX,u=this.minY,l=this.maxX,h=this.maxY;this.minX=n<o?n:o,this.minY=i<u?i:u,this.maxX=s>l?s:l,this.maxY=a>h?a:h}},r.prototype.addBoundsMatrix=function(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)},r.prototype.addBoundsArea=function(e,t){var n=e.minX>t.x?e.minX:t.x,i=e.minY>t.y?e.minY:t.y,s=e.maxX<t.x+t.width?e.maxX:t.x+t.width,a=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=s&&i<=a){var o=this.minX,u=this.minY,l=this.maxX,h=this.maxY;this.minX=n<o?n:o,this.minY=i<u?i:u,this.maxX=s>l?s:l,this.maxY=a>h?a:h}},r.prototype.pad=function(e,t){e===void 0&&(e=0),t===void 0&&(t=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)},r.prototype.addFramePad=function(e,t,n,i,s,a){e-=s,t-=a,n+=s,i+=a,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>i?this.maxY:i},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ty=function(r,e){return ty=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},ty(r,e)};function m0(r,e){ty(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var st=function(r){m0(e,r);function e(){var t=r.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new v0,t.alpha=1,t.visible=!0,t.renderable=!0,t.cullable=!1,t.cullArea=null,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new yu,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._maskRefCount=0,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return e.mixin=function(t){for(var n=Object.keys(t),i=0;i<n.length;++i){var s=n[i];Object.defineProperty(e.prototype,s,Object.getOwnPropertyDescriptor(t,s))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,n){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new Pe),n=this._boundsRect),this._bounds.getRectangle(n)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new Pe),t=this._localBoundsRect),this._localBounds||(this._localBounds=new yu);var n=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var s=this._bounds,a=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,t);return this.parent=i,this.transform=n,this._bounds=s,this._bounds.updateID+=this._boundsID-a,o},e.prototype.toGlobal=function(t,n,i){return i===void 0&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,n)},e.prototype.toLocal=function(t,n,i,s){return n&&(t=n.toGlobal(t,i,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,n,i,s,a,o,u,l,h){return t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=1),s===void 0&&(s=1),a===void 0&&(a=0),o===void 0&&(o=0),u===void 0&&(u=0),l===void 0&&(l=0),h===void 0&&(h=0),this.position.x=t,this.position.y=n,this.scale.x=i||1,this.scale.y=s||1,this.rotation=a,this.skew.x=o,this.skew.y=u,this.pivot.x=l,this.pivot.y=h,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new g0),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*AA},set:function(t){this.transform.rotation=t*RA},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){if(this._mask!==t){if(this._mask){var n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount--,n._maskRefCount===0&&(n.renderable=!0,n.isMask=!1))}if(this._mask=t,this._mask){var n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount===0&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++)}}},enumerable:!1,configurable:!0}),e}(jr),g0=function(r){m0(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.sortDirty=null,t}return e}(st);st.prototype.displayObjectUpdateTransform=st.prototype.updateTransform;function x5(r,e){return r.zIndex===e.zIndex?r._lastSortedIndex-e._lastSortedIndex:r.zIndex-e.zIndex}var Gr=function(r){m0(e,r);function e(){var t=r.call(this)||this;return t.children=[],t.sortableChildren=te.SORTABLE_CHILDREN,t.sortDirty=!1,t}return e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,n=[],i=0;i<arguments.length;i++)n[i]=t[i];if(n.length>1)for(var s=0;s<n.length;s++)this.addChild(n[s]);else{var a=n[0];a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",a,this,this.children.length-1),a.emit("added",this)}return n[0]},e.prototype.addChildAt=function(t,n){if(n<0||n>this.children.length)throw new Error(t+"addChildAt: The index "+n+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(n,0,t),this._boundsID++,this.onChildrenChange(n),t.emit("added",this),this.emit("childAdded",t,this,n),t},e.prototype.swapChildren=function(t,n){if(t!==n){var i=this.getChildIndex(t),s=this.getChildIndex(n);this.children[i]=n,this.children[s]=t,this.onChildrenChange(i<s?i:s)}},e.prototype.getChildIndex=function(t){var n=this.children.indexOf(t);if(n===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return n},e.prototype.setChildIndex=function(t,n){if(n<0||n>=this.children.length)throw new Error("The index "+n+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);rs(this.children,i,1),this.children.splice(n,0,t),this.onChildrenChange(n)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,n=[],i=0;i<arguments.length;i++)n[i]=t[i];if(n.length>1)for(var s=0;s<n.length;s++)this.removeChild(n[s]);else{var a=n[0],o=this.children.indexOf(a);if(o===-1)return null;a.parent=null,a.transform._parentID=-1,rs(this.children,o,1),this._boundsID++,this.onChildrenChange(o),a.emit("removed",this),this.emit("childRemoved",a,this,o)}return n[0]},e.prototype.removeChildAt=function(t){var n=this.getChildAt(t);return n.parent=null,n.transform._parentID=-1,rs(this.children,t,1),this._boundsID++,this.onChildrenChange(t),n.emit("removed",this),this.emit("childRemoved",n,this,t),n},e.prototype.removeChildren=function(t,n){t===void 0&&(t=0),n===void 0&&(n=this.children.length);var i=t,s=n,a=s-i,o;if(a>0&&a<=s){o=this.children.splice(i,a);for(var u=0;u<o.length;++u)o[u].parent=null,o[u].transform&&(o[u].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var u=0;u<o.length;++u)o[u].emit("removed",this),this.emit("childRemoved",o[u],this,u);return o}else if(a===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,n=0,i=this.children.length;n<i;++n){var s=this.children[n];s._lastSortedIndex=n,!t&&s.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(x5),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,n=this.children.length;t<n;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var n=this.children[t];if(!(!n.visible||!n.renderable))if(n.calculateBounds(),n._mask){var i=n._mask.isMaskData?n._mask.maskObject:n._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(n._bounds,i._bounds)):this._bounds.addBounds(n._bounds)}else n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(t,n){n===void 0&&(n=!1);var i=r.prototype.getLocalBounds.call(this,t);if(!n)for(var s=0,a=this.children.length;s<a;++s){var o=this.children[s];o.visible&&o.updateTransform()}return i},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(t){var n=t.renderTexture.sourceFrame;if(n.width>0&&n.height>0){var i,s;if(this.cullArea?(i=this.cullArea,s=this.worldTransform):this._render!==e.prototype._render&&(i=this.getBounds(!0)),i&&n.intersects(i,s))this._render(t);else if(this.cullArea)return;for(var a=0,o=this.children.length;a<o;++a){var u=this.children[a],l=u.cullable;u.cullable=l||!this.cullArea,u.render(t),u.cullable=l}}},e.prototype.render=function(t){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(var n=0,i=this.children.length;n<i;++n)this.children[n].render(t)}},e.prototype.renderAdvanced=function(t){var n=this.filters,i=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<n.length;s++)n[s].enabled&&this._enabledFilters.push(n[s])}var a=n&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==at.NONE));if(a&&t.batch.flush(),n&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),i&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(var s=0,o=this.children.length;s<o;++s)this.children[s].render(t)}a&&t.batch.flush(),i&&t.mask.pop(this),n&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(t){r.prototype.destroy.call(this),this.sortDirty=!1;var n=typeof t=="boolean"?t:t&&t.children,i=this.removeChildren(0,this.children.length);if(n)for(var s=0;s<i.length;++s)i[s].destroy(t)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var n=this.getLocalBounds().width;n!==0?this.scale.x=t/n:this.scale.x=1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var n=this.getLocalBounds().height;n!==0?this.scale.y=t/n:this.scale.y=1,this._height=t},enumerable:!1,configurable:!0}),e}(st);Gr.prototype.containerUpdateTransform=Gr.prototype.updateTransform;/*!
 * @pixi/extensions - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/extensions is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var No=function(){return No=Object.assign||function(e){for(var t=arguments,n,i=1,s=arguments.length;i<s;i++){n=t[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},No.apply(this,arguments)},Ne;(function(r){r.Application="application",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Loader="loader",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser"})(Ne||(Ne={}));var s1=function(r){if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");var e=typeof r.extension!="object"?{type:r.extension}:r.extension;r=No(No({},e),{ref:r})}if(typeof r=="object")r=No({},r);else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},on={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var r=arguments,e=this,t=[],n=0;n<arguments.length;n++)t[n]=r[n];return t.map(s1).forEach(function(i){i.type.forEach(function(s){var a,o;return(o=(a=e._removeHandlers)[s])===null||o===void 0?void 0:o.call(a,i)})}),this},add:function(){for(var r=arguments,e=this,t=[],n=0;n<arguments.length;n++)t[n]=r[n];return t.map(s1).forEach(function(i){i.type.forEach(function(s){var a=e._addHandlers,o=e._queue;a[s]?a[s](i):(o[s]=o[s]||[],o[s].push(i))})}),this},handle:function(r,e,t){var n=this._addHandlers=this._addHandlers||{},i=this._removeHandlers=this._removeHandlers||{};if(n[r]||i[r])throw new Error("Extension type "+r+" already has a handler");n[r]=e,i[r]=t;var s=this._queue;return s[r]&&(s[r].forEach(function(a){return e(a)}),delete s[r]),this},handleByMap:function(r,e){return this.handle(r,function(t){e[t.name]=t.ref},function(t){delete e[t.name]})},handleByList:function(r,e){return this.handle(r,function(t){var n,i;e.includes(t.ref)||(e.push(t.ref),r===Ne.Loader&&((i=(n=t.ref).add)===null||i===void 0||i.call(n)))},function(t){var n=e.indexOf(t.ref);n!==-1&&e.splice(n,1)})}};/*!
 * @pixi/runner - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var xt=function(){function r(e){this.items=[],this._name=e,this._aliasCount=0}return r.prototype.emit=function(e,t,n,i,s,a,o,u){if(arguments.length>8)throw new Error("max arguments reached");var l=this,h=l.name,c=l.items;this._aliasCount++;for(var f=0,p=c.length;f<p;f++)c[f][h](e,t,n,i,s,a,o,u);return c===this.items&&this._aliasCount--,this},r.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},r.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},r.prototype.remove=function(e){var t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},r.prototype.contains=function(e){return this.items.indexOf(e)!==-1},r.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},r.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(r.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),r}();Object.defineProperties(xt.prototype,{dispatch:{value:xt.prototype.emit},run:{value:xt.prototype.emit}});/*!
 * @pixi/ticker - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */te.TARGET_FPMS=.06;var nn;(function(r){r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY"})(nn||(nn={}));var Sd=function(){function r(e,t,n,i){t===void 0&&(t=null),n===void 0&&(n=0),i===void 0&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=n,this.once=i}return r.prototype.match=function(e,t){return t===void 0&&(t=null),this.fn===e&&this.context===t},r.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},r.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},r.prototype.destroy=function(e){e===void 0&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t},r}(),pt=function(){function r(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Sd(null,null,1/0),this.deltaMS=1/te.TARGET_FPMS,this.elapsedMS=1/te.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&e._requestId===null&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return r.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(e,t,n){return n===void 0&&(n=nn.NORMAL),this._addListener(new Sd(e,t,n))},r.prototype.addOnce=function(e,t,n){return n===void 0&&(n=nn.NORMAL),this._addListener(new Sd(e,t,n,!0))},r.prototype._addListener=function(e){var t=this._head.next,n=this._head;if(!t)e.connect(n);else{for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}return this._startIfPossible(),this},r.prototype.remove=function(e,t){for(var n=this._head.next;n;)n.match(e,t)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(r.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,t=this._head;t=t.next;)e++;return e},enumerable:!1,configurable:!0}),r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},r.prototype.update=function(e){e===void 0&&(e=performance.now());var t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var n=e-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=e-n%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*te.TARGET_FPMS;for(var i=this._head,s=i.next;s;)s=s.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(r.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,t)/1e3,te.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(e===0)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"shared",{get:function(){if(!r._shared){var e=r._shared=new r;e.autoStart=!0,e._protected=!0}return r._shared},enumerable:!1,configurable:!0}),Object.defineProperty(r,"system",{get:function(){if(!r._system){var e=r._system=new r;e.autoStart=!0,e._protected=!0}return r._system},enumerable:!1,configurable:!0}),r}(),NA=function(){function r(){}return r.init=function(e){var t=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(n){this._ticker&&this._ticker.remove(this.render,this),this._ticker=n,n&&n.add(this.render,this,nn.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?pt.shared:new pt,e.autoStart&&this.start()},r.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}},r.extension=Ne.Application,r}();/*!
 * @pixi/core - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */te.PREFER_ENV=vr.any?rn.WEBGL:rn.WEBGL2;te.STRICT_TEXTURE_CACHE=!1;var _u=[];function Jc(r,e){if(!r)return null;var t="";if(typeof r=="string"){var n=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);n&&(t=n[1].toLowerCase())}for(var i=_u.length-1;i>=0;--i){var s=_u[i];if(s.test&&s.test(r,t))return new s(r,e)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ry=function(r,e){return ry=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},ry(r,e)};function Ve(r,e){ry(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ny=function(){return ny=Object.assign||function(e){for(var t=arguments,n,i=1,s=arguments.length;i<s;i++){n=t[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ny.apply(this,arguments)};function T5(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}var ms=function(){function r(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new xt("setRealSize"),this.onUpdate=new xt("update"),this.onError=new xt("onError")}return r.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},r.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},r.prototype.resize=function(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))},Object.defineProperty(r.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),r.prototype.update=function(){this.destroyed||this.onUpdate.emit()},r.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),r.prototype.style=function(e,t,n){return!1},r.prototype.dispose=function(){},r.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},r.test=function(e,t){return!1},r}(),Es=function(r){Ve(e,r);function e(t,n){var i=this,s=n||{},a=s.width,o=s.height;if(!a||!o)throw new Error("BufferResource width or height invalid");return i=r.call(this,a,o)||this,i.data=t,i}return e.prototype.upload=function(t,n,i){var s=t.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Tr.UNPACK);var a=n.realWidth,o=n.realHeight;return i.width===a&&i.height===o?s.texSubImage2D(n.target,0,0,0,a,o,n.format,i.type,this.data):(i.width=a,i.height=o,s.texImage2D(n.target,0,i.internalFormat,a,o,0,n.format,i.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(ms),E5={scaleMode:Mr.NEAREST,format:Z.RGBA,alphaMode:Tr.NPM},Ie=function(r){Ve(e,r);function e(t,n){t===void 0&&(t=null),n===void 0&&(n=null);var i=r.call(this)||this;n=n||{};var s=n.alphaMode,a=n.mipmap,o=n.anisotropicLevel,u=n.scaleMode,l=n.width,h=n.height,c=n.wrapMode,f=n.format,p=n.type,v=n.target,g=n.resolution,m=n.resourceOptions;return t&&!(t instanceof ms)&&(t=Jc(t,m),t.internal=!0),i.resolution=g||te.RESOLUTION,i.width=Math.round((l||0)*i.resolution)/i.resolution,i.height=Math.round((h||0)*i.resolution)/i.resolution,i._mipmap=a!==void 0?a:te.MIPMAP_TEXTURES,i.anisotropicLevel=o!==void 0?o:te.ANISOTROPIC_LEVEL,i._wrapMode=c||te.WRAP_MODE,i._scaleMode=u!==void 0?u:te.SCALE_MODE,i.format=f||Z.RGBA,i.type=p||ue.UNSIGNED_BYTE,i.target=v||hi.TEXTURE_2D,i.alphaMode=s!==void 0?s:Tr.UNPACK,i.uid=pi(),i.touched=0,i.isPowerOfTwo=!1,i._refreshPOT(),i._glTextures={},i.dirtyId=0,i.dirtyStyleId=0,i.cacheId=null,i.valid=l>0&&h>0,i.textureCacheIds=[],i.destroyed=!1,i.resource=null,i._batchEnabled=0,i._batchLocation=0,i.parentTextureArray=null,i.setResource(t),i}return Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,n){var i;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),n!==void 0&&n!==this.mipmap&&(this.mipmap=n,i=!0),i&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,n,i){return i=i||this.resolution,this.setRealSize(t*i,n*i,i)},e.prototype.setRealSize=function(t,n,i){return this.resolution=i||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(n)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=Kg(this.realWidth)&&Kg(this.realHeight)},e.prototype.setResolution=function(t){var n=this.resolution;return n===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*n)/t,this.height=Math.round(this.height*n)/t,this.emit("update",this)),this._refreshPOT(),this)},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete or[this.cacheId],delete Ht[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,n,i){i===void 0&&(i=te.STRICT_TEXTURE_CACHE);var s=typeof t=="string",a=null;if(s)a=t;else{if(!t._pixiId){var o=n&&n.pixiIdPrefix||"pixiid";t._pixiId=o+"_"+pi()}a=t._pixiId}var u=or[a];if(s&&i&&!u)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return u||(u=new e(t,n),u.cacheId=a,e.addToCache(u,a)),u},e.fromBuffer=function(t,n,i,s){t=t||new Float32Array(n*i*4);var a=new Es(t,{width:n,height:i}),o=t instanceof Float32Array?ue.FLOAT:ue.UNSIGNED_BYTE;return new e(a,Object.assign({},E5,s||{width:n,height:i,type:o}))},e.addToCache=function(t,n){n&&(t.textureCacheIds.indexOf(n)===-1&&t.textureCacheIds.push(n),or[n]&&console.warn("BaseTexture added to the cache with an id ["+n+"] that already had an entry"),or[n]=t)},e.removeFromCache=function(t){if(typeof t=="string"){var n=or[t];if(n){var i=n.textureCacheIds.indexOf(t);return i>-1&&n.textureCacheIds.splice(i,1),delete or[t],n}}else if(t&&t.textureCacheIds){for(var s=0;s<t.textureCacheIds.length;++s)delete or[t.textureCacheIds[s]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(jr),Zc=function(r){Ve(e,r);function e(t,n){var i=this,s=n||{},a=s.width,o=s.height;i=r.call(this,a,o)||this,i.items=[],i.itemDirtyIds=[];for(var u=0;u<t;u++){var l=new Ie;i.items.push(l),i.itemDirtyIds.push(-2)}return i.length=t,i._load=null,i.baseTexture=null,i}return e.prototype.initFromArray=function(t,n){for(var i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof ms?this.addResourceAt(t[i],i):this.addResourceAt(Jc(t[i],n),i))},e.prototype.dispose=function(){for(var t=0,n=this.length;t<n;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,n){if(!this.items[n])throw new Error("Index "+n+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[n].setResource(t),this},e.prototype.bind=function(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");r.prototype.bind.call(this,t);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=t,this.items[n].on("update",t.update,t)},e.prototype.unbind=function(t){r.prototype.unbind.call(this,t);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",t.update,t)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var n=this.items.map(function(s){return s.resource}).filter(function(s){return s}),i=n.map(function(s){return s.load()});return this._load=Promise.all(i).then(function(){var s=t.items[0],a=s.realWidth,o=s.realHeight;return t.resize(a,o),Promise.resolve(t)}),this._load},e}(ms),y0=function(r){Ve(e,r);function e(t,n){var i=this,s=n||{},a=s.width,o=s.height,u,l;return Array.isArray(t)?(u=t,l=t.length):l=t,i=r.call(this,l,{width:a,height:o})||this,u&&i.initFromArray(u,n),i}return e.prototype.addBaseTextureAt=function(t,n){if(t.resource)this.addResourceAt(t.resource,n);else throw new Error("ArrayResource does not support RenderTexture");return this},e.prototype.bind=function(t){r.prototype.bind.call(this,t),t.target=hi.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,n,i){var s=this,a=s.length,o=s.itemDirtyIds,u=s.items,l=t.gl;i.dirtyId<0&&l.texImage3D(l.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,a,0,n.format,i.type,null);for(var h=0;h<a;h++){var c=u[h];o[h]<c.dirtyId&&(o[h]=c.dirtyId,c.valid&&l.texSubImage3D(l.TEXTURE_2D_ARRAY,0,0,0,h,c.resource.width,c.resource.height,1,n.format,i.type,c.resource.source))}return!0},e}(Zc),sn=function(r){Ve(e,r);function e(t){var n=this,i=t,s=i.naturalWidth||i.videoWidth||i.width,a=i.naturalHeight||i.videoHeight||i.height;return n=r.call(this,s,a)||this,n.source=t,n.noSubImage=!1,n}return e.crossOrigin=function(t,n,i){i===void 0&&n.indexOf("data:")!==0?t.crossOrigin=PA(n):i!==!1&&(t.crossOrigin=typeof i=="string"?i:"anonymous")},e.prototype.upload=function(t,n,i,s){var a=t.gl,o=n.realWidth,u=n.realHeight;if(s=s||this.source,s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(s instanceof HTMLVideoElement&&s.readyState<=1)return!1;return a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Tr.UNPACK),!this.noSubImage&&n.target===a.TEXTURE_2D&&i.width===o&&i.height===u?a.texSubImage2D(a.TEXTURE_2D,0,0,0,n.format,i.type,s):(i.width=o,i.height=u,a.texImage2D(n.target,0,i.internalFormat,n.format,i.type,s)),!0},e.prototype.update=function(){if(!this.destroyed){var t=this.source,n=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;this.resize(n,i),r.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(ms),_0=function(r){Ve(e,r);function e(t){return r.call(this,t)||this}return e.test=function(t){var n=globalThis.OffscreenCanvas;return n&&t instanceof n?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(sn),x0=function(r){Ve(e,r);function e(t,n){var i=this,s=n||{},a=s.width,o=s.height,u=s.autoLoad,l=s.linkBaseTexture;if(t&&t.length!==e.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");i=r.call(this,6,{width:a,height:o})||this;for(var h=0;h<e.SIDES;h++)i.items[h].target=hi.TEXTURE_CUBE_MAP_POSITIVE_X+h;return i.linkBaseTexture=l!==!1,t&&i.initFromArray(t,n),u!==!1&&i.load(),i}return e.prototype.bind=function(t){r.prototype.bind.call(this,t),t.target=hi.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,n,i){if(!this.items[n])throw new Error("Index "+n+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,n);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=hi.TEXTURE_CUBE_MAP_POSITIVE_X+n,t.parentTextureArray=this.baseTexture,this.items[n]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[n]=t,this},e.prototype.upload=function(t,n,i){for(var s=this.itemDirtyIds,a=0;a<e.SIDES;a++){var o=this.items[a];(s[a]<o.dirtyId||i.dirtyId<n.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(t,o,i),s[a]=o.dirtyId):s[a]<-1&&(t.gl.texImage2D(o.target,0,i.internalFormat,n.realWidth,n.realHeight,0,n.format,i.type,null),s[a]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(Zc),Qc=function(r){Ve(e,r);function e(t,n){var i=this;if(n=n||{},!(t instanceof HTMLImageElement)){var s=new Image;sn.crossOrigin(s,t,n.crossorigin),s.src=t,t=s}return i=r.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(n.createBitmap!==void 0?n.createBitmap:te.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,i.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,i.bitmap=null,i._load=null,n.autoLoad!==!1&&i.load(),i}return e.prototype.load=function(t){var n=this;return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise(function(i,s){var a=n.source;n.url=a.src;var o=function(){n.destroyed||(a.onload=null,a.onerror=null,n.resize(a.width,a.height),n._load=null,n.createBitmap?i(n.process()):i(n))};a.complete&&a.src?o():(a.onload=o,a.onerror=function(u){s(u),n.onError.emit(u)})}),this._load)},e.prototype.process=function(){var t=this,n=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var i=globalThis.createImageBitmap,s=!n.crossOrigin||n.crossOrigin==="anonymous";return this._process=fetch(n.src,{mode:s?"cors":"no-cors"}).then(function(a){return a.blob()}).then(function(a){return i(a,0,0,n.width,n.height,{premultiplyAlpha:t.alphaMode===null||t.alphaMode===Tr.UNPACK?"premultiply":"none"})}).then(function(a){return t.destroyed?Promise.reject():(t.bitmap=a,t.update(),t._process=null,Promise.resolve(t))}),this._process},e.prototype.upload=function(t,n,i){if(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),!this.createBitmap)return r.prototype.upload.call(this,t,n,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(r.prototype.upload.call(this,t,n,i,this.bitmap),!this.preserveBitmap){var s=!0,a=n._glTextures;for(var o in a){var u=a[o];if(u!==i&&u.dirtyId!==n.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,r.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return typeof t=="string"||t instanceof HTMLImageElement},e}(sn),T0=function(r){Ve(e,r);function e(t,n){var i=this;return n=n||{},i=r.call(this,te.ADAPTER.createCanvas())||this,i._width=0,i._height=0,i.svg=t,i.scale=n.scale||1,i._overrideWidth=n.width,i._overrideHeight=n.height,i._resolve=null,i._crossorigin=n.crossorigin,i._load=null,n.autoLoad!==!1&&i.load(),i}return e.prototype.load=function(){var t=this;return this._load?this._load:(this._load=new Promise(function(n){if(t._resolve=function(){t.resize(t.source.width,t.source.height),n(t)},e.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}),this._load)},e.prototype._loadSvg=function(){var t=this,n=new Image;sn.crossOrigin(n,this.svg,this._crossorigin),n.src=this.svg,n.onerror=function(i){t._resolve&&(n.onerror=null,t.onError.emit(i))},n.onload=function(){if(t._resolve){var i=n.width,s=n.height;if(!i||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=i*t.scale,o=s*t.scale;(t._overrideWidth||t._overrideHeight)&&(a=t._overrideWidth||t._overrideHeight/s*i,o=t._overrideHeight||t._overrideWidth/i*s),a=Math.round(a),o=Math.round(o);var u=t.source;u.width=a,u.height=o,u._pixiId="canvas_"+pi(),u.getContext("2d").drawImage(n,0,0,i,s,0,0,a,o),t._resolve(),t._resolve=null}}},e.getSize=function(t){var n=e.SVG_SIZE.exec(t),i={};return n&&(i[n[1]]=Math.round(parseFloat(n[3])),i[n[5]]=Math.round(parseFloat(n[7]))),i},e.prototype.dispose=function(){r.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,n){return n==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&e.SVG_XML.test(t)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(sn),E0=function(r){Ve(e,r);function e(t,n){var i=this;if(n=n||{},!(t instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof t=="string"&&(t=[t]);var a=t[0].src||t[0];sn.crossOrigin(s,a,n.crossorigin);for(var o=0;o<t.length;++o){var u=document.createElement("source"),l=t[o],h=l.src,c=l.mime;h=h||t[o];var f=h.split("?").shift().toLowerCase(),p=f.slice(f.lastIndexOf(".")+1);c=c||e.MIME_TYPES[p]||"video/"+p,u.src=h,u.type=c,s.appendChild(u)}t=s}return i=r.call(this,t)||this,i.noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=n.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=n.autoPlay!==!1,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),n.autoLoad!==!1&&i.load(),i}return e.prototype.update=function(t){if(!this.destroyed){var n=pt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(r.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var n=this.source;return(n.readyState===n.HAVE_ENOUGH_DATA||n.readyState===n.HAVE_FUTURE_DATA)&&n.width&&n.height&&(n.complete=!0),n.addEventListener("play",this._onPlayStart.bind(this)),n.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(n.addEventListener("canplay",this._onCanPlay),n.addEventListener("canplaythrough",this._onCanPlay),n.addEventListener("error",this._onError,!0)),this._load=new Promise(function(i){t.valid?i(t):(t._resolve=i,n.load())}),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()},e.prototype._isSourceReady=function(){var t=this.source;return t.readyState>2},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(pt.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(pt.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var n=this.valid;this.resize(t.videoWidth,t.videoHeight),!n&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(pt.shared.remove(this.update,this),this._isConnectedToTicker=!1);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),r.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(pt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(pt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,n){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(n)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(sn),b0=function(r){Ve(e,r);function e(t){return r.call(this,t)||this}return e.test=function(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&t instanceof ImageBitmap},e}(sn);_u.push(Qc,b0,_0,E0,T0,Es,x0,y0);var FA={__proto__:null,Resource:ms,BaseImageResource:sn,INSTALLED:_u,autoDetectResource:Jc,AbstractMultiResource:Zc,ArrayResource:y0,BufferResource:Es,CanvasResource:_0,CubeResource:x0,ImageResource:Qc,SVGResource:T0,VideoResource:E0,ImageBitmapResource:b0},b5=function(r){Ve(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.upload=function(t,n,i){var s=t.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Tr.UNPACK);var a=n.realWidth,o=n.realHeight;return i.width===a&&i.height===o?s.texSubImage2D(n.target,0,0,0,a,o,n.format,i.type,this.data):(i.width=a,i.height=o,s.texImage2D(n.target,0,i.internalFormat,a,o,0,n.format,i.type,this.data)),!0},e}(Es),pc=function(){function r(e,t){this.width=Math.round(e||100),this.height=Math.round(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new xt("disposeFramebuffer"),this.multisample=$e.NONE}return Object.defineProperty(r.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),r.prototype.addColorTexture=function(e,t){return e===void 0&&(e=0),this.colorTextures[e]=t||new Ie(null,{scaleMode:Mr.NEAREST,resolution:1,mipmap:xr.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.addDepthTexture=function(e){return this.depthTexture=e||new Ie(new b5(null,{width:this.width,height:this.height}),{scaleMode:Mr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:xr.OFF,format:Z.DEPTH_COMPONENT,type:ue.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.resize=function(e,t){if(e=Math.round(e),t=Math.round(t),!(e===this.width&&t===this.height)){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var i=this.colorTextures[n],s=i.resolution;i.setSize(e/s,t/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(e/s,t/s)}}},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},r}(),S0=function(r){Ve(e,r);function e(t){t===void 0&&(t={});var n=this;if(typeof t=="number"){var i=arguments[0],s=arguments[1],a=arguments[2],o=arguments[3];t={width:i,height:s,scaleMode:a,resolution:o}}return t.width=t.width||100,t.height=t.height||100,t.multisample=t.multisample!==void 0?t.multisample:$e.NONE,n=r.call(this,null,t)||this,n.mipmap=xr.OFF,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new pc(n.realWidth,n.realHeight).addColorTexture(0,n),n.framebuffer.multisample=t.multisample,n.maskStack=[],n.filterStack=[{}],n}return e.prototype.resize=function(t,n){this.framebuffer.resize(t*this.resolution,n*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),r.prototype.dispose.call(this)},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(Ie),w0=function(){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return r.prototype.set=function(e,t,n){var i=t.width,s=t.height;if(n){var a=e.width/2/i,o=e.height/2/s,u=e.x/i+a,l=e.y/s+o;n=Ye.add(n,Ye.NW),this.x0=u+a*Ye.uX(n),this.y0=l+o*Ye.uY(n),n=Ye.add(n,2),this.x1=u+a*Ye.uX(n),this.y1=l+o*Ye.uY(n),n=Ye.add(n,2),this.x2=u+a*Ye.uX(n),this.y2=l+o*Ye.uY(n),n=Ye.add(n,2),this.x3=u+a*Ye.uX(n),this.y3=l+o*Ye.uY(n)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},r.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},r}(),a1=new w0;function Nl(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}var pe=function(r){Ve(e,r);function e(t,n,i,s,a,o){var u=r.call(this)||this;if(u.noFrame=!1,n||(u.noFrame=!0,n=new Pe(0,0,1,1)),t instanceof e&&(t=t.baseTexture),u.baseTexture=t,u._frame=n,u.trim=s,u.valid=!1,u._uvs=a1,u.uvMatrix=null,u.orig=i||n,u._rotate=Number(a||0),a===!0)u._rotate=2;else if(u._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return u.defaultAnchor=o?new He(o.x,o.y):new He(0,0),u._updateID=0,u.textureCacheIds=[],t.valid?u.noFrame?t.valid&&u.onBaseTextureUpdated(t):u.frame=n:t.once("loaded",u.onBaseTextureUpdated,u),u.noFrame&&t.on("update",u.onBaseTextureUpdated,u),u}return e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var n=this.baseTexture.resource;n&&n.url&&Ht[n.url]&&e.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),n=this._frame===this.orig?t:this.orig.clone(),i=new e(this.baseTexture,!this.noFrame&&t,n,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=t),i},e.prototype.updateUvs=function(){this._uvs===a1&&(this._uvs=new w0),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,n,i){n===void 0&&(n={}),i===void 0&&(i=te.STRICT_TEXTURE_CACHE);var s=typeof t=="string",a=null;if(s)a=t;else if(t instanceof Ie){if(!t.cacheId){var o=n&&n.pixiIdPrefix||"pixiid";t.cacheId=o+"-"+pi(),Ie.addToCache(t,t.cacheId)}a=t.cacheId}else{if(!t._pixiId){var o=n&&n.pixiIdPrefix||"pixiid";t._pixiId=o+"_"+pi()}a=t._pixiId}var u=Ht[a];if(s&&i&&!u)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return!u&&!(t instanceof Ie)?(n.resolution||(n.resolution=mu(t)),u=new e(new Ie(t,n)),u.baseTexture.cacheId=a,Ie.addToCache(u.baseTexture,a),e.addToCache(u,a)):!u&&t instanceof Ie&&(u=new e(t),e.addToCache(u,a)),u},e.fromURL=function(t,n){var i=Object.assign({autoLoad:!1},n==null?void 0:n.resourceOptions),s=e.from(t,Object.assign({resourceOptions:i},n),!1),a=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):a.load().then(function(){return Promise.resolve(s)})},e.fromBuffer=function(t,n,i,s){return new e(Ie.fromBuffer(t,n,i,s))},e.fromLoader=function(t,n,i,s){var a=new Ie(t,Object.assign({scaleMode:te.SCALE_MODE,resolution:mu(n)},s)),o=a.resource;o instanceof Qc&&(o.url=n);var u=new e(a);return i||(i=n),Ie.addToCache(u.baseTexture,i),e.addToCache(u,i),i!==n&&(Ie.addToCache(u.baseTexture,n),e.addToCache(u,n)),u.baseTexture.valid?Promise.resolve(u):new Promise(function(l){u.baseTexture.once("loaded",function(){return l(u)})})},e.addToCache=function(t,n){n&&(t.textureCacheIds.indexOf(n)===-1&&t.textureCacheIds.push(n),Ht[n]&&console.warn("Texture added to the cache with an id ["+n+"] that already had an entry"),Ht[n]=t)},e.removeFromCache=function(t){if(typeof t=="string"){var n=Ht[t];if(n){var i=n.textureCacheIds.indexOf(t);return i>-1&&n.textureCacheIds.splice(i,1),delete Ht[t],n}}else if(t&&t.textureCacheIds){for(var s=0;s<t.textureCacheIds.length;++s)Ht[t.textureCacheIds[s]]===t&&delete Ht[t.textureCacheIds[s]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var n=t.x,i=t.y,s=t.width,a=t.height,o=n+s>this.baseTexture.width,u=i+a>this.baseTexture.height;if(o||u){var l=o&&u?"and":"or",h="X: "+n+" + "+s+" = "+(n+s)+" > "+this.baseTexture.width,c="Y: "+i+" + "+a+" = "+(i+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(h+" "+l+" "+c))}this.valid=s&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(e._EMPTY=new e(new Ie),Nl(e._EMPTY),Nl(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var t=te.ADAPTER.createCanvas(16,16),n=t.getContext("2d");t.width=16,t.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),e._WHITE=new e(Ie.from(t)),Nl(e._WHITE),Nl(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(jr),vi=function(r){Ve(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,n,i){i===void 0&&(i=!0);var s=this.baseTexture.resolution,a=Math.round(t*s)/s,o=Math.round(n*s)/s;this.valid=a>0&&o>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=o,i&&this.baseTexture.resize(a,o),this.updateUvs()},e.prototype.setResolution=function(t){var n=this.baseTexture;n.resolution!==t&&(n.setResolution(t),this.resize(n.width,n.height,!1))},e.create=function(t){for(var n=arguments,i=[],s=1;s<arguments.length;s++)i[s-1]=n[s];return typeof t=="number"&&(kt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:i[0],scaleMode:i[1],resolution:i[2]}),new e(new S0(t))},e}(pe),BA=function(){function r(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return r.prototype.createTexture=function(e,t,n){n===void 0&&(n=$e.NONE);var i=new S0(Object.assign({width:e,height:t,resolution:1,multisample:n},this.textureOptions));return new vi(i)},r.prototype.getOptimalTexture=function(e,t,n,i){n===void 0&&(n=1),i===void 0&&(i=$e.NONE);var s;e=Math.ceil(e*n-1e-6),t=Math.ceil(t*n-1e-6),!this.enableFullScreen||e!==this._pixelsWidth||t!==this._pixelsHeight?(e=vu(e),t=vu(t),s=((e&65535)<<16|t&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);var a=this.texturePool[s].pop();return a||(a=this.createTexture(e,t,i)),a.filterPoolKey=s,a.setResolution(n),a},r.prototype.getFilterTexture=function(e,t,n){var i=this.getOptimalTexture(e.width,e.height,t||e.resolution,n||$e.NONE);return i.filterFrame=e.filterFrame,i},r.prototype.returnTexture=function(e){var t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)},r.prototype.returnFilterTexture=function(e){this.returnTexture(e)},r.prototype.clear=function(e){if(e=e!==!1,e)for(var t in this.texturePool){var n=this.texturePool[t];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}},r.prototype.setScreenSize=function(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(var t in this.texturePool)if(Number(t)<0){var n=this.texturePool[t];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}},r.SCREEN_KEY=-1,r}(),iy=function(){function r(e,t,n,i,s,a,o){t===void 0&&(t=0),n===void 0&&(n=!1),i===void 0&&(i=ue.FLOAT),this.buffer=e,this.size=t,this.normalized=n,this.type=i,this.stride=s,this.start=a,this.instance=o}return r.prototype.destroy=function(){this.buffer=null},r.from=function(e,t,n,i,s){return new r(e,t,n,i,s)},r}(),S5=0,ut=function(){function r(e,t,n){t===void 0&&(t=!0),n===void 0&&(n=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=t,this.id=S5++,this.disposeRunner=new xt("disposeBuffer")}return r.prototype.update=function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(r.prototype,"index",{get:function(){return this.type===Br.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?Br.ELEMENT_ARRAY_BUFFER:Br.ARRAY_BUFFER},enumerable:!1,configurable:!0}),r.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new r(e)},r}(),w5={Float32Array,Uint32Array,Int32Array,Uint8Array};function C5(r,e){for(var t=0,n=0,i={},s=0;s<r.length;s++)n+=e[s],t+=r[s].length;for(var a=new ArrayBuffer(t*4),o=null,u=0,s=0;s<r.length;s++){var l=e[s],h=r[s],c=Kc(h);i[c]||(i[c]=new w5[c](a)),o=i[c];for(var f=0;f<h.length;f++){var p=(f/l|0)*n+u,v=f%l;o[p+v]=h[f]}u+=l}return new Float32Array(a)}var o1={5126:4,5123:2,5121:1},I5=0,P5={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Na=function(){function r(e,t){e===void 0&&(e=[]),t===void 0&&(t={}),this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=I5++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new xt("disposeGeometry"),this.refCount=0}return r.prototype.addAttribute=function(e,t,n,i,s,a,o,u){if(n===void 0&&(n=0),i===void 0&&(i=!1),u===void 0&&(u=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof ut||(t instanceof Array&&(t=new Float32Array(t)),t=new ut(t));var l=e.split("|");if(l.length>1){for(var h=0;h<l.length;h++)this.addAttribute(l[h],t,n,i,s);return this}var c=this.buffers.indexOf(t);return c===-1&&(this.buffers.push(t),c=this.buffers.length-1),this.attributes[e]=new iy(c,n,i,s,a,o,u),this.instanced=this.instanced||u,this},r.prototype.getAttribute=function(e){return this.attributes[e]},r.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},r.prototype.addIndex=function(e){return e instanceof ut||(e instanceof Array&&(e=new Uint16Array(e)),e=new ut(e)),e.type=Br.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.indexOf(e)===-1&&this.buffers.push(e),this},r.prototype.getIndex=function(){return this.indexBuffer},r.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var e=[],t=[],n=new ut,i;for(i in this.attributes){var s=this.attributes[i],a=this.buffers[s.buffer];e.push(a.data),t.push(s.size*o1[s.type]/4),s.buffer=0}for(n.data=C5(e,t),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},r.prototype.getSize=function(){for(var e in this.attributes){var t=this.attributes[e],n=this.buffers[t.buffer];return n.data.length/(t.stride/4||t.size)}return 0},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},r.prototype.clone=function(){for(var e=new r,t=0;t<this.buffers.length;t++)e.buffers[t]=new ut(this.buffers[t].data.slice(0));for(var t in this.attributes){var n=this.attributes[t];e.attributes[t]=new iy(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Br.ELEMENT_ARRAY_BUFFER),e},r.merge=function(e){for(var t=new r,n=[],i=[],s=[],a,o=0;o<e.length;o++){a=e[o];for(var u=0;u<a.buffers.length;u++)i[u]=i[u]||0,i[u]+=a.buffers[u].data.length,s[u]=0}for(var o=0;o<a.buffers.length;o++)n[o]=new P5[Kc(a.buffers[o].data)](i[o]),t.buffers[o]=new ut(n[o]);for(var o=0;o<e.length;o++){a=e[o];for(var u=0;u<a.buffers.length;u++)n[u].set(a.buffers[u].data,s[u]),s[u]+=a.buffers[u].data.length}if(t.attributes=a.attributes,a.indexBuffer){t.indexBuffer=t.buffers[a.buffers.indexOf(a.indexBuffer)],t.indexBuffer.type=Br.ELEMENT_ARRAY_BUFFER;for(var l=0,h=0,c=0,f=0,o=0;o<a.buffers.length;o++)if(a.buffers[o]!==a.indexBuffer){f=o;break}for(var o in a.attributes){var p=a.attributes[o];(p.buffer|0)===f&&(h+=p.size*o1[p.type]/4)}for(var o=0;o<e.length;o++){for(var v=e[o].indexBuffer.data,u=0;u<v.length;u++)t.indexBuffer.data[u+c]+=l;l+=e[o].buffers[f].data.length/h,c+=v.length}}return t},r}(),UA=function(r){Ve(e,r);function e(){var t=r.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}return e}(Na),C0=function(r){Ve(e,r);function e(){var t=r.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new ut(t.vertices),t.uvBuffer=new ut(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}return e.prototype.map=function(t,n){var i=0,s=0;return this.uvs[0]=i,this.uvs[1]=s,this.uvs[2]=i+n.width/t.width,this.uvs[3]=s,this.uvs[4]=i+n.width/t.width,this.uvs[5]=s+n.height/t.height,this.uvs[6]=i,this.uvs[7]=s+n.height/t.height,i=n.x,s=n.y,this.vertices[0]=i,this.vertices[1]=s,this.vertices[2]=i+n.width,this.vertices[3]=s,this.vertices[4]=i+n.width,this.vertices[5]=s+n.height,this.vertices[6]=i,this.vertices[7]=s+n.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(Na),A5=0,ci=function(){function r(e,t,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=A5++,this.static=!!t,this.ubo=!!n,e instanceof ut?(this.buffer=e,this.buffer.type=Br.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new ut(new Float32Array(1)),this.buffer.type=Br.UNIFORM_BUFFER,this.autoManage=!0))}return r.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},r.prototype.add=function(e,t,n){if(!this.ubo)this.uniforms[e]=new r(t,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},r.from=function(e,t,n){return new r(e,t,n)},r.uboFrom=function(e,t){return new r(e,t??!0,!0)},r}(),kA=function(){function r(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=$e.NONE,this.sourceFrame=new Pe,this.destinationFrame=new Pe,this.bindingSourceFrame=new Pe,this.bindingDestinationFrame=new Pe,this.filters=[],this.transform=null}return r.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},r}(),Fl=[new He,new He,new He,new He],wd=new ct,I0=function(){function r(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new BA,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new UA,this.quadUv=new C0,this.tempRect=new Pe,this.activeState={},this.globalUniforms=new ci({outputFrame:new Pe,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return r.prototype.push=function(e,t){for(var n,i,s=this.renderer,a=this.defaultFilterStack,o=this.statePool.pop()||new kA,u=this.renderer.renderTexture,l=t[0].resolution,h=t[0].multisample,c=t[0].padding,f=t[0].autoFit,p=(n=t[0].legacy)!==null&&n!==void 0?n:!0,v=1;v<t.length;v++){var g=t[v];l=Math.min(l,g.resolution),h=Math.min(h,g.multisample),c=this.useMaxPadding?Math.max(c,g.padding):c+g.padding,f=f&&g.autoFit,p=p||((i=g.legacy)!==null&&i!==void 0?i:!0)}a.length===1&&(this.defaultFilterStack[0].renderTexture=u.current),a.push(o),o.resolution=l,o.multisample=h,o.legacy=p,o.target=e,o.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),o.sourceFrame.pad(c);var m=this.tempRect.copyFrom(u.sourceFrame);s.projection.transform&&this.transformAABB(wd.copyFrom(s.projection.transform).invert(),m),f?(o.sourceFrame.fit(m),(o.sourceFrame.width<=0||o.sourceFrame.height<=0)&&(o.sourceFrame.width=0,o.sourceFrame.height=0)):o.sourceFrame.intersects(m)||(o.sourceFrame.width=0,o.sourceFrame.height=0),this.roundFrame(o.sourceFrame,u.current?u.current.resolution:s.resolution,u.sourceFrame,u.destinationFrame,s.projection.transform),o.renderTexture=this.getOptimalFilterTexture(o.sourceFrame.width,o.sourceFrame.height,l,h),o.filters=t,o.destinationFrame.width=o.renderTexture.width,o.destinationFrame.height=o.renderTexture.height;var y=this.tempRect;y.x=0,y.y=0,y.width=o.sourceFrame.width,y.height=o.sourceFrame.height,o.renderTexture.filterFrame=o.sourceFrame,o.bindingSourceFrame.copyFrom(u.sourceFrame),o.bindingDestinationFrame.copyFrom(u.destinationFrame),o.transform=s.projection.transform,s.projection.transform=null,u.bind(o.renderTexture,o.sourceFrame,y),s.framebuffer.clear(0,0,0,0)},r.prototype.pop=function(){var e=this.defaultFilterStack,t=e.pop(),n=t.filters;this.activeState=t;var i=this.globalUniforms.uniforms;i.outputFrame=t.sourceFrame,i.resolution=t.resolution;var s=i.inputSize,a=i.inputPixel,o=i.inputClamp;if(s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],a[0]=Math.round(s[0]*t.resolution),a[1]=Math.round(s[1]*t.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=t.sourceFrame.width*s[2]-.5*a[2],o[3]=t.sourceFrame.height*s[3]-.5*a[3],t.legacy){var u=i.filterArea;u[0]=t.destinationFrame.width,u[1]=t.destinationFrame.height,u[2]=t.sourceFrame.x,u[3]=t.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();var l=e[e.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,t.renderTexture,l.renderTexture,fr.BLEND,t),this.returnFilterTexture(t.renderTexture);else{var h=t.renderTexture,c=this.getOptimalFilterTexture(h.width,h.height,t.resolution);c.filterFrame=h.filterFrame;var f=0;for(f=0;f<n.length-1;++f){f===1&&t.multisample>1&&(c=this.getOptimalFilterTexture(h.width,h.height,t.resolution),c.filterFrame=h.filterFrame),n[f].apply(this,h,c,fr.CLEAR,t);var p=h;h=c,c=p}n[f].apply(this,h,l.renderTexture,fr.BLEND,t),f>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(h),this.returnFilterTexture(c)}t.clear(),this.statePool.push(t)},r.prototype.bindAndClear=function(e,t){t===void 0&&(t=fr.CLEAR);var n=this.renderer,i=n.renderTexture,s=n.state;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e&&e.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=e.filterFrame.width,a.height=e.filterFrame.height,i.bind(e,e.filterFrame,a)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var o=s.stateId&1||this.forceClear;(t===fr.CLEAR||t===fr.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)},r.prototype.applyFilter=function(e,t,n,i){var s=this.renderer;s.state.set(e.state),this.bindAndClear(n,i),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(pr.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(pr.TRIANGLE_STRIP))},r.prototype.calculateSpriteMatrix=function(e,t){var n=this.activeState,i=n.sourceFrame,s=n.destinationFrame,a=t._texture.orig,o=e.set(s.width,0,0,s.height,i.x,i.y),u=t.worldTransform.copyTo(ct.TEMP_MATRIX);return u.invert(),o.prepend(u),o.scale(1/a.width,1/a.height),o.translate(t.anchor.x,t.anchor.y),o},r.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},r.prototype.getOptimalFilterTexture=function(e,t,n,i){return n===void 0&&(n=1),i===void 0&&(i=$e.NONE),this.texturePool.getOptimalTexture(e,t,n,i)},r.prototype.getFilterTexture=function(e,t,n){if(typeof e=="number"){var i=e;e=t,t=i}e=e||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,n||$e.NONE);return s.filterFrame=e.filterFrame,s},r.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},r.prototype.emptyPool=function(){this.texturePool.clear(!0)},r.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},r.prototype.transformAABB=function(e,t){var n=Fl[0],i=Fl[1],s=Fl[2],a=Fl[3];n.set(t.left,t.top),i.set(t.left,t.bottom),s.set(t.right,t.top),a.set(t.right,t.bottom),e.apply(n,n),e.apply(i,i),e.apply(s,s),e.apply(a,a);var o=Math.min(n.x,i.x,s.x,a.x),u=Math.min(n.y,i.y,s.y,a.y),l=Math.max(n.x,i.x,s.x,a.x),h=Math.max(n.y,i.y,s.y,a.y);t.x=o,t.y=u,t.width=l-o,t.height=h-u},r.prototype.roundFrame=function(e,t,n,i,s){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(s){var a=s.a,o=s.b,u=s.c,l=s.d;if((Math.abs(o)>1e-4||Math.abs(u)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(l)>1e-4))return}s=s?wd.copyFrom(s):wd.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(s,e),e.ceil(t),this.transformAABB(s.invert(),e)}},r}(),qu=function(){function r(e){this.renderer=e}return r.prototype.flush=function(){},r.prototype.destroy=function(){this.renderer=null},r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.render=function(e){},r}(),P0=function(){function r(e){this.renderer=e,this.emptyRenderer=new qu(e),this.currentRenderer=this.emptyRenderer}return r.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},r.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.copyBoundTextures=function(e,t){for(var n=this.renderer.texture.boundTextures,i=t-1;i>=0;--i)e[i]=n[i]||null,e[i]&&(e[i]._batchLocation=i)},r.prototype.boundArray=function(e,t,n,i){for(var s=e.elements,a=e.ids,o=e.count,u=0,l=0;l<o;l++){var h=s[l],c=h._batchLocation;if(c>=0&&c<i&&t[c]===h){a[l]=c;continue}for(;u<i;){var f=t[u];if(f&&f._batchEnabled===n&&f._batchLocation===u){u++;continue}a[l]=u,h._batchLocation=u,t[u]=h;break}}},r.prototype.destroy=function(){this.renderer=null},r}(),u1=0,A0=function(){function r(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(r.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),r.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=u1++},r.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=u1++,this.renderer.runners.contextChange.emit(e)},r.prototype.initFromOptions=function(e){var t=this.createContext(this.renderer.view,e);this.initFromContext(t)},r.prototype.createContext=function(e,t){var n;if(te.PREFER_ENV>=rn.WEBGL2&&(n=e.getContext("webgl2",t)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},r.prototype.getExtensions=function(){var e=this.gl,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})},r.prototype.handleContextLost=function(e){var t=this;e.preventDefault(),setTimeout(function(){t.gl.isContextLost()&&t.extensions.loseContext&&t.extensions.loseContext.restoreContext()},0)},r.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},r.prototype.destroy=function(){var e=this.renderer.view;this.renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},r.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},r.prototype.validateContext=function(e){var t=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var i=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},r}(),GA=function(){function r(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=$e.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return r}(),R5=new Pe,R0=function(){function r(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new pc(10,10),this.msaaSamples=null}return r.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Pe,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){var t=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;te.PREFER_ENV===rn.WEBGL_LEGACY&&(t=null,n=null),t?e.drawBuffers=function(i){return t.drawBuffersWEBGL(i)}:(this.hasMRT=!1,e.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},r.prototype.bind=function(e,t,n){n===void 0&&(n=0);var i=this.gl;if(e){var s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=n),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var a=0;a<e.colorTextures.length;a++){var o=e.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){var u=t.width>>n,l=t.height>>n,h=u/t.width;this.setViewport(t.x*h,t.y*h,u,l)}else{var u=e.width>>n,l=e.height>>n;this.setViewport(0,0,u,l)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},r.prototype.setViewport=function(e,t,n,i){var s=this.viewport;e=Math.round(e),t=Math.round(t),n=Math.round(n),i=Math.round(i),(s.width!==n||s.height!==i||s.x!==e||s.y!==t)&&(s.x=e,s.y=t,s.width=n,s.height=i,this.gl.viewport(e,t,n,i))},Object.defineProperty(r.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),r.prototype.clear=function(e,t,n,i,s){s===void 0&&(s=lu.COLOR|lu.DEPTH);var a=this.gl;a.clearColor(e,t,n,i),a.clear(s)},r.prototype.initFramebuffer=function(e){var t=this.gl,n=new GA(t.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n},r.prototype.resizeFramebuffer=function(e){var t=this.gl,n=e.glFramebuffers[this.CONTEXT_UID];n.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,n.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,t.RGBA8,e.width,e.height)),n.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,n.stencil),n.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height));var i=e.colorTextures,s=i.length;t.drawBuffers||(s=Math.min(s,1));for(var a=0;a<s;a++){var o=i[a],u=o.parentTextureArray||o;this.renderer.texture.bind(u,0)}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)},r.prototype.updateFramebuffer=function(e,t){var n=this.gl,i=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures,a=s.length;n.drawBuffers||(a=Math.min(a,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?(i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.RGBA8,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));for(var o=[],u=0;u<a;u++){var l=s[u],h=l.parentTextureArray||l;this.renderer.texture.bind(h,0),!(u===0&&i.msaaBuffer)&&(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+u,l.target,h._glTextures[this.CONTEXT_UID].texture,t),o.push(n.COLOR_ATTACHMENT0+u))}if(o.length>1&&n.drawBuffers(o),e.depthTexture){var c=this.writeDepthTexture;if(c){var f=e.depthTexture;this.renderer.texture.bind(f,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,f._glTextures[this.CONTEXT_UID].texture,t)}}(e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)?(i.stencil=i.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.DEPTH24_STENCIL8,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,i.stencil)):i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)},r.prototype.canMultisampleFramebuffer=function(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture},r.prototype.detectSamples=function(e){var t=this.msaaSamples,n=$e.NONE;if(e<=1||t===null)return n;for(var i=0;i<t.length;i++)if(t[i]<=e){n=t[i];break}return n===1&&(n=$e.NONE),n},r.prototype.blit=function(e,t,n){var i=this,s=i.current,a=i.renderer,o=i.gl,u=i.CONTEXT_UID;if(a.context.webGLVersion===2&&s){var l=s.glFramebuffers[u];if(l){if(!e){if(!l.msaaBuffer)return;var h=s.colorTextures[0];if(!h)return;l.blitFramebuffer||(l.blitFramebuffer=new pc(s.width,s.height),l.blitFramebuffer.addColorTexture(0,h)),e=l.blitFramebuffer,e.colorTextures[0]!==h&&(e.colorTextures[0]=h,e.dirtyId++,e.dirtyFormat++),(e.width!==s.width||e.height!==s.height)&&(e.width=s.width,e.height=s.height,e.dirtyId++,e.dirtySize++)}t||(t=R5,t.width=s.width,t.height=s.height),n||(n=t);var c=t.width===n.width&&t.height===n.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(t.left,t.top,t.right,t.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR)}}},r.prototype.disposeFramebuffer=function(e,t){var n=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(n){delete e.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),t||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&n.blitFramebuffer.dispose()}},r.prototype.disposeAll=function(e){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<t.length;n++)this.disposeFramebuffer(t[n],e)},r.prototype.forceStencil=function(){var e=this.current;if(e){var t=e.glFramebuffers[this.CONTEXT_UID];if(!(!t||t.stencil)){e.stencil=!0;var n=e.width,i=e.height,s=this.gl,a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),t.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,t.multisample,s.DEPTH24_STENCIL8,n,i):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,n,i),t.stencil=a,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}}},r.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Pe},r.prototype.destroy=function(){this.renderer=null},r}(),Cd={5126:4,5123:2,5121:1},O0=function(){function r(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return r.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){var n=this.renderer.context.extensions.vertexArrayObject;te.PREFER_ENV===rn.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=function(){return n.createVertexArrayOES()},e.bindVertexArray=function(s){return n.bindVertexArrayOES(s)},e.deleteVertexArray=function(s){return n.deleteVertexArrayOES(s)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(t.webGLVersion!==2){var i=e.getExtension("ANGLE_instanced_arrays");i?(e.vertexAttribDivisor=function(s,a){return i.vertexAttribDivisorANGLE(s,a)},e.drawElementsInstanced=function(s,a,o,u,l){return i.drawElementsInstancedANGLE(s,a,o,u,l)},e.drawArraysInstanced=function(s,a,o,u){return i.drawArraysInstancedANGLE(s,a,o,u)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex},r.prototype.bind=function(e,t){t=t||this.renderer.shader.shader;var n=this.gl,i=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);var a=i[t.program.id]||this.initGeometryVao(e,t,s);this._activeGeometry=e,this._activeVao!==a&&(this._activeVao=a,this.hasVao?n.bindVertexArray(a):this.activateVao(e,t.program)),this.updateBuffers()},r.prototype.reset=function(){this.unbind()},r.prototype.updateBuffers=function(){for(var e=this._activeGeometry,t=this.renderer.buffer,n=0;n<e.buffers.length;n++){var i=e.buffers[n];t.update(i)}},r.prototype.checkCompatibility=function(e,t){var n=e.attributes,i=t.attributeData;for(var s in i)if(!n[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},r.prototype.getSignature=function(e,t){var n=e.attributes,i=t.attributeData,s=["g",e.id];for(var a in n)i[a]&&s.push(a,i[a].location);return s.join("-")},r.prototype.initGeometryVao=function(e,t,n){n===void 0&&(n=!0);var i=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,o=t.program;o.glPrograms[s]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,o);var u=this.getSignature(e,o),l=e.glVertexArrayObjects[this.CONTEXT_UID],h=l[u];if(h)return l[o.id]=h,h;var c=e.buffers,f=e.attributes,p={},v={};for(var g in c)p[g]=0,v[g]=0;for(var g in f)!f[g].size&&o.attributeData[g]?f[g].size=o.attributeData[g].size:f[g].size||console.warn("PIXI Geometry attribute '"+g+"' size cannot be determined (likely the bound shader does not have the attribute)"),p[f[g].buffer]+=f[g].size*Cd[f[g].type];for(var g in f){var m=f[g],y=m.size;m.stride===void 0&&(p[m.buffer]===y*Cd[m.type]?m.stride=0:m.stride=p[m.buffer]),m.start===void 0&&(m.start=v[m.buffer],v[m.buffer]+=y*Cd[m.type])}h=i.createVertexArray(),i.bindVertexArray(h);for(var x=0;x<c.length;x++){var T=c[x];a.bind(T),n&&T._glBuffers[s].refCount++}return this.activateVao(e,o),this._activeVao=h,l[o.id]=h,l[u]=h,h},r.prototype.disposeGeometry=function(e,t){var n;if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var i=e.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,a=e.buffers,o=(n=this.renderer)===null||n===void 0?void 0:n.buffer;if(e.disposeRunner.remove(this),!!i){if(o)for(var u=0;u<a.length;u++){var l=a[u]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!t&&o.dispose(a[u],t))}if(!t){for(var h in i)if(h[0]==="g"){var c=i[h];this._activeVao===c&&this.unbind(),s.deleteVertexArray(c)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},r.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedGeometries),n=0;n<t.length;n++)this.disposeGeometry(this.managedGeometries[t[n]],e)},r.prototype.activateVao=function(e,t){var n=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,a=e.buffers,o=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);var u=null;for(var l in o){var h=o[l],c=a[h.buffer],f=c._glBuffers[i];if(t.attributeData[l]){u!==f&&(s.bind(c),u=f);var p=t.attributeData[l].location;if(n.enableVertexAttribArray(p),n.vertexAttribPointer(p,h.size,h.type||n.FLOAT,h.normalized,h.stride,h.start),h.instance)if(this.hasInstance)n.vertexAttribDivisor(p,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},r.prototype.draw=function(e,t,n,i){var s=this.gl,a=this._activeGeometry;if(a.indexBuffer){var o=a.indexBuffer.data.BYTES_PER_ELEMENT,u=o===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;o===2||o===4&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(e,t||a.indexBuffer.data.length,u,(n||0)*o,i||1):s.drawElements(e,t||a.indexBuffer.data.length,u,(n||0)*o):console.warn("unsupported index buffer type: uint32")}else a.instanced?s.drawArraysInstanced(e,n,t||a.getSize(),i||1):s.drawArrays(e,n,t||a.getSize());return this},r.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},r.prototype.destroy=function(){this.renderer=null},r}(),jA=function(){function r(e){e===void 0&&(e=null),this.type=at.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=te.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(r.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null},enumerable:!1,configurable:!0}),r.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=at.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},r.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},r}();function l1(r,e,t){var n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}function h1(r,e){var t=r.getShaderSource(e).split(`
`).map(function(l,h){return h+": "+l}),n=r.getShaderInfoLog(e),i=n.split(`
`),s={},a=i.map(function(l){return parseFloat(l.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(l){return l&&!s[l]?(s[l]=!0,!0):!1}),o=[""];a.forEach(function(l){t[l-1]="%c"+t[l-1]+"%c",o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var u=t.join(`
`);o[0]=u,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,o),console.groupEnd()}function O5(r,e,t,n){r.getProgramParameter(e,r.LINK_STATUS)||(r.getShaderParameter(t,r.COMPILE_STATUS)||h1(r,t),r.getShaderParameter(n,r.COMPILE_STATUS)||h1(r,n),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(e)))}function Id(r){for(var e=new Array(r),t=0;t<e.length;t++)e[t]=!1;return e}function HA(r,e){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Id(2*e);case"bvec3":return Id(3*e);case"bvec4":return Id(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var VA={},Za=VA;function zA(){if(Za===VA||Za&&Za.isContextLost()){var r=te.ADAPTER.createCanvas(),e=void 0;te.PREFER_ENV>=rn.WEBGL2&&(e=r.getContext("webgl2",{})),e||(e=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Za=e}return Za}var Bl;function M5(){if(!Bl){Bl=$t.MEDIUM;var r=zA();if(r&&r.getShaderPrecisionFormat){var e=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);Bl=e.precision?$t.HIGH:$t.MEDIUM}}return Bl}function c1(r,e,t){if(r.substring(0,9)!=="precision"){var n=e;return e===$t.HIGH&&t!==$t.HIGH&&(n=$t.MEDIUM),"precision "+n+` float;
`+r}else if(t!==$t.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var D5={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function XA(r){return D5[r]}var Ul=null,f1={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function $A(r,e){if(!Ul){var t=Object.keys(f1);Ul={};for(var n=0;n<t.length;++n){var i=t[n];Ul[r[i]]=f1[i]}}return Ul[e]}var ns=[{test:function(r){return r.type==="float"&&r.size===1&&!r.isArray},code:function(r){return`
            if(uv["`+r+'"] !== ud["'+r+`"].value)
            {
                ud["`+r+'"].value = uv["'+r+`"]
                gl.uniform1f(ud["`+r+'"].location, uv["'+r+`"])
            }
            `}},{test:function(r,e){return(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray&&(e==null||e.castToBaseTexture!==void 0)},code:function(r){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+r+`"], t);

            if(ud["`+r+`"].value !== t)
            {
                ud["`+r+`"].value = t;
                gl.uniform1i(ud["`+r+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(r,e){return r.type==="mat3"&&r.size===1&&!r.isArray&&e.a!==void 0},code:function(r){return`
            gl.uniformMatrix3fv(ud["`+r+'"].location, false, uv["'+r+`"].toArray(true));
            `},codeUbo:function(r){return`
                var `+r+"_matrix = uv."+r+`.toArray(true);

                data[offset] = `+r+`_matrix[0];
                data[offset+1] = `+r+`_matrix[1];
                data[offset+2] = `+r+`_matrix[2];
        
                data[offset + 4] = `+r+`_matrix[3];
                data[offset + 5] = `+r+`_matrix[4];
                data[offset + 6] = `+r+`_matrix[5];
        
                data[offset + 8] = `+r+`_matrix[6];
                data[offset + 9] = `+r+`_matrix[7];
                data[offset + 10] = `+r+`_matrix[8];
            `}},{test:function(r,e){return r.type==="vec2"&&r.size===1&&!r.isArray&&e.x!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+r+`"].location, v.x, v.y);
                }`},codeUbo:function(r){return`
                v = uv.`+r+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(r){return r.type==="vec2"&&r.size===1&&!r.isArray},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+r+`"].location, v[0], v[1]);
                }
            `}},{test:function(r,e){return r.type==="vec4"&&r.size===1&&!r.isArray&&e.width!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+r+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(r){return`
                    v = uv.`+r+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(r){return r.type==="vec4"&&r.size===1&&!r.isArray},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+r+`"].location, v[0], v[1], v[2], v[3])
                }`}}],L5={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},N5={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function F5(r,e){var t,n=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var i in r.uniforms){var s=e[i];if(!s){!((t=r.uniforms[i])===null||t===void 0)&&t.group&&(r.uniforms[i].ubo?n.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):n.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var a=r.uniforms[i],o=!1,u=0;u<ns.length;u++)if(ns[u].test(s,a)){n.push(ns[u].code(i,a)),o=!0;break}if(!o){var l=s.size===1&&!s.isArray?L5:N5,h=l[s.type].replace("location",'ud["'+i+'"].location');n.push(`
            cu = ud["`+i+`"];
            cv = cu.value;
            v = uv["`+i+`"];
            `+h+";")}}return new Function("ud","uv","renderer","syncData",n.join(`
`))}var B5=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function U5(r){for(var e="",t=0;t<r;++t)t>0&&(e+=`
else `),t<r-1&&(e+="if(test == "+t+".0){}");return e}function WA(r,e){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var t=e.createShader(e.FRAGMENT_SHADER);;){var n=B5.replace(/%forloop%/gi,U5(r));if(e.shaderSource(t,n),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))r=r/2|0;else break}return r}var Qa;function k5(){if(typeof Qa=="boolean")return Qa;try{var r=new Function("param1","param2","param3","return param1[param2] === param3;");Qa=r({a:"b"},"a","b")===!0}catch{Qa=!1}return Qa}var G5=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,j5=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,H5=0,kl={},Fa=function(){function r(e,t,n){n===void 0&&(n="pixi-shader"),this.id=H5++,this.vertexSrc=e||r.defaultVertexSrc,this.fragmentSrc=t||r.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),kl[n]?(kl[n]++,n+="-"+kl[n]):kl[n]=1,this.vertexSrc="#define SHADER_NAME "+n+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+n+`
`+this.fragmentSrc,this.vertexSrc=c1(this.vertexSrc,te.PRECISION_VERTEX,$t.HIGH),this.fragmentSrc=c1(this.fragmentSrc,te.PRECISION_FRAGMENT,M5())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(r,"defaultVertexSrc",{get:function(){return j5},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return G5},enumerable:!1,configurable:!0}),r.from=function(e,t,n){var i=e+t,s=Zg[i];return s||(Zg[i]=s=new r(e,t,n)),s},r}(),bn=function(){function r(e,t){this.uniformBindCount=0,this.program=e,t?t instanceof ci?this.uniformGroup=t:this.uniformGroup=new ci(t):this.uniformGroup=new ci({}),this.disposeRunner=new xt("disposeShader")}return r.prototype.checkUniformExists=function(e,t){if(t.uniforms[e])return!0;for(var n in t.uniforms){var i=t.uniforms[n];if(i.group&&this.checkUniformExists(e,i))return!0}return!1},r.prototype.destroy=function(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()},Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),r.from=function(e,t,n){var i=Fa.from(e,t);return new r(i,n)},r}(),Pd=0,Ad=1,Rd=2,Od=3,Md=4,Dd=5,bi=function(){function r(){this.data=0,this.blendMode=he.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(r.prototype,"blend",{get:function(){return!!(this.data&1<<Pd)},set:function(e){!!(this.data&1<<Pd)!==e&&(this.data^=1<<Pd)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"offsets",{get:function(){return!!(this.data&1<<Ad)},set:function(e){!!(this.data&1<<Ad)!==e&&(this.data^=1<<Ad)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"culling",{get:function(){return!!(this.data&1<<Rd)},set:function(e){!!(this.data&1<<Rd)!==e&&(this.data^=1<<Rd)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTest",{get:function(){return!!(this.data&1<<Od)},set:function(e){!!(this.data&1<<Od)!==e&&(this.data^=1<<Od)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthMask",{get:function(){return!!(this.data&1<<Dd)},set:function(e){!!(this.data&1<<Dd)!==e&&(this.data^=1<<Dd)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<Md)},set:function(e){!!(this.data&1<<Md)!==e&&(this.data^=1<<Md)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==he.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},r.for2d=function(){var e=new r;return e.depthTest=!1,e.blend=!0,e},r}(),V5=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,z5=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Mn=function(r){Ve(e,r);function e(t,n,i){var s=this,a=Fa.from(t||e.defaultVertexSrc,n||e.defaultFragmentSrc);return s=r.call(this,a,i)||this,s.padding=0,s.resolution=te.FILTER_RESOLUTION,s.multisample=te.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new bi,s}return e.prototype.apply=function(t,n,i,s,a){t.applyFilter(this,n,i,s)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return z5},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return V5},enumerable:!1,configurable:!0}),e}(bn),X5=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,$5=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,d1=new ct,ef=function(){function r(e,t){this._texture=e,this.mapCoord=new ct,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}return Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),r.prototype.multiplyUvs=function(e,t){t===void 0&&(t=e);for(var n=this.mapCoord,i=0;i<e.length;i+=2){var s=e[i],a=e[i+1];t[i]=s*n.a+a*n.c+n.tx,t[i+1]=s*n.b+a*n.d+n.ty}return t},r.prototype.update=function(e){var t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var n=t._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var i=t.orig,s=t.trim;s&&(d1.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(d1));var a=t.baseTexture,o=this.uClampFrame,u=this.clampMargin/a.resolution,l=this.clampOffset;return o[0]=(t._frame.x+u+l)/a.width,o[1]=(t._frame.y+u+l)/a.height,o[2]=(t._frame.x+t._frame.width-u+l)/a.width,o[3]=(t._frame.y+t._frame.height-u+l)/a.height,this.uClampOffset[0]=l/a.realWidth,this.uClampOffset[1]=l/a.realHeight,this.isSimple=t._frame.width===a.width&&t._frame.height===a.height&&t.rotate===0,!0},r}(),YA=function(r){Ve(e,r);function e(t,n,i){var s=this,a=null;return typeof t!="string"&&n===void 0&&i===void 0&&(a=t,t=void 0,n=void 0,i=void 0),s=r.call(this,t||X5,n||$5,i)||this,s.maskSprite=a,s.maskMatrix=new ct,s}return Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,n,i,s){var a=this._maskSprite,o=a._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new ef(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,a).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,n,i,s))},e}(Mn),M0=function(){function r(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return r.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},r.prototype.push=function(e,t){var n=t;if(!n.isMaskData){var i=this.maskDataPool.pop()||new jA;i.pooled=!0,i.maskObject=t,n=i}var s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(s),n._colorMask=s?s._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==at.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case at.SCISSOR:this.renderer.scissor.push(n);break;case at.STENCIL:this.renderer.stencil.push(n);break;case at.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case at.COLOR:this.pushColorMask(n);break}n.type===at.SPRITE&&this.maskStack.push(n)},r.prototype.pop=function(e){var t=this.maskStack.pop();if(!(!t||t._target!==e)){if(t.enabled)switch(t.type){case at.SCISSOR:this.renderer.scissor.pop(t);break;case at.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case at.SPRITE:this.popSpriteMask(t);break;case at.COLOR:this.popColorMask(t);break}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){var n=this.maskStack[this.maskStack.length-1];n.type===at.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}},r.prototype.detect=function(e){var t=e.maskObject;t?t.isSprite?e.type=at.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=at.SCISSOR:e.type=at.STENCIL:e.type=at.COLOR},r.prototype.pushSpriteMask=function(e){var t,n,i=e.maskObject,s=e._target,a=e._filters;a||(a=this.alphaMaskPool[this.alphaMaskIndex],a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new YA]));var o=this.renderer,u=o.renderTexture,l,h;if(u.current){var c=u.current;l=e.resolution||c.resolution,h=(t=e.multisample)!==null&&t!==void 0?t:c.multisample}else l=e.resolution||o.resolution,h=(n=e.multisample)!==null&&n!==void 0?n:o.multisample;a[0].resolution=l,a[0].multisample=h,a[0].maskSprite=i;var f=s.filterArea;s.filterArea=i.getBounds(!0),o.filter.push(s,a),s.filterArea=f,e._filters||this.alphaMaskIndex++},r.prototype.popSpriteMask=function(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},r.prototype.pushColorMask=function(e){var t=e._colorMask,n=e._colorMask=t&e.colorMask;n!==t&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)},r.prototype.popColorMask=function(e){var t=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==t&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)},r.prototype.destroy=function(){this.renderer=null},r}(),qA=function(){function r(e){this.renderer=e,this.maskStack=[],this.glConst=0}return r.prototype.getStackLength=function(){return this.maskStack.length},r.prototype.setMaskStack=function(e){var t=this.renderer.gl,n=this.getStackLength();this.maskStack=e;var i=this.getStackLength();i!==n&&(i===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))},r.prototype._useCurrent=function(){},r.prototype.destroy=function(){this.renderer=null,this.maskStack=null},r}(),p1=new ct,v1=[],D0=function(r){Ve(e,r);function e(t){var n=r.call(this,t)||this;return n.glConst=te.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,n}return e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.calcScissorRect=function(t){var n;if(!t._scissorRectLocal){var i=t._scissorRect,s=t.maskObject,a=this.renderer,o=a.renderTexture,u=s.getBounds(!0,(n=v1.pop())!==null&&n!==void 0?n:new Pe);this.roundFrameToPixels(u,o.current?o.current.resolution:a.resolution,o.sourceFrame,o.destinationFrame,a.projection.transform),i&&u.fit(i),t._scissorRectLocal=u}},e.isMatrixRotated=function(t){if(!t)return!1;var n=t.a,i=t.b,s=t.c,a=t.d;return(Math.abs(i)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(n)>1e-4||Math.abs(a)>1e-4)},e.prototype.testScissor=function(t){var n=t.maskObject;if(!n.isFastRect||!n.isFastRect()||e.isMatrixRotated(n.worldTransform)||e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var i=t._scissorRectLocal;return i.width>0&&i.height>0},e.prototype.roundFrameToPixels=function(t,n,i,s,a){e.isMatrixRotated(a)||(a=a?p1.copyFrom(a):p1.identity(),a.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.renderer.filter.transformAABB(a,t),t.fit(s),t.x=Math.round(t.x*n),t.y=Math.round(t.y*n),t.width=Math.round(t.width*n),t.height=Math.round(t.height*n))},e.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var n=this.renderer.gl;t._scissorRect||n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(t){var n=this.renderer.gl;t&&v1.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():n.disable(n.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,n;this.renderer.renderTexture.current?n=t.y:n=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,n,t.width,t.height)},e}(qA),L0=function(r){Ve(e,r);function e(t){var n=r.call(this,t)||this;return n.glConst=te.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,n}return e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var n=t.maskObject,i=this.renderer.gl,s=t._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++;var a=t._colorMask;a!==0&&(t._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,s,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,a!==0&&(t._colorMask=a,i.colorMask((a&1)!==0,(a&2)!==0,(a&4)!==0,(a&8)!==0)),this._useCurrent()},e.prototype.pop=function(t){var n=this.renderer.gl;if(this.getStackLength()===0)n.disable(n.STENCIL_TEST);else{var i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=i?i._colorMask:15;s!==0&&(i._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilOp(n.KEEP,n.KEEP,n.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,s!==0&&(i._colorMask=s,n.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e}(qA),N0=function(){function r(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ct,this.transform=null}return r.prototype.update=function(e,t,n,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},r.prototype.calculateProjection=function(e,t,n,i){var s=this.projectionMatrix,a=i?-1:1;s.identity(),s.a=1/t.width*2,s.d=a*(1/t.height*2),s.tx=-1-t.x*s.a,s.ty=-a-t.y*s.d},r.prototype.setTransform=function(e){},r.prototype.destroy=function(){this.renderer=null},r}(),Ii=new Pe,eo=new Pe,F0=function(){function r(e){this.renderer=e,this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Pe,this.destinationFrame=new Pe,this.viewportFrame=new Pe}return r.prototype.bind=function(e,t,n){e===void 0&&(e=null);var i=this.renderer;this.current=e;var s,a,o;e?(s=e.baseTexture,o=s.resolution,t||(Ii.width=e.frame.width,Ii.height=e.frame.height,t=Ii),n||(eo.x=e.frame.x,eo.y=e.frame.y,eo.width=t.width,eo.height=t.height,n=eo),a=s.framebuffer):(o=i.resolution,t||(Ii.width=i.screen.width,Ii.height=i.screen.height,t=Ii),n||(n=Ii,n.width=t.width,n.height=t.height));var u=this.viewportFrame;u.x=n.x*o,u.y=n.y*o,u.width=n.width*o,u.height=n.height*o,e||(u.y=i.view.height-(u.y+u.height)),u.ceil(),this.renderer.framebuffer.bind(a,u),this.renderer.projection.update(n,t,o,!a),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(n)},r.prototype.clear=function(e,t){this.current?e=e||this.current.baseTexture.clearColor:e=e||this.clearColor;var n=this.destinationFrame,i=this.current?this.current.baseTexture:this.renderer.screen,s=n.width!==i.width||n.height!==i.height;if(s){var a=this.viewportFrame,o=a.x,u=a.y,l=a.width,h=a.height;o=Math.round(o),u=Math.round(u),l=Math.round(l),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,u,l,h)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],t),s&&this.renderer.scissor.pop()},r.prototype.resize=function(){this.bind(null)},r.prototype.reset=function(){this.bind(null)},r.prototype.destroy=function(){this.renderer=null},r}();function W5(r,e,t,n,i){t.buffer.update(i)}var Y5={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},KA={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function JA(r){for(var e=r.map(function(u){return{data:u,offset:0,dataLen:0,dirty:0}}),t=0,n=0,i=0,s=0;s<e.length;s++){var a=e[s];if(t=KA[a.data.type],a.data.size>1&&(t=Math.max(t,16)*a.data.size),a.dataLen=t,n%t!==0&&n<16){var o=n%t%16;n+=o,i+=o}n+t>16?(i=Math.ceil(i/16)*16,a.offset=i,i+=t,n=t):(a.offset=i,n+=t,i+=t)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function ZA(r,e){var t=[];for(var n in r)e[n]&&t.push(e[n]);return t.sort(function(i,s){return i.index-s.index}),t}function QA(r,e){if(!r.autoManage)return{size:0,syncFunc:W5};for(var t=ZA(r.uniforms,e),n=JA(t),i=n.uboElements,s=n.size,a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],o=0;o<i.length;o++){for(var u=i[o],l=r.uniforms[u.data.name],h=u.data.name,c=!1,f=0;f<ns.length;f++){var p=ns[f];if(p.codeUbo&&p.test(u.data,l)){a.push("offset = "+u.offset/4+";",ns[f].codeUbo(u.data.name,l)),c=!0;break}}if(!c)if(u.data.size>1){var v=XA(u.data.type),g=Math.max(KA[u.data.type]/16,1),m=v/g,y=(4-m%4)%4;a.push(`
                cv = ud.`+h+`.value;
                v = uv.`+h+`;
                offset = `+u.offset/4+`;

                t = 0;

                for(var i=0; i < `+u.data.size*g+`; i++)
                {
                    for(var j = 0; j < `+m+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+y+`;
                }

                `)}else{var x=Y5[u.data.type];a.push(`
                cv = ud.`+h+`.value;
                v = uv.`+h+`;
                offset = `+u.offset/4+`;
                `+x+`;
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}var q5=function(){function r(){}return r}(),eR=function(){function r(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return r.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},r}();function K5(r,e){for(var t={},n=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES),i=0;i<n;i++){var s=e.getActiveAttrib(r,i);if(s.name.indexOf("gl_")!==0){var a=$A(e,s.type),o={type:a,name:s.name,size:XA(a),location:e.getAttribLocation(r,s.name)};t[s.name]=o}}return t}function J5(r,e){for(var t={},n=e.getProgramParameter(r,e.ACTIVE_UNIFORMS),i=0;i<n;i++){var s=e.getActiveUniform(r,i),a=s.name.replace(/\[.*?\]$/,""),o=!!s.name.match(/\[.*?\]$/),u=$A(e,s.type);t[a]={name:a,index:i,type:u,size:s.size,isArray:o,value:HA(u,s.size)}}return t}function tR(r,e){var t=l1(r,r.VERTEX_SHADER,e.vertexSrc),n=l1(r,r.FRAGMENT_SHADER,e.fragmentSrc),i=r.createProgram();if(r.attachShader(i,t),r.attachShader(i,n),r.linkProgram(i),r.getProgramParameter(i,r.LINK_STATUS)||O5(r,i,t,n),e.attributeData=K5(i,r),e.uniformData=J5(i,r),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var s=Object.keys(e.attributeData);s.sort(function(h,c){return h>c?1:-1});for(var a=0;a<s.length;a++)e.attributeData[s[a]].location=a,r.bindAttribLocation(i,a,s[a]);r.linkProgram(i)}r.deleteShader(t),r.deleteShader(n);var o={};for(var a in e.uniformData){var u=e.uniformData[a];o[a]={location:r.getUniformLocation(i,a),value:HA(u.type,u.size)}}var l=new eR(i,o);return l}var Z5=0,Gl={textureCount:0,uboCount:0},B0=function(){function r(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Z5++}return r.prototype.systemCheck=function(){if(!k5())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},r.prototype.contextChange=function(e){this.gl=e,this.reset()},r.prototype.bind=function(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;var n=e.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),t||(Gl.textureCount=0,Gl.uboCount=0,this.syncUniformGroup(e.uniformGroup,Gl)),i},r.prototype.setUniforms=function(e){var t=this.shader.program,n=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(n.uniformData,e,this.renderer)},r.prototype.syncUniformGroup=function(e,t){var n=this.getGlProgram();(!e.static||e.dirtyId!==n.uniformDirtyGroups[e.id])&&(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,t))},r.prototype.syncUniforms=function(e,t,n){var i=e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e);i(t.uniformData,e.uniforms,this.renderer,n)},r.prototype.createSyncGroups=function(e){var t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=F5(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]},r.prototype.syncUniformBufferGroup=function(e,t){var n=this.getGlProgram();if(!e.static||e.dirtyId!==0||!n.uniformGroups[e.id]){e.dirtyId=0;var i=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,t);e.buffer.update(),i(n.uniformData,e.uniforms,this.renderer,Gl,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[t])},r.prototype.createSyncBufferGroup=function(e,t,n){var i=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var s=this.gl.getUniformBlockIndex(t.program,n);t.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(t.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(e,this.shader.program.uniformData,"ubo"),o=this._uboCache[a];if(o||(o=this._uboCache[a]=QA(e,this.shader.program.uniformData)),e.autoManage){var u=new Float32Array(o.size/4);e.buffer.update(u)}return t.uniformGroups[e.id]=o.syncFunc,t.uniformGroups[e.id]},r.prototype.getSignature=function(e,t,n){var i=e.uniforms,s=[n+"-"];for(var a in i)s.push(a),t[a]&&s.push(t[a].type);return s.join("-")},r.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},r.prototype.generateProgram=function(e){var t=this.gl,n=e.program,i=tR(t,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i},r.prototype.reset=function(){this.program=null,this.shader=null},r.prototype.disposeShader=function(e){this.shader===e&&(this.shader=null)},r.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},r}();function Q5(r,e){return e===void 0&&(e=[]),e[he.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[he.ADD]=[r.ONE,r.ONE],e[he.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[he.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[he.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[he.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[he.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[he.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[he.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[he.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[he.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[he.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[he.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[he.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[he.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[he.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[he.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[he.NONE]=[0,0],e[he.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[he.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],e[he.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[he.SRC_IN]=[r.DST_ALPHA,r.ZERO],e[he.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],e[he.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[he.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],e[he.DST_IN]=[r.ZERO,r.SRC_ALPHA],e[he.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],e[he.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],e[he.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[he.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],e}var eH=0,tH=1,rH=2,nH=3,iH=4,sH=5,U0=function(){function r(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=he.NONE,this._blendEq=!1,this.map=[],this.map[eH]=this.setBlend,this.map[tH]=this.setOffset,this.map[rH]=this.setCullFace,this.map[nH]=this.setDepthTest,this.map[iH]=this.setFrontFace,this.map[sH]=this.setDepthMask,this.checks=[],this.defaultState=new bi,this.defaultState.blend=!0}return r.prototype.contextChange=function(e){this.gl=e,this.blendModes=Q5(e),this.set(this.defaultState),this.reset()},r.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var t=this.stateId^e.data,n=0;t;)t&1&&this.map[n].call(this,!!(e.data&1<<n)),t=t>>1,n++;this.stateId=e.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,e)},r.prototype.forceState=function(e){e=e||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(var t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data},r.prototype.setBlend=function(e){this.updateCheck(r.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},r.prototype.setOffset=function(e){this.updateCheck(r.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},r.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},r.prototype.setDepthMask=function(e){this.gl.depthMask(e)},r.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},r.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},r.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var t=this.blendModes[e],n=this.gl;t.length===2?n.blendFunc(t[0],t[1]):n.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,n.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},r.prototype.setPolygonOffset=function(e,t){this.gl.polygonOffset(e,t)},r.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},r.prototype.updateCheck=function(e,t){var n=this.checks.indexOf(e);t&&n===-1?this.checks.push(e):!t&&n!==-1&&this.checks.splice(n,1)},r.checkBlendMode=function(e,t){e.setBlendMode(t.blendMode)},r.checkPolygonOffset=function(e,t){e.setPolygonOffset(1,t.polygonOffset)},r.prototype.destroy=function(){this.gl=null},r}(),k0=function(){function r(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=te.GC_MAX_IDLE,this.checkCountMax=te.GC_MAX_CHECK_COUNT,this.mode=te.GC_MODE}return r.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==cu.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},r.prototype.run=function(){for(var e=this.renderer.texture,t=e.managedTextures,n=!1,i=0;i<t.length;i++){var s=t[i];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),t[i]=null,n=!0)}if(n){for(var a=0,i=0;i<t.length;i++)t[i]!==null&&(t[a++]=t[i]);t.length=a}},r.prototype.unload=function(e){var t=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&t.destroyTexture(n);for(var i=e.children.length-1;i>=0;i--)this.unload(e.children[i])},r.prototype.destroy=function(){this.renderer=null},r}();function aH(r){var e,t,n,i,s,a,o,u,l,h,c,f,p,v,g,m,y,x,T,E,b,w,C;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?C=(e={},e[ue.UNSIGNED_BYTE]=(t={},t[Z.RGBA]=r.RGBA8,t[Z.RGB]=r.RGB8,t[Z.RG]=r.RG8,t[Z.RED]=r.R8,t[Z.RGBA_INTEGER]=r.RGBA8UI,t[Z.RGB_INTEGER]=r.RGB8UI,t[Z.RG_INTEGER]=r.RG8UI,t[Z.RED_INTEGER]=r.R8UI,t[Z.ALPHA]=r.ALPHA,t[Z.LUMINANCE]=r.LUMINANCE,t[Z.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,t),e[ue.BYTE]=(n={},n[Z.RGBA]=r.RGBA8_SNORM,n[Z.RGB]=r.RGB8_SNORM,n[Z.RG]=r.RG8_SNORM,n[Z.RED]=r.R8_SNORM,n[Z.RGBA_INTEGER]=r.RGBA8I,n[Z.RGB_INTEGER]=r.RGB8I,n[Z.RG_INTEGER]=r.RG8I,n[Z.RED_INTEGER]=r.R8I,n),e[ue.UNSIGNED_SHORT]=(i={},i[Z.RGBA_INTEGER]=r.RGBA16UI,i[Z.RGB_INTEGER]=r.RGB16UI,i[Z.RG_INTEGER]=r.RG16UI,i[Z.RED_INTEGER]=r.R16UI,i[Z.DEPTH_COMPONENT]=r.DEPTH_COMPONENT16,i),e[ue.SHORT]=(s={},s[Z.RGBA_INTEGER]=r.RGBA16I,s[Z.RGB_INTEGER]=r.RGB16I,s[Z.RG_INTEGER]=r.RG16I,s[Z.RED_INTEGER]=r.R16I,s),e[ue.UNSIGNED_INT]=(a={},a[Z.RGBA_INTEGER]=r.RGBA32UI,a[Z.RGB_INTEGER]=r.RGB32UI,a[Z.RG_INTEGER]=r.RG32UI,a[Z.RED_INTEGER]=r.R32UI,a[Z.DEPTH_COMPONENT]=r.DEPTH_COMPONENT24,a),e[ue.INT]=(o={},o[Z.RGBA_INTEGER]=r.RGBA32I,o[Z.RGB_INTEGER]=r.RGB32I,o[Z.RG_INTEGER]=r.RG32I,o[Z.RED_INTEGER]=r.R32I,o),e[ue.FLOAT]=(u={},u[Z.RGBA]=r.RGBA32F,u[Z.RGB]=r.RGB32F,u[Z.RG]=r.RG32F,u[Z.RED]=r.R32F,u[Z.DEPTH_COMPONENT]=r.DEPTH_COMPONENT32F,u),e[ue.HALF_FLOAT]=(l={},l[Z.RGBA]=r.RGBA16F,l[Z.RGB]=r.RGB16F,l[Z.RG]=r.RG16F,l[Z.RED]=r.R16F,l),e[ue.UNSIGNED_SHORT_5_6_5]=(h={},h[Z.RGB]=r.RGB565,h),e[ue.UNSIGNED_SHORT_4_4_4_4]=(c={},c[Z.RGBA]=r.RGBA4,c),e[ue.UNSIGNED_SHORT_5_5_5_1]=(f={},f[Z.RGBA]=r.RGB5_A1,f),e[ue.UNSIGNED_INT_2_10_10_10_REV]=(p={},p[Z.RGBA]=r.RGB10_A2,p[Z.RGBA_INTEGER]=r.RGB10_A2UI,p),e[ue.UNSIGNED_INT_10F_11F_11F_REV]=(v={},v[Z.RGB]=r.R11F_G11F_B10F,v),e[ue.UNSIGNED_INT_5_9_9_9_REV]=(g={},g[Z.RGB]=r.RGB9_E5,g),e[ue.UNSIGNED_INT_24_8]=(m={},m[Z.DEPTH_STENCIL]=r.DEPTH24_STENCIL8,m),e[ue.FLOAT_32_UNSIGNED_INT_24_8_REV]=(y={},y[Z.DEPTH_STENCIL]=r.DEPTH32F_STENCIL8,y),e):C=(x={},x[ue.UNSIGNED_BYTE]=(T={},T[Z.RGBA]=r.RGBA,T[Z.RGB]=r.RGB,T[Z.ALPHA]=r.ALPHA,T[Z.LUMINANCE]=r.LUMINANCE,T[Z.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,T),x[ue.UNSIGNED_SHORT_5_6_5]=(E={},E[Z.RGB]=r.RGB,E),x[ue.UNSIGNED_SHORT_4_4_4_4]=(b={},b[Z.RGBA]=r.RGBA,b),x[ue.UNSIGNED_SHORT_5_5_5_1]=(w={},w[Z.RGBA]=r.RGBA,w),x),C}var Eh=function(){function r(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=ue.UNSIGNED_BYTE,this.internalFormat=Z.RGBA,this.samplerType=0}return r}(),G0=function(){function r(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Ie,this.hasIntegerTextures=!1}return r.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=aH(e);var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var n=0;n<t;n++)this.boundTextures[n]=null;this.emptyTextures={};var i=new Eh(e.createTexture());e.bindTexture(e.TEXTURE_2D,i.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=i,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Eh(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(var n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(var n=0;n<this.boundTextures.length;n++)this.bind(null,n)},r.prototype.bind=function(e,t){t===void 0&&(t=0);var n=this.gl;if(e=e==null?void 0:e.castToBaseTexture(),e&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[t]=null},r.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},r.prototype.unbind=function(e){var t=this,n=t.gl,i=t.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<i.length;s++)i[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<i.length;s++)i[s]===e&&(this.currentLocation!==s&&(n.activeTexture(n.TEXTURE0+s),this.currentLocation=s),n.bindTexture(e.target,this.emptyTextures[e.target].texture),i[s]=null)},r.prototype.ensureSamplerType=function(e){var t=this,n=t.boundTextures,i=t.hasIntegerTextures,s=t.CONTEXT_UID;if(i)for(var a=e-1;a>=0;--a){var o=n[a];if(o){var u=o._glTextures[s];u.samplerType!==hu.FLOAT&&this.renderer.texture.unbind(o)}}},r.prototype.initTexture=function(e){var t=new Eh(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t},r.prototype.initTextureType=function(e,t){var n,i;t.internalFormat=(i=(n=this.internalFormats[e.type])===null||n===void 0?void 0:n[e.format])!==null&&i!==void 0?i:e.format,this.webGLVersion===2&&e.type===ue.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type},r.prototype.updateTexture=function(e){var t=e._glTextures[this.CONTEXT_UID];if(t){var n=this.renderer;if(this.initTextureType(e,t),e.resource&&e.resource.upload(n,e,t))t.samplerType!==hu.FLOAT&&(this.hasIntegerTextures=!0);else{var i=e.realWidth,s=e.realHeight,a=n.gl;(t.width!==i||t.height!==s||t.dirtyId<0)&&(t.width=i,t.height=s,a.texImage2D(e.target,0,t.internalFormat,i,s,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}},r.prototype.destroyTexture=function(e,t){var n=this.gl;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){var i=this.managedTextures.indexOf(e);i!==-1&&rs(this.managedTextures,i,1)}},r.prototype.updateTextureStyle=function(e){var t=e._glTextures[this.CONTEXT_UID];t&&((e.mipmap===xr.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?t.mipmap=!1:t.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?t.wrapMode=Fr.CLAMP:t.wrapMode=e.wrapMode,e.resource&&e.resource.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)},r.prototype.setStyle=function(e,t){var n=this.gl;if(t.mipmap&&e.mipmap!==xr.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,t.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Mr.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===Mr.LINEAR){var s=Math.min(e.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Mr.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===Mr.LINEAR?n.LINEAR:n.NEAREST)},r.prototype.destroy=function(){this.renderer=null},r}(),rR={__proto__:null,FilterSystem:I0,BatchSystem:P0,ContextSystem:A0,FramebufferSystem:R0,GeometrySystem:O0,MaskSystem:M0,ScissorSystem:D0,StencilSystem:L0,ProjectionSystem:N0,RenderTextureSystem:F0,ShaderSystem:B0,StateSystem:U0,TextureGCSystem:k0,TextureSystem:G0},Ld=new ct,nR=function(r){Ve(e,r);function e(t,n){t===void 0&&(t=pa.UNKNOWN);var i=r.call(this)||this;return n=Object.assign({},te.RENDER_OPTIONS,n),i.options=n,i.type=t,i.screen=new Pe(0,0,n.width,n.height),i.view=n.view||te.ADAPTER.createCanvas(),i.resolution=n.resolution||te.RESOLUTION,i.useContextAlpha=n.useContextAlpha,i.autoDensity=!!n.autoDensity,i.preserveDrawingBuffer=n.preserveDrawingBuffer,i.clearBeforeRender=n.clearBeforeRender,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,1],i._backgroundColorString="#000000",i.backgroundColor=n.backgroundColor||i._backgroundColor,i.backgroundAlpha=n.backgroundAlpha,n.transparent!==void 0&&(kt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),i.useContextAlpha=n.transparent,i.backgroundAlpha=n.transparent?0:1),i._lastObjectRendered=null,i.plugins={},i}return e.prototype.initPlugins=function(t){for(var n in t)this.plugins[n]=new t[n](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,n){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(n*this.resolution);var i=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=i,this.screen.height=s,this.autoDensity&&(this.view.style.width=i+"px",this.view.style.height=s+"px"),this.emit("resize",i,s)},e.prototype.generateTexture=function(t,n,i,s){n===void 0&&(n={}),typeof n=="number"&&(kt("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),n={scaleMode:n,resolution:i,region:s});var a=n.region,o=T5(n,["region"]);s=a||t.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var u=vi.create(ny({width:s.width,height:s.height},o));return Ld.tx=-s.x,Ld.ty=-s.y,this.render(t,{renderTexture:u,clear:!1,transform:Ld,skipUpdateTransform:!!t.parent}),u},e.prototype.destroy=function(t){for(var n in this.plugins)this.plugins[n].destroy(),this.plugins[n]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var i=this;i.plugins=null,i.type=pa.UNKNOWN,i.view=null,i.screen=null,i._tempDisplayObjectParent=null,i.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=h0(t),vs(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(jr),oH=function(){function r(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return r}(),uH=function(){function r(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}return r.prototype.destroy=function(){this.renderer=null},r.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},r.prototype.bind=function(e){var t=this,n=t.gl,i=t.CONTEXT_UID,s=e._glBuffers[i]||this.createGLBuffer(e);n.bindBuffer(e.type,s.buffer)},r.prototype.bindBufferBase=function(e,t){var n=this,i=n.gl,s=n.CONTEXT_UID;if(this.boundBufferBases[t]!==e){var a=e._glBuffers[s]||this.createGLBuffer(e);this.boundBufferBases[t]=e,i.bindBufferBase(i.UNIFORM_BUFFER,t,a.buffer)}},r.prototype.bindBufferRange=function(e,t,n){var i=this,s=i.gl,a=i.CONTEXT_UID;n=n||0;var o=e._glBuffers[a]||this.createGLBuffer(e);s.bindBufferRange(s.UNIFORM_BUFFER,t||0,o.buffer,n*256,256)},r.prototype.update=function(e){var t=this,n=t.gl,i=t.CONTEXT_UID,s=e._glBuffers[i];if(e._updateID!==s.updateID)if(s.updateID=e._updateID,n.bindBuffer(e.type,s.buffer),s.byteLength>=e.data.byteLength)n.bufferSubData(e.type,0,e.data);else{var a=e.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;s.byteLength=e.data.byteLength,n.bufferData(e.type,e.data,a)}},r.prototype.dispose=function(e,t){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var n=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),n&&(t||i.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}},r.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedBuffers),n=0;n<t.length;n++)this.dispose(this.managedBuffers[t[n]],e)},r.prototype.createGLBuffer=function(e){var t=this,n=t.CONTEXT_UID,i=t.gl;return e._glBuffers[n]=new oH(i.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[n]},r}(),tf=function(r){Ve(e,r);function e(t){var n=r.call(this,pa.WEBGL,t)||this;return t=n.options,n.gl=null,n.CONTEXT_UID=0,n.runners={destroy:new xt("destroy"),contextChange:new xt("contextChange"),reset:new xt("reset"),update:new xt("update"),postrender:new xt("postrender"),prerender:new xt("prerender"),resize:new xt("resize")},n.runners.contextChange.add(n),n.globalUniforms=new ci({projectionMatrix:new ct},!0),n.addSystem(M0,"mask").addSystem(A0,"context").addSystem(U0,"state").addSystem(B0,"shader").addSystem(G0,"texture").addSystem(uH,"buffer").addSystem(O0,"geometry").addSystem(R0,"framebuffer").addSystem(D0,"scissor").addSystem(L0,"stencil").addSystem(N0,"projection").addSystem(k0,"textureGC").addSystem(I0,"filter").addSystem(F0,"renderTexture").addSystem(P0,"batch"),n.initPlugins(e.__plugins),n.multisample=void 0,t.context?n.context.initFromContext(t.context):n.context.initFromOptions({alpha:!!n.useContextAlpha,antialias:t.antialias,premultipliedAlpha:n.useContextAlpha&&n.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:n.options.powerPreference}),n.renderingToScreen=!0,EA(n.context.webGLVersion===2?"WebGL 2":"WebGL 1"),n.resize(n.options.width,n.options.height),n}return e.create=function(t){if(bA())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var t=this.gl,n;if(this.context.webGLVersion===1){var i=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),n=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,i)}else{var i=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),n=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,i)}n>=$e.HIGH?this.multisample=$e.HIGH:n>=$e.MEDIUM?this.multisample=$e.MEDIUM:n>=$e.LOW?this.multisample=$e.LOW:this.multisample=$e.NONE},e.prototype.addSystem=function(t,n){var i=new t(this);if(this[n])throw new Error('Whoops! The name "'+n+'" is already in use');this[n]=i;for(var s in this.runners)this.runners[s].add(i);return this},e.prototype.render=function(t,n){var i,s,a,o;if(n&&(n instanceof vi?(kt("6.0.0","Renderer#render arguments changed, use options instead."),i=n,s=arguments[2],a=arguments[3],o=arguments[4]):(i=n.renderTexture,s=n.clear,a=n.transform,o=n.skipUpdateTransform)),this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=a,!this.context.isLost){if(i||(this._lastObjectRendered=t),!o){var u=t.enableTempParent();t.updateTransform(),t.disableTempParent(u)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(t,n,i,s){n===void 0&&(n={});var a=r.prototype.generateTexture.call(this,t,n,i,s);return this.framebuffer.blit(),a},e.prototype.resize=function(t,n){r.prototype.resize.call(this,t,n),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(t){this.runners.destroy.emit();for(var n in this.runners)this.runners[n].destroy();r.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return kt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,n){kt("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),on.add({name:t,type:Ne.RendererPlugin,ref:n})},e.__plugins={},e}(nR);on.handleByMap(Ne.RendererPlugin,tf.__plugins);function iR(r){return tf.create(r)}var lH=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,hH=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,sR=lH,j0=hH,cH=function(){function r(e){kt("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=e}return r.prototype.destroy=function(){this.renderer=null},r}(),vc=function(){function r(){this.texArray=null,this.blend=0,this.type=pr.TRIANGLES,this.start=0,this.size=0,this.data=null}return r}(),mc=function(){function r(){this.elements=[],this.ids=[],this.count=0}return r.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},r}(),gc=function(){function r(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(r.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),r.prototype.view=function(e){return this[e+"View"]},r.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},r.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},r}(),aR=function(r){Ve(e,r);function e(t){var n=r.call(this,t)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=bi.for2d(),n.size=te.SPRITE_BATCH_SIZE*4,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),t.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return e.prototype.contextChange=function(){var t=this.renderer.gl;te.PREFER_ENV===rn.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),te.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=WA(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var n=0;n<this._packedGeometryPoolSize;n++)this._packedGeometries[n]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,n=e._textureArrayPool,i=this.size/4,s=Math.floor(i/this.MAX_TEXTURES)+1;t.length<i;)t.push(new vc);for(;n.length<s;)n.push(new mc);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this,n=t._bufferedTextures,i=t.MAX_TEXTURES,s=e._textureArrayPool,a=this.renderer.batch,o=this._tempBoundTextures,u=this.renderer.textureGC.count,l=++Ie._globalBatch,h=0,c=s[0],f=0;a.copyBoundTextures(o,i);for(var p=0;p<this._bufferSize;++p){var v=n[p];n[p]=null,v._batchEnabled!==l&&(c.count>=i&&(a.boundArray(c,o,l,i),this.buildDrawCalls(c,f,p),f=p,c=s[++h],++l),v._batchEnabled=l,v.touched=u,c.elements[c.count++]=v)}c.count>0&&(a.boundArray(c,o,l,i),this.buildDrawCalls(c,f,this._bufferSize),++h,++l);for(var p=0;p<o.length;p++)o[p]=null;Ie._globalBatch=l},e.prototype.buildDrawCalls=function(t,n,i){var s=this,a=s._bufferedElements,o=s._attributeBuffer,u=s._indexBuffer,l=s.vertexSize,h=e._drawCallPool,c=this._dcIndex,f=this._aIndex,p=this._iIndex,v=h[c];v.start=this._iIndex,v.texArray=t;for(var g=n;g<i;++g){var m=a[g],y=m._texture.baseTexture,x=f0[y.alphaMode?1:0][m.blendMode];a[g]=null,n<g&&v.blend!==x&&(v.size=p-v.start,n=g,v=h[++c],v.texArray=t,v.start=p),this.packInterleavedGeometry(m,o,u,f,p),f+=m.vertexData.length/2*l,p+=m.indices.length,v.blend=x}n<i&&(v.size=p-v.start,++c),this._dcIndex=c,this._aIndex=f,this._iIndex=p},e.prototype.bindAndClearTexArray=function(t){for(var n=this.renderer.texture,i=0;i<t.count;i++)n.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this,n=t._packedGeometries,i=t._attributeBuffer,s=t._indexBuffer;te.CAN_UPLOAD_SAME_BUFFER?(n[this._flushId]._buffer.update(i.rawBinaryData),n[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,n[this._flushId]=new this.geometryClass),n[this._flushId]._buffer.update(i.rawBinaryData),n[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(n[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,n=this.renderer,i=n.gl,s=n.state,a=e._drawCallPool,o=null,u=0;u<t;u++){var l=a[u],h=l.texArray,c=l.type,f=l.size,p=l.start,v=l.blend;o!==h&&(o=h,this.bindAndClearTexArray(h)),this.state.blendMode=v,s.set(this.state),i.drawElements(c,f,i.UNSIGNED_SHORT,p*2)}},e.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),te.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),r.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var n=vu(Math.ceil(t/8)),i=Jg(n),s=n*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var a=this._aBuffers[s];return a||(this._aBuffers[s]=a=new gc(s*this.vertexSize*4)),a},e.prototype.getIndexBuffer=function(t){var n=vu(Math.ceil(t/12)),i=Jg(n),s=n*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var a=this._iBuffers[i];return a||(this._iBuffers[i]=a=new Uint16Array(s)),a},e.prototype.packInterleavedGeometry=function(t,n,i,s,a){for(var o=n.uint32View,u=n.float32View,l=s/this.vertexSize,h=t.uvs,c=t.indices,f=t.vertexData,p=t._texture.baseTexture._batchLocation,v=Math.min(t.worldAlpha,1),g=v<1&&t._texture.baseTexture.alphaMode?qc(t._tintRGB,v):t._tintRGB+(v*255<<24),m=0;m<f.length;m+=2)u[s++]=f[m],u[s++]=f[m+1],u[s++]=h[m],u[s++]=h[m+1],o[s++]=g,u[s++]=p;for(var m=0;m<c.length;m++)i[a++]=l+c[m]},e._drawCallPool=[],e._textureArrayPool=[],e}(qu),oR=function(){function r(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return r.prototype.generateShader=function(e){if(!this.programCache[e]){for(var t=new Int32Array(e),n=0;n<e;n++)t[n]=n;this.defaultGroupCache[e]=ci.from({uSamplers:t},!0);var i=this.fragTemplate;i=i.replace(/%count%/gi,""+e),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Fa(this.vertexSrc,i)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new ct,default:this.defaultGroupCache[e]};return new bn(this.programCache[e],s)},r.prototype.generateSampleSrc=function(e){var t="";t+=`
`,t+=`
`;for(var n=0;n<e;n++)n>0&&(t+=`
else `),n<e-1&&(t+="if(vTextureId < "+n+".5)"),t+=`
{`,t+=`
	color = texture2D(uSamplers[`+n+"], vTextureCoord);",t+=`
}`;return t+=`
`,t+=`
`,t},r}(),H0=function(r){Ve(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this)||this;return n._buffer=new ut(null,t,!1),n._indexBuffer=new ut(null,t,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,ue.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,ue.FLOAT).addAttribute("aColor",n._buffer,4,!0,ue.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,ue.FLOAT).addIndex(n._indexBuffer),n}return e}(Na),m1=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,g1=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,uR=function(){function r(){}return r.create=function(e){var t=Object.assign({vertex:m1,fragment:g1,geometryClass:H0,vertexSize:6},e),n=t.vertex,i=t.fragment,s=t.vertexSize,a=t.geometryClass;return function(o){Ve(u,o);function u(l){var h=o.call(this,l)||this;return h.shaderGenerator=new oR(n,i),h.geometryClass=a,h.vertexSize=s,h}return u}(aR)},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return m1},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentTemplate",{get:function(){return g1},enumerable:!1,configurable:!0}),r}(),V0=uR.create();Object.assign(V0,{extension:{name:"batch",type:Ne.RendererPlugin}});var lR={},fH=function(r){Object.defineProperty(lR,r,{get:function(){return kt("6.0.0","PIXI.systems."+r+" has moved to PIXI."+r),FA[r]}})};for(var z0 in FA)fH(z0);var hR={},dH=function(r){Object.defineProperty(hR,r,{get:function(){return kt("6.0.0","PIXI.resources."+r+" has moved to PIXI."+r),rR[r]}})};for(var z0 in rR)dH(z0);var pH="6.5.10";/*!
 * @pixi/accessibility - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var cR={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};st.mixin(cR);var vH=9,jl=100,mH=0,gH=0,y1=2,_1=1,yH=-1e3,_H=-1e3,xH=2,fR=function(){function r(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(vr.tablet||vr.phone)&&this.createTouchHook();var t=document.createElement("div");t.style.width=jl+"px",t.style.height=jl+"px",t.style.position="absolute",t.style.top=mH+"px",t.style.left=gH+"px",t.style.zIndex=y1.toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(r.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),r.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width=_1+"px",t.style.height=_1+"px",t.style.position="absolute",t.style.top=yH+"px",t.style.left=_H+"px",t.style.zIndex=xH.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t},r.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},r.prototype.activate=function(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)===null||e===void 0||e.appendChild(this.div))},r.prototype.deactivate=function(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)===null||e===void 0||e.removeChild(this.div))},r.prototype.updateAccessibleObjects=function(e){if(!(!e.visible||!e.accessibleChildren)){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);var t=e.children;if(t)for(var n=0;n<t.length;n++)this.updateAccessibleObjects(t[n])}},r.prototype.update=function(){var e=performance.now();if(!(vr.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),n=t.left,i=t.top,s=t.width,a=t.height,o=this.renderer,u=o.width,l=o.height,h=o.resolution,c=s/u*h,f=a/l*h,p=this.div;p.style.left=n+"px",p.style.top=i+"px",p.style.width=u+"px",p.style.height=l+"px";for(var v=0;v<this.children.length;v++){var g=this.children[v];if(g.renderId!==this.renderId)g._accessibleActive=!1,rs(this.children,v,1),this.div.removeChild(g._accessibleDiv),this.pool.push(g._accessibleDiv),g._accessibleDiv=null,v--;else{p=g._accessibleDiv;var m=g.hitArea,y=g.worldTransform;g.hitArea?(p.style.left=(y.tx+m.x*y.a)*c+"px",p.style.top=(y.ty+m.y*y.d)*f+"px",p.style.width=m.width*y.a*c+"px",p.style.height=m.height*y.d*f+"px"):(m=g.getBounds(),this.capHitArea(m),p.style.left=m.x*c+"px",p.style.top=m.y*f+"px",p.style.width=m.width*c+"px",p.style.height=m.height*f+"px",p.title!==g.accessibleTitle&&g.accessibleTitle!==null&&(p.title=g.accessibleTitle),p.getAttribute("aria-label")!==g.accessibleHint&&g.accessibleHint!==null&&p.setAttribute("aria-label",g.accessibleHint)),(g.accessibleTitle!==p.title||g.tabIndex!==p.tabIndex)&&(p.title=g.accessibleTitle,p.tabIndex=g.tabIndex,this.debug&&this.updateDebugHTML(p))}}this.renderId++}},r.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex},r.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var t=this.renderer,n=t.width,i=t.height;e.x+e.width>n&&(e.width=n-e.x),e.y+e.height>i&&(e.height=i-e.y)},r.prototype.addChild=function(e){var t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=jl+"px",t.style.height=jl+"px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=y1.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title="displayObject "+e.tabIndex),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},r.prototype._onClick=function(e){var t=this.renderer.plugins.interaction,n=e.target.displayObject,i=t.eventData;t.dispatchEvent(n,"click",i),t.dispatchEvent(n,"pointertap",i),t.dispatchEvent(n,"tap",i)},r.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction,n=e.target.displayObject,i=t.eventData;t.dispatchEvent(n,"mouseover",i)},r.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction,n=e.target.displayObject,i=t.eventData;t.dispatchEvent(n,"mouseout",i)},r.prototype._onKeyDown=function(e){e.keyCode===vH&&this.activate()},r.prototype._onMouseMove=function(e){e.movementX===0&&e.movementY===0||this.deactivate()},r.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},r.extension={name:"accessibility",type:[Ne.RendererPlugin,Ne.CanvasRendererPlugin]},r}();/*!
 * @pixi/interaction - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var sy=function(){function r(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new He,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(r.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),r.prototype.getLocalPosition=function(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)},r.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var t="buttons"in e&&e.buttons;this.buttons=Number.isInteger(t)?t:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},r.prototype.reset=function(){this.isPrimary=!1},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ay=function(r,e){return ay=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},ay(r,e)};function TH(r,e){ay(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var dR=function(){function r(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return r.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},r.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},r}(),bh=function(){function r(e){this._pointerId=e,this._flags=r.FLAGS.NONE}return r.prototype._doSet=function(e,t){t?this._flags=this._flags|e:this._flags=this._flags&~e},Object.defineProperty(r.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"none",{get:function(){return this._flags===r.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"over",{get:function(){return(this._flags&r.FLAGS.OVER)!==0},set:function(e){this._doSet(r.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rightDown",{get:function(){return(this._flags&r.FLAGS.RIGHT_DOWN)!==0},set:function(e){this._doSet(r.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leftDown",{get:function(){return(this._flags&r.FLAGS.LEFT_DOWN)!==0},set:function(e){this._doSet(r.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),r.FLAGS=Object.freeze({NONE:0,OVER:1<<0,LEFT_DOWN:1<<1,RIGHT_DOWN:1<<2}),r}(),EH=function(){function r(){this._tempPoint=new He}return r.prototype.recursiveFindHit=function(e,t,n,i,s){var a;if(!t||!t.visible)return!1;var o=e.data.global;s=t.interactive||s;var u=!1,l=s,h=!0;if(t.hitArea)i&&(t.worldTransform.applyInverse(o,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?u=!0:(i=!1,h=!1)),l=!1;else if(t._mask&&i){var c=t._mask.isMaskData?t._mask.maskObject:t._mask;c&&!(!((a=c.containsPoint)===null||a===void 0)&&a.call(c,o))&&(i=!1)}if(h&&t.interactiveChildren&&t.children)for(var f=t.children,p=f.length-1;p>=0;p--){var v=f[p],g=this.recursiveFindHit(e,v,n,i,l);if(g){if(!v.parent)continue;l=!1,g&&(e.target&&(i=!1),u=!0)}}return s&&(i&&!e.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(o)&&(u=!0),t.interactive&&(u&&!e.target&&(e.target=t),n&&n(e,t,!!u))),u},r.prototype.findHit=function(e,t,n,i){this.recursiveFindHit(e,t,n,i,!1)},r}(),pR={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(r){r?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};st.mixin(pR);var Hl=1,Vl={target:null,data:{global:null}},X0=function(r){TH(e,r);function e(t,n){var i=r.call(this)||this;return n=n||{},i.renderer=t,i.autoPreventDefault=n.autoPreventDefault!==void 0?n.autoPreventDefault:!0,i.interactionFrequency=n.interactionFrequency||10,i.mouse=new sy,i.mouse.identifier=Hl,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[Hl]=i.mouse,i.interactionDataPool=[],i.eventData=new dR,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.tickerAdded=!1,i.mouseOverRenderer=!("PointerEvent"in globalThis),i.supportsTouchEvents="ontouchstart"in globalThis,i.supportsPointerEvents=!!globalThis.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i.resolution=1,i.delayedEvents=[],i.search=new EH,i._tempDisplayObject=new g0,i._eventListenerOptions={capture:!0,passive:!1},i._useSystemTicker=n.useSystemTicker!==void 0?n.useSystemTicker:!0,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,n){return Vl.target=null,Vl.data.global=t,n||(n=this.lastObjectRendered),this.processInteractive(Vl,n,null,!0),Vl.target},e.prototype.setTargetElement=function(t,n){n===void 0&&(n=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=n,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(pt.system.add(this.tickerUpdate,this,nn.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(pt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var t in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var n=this.activeInteractionData[t];if(n.originalEvent&&n.pointerType!=="touch"){var i=this.configureInteractionEventForDOMEvent(this.eventData,n.originalEvent,n);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||"default";var n=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(n=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var i=this.cursorStyles[t];if(i)switch(typeof i){case"string":n&&(this.interactionDOMElement.style.cursor=i);break;case"function":i(t);break;case"object":n&&Object.assign(this.interactionDOMElement.style,i);break}else n&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,n,i){(!i.stopPropagationHint||t===i.stopsPropagatingAt)&&(i.currentTarget=t,i.type=n,t.emit(n,i),t[n]&&t[n](i))},e.prototype.delayDispatchEvent=function(t,n,i){this.delayedEvents.push({displayObject:t,eventString:n,eventData:i})},e.prototype.mapPositionToPoint=function(t,n,i){var s;this.interactionDOMElement.parentElement?s=this.interactionDOMElement.getBoundingClientRect():s={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var a=1/this.resolution;t.x=(n-s.left)*(this.interactionDOMElement.width/s.width)*a,t.y=(i-s.top)*(this.interactionDOMElement.height/s.height)*a},e.prototype.processInteractive=function(t,n,i,s){var a=this.search.findHit(t,n,i,s),o=this.delayedEvents;if(!o.length)return a;t.stopPropagationHint=!1;var u=o.length;this.delayedEvents=[];for(var l=0;l<u;l++){var h=o[l],c=h.displayObject,f=h.eventString,p=h.eventData;p.stopsPropagatingAt===c&&(p.stopPropagationHint=!0),this.dispatchEvent(c,f,p)}return a},e.prototype.onPointerDown=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var n=this.normalizeToPointerData(t);if(this.autoPreventDefault&&n[0].isNormalized){var i=t.cancelable||!("cancelable"in t);i&&t.preventDefault()}for(var s=n.length,a=0;a<s;a++){var o=n[a],u=this.getInteractionDataForPointerId(o),l=this.configureInteractionEventForDOMEvent(this.eventData,o,u);if(l.data.originalEvent=t,this.processInteractive(l,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",l),o.pointerType==="touch")this.emit("touchstart",l);else if(o.pointerType==="mouse"||o.pointerType==="pen"){var h=o.button===2;this.emit(h?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,n,i){var s=t.data,a=t.data.identifier;if(i){if(n.trackedPointers[a]||(n.trackedPointers[a]=new bh(a)),this.dispatchEvent(n,"pointerdown",t),s.pointerType==="touch")this.dispatchEvent(n,"touchstart",t);else if(s.pointerType==="mouse"||s.pointerType==="pen"){var o=s.button===2;o?n.trackedPointers[a].rightDown=!0:n.trackedPointers[a].leftDown=!0,this.dispatchEvent(n,o?"rightdown":"mousedown",t)}}},e.prototype.onPointerComplete=function(t,n,i){var s=this.normalizeToPointerData(t),a=s.length,o=t.target;t.composedPath&&t.composedPath().length>0&&(o=t.composedPath()[0]);for(var u=o!==this.interactionDOMElement?"outside":"",l=0;l<a;l++){var h=s[l],c=this.getInteractionDataForPointerId(h),f=this.configureInteractionEventForDOMEvent(this.eventData,h,c);if(f.data.originalEvent=t,this.processInteractive(f,this.lastObjectRendered,i,n||!u),this.emit(n?"pointercancel":"pointerup"+u,f),h.pointerType==="mouse"||h.pointerType==="pen"){var p=h.button===2;this.emit(p?"rightup"+u:"mouseup"+u,f)}else h.pointerType==="touch"&&(this.emit(n?"touchcancel":"touchend"+u,f),this.releaseInteractionDataForPointerId(h.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&t.pointerType==="touch"||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,n){var i=t.data,s=t.data.identifier;n.trackedPointers[s]!==void 0&&(delete n.trackedPointers[s],this.dispatchEvent(n,"pointercancel",t),i.pointerType==="touch"&&this.dispatchEvent(n,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&t.pointerType==="touch"||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,n,i){var s=t.data,a=t.data.identifier,o=n.trackedPointers[a],u=s.pointerType==="touch",l=s.pointerType==="mouse"||s.pointerType==="pen",h=!1;if(l){var c=s.button===2,f=bh.FLAGS,p=c?f.RIGHT_DOWN:f.LEFT_DOWN,v=o!==void 0&&o.flags&p;i?(this.dispatchEvent(n,c?"rightup":"mouseup",t),v&&(this.dispatchEvent(n,c?"rightclick":"click",t),h=!0)):v&&this.dispatchEvent(n,c?"rightupoutside":"mouseupoutside",t),o&&(c?o.rightDown=!1:o.leftDown=!1)}i?(this.dispatchEvent(n,"pointerup",t),u&&this.dispatchEvent(n,"touchend",t),o&&((!l||h)&&this.dispatchEvent(n,"pointertap",t),u&&(this.dispatchEvent(n,"tap",t),o.over=!1))):o&&(this.dispatchEvent(n,"pointerupoutside",t),u&&this.dispatchEvent(n,"touchendoutside",t)),o&&o.none&&delete n.trackedPointers[a]},e.prototype.onPointerMove=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var n=this.normalizeToPointerData(t);(n[0].pointerType==="mouse"||n[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var i=n.length,s=0;s<i;s++){var a=n[s],o=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,o);u.data.originalEvent=t,this.processInteractive(u,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",u),a.pointerType==="touch"&&this.emit("touchmove",u),(a.pointerType==="mouse"||a.pointerType==="pen")&&this.emit("mousemove",u)}n[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,n,i){var s=t.data,a=s.pointerType==="touch",o=s.pointerType==="mouse"||s.pointerType==="pen";o&&this.processPointerOverOut(t,n,i),(!this.moveWhenInside||i)&&(this.dispatchEvent(n,"pointermove",t),a&&this.dispatchEvent(n,"touchmove",t),o&&this.dispatchEvent(n,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var n=this.normalizeToPointerData(t),i=n[0];i.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var s=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,s);a.data.originalEvent=i,this.processInteractive(a,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",a),i.pointerType==="mouse"||i.pointerType==="pen"?this.emit("mouseout",a):this.releaseInteractionDataForPointerId(s.identifier)}},e.prototype.processPointerOverOut=function(t,n,i){var s=t.data,a=t.data.identifier,o=s.pointerType==="mouse"||s.pointerType==="pen",u=n.trackedPointers[a];i&&!u&&(u=n.trackedPointers[a]=new bh(a)),u!==void 0&&(i&&this.mouseOverRenderer?(u.over||(u.over=!0,this.delayDispatchEvent(n,"pointerover",t),o&&this.delayDispatchEvent(n,"mouseover",t)),o&&this.cursor===null&&(this.cursor=n.cursor)):u.over&&(u.over=!1,this.dispatchEvent(n,"pointerout",this.eventData),o&&this.dispatchEvent(n,"mouseout",t),u.none&&delete n.trackedPointers[a]))},e.prototype.onPointerOver=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var n=this.normalizeToPointerData(t),i=n[0],s=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,s);a.data.originalEvent=i,i.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",a),(i.pointerType==="mouse"||i.pointerType==="pen")&&this.emit("mouseover",a)}},e.prototype.getInteractionDataForPointerId=function(t){var n=t.pointerId,i;return n===Hl||t.pointerType==="mouse"?i=this.mouse:this.activeInteractionData[n]?i=this.activeInteractionData[n]:(i=this.interactionDataPool.pop()||new sy,i.identifier=n,this.activeInteractionData[n]=i),i.copyEvent(t),i},e.prototype.releaseInteractionDataForPointerId=function(t){var n=this.activeInteractionData[t];n&&(delete this.activeInteractionData[t],n.reset(),this.interactionDataPool.push(n))},e.prototype.configureInteractionEventForDOMEvent=function(t,n,i){return t.data=i,this.mapPositionToPoint(i.global,n.clientX,n.clientY),n.pointerType==="touch"&&(n.globalX=i.global.x,n.globalY=i.global.y),i.originalEvent=n,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var n=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,s=t.changedTouches.length;i<s;i++){var a=t.changedTouches[i];typeof a.button>"u"&&(a.button=t.touches.length?1:0),typeof a.buttons>"u"&&(a.buttons=t.touches.length?1:0),typeof a.isPrimary>"u"&&(a.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof a.width>"u"&&(a.width=a.radiusX||1),typeof a.height>"u"&&(a.height=a.radiusY||1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="touch"),typeof a.pointerId>"u"&&(a.pointerId=a.identifier||0),typeof a.pressure>"u"&&(a.pressure=a.force||.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),typeof a.layerX>"u"&&(a.layerX=a.offsetX=a.clientX),typeof a.layerY>"u"&&(a.layerY=a.offsetY=a.clientY),a.isNormalized=!0,n.push(a)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){var o=t;typeof o.isPrimary>"u"&&(o.isPrimary=!0),typeof o.width>"u"&&(o.width=1),typeof o.height>"u"&&(o.height=1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="mouse"),typeof o.pointerId>"u"&&(o.pointerId=Hl),typeof o.pressure>"u"&&(o.pressure=.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),o.isNormalized=!0,n.push(o)}else n.push(t);return n},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e.extension={name:"interaction",type:[Ne.RendererPlugin,Ne.CanvasRendererPlugin]},e}(jr);/*!
 * @pixi/extract - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var bH=new Pe,SH=4,vR=function(){function r(e){this.renderer=e}return r.prototype.image=function(e,t,n){var i=new Image;return i.src=this.base64(e,t,n),i},r.prototype.base64=function(e,t,n){return this.canvas(e).toDataURL(t,n)},r.prototype.canvas=function(e,t){var n=this._rawPixels(e,t),i=n.pixels,s=n.width,a=n.height,o=n.flipY,u=new Qg(s,a,1),l=u.context.getImageData(0,0,s,a);if(r.arrayPostDivide(i,l.data),u.context.putImageData(l,0,0),o){var h=new Qg(u.width,u.height,1);h.context.scale(1,-1),h.context.drawImage(u.canvas,0,-a),u.destroy(),u=h}return u.canvas},r.prototype.pixels=function(e,t){var n=this._rawPixels(e,t).pixels;return r.arrayPostDivide(n,n),n},r.prototype._rawPixels=function(e,t){var n=this.renderer,i,s=!1,a,o=!1;if(e)if(e instanceof vi)a=e;else{var u=n.context.webGLVersion>=2?n.multisample:$e.NONE;if(a=this.renderer.generateTexture(e,{multisample:u}),u!==$e.NONE){var l=vi.create({width:a.width,height:a.height});n.framebuffer.bind(a.framebuffer),n.framebuffer.blit(l.framebuffer),n.framebuffer.bind(null),a.destroy(!0),a=l}o=!0}a?(i=a.baseTexture.resolution,t=t??a.frame,s=!1,n.renderTexture.bind(a)):(i=n.resolution,t||(t=bH,t.width=n.width,t.height=n.height),s=!0,n.renderTexture.bind(null));var h=Math.round(t.width*i),c=Math.round(t.height*i),f=new Uint8Array(SH*h*c),p=n.gl;return p.readPixels(Math.round(t.x*i),Math.round(t.y*i),h,c,p.RGBA,p.UNSIGNED_BYTE,f),o&&a.destroy(!0),{pixels:f,width:h,height:c,flipY:s}},r.prototype.destroy=function(){this.renderer=null},r.arrayPostDivide=function(e,t){for(var n=0;n<e.length;n+=4){var i=t[n+3]=e[n+3];i!==0?(t[n]=Math.round(Math.min(e[n]*255/i,255)),t[n+1]=Math.round(Math.min(e[n+1]*255/i,255)),t[n+2]=Math.round(Math.min(e[n+2]*255/i,255))):(t[n]=e[n],t[n+1]=e[n+1],t[n+2]=e[n+2])}},r.extension={name:"extract",type:Ne.RendererPlugin},r}();/*!
 * @pixi/loaders - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var zl=function(){function r(e,t,n){t===void 0&&(t=!1),this._fn=e,this._once=t,this._thisArg=n,this._next=this._prev=this._owner=null}return r.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},r}();function x1(r,e){return r._head?(r._tail._next=e,e._prev=r._tail,r._tail=e):(r._head=e,r._tail=e),e._owner=r,e}var vn=function(){function r(){this._head=this._tail=void 0}return r.prototype.handlers=function(e){e===void 0&&(e=!1);var t=this._head;if(e)return!!t;for(var n=[];t;)n.push(t),t=t._next;return n},r.prototype.has=function(e){if(!(e instanceof zl))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return e._owner===this},r.prototype.dispatch=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];var i=this._head;if(!i)return!1;for(;i;)i._once&&this.detach(i),i._fn.apply(i._thisArg,t),i=i._next;return!0},r.prototype.add=function(e,t){if(t===void 0&&(t=null),typeof e!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return x1(this,new zl(e,!1,t))},r.prototype.once=function(e,t){if(t===void 0&&(t=null),typeof e!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return x1(this,new zl(e,!0,t))},r.prototype.detach=function(e){if(!(e instanceof zl))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return e._owner!==this?this:(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,e._next===null&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null,this)},r.prototype.detachAll=function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this},r}();function mR(r,e){e=e||{};for(var t={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=t.parser[e.strictMode?"strict":"loose"].exec(r),i={},s=14;s--;)i[t.key[s]]=n[s]||"";return i[t.q.name]={},i[t.key[12]].replace(t.q.parser,function(a,o,u){o&&(i[t.q.name][o]=u)}),i}var Nd,Xl=null,wH=0,T1=200,CH=204,IH=1223,PH=2;function E1(){}function b1(r,e,t){e&&e.indexOf(".")===0&&(e=e.substring(1)),e&&(r[e]=t)}function Fd(r){return r.toString().replace("object ","")}var et=function(){function r(e,t,n){if(this._dequeue=E1,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof e!="string"||typeof t!="string")throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(r.STATUS_FLAGS.DATA_URL,t.indexOf("data:")===0),this.name=e,this.url=t,this.extension=this._getExtension(),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=r.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=E1,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new vn,this.onProgress=new vn,this.onComplete=new vn,this.onAfterMiddleware=new vn}return r.setExtensionLoadType=function(e,t){b1(r._loadTypeMap,e,t)},r.setExtensionXhrType=function(e,t){b1(r._xhrTypeMap,e,t)},Object.defineProperty(r.prototype,"isDataUrl",{get:function(){return this._hasFlag(r.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isComplete",{get:function(){return this._hasFlag(r.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isLoading",{get:function(){return this._hasFlag(r.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),r.prototype.complete=function(){this._clearEvents(),this._finish()},r.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=r.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},r.prototype.load=function(e){var t=this;if(!this.isLoading){if(this.isComplete){e&&setTimeout(function(){return e(t)},1);return}else e&&this.onComplete.once(e);switch(this._setFlag(r.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case r.LOAD_TYPE.IMAGE:this.type=r.TYPE.IMAGE,this._loadElement("image");break;case r.LOAD_TYPE.AUDIO:this.type=r.TYPE.AUDIO,this._loadSourceElement("audio");break;case r.LOAD_TYPE.VIDEO:this.type=r.TYPE.VIDEO,this._loadSourceElement("video");break;case r.LOAD_TYPE.XHR:default:typeof Nd>"u"&&(Nd=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest))),Nd&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},r.prototype._hasFlag=function(e){return(this._flags&e)!==0},r.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},r.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},r.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(r.STATUS_FLAGS.COMPLETE,!0),this._setFlag(r.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},r.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:e==="image"&&typeof globalThis.Image<"u"?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},r.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:e==="audio"&&typeof globalThis.Audio<"u"?this.data=new Audio:this.data=document.createElement(e),this.data===null){this.abort("Unsupported element: "+e);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(e,this.url[n],Array.isArray(t)?t[n]:t));else{var t=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(t)?t[0]:t))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},r.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(e.withCredentials=!0),e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===r.XHR_RESPONSE_TYPE.JSON||this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=r.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},r.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new globalThis.XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},r.prototype._createSource=function(e,t,n){n||(n=e+"/"+this._getExtension(t));var i=document.createElement("source");return i.src=t,i.type=n,i},r.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},r.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},r.prototype._onTimeout=function(){this.abort("Load timed out.")},r.prototype._xhrOnError=function(){var e=this.xhr;this.abort(Fd(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},r.prototype._xhrOnTimeout=function(){var e=this.xhr;this.abort(Fd(e)+" Request timed out.")},r.prototype._xhrOnAbort=function(){var e=this.xhr;this.abort(Fd(e)+" Request was aborted by the user.")},r.prototype._xhrOnLoad=function(){var e=this.xhr,t="",n=typeof e.status>"u"?T1:e.status;(e.responseType===""||e.responseType==="text"||typeof e.responseType>"u")&&(t=e.responseText),n===wH&&(t.length>0||e.responseType===r.XHR_RESPONSE_TYPE.BUFFER)?n=T1:n===IH&&(n=CH);var i=n/100|0;if(i===PH)if(this.xhrType===r.XHR_RESPONSE_TYPE.TEXT)this.data=t,this.type=r.TYPE.TEXT;else if(this.xhrType===r.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t),this.type=r.TYPE.JSON}catch(o){this.abort("Error trying to parse loaded json: "+o);return}else if(this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var s=new DOMParser;this.data=s.parseFromString(t,"text/xml")}else{var a=document.createElement("div");a.innerHTML=t,this.data=a}this.type=r.TYPE.XML}catch(o){this.abort("Error trying to parse loaded xml: "+o);return}else this.data=e.response||t;else{this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);return}this.complete()},r.prototype._determineCrossOrigin=function(e,t){if(e.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";t=t||globalThis.location,Xl||(Xl=document.createElement("a")),Xl.href=e;var n=mR(Xl.href,{strictMode:!0}),i=!n.port&&t.port===""||n.port===t.port,s=n.protocol?n.protocol+":":"";return n.host!==t.hostname||!i||s!==t.protocol?"anonymous":""},r.prototype._determineXhrType=function(){return r._xhrTypeMap[this.extension]||r.XHR_RESPONSE_TYPE.TEXT},r.prototype._determineLoadType=function(){return r._loadTypeMap[this.extension]||r.LOAD_TYPE.XHR},r.prototype._getExtension=function(e){e===void 0&&(e=this.url);var t="";if(this.isDataUrl){var n=e.indexOf("/");t=e.substring(n+1,e.indexOf(";",n))}else{var i=e.indexOf("?"),s=e.indexOf("#"),a=Math.min(i>-1?i:e.length,s>-1?s:e.length);e=e.substring(0,a),t=e.substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},r.prototype._getMimeFromXhrType=function(e){switch(e){case r.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case r.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case r.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case r.XHR_RESPONSE_TYPE.JSON:return"application/json";case r.XHR_RESPONSE_TYPE.DEFAULT:case r.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},r}();(function(r){(function(e){e[e.NONE=0]="NONE",e[e.DATA_URL=1]="DATA_URL",e[e.COMPLETE=2]="COMPLETE",e[e.LOADING=4]="LOADING"})(r.STATUS_FLAGS||(r.STATUS_FLAGS={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.JSON=1]="JSON",e[e.XML=2]="XML",e[e.IMAGE=3]="IMAGE",e[e.AUDIO=4]="AUDIO",e[e.VIDEO=5]="VIDEO",e[e.TEXT=6]="TEXT"}(r.TYPE||(r.TYPE={})),function(e){e[e.XHR=1]="XHR",e[e.IMAGE=2]="IMAGE",e[e.AUDIO=3]="AUDIO",e[e.VIDEO=4]="VIDEO"}(r.LOAD_TYPE||(r.LOAD_TYPE={})),function(e){e.DEFAULT="text",e.BUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.TEXT="text"}(r.XHR_RESPONSE_TYPE||(r.XHR_RESPONSE_TYPE={})),r._loadTypeMap={gif:r.LOAD_TYPE.IMAGE,png:r.LOAD_TYPE.IMAGE,bmp:r.LOAD_TYPE.IMAGE,jpg:r.LOAD_TYPE.IMAGE,jpeg:r.LOAD_TYPE.IMAGE,tif:r.LOAD_TYPE.IMAGE,tiff:r.LOAD_TYPE.IMAGE,webp:r.LOAD_TYPE.IMAGE,tga:r.LOAD_TYPE.IMAGE,avif:r.LOAD_TYPE.IMAGE,svg:r.LOAD_TYPE.IMAGE,"svg+xml":r.LOAD_TYPE.IMAGE,mp3:r.LOAD_TYPE.AUDIO,ogg:r.LOAD_TYPE.AUDIO,wav:r.LOAD_TYPE.AUDIO,mp4:r.LOAD_TYPE.VIDEO,webm:r.LOAD_TYPE.VIDEO},r._xhrTypeMap={xhtml:r.XHR_RESPONSE_TYPE.DOCUMENT,html:r.XHR_RESPONSE_TYPE.DOCUMENT,htm:r.XHR_RESPONSE_TYPE.DOCUMENT,xml:r.XHR_RESPONSE_TYPE.DOCUMENT,tmx:r.XHR_RESPONSE_TYPE.DOCUMENT,svg:r.XHR_RESPONSE_TYPE.DOCUMENT,tsx:r.XHR_RESPONSE_TYPE.DOCUMENT,gif:r.XHR_RESPONSE_TYPE.BLOB,png:r.XHR_RESPONSE_TYPE.BLOB,bmp:r.XHR_RESPONSE_TYPE.BLOB,jpg:r.XHR_RESPONSE_TYPE.BLOB,jpeg:r.XHR_RESPONSE_TYPE.BLOB,tif:r.XHR_RESPONSE_TYPE.BLOB,tiff:r.XHR_RESPONSE_TYPE.BLOB,webp:r.XHR_RESPONSE_TYPE.BLOB,tga:r.XHR_RESPONSE_TYPE.BLOB,avif:r.XHR_RESPONSE_TYPE.BLOB,json:r.XHR_RESPONSE_TYPE.JSON,text:r.XHR_RESPONSE_TYPE.TEXT,txt:r.XHR_RESPONSE_TYPE.TEXT,ttf:r.XHR_RESPONSE_TYPE.BUFFER,otf:r.XHR_RESPONSE_TYPE.BUFFER},r.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(et||(et={}));function Pi(){}function AH(r){return function(){for(var t=arguments,n=[],i=0;i<arguments.length;i++)n[i]=t[i];if(r===null)throw new Error("Callback was already called.");var s=r;r=null,s.apply(this,n)}}var RH=function(){function r(e,t){this.data=e,this.callback=t}return r}(),Bd=function(){function r(e,t){var n=this;if(t===void 0&&(t=1),this.workers=0,this.saturated=Pi,this.unsaturated=Pi,this.empty=Pi,this.drain=Pi,this.error=Pi,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(i,s,a){if(a&&typeof a!="function")throw new Error("task callback must be a function");if(n.started=!0,i==null&&n.idle()){setTimeout(function(){return n.drain()},1);return}var o=new RH(i,typeof a=="function"?a:Pi);s?n._tasks.unshift(o):n._tasks.push(o),setTimeout(n.process,1)},this.process=function(){for(;!n.paused&&n.workers<n.concurrency&&n._tasks.length;){var i=n._tasks.shift();n._tasks.length===0&&n.empty(),n.workers+=1,n.workers===n.concurrency&&n.saturated(),n._worker(i.data,AH(n._next(i)))}},this._worker=e,t===0)throw new Error("Concurrency must not be zero");this.concurrency=t,this.buffer=t/4}return r.prototype._next=function(e){var t=this;return function(){for(var n=arguments,i=[],s=0;s<arguments.length;s++)i[s]=n[s];t.workers-=1,e.callback.apply(e,i),i[0]!=null&&t.error(i[0],e.data),t.workers<=t.concurrency-t.buffer&&t.unsaturated(),t.idle()&&t.drain(),t.process()}},r.prototype.push=function(e,t){this._insert(e,!1,t)},r.prototype.kill=function(){this.workers=0,this.drain=Pi,this.started=!1,this._tasks=[]},r.prototype.unshift=function(e,t){this._insert(e,!0,t)},r.prototype.length=function(){return this._tasks.length},r.prototype.running=function(){return this.workers},r.prototype.idle=function(){return this._tasks.length+this.workers===0},r.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},r.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var e=1;e<=this.concurrency;e++)this.process()}},r.eachSeries=function(e,t,n,i){var s=0,a=e.length;function o(u){if(u||s===a){n&&n(u);return}i?setTimeout(function(){t(e[s++],o)},1):t(e[s++],o)}o()},r.queue=function(e,t){return new r(e,t)},r}(),Ud=100,OH=/(#[\w-]+)?$/,xu=function(){function r(e,t){var n=this;e===void 0&&(e=""),t===void 0&&(t=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(u,l){return n._loadResource(u,l)},this.resources={},this.baseUrl=e,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(u,l){return n._loadResource(u,l)},this._queue=Bd.queue(this._boundLoadResource,t),this._queue.pause(),this.resources={},this.onProgress=new vn,this.onError=new vn,this.onLoad=new vn,this.onStart=new vn,this.onComplete=new vn;for(var i=0;i<r._plugins.length;++i){var s=r._plugins[i],a=s.pre,o=s.use;a&&this.pre(a),o&&this.use(o)}this._protected=!1}return r.prototype._add=function(e,t,n,i){if(this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(t=this._prepareUrl(t),this.resources[e]=new et(e,t,n),typeof i=="function"&&this.resources[e].onAfterMiddleware.once(i),this.loading){for(var s=n.parentResource,a=[],o=0;o<s.children.length;++o)s.children[o].isComplete||a.push(s.children[o]);var u=s.progressChunk*(a.length+1),l=u/(a.length+2);s.children.push(this.resources[e]),s.progressChunk=l;for(var o=0;o<a.length;++o)a[o].progressChunk=l;this.resources[e].progressChunk=l}return this._queue.push(this.resources[e]),this},r.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},r.prototype.use=function(e){return this._afterMiddleware.push(e),this},r.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var e in this.resources){var t=this.resources[e];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort("loader reset")}return this.resources={},this},r.prototype.load=function(e){if(kt("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),typeof e=="function"&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var t=this._queue._tasks.length,n=Ud/t,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=n;this._onStart(),this._queue.resume()}return this},Object.defineProperty(r.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e},enumerable:!1,configurable:!0}),r.prototype._prepareUrl=function(e){var t=mR(e,{strictMode:!0}),n;if(t.protocol||!t.path||e.indexOf("//")===0?n=e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&e.charAt(0)!=="/"?n=this.baseUrl+"/"+e:n=this.baseUrl+e,this.defaultQueryString){var i=OH.exec(n)[0];n=n.slice(0,n.length-i.length),n.indexOf("?")!==-1?n+="&"+this.defaultQueryString:n+="?"+this.defaultQueryString,n+=i}return n},r.prototype._loadResource=function(e,t){var n=this;e._dequeue=t,Bd.eachSeries(this._beforeMiddleware,function(i,s){i.call(n,e,function(){s(e.isComplete?{}:null)})},function(){e.isComplete?n._onLoad(e):(e._onLoadBinding=e.onComplete.once(n._onLoad,n),e.load())},!0)},r.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},r.prototype._onComplete=function(){this.progress=Ud,this.loading=!1,this.onComplete.dispatch(this,this.resources)},r.prototype._onLoad=function(e){var t=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),Bd.eachSeries(this._afterMiddleware,function(n,i){n.call(t,e,i)},function(){e.onAfterMiddleware.dispatch(e),t.progress=Math.min(Ud,t.progress+e.progressChunk),t.onProgress.dispatch(t,e),e.error?t.onError.dispatch(e.error,t,e):t.onLoad.dispatch(t,e),t._resourcesParsing.splice(t._resourcesParsing.indexOf(e),1),t._queue.idle()&&t._resourcesParsing.length===0&&t._onComplete()},!0)},r.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(r,"shared",{get:function(){var e=r._shared;return e||(e=new r,e._protected=!0,r._shared=e),e},enumerable:!1,configurable:!0}),r.registerPlugin=function(e){return kt("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),on.add({type:Ne.Loader,ref:e}),r},r._plugins=[],r}();on.handleByList(Ne.Loader,xu._plugins);xu.prototype.add=function(e,t,n,i){if(Array.isArray(e)){for(var s=0;s<e.length;++s)this.add(e[s]);return this}if(typeof e=="object"&&(n=e,i=t||n.callback||n.onComplete,t=n.url,e=n.name||n.key||n.url),typeof t!="string"&&(i=n,n=t,t=e),typeof t!="string")throw new Error("No url passed to add resource to loader.");return typeof n=="function"&&(i=n,n=null),this._add(e,t,n,i)};var gR=function(){function r(){}return r.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?xu.shared:new xu},r.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},r.extension=Ne.Application,r}(),yR=function(){function r(){}return r.add=function(){et.setExtensionLoadType("svg",et.LOAD_TYPE.XHR),et.setExtensionXhrType("svg",et.XHR_RESPONSE_TYPE.TEXT)},r.use=function(e,t){if(e.data&&(e.type===et.TYPE.IMAGE||e.extension==="svg")){var n=e.data,i=e.url,s=e.name,a=e.metadata;pe.fromLoader(n,i,s,a).then(function(o){e.texture=o,t()}).catch(t)}else t()},r.extension=Ne.Loader,r}(),MH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function DH(r){for(var e="",t=0;t<r.length;){for(var n=[0,0,0],i=[0,0,0,0],s=0;s<n.length;++s)t<r.length?n[s]=r.charCodeAt(t++)&255:n[s]=0;i[0]=n[0]>>2,i[1]=(n[0]&3)<<4|n[1]>>4,i[2]=(n[1]&15)<<2|n[2]>>6,i[3]=n[2]&63;var a=t-(r.length-1);switch(a){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64;break}for(var s=0;s<i.length;++s)e+=MH.charAt(i[s])}return e}function LH(r,e){if(!r.data){e();return}if(r.xhr&&r.xhrType===et.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof r.data=="string"){var t=r.xhr.getResponseHeader("content-type");if(t&&t.indexOf("image")===0){r.data=new Image,r.data.src="data:"+t+";base64,"+DH(r.xhr.responseText),r.type=et.TYPE.IMAGE,r.data.onload=function(){r.data.onload=null,e()};return}}else if(r.data.type.indexOf("image")===0){var n=globalThis.URL||globalThis.webkitURL,i=n.createObjectURL(r.data);r.blob=r.data,r.data=new Image,r.data.src=i,r.type=et.TYPE.IMAGE,r.data.onload=function(){n.revokeObjectURL(i),r.data.onload=null,e()};return}}e()}var NH=function(){function r(){}return r.extension=Ne.Loader,r.use=LH,r}();on.add(yR,NH);/*!
 * @pixi/compressed-textures - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var De,ye;(function(r){r[r.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",r[r.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",r[r.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",r[r.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",r[r.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",r[r.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",r[r.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",r[r.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",r[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",r[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",r[r.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",r[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR"})(ye||(ye={}));var Tu=(De={},De[ye.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,De[ye.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,De[ye.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,De[ye.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,De[ye.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,De[ye.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,De[ye.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,De[ye.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,De[ye.COMPRESSED_R11_EAC]=.5,De[ye.COMPRESSED_SIGNED_R11_EAC]=.5,De[ye.COMPRESSED_RG11_EAC]=1,De[ye.COMPRESSED_SIGNED_RG11_EAC]=1,De[ye.COMPRESSED_RGB8_ETC2]=.5,De[ye.COMPRESSED_RGBA8_ETC2_EAC]=1,De[ye.COMPRESSED_SRGB8_ETC2]=.5,De[ye.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,De[ye.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,De[ye.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,De[ye.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,De[ye.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,De[ye.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,De[ye.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,De[ye.COMPRESSED_RGB_ETC1_WEBGL]=.5,De[ye.COMPRESSED_RGB_ATC_WEBGL]=.5,De[ye.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,De[ye.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,De[ye.COMPRESSED_RGBA_ASTC_4x4_KHR]=1,De);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var oy=function(r,e){return oy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},oy(r,e)};function _R(r,e){oy(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function FH(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(h){try{l(n.next(h))}catch(c){a(c)}}function u(h){try{l(n.throw(h))}catch(c){a(c)}}function l(h){h.done?s(h.value):i(h.value).then(o,u)}l((n=n.apply(r,e||[])).next())})}function BH(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(l){return function(h){return u([l,h])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(h){l=[6,h],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var xR=function(r){_R(e,r);function e(t,n){n===void 0&&(n={width:1,height:1,autoLoad:!0});var i=this,s,a;return typeof t=="string"?(s=t,a=new Uint8Array):(s=null,a=t),i=r.call(this,a,n)||this,i.origin=s,i.buffer=a?new gc(a):null,i.origin&&n.autoLoad!==!1&&i.load(),a&&a.length&&(i.loaded=!0,i.onBlobLoaded(i.buffer.rawBinaryData)),i}return e.prototype.onBlobLoaded=function(t){},e.prototype.load=function(){return FH(this,void 0,Promise,function(){var t,n,i;return BH(this,function(s){switch(s.label){case 0:return[4,fetch(this.origin)];case 1:return t=s.sent(),[4,t.blob()];case 2:return n=s.sent(),[4,n.arrayBuffer()];case 3:return i=s.sent(),this.data=new Uint32Array(i),this.buffer=new gc(i),this.loaded=!0,this.onBlobLoaded(i),this.update(),[2,this]}})})},e}(Es),yc=function(r){_R(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.format=n.format,i.levels=n.levels||1,i._width=n.width,i._height=n.height,i._extension=e._formatToExtension(i.format),(n.levelBuffers||i.buffer)&&(i._levelBuffers=n.levelBuffers||e._createLevelBuffers(t instanceof Uint8Array?t:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return e.prototype.upload=function(t,n,i){var s=t.gl,a=t.context.extensions[this._extension];if(!a)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var o=0,u=this.levels;o<u;o++){var l=this._levelBuffers[o],h=l.levelID,c=l.levelWidth,f=l.levelHeight,p=l.levelBuffer;s.compressedTexImage2D(s.TEXTURE_2D,h,this.format,c,f,0,p)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(t,n,i,s,a,o,u){for(var l=new Array(i),h=t.byteOffset,c=o,f=u,p=c+s-1&~(s-1),v=f+a-1&~(a-1),g=p*v*Tu[n],m=0;m<i;m++)l[m]={levelID:m,levelWidth:i>1?c:p,levelHeight:i>1?f:v,levelBuffer:new Uint8Array(t.buffer,h,g)},h+=g,c=c>>1||1,f=f>>1||1,p=c+s-1&~(s-1),v=f+a-1&~(a-1),g=p*v*Tu[n];return l},e}(xR),TR=function(){function r(){}return r.use=function(e,t){var n=e.data,i=this;if(e.type===et.TYPE.JSON&&n&&n.cacheID&&n.textures){for(var s=n.textures,a=void 0,o=void 0,u=0,l=s.length;u<l;u++){var h=s[u],c=h.src,f=h.format;if(f||(o=c),r.textureFormats[f]){a=c;break}}if(a=a||o,!a){t(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));return}if(a===e.url){t(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var p={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},v=Yi.resolve(e.url.replace(i.baseUrl,""),a),g=n.cacheID;i.add(g,v,p,function(m){if(m.error){t(m.error);return}var y=m.texture,x=y===void 0?null:y,T=m.textures,E=T===void 0?{}:T;Object.assign(e,{texture:x,textures:E}),t()})}else t()},Object.defineProperty(r,"textureExtensions",{get:function(){if(!r._textureExtensions){var e=te.ADAPTER.createCanvas(),t=e.getContext("webgl");if(!t)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var n={s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};r._textureExtensions=n}return r._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(r,"textureFormats",{get:function(){if(!r._textureFormats){var e=r.textureExtensions;r._textureFormats={};for(var t in e){var n=e[t];n&&Object.assign(r._textureFormats,Object.getPrototypeOf(n))}}return r._textureFormats},enumerable:!1,configurable:!0}),r.extension=Ne.Loader,r}();function ER(r,e,t){var n={textures:{},texture:null};if(!e)return n;var i=e.map(function(s){return new pe(new Ie(s,Object.assign({mipmap:xr.OFF,alphaMode:Tr.NO_PREMULTIPLIED_ALPHA},t)))});return i.forEach(function(s,a){var o=s.baseTexture,u=r+"-"+(a+1);Ie.addToCache(o,u),pe.addToCache(s,u),a===0&&(Ie.addToCache(o,r),pe.addToCache(s,r),n.texture=s),n.textures[u]=s}),n}var to,Cr,kd=4,$l=124,UH=32,S1=20,kH=542327876,Wl={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},GH={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Yl={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},Pr;(function(r){r[r.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",r[r.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",r[r.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",r[r.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",r[r.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",r[r.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",r[r.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",r[r.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",r[r.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",r[r.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",r[r.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",r[r.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",r[r.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",r[r.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",r[r.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",r[r.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",r[r.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",r[r.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",r[r.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",r[r.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",r[r.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",r[r.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",r[r.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",r[r.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",r[r.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",r[r.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",r[r.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",r[r.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",r[r.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",r[r.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",r[r.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",r[r.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",r[r.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",r[r.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",r[r.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",r[r.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",r[r.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",r[r.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",r[r.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",r[r.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",r[r.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",r[r.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",r[r.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",r[r.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",r[r.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",r[r.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",r[r.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",r[r.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",r[r.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",r[r.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",r[r.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",r[r.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",r[r.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",r[r.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",r[r.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",r[r.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",r[r.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",r[r.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",r[r.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",r[r.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",r[r.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",r[r.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",r[r.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",r[r.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",r[r.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",r[r.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",r[r.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",r[r.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",r[r.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",r[r.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",r[r.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",r[r.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",r[r.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",r[r.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",r[r.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",r[r.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",r[r.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",r[r.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",r[r.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",r[r.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",r[r.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",r[r.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",r[r.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",r[r.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",r[r.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",r[r.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",r[r.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",r[r.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",r[r.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",r[r.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",r[r.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",r[r.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",r[r.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",r[r.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",r[r.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",r[r.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",r[r.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",r[r.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",r[r.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",r[r.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",r[r.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",r[r.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",r[r.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",r[r.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",r[r.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",r[r.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",r[r.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",r[r.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",r[r.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",r[r.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",r[r.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",r[r.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",r[r.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",r[r.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",r[r.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",r[r.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",r[r.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",r[r.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",r[r.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",r[r.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",r[r.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",r[r.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(Pr||(Pr={}));var uy;(function(r){r[r.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",r[r.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",r[r.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(uy||(uy={}));var jH=1,HH=2,VH=4,zH=64,XH=512,$H=131072,WH=827611204,YH=861165636,qH=894720068,KH=808540228,JH=4,ZH=(to={},to[WH]=ye.COMPRESSED_RGBA_S3TC_DXT1_EXT,to[YH]=ye.COMPRESSED_RGBA_S3TC_DXT3_EXT,to[qH]=ye.COMPRESSED_RGBA_S3TC_DXT5_EXT,to),QH=(Cr={},Cr[Pr.DXGI_FORMAT_BC1_TYPELESS]=ye.COMPRESSED_RGBA_S3TC_DXT1_EXT,Cr[Pr.DXGI_FORMAT_BC1_UNORM]=ye.COMPRESSED_RGBA_S3TC_DXT1_EXT,Cr[Pr.DXGI_FORMAT_BC2_TYPELESS]=ye.COMPRESSED_RGBA_S3TC_DXT3_EXT,Cr[Pr.DXGI_FORMAT_BC2_UNORM]=ye.COMPRESSED_RGBA_S3TC_DXT3_EXT,Cr[Pr.DXGI_FORMAT_BC3_TYPELESS]=ye.COMPRESSED_RGBA_S3TC_DXT5_EXT,Cr[Pr.DXGI_FORMAT_BC3_UNORM]=ye.COMPRESSED_RGBA_S3TC_DXT5_EXT,Cr[Pr.DXGI_FORMAT_BC1_UNORM_SRGB]=ye.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,Cr[Pr.DXGI_FORMAT_BC2_UNORM_SRGB]=ye.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,Cr[Pr.DXGI_FORMAT_BC3_UNORM_SRGB]=ye.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,Cr);function bR(r){var e=new Uint32Array(r),t=e[0];if(t!==kH)throw new Error("Invalid DDS file magic word");var n=new Uint32Array(r,0,$l/Uint32Array.BYTES_PER_ELEMENT),i=n[Wl.HEIGHT],s=n[Wl.WIDTH],a=n[Wl.MIPMAP_COUNT],o=new Uint32Array(r,Wl.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,UH/Uint32Array.BYTES_PER_ELEMENT),u=o[jH];if(u&VH){var l=o[GH.FOURCC];if(l!==KH){var h=ZH[l],c=kd+$l,f=new Uint8Array(r,c),p=new yc(f,{format:h,width:s,height:i,levels:a});return[p]}var v=kd+$l,g=new Uint32Array(e.buffer,v,S1/Uint32Array.BYTES_PER_ELEMENT),m=g[Yl.DXGI_FORMAT],y=g[Yl.RESOURCE_DIMENSION],x=g[Yl.MISC_FLAG],T=g[Yl.ARRAY_SIZE],E=QH[m];if(E===void 0)throw new Error("DDSParser cannot parse texture data with DXGI format "+m);if(x===JH)throw new Error("DDSParser does not support cubemap textures");if(y===uy.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var b=new Array,w=kd+$l+S1;if(T===1)b.push(new Uint8Array(r,w));else{for(var C=Tu[E],O=0,R=s,I=i,D=0;D<a;D++){var F=Math.max(1,R+3&-4),j=Math.max(1,I+3&-4),z=F*j*C;O+=z,R=R>>>1,I=I>>>1}for(var $=w,D=0;D<T;D++)b.push(new Uint8Array(r,$,O)),$+=O}return b.map(function(H){return new yc(H,{format:E,width:s,height:i,levels:a})})}throw u&zH?new Error("DDSParser does not support uncompressed texture data."):u&XH?new Error("DDSParser does not supported YUV uncompressed texture data."):u&$H?new Error("DDSParser does not support single-channel (lumninance) texture data!"):u&HH?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}var Un,ln,ro,w1=[171,75,84,88,32,49,49,187,13,10,26,10],eV=67305985,Ir={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},ly=64,hy=(Un={},Un[ue.UNSIGNED_BYTE]=1,Un[ue.UNSIGNED_SHORT]=2,Un[ue.INT]=4,Un[ue.UNSIGNED_INT]=4,Un[ue.FLOAT]=4,Un[ue.HALF_FLOAT]=8,Un),SR=(ln={},ln[Z.RGBA]=4,ln[Z.RGB]=3,ln[Z.RG]=2,ln[Z.RED]=1,ln[Z.LUMINANCE]=1,ln[Z.LUMINANCE_ALPHA]=2,ln[Z.ALPHA]=1,ln),wR=(ro={},ro[ue.UNSIGNED_SHORT_4_4_4_4]=2,ro[ue.UNSIGNED_SHORT_5_5_5_1]=2,ro[ue.UNSIGNED_SHORT_5_6_5]=2,ro);function CR(r,e,t){t===void 0&&(t=!1);var n=new DataView(e);if(!tV(r,n))return null;var i=n.getUint32(Ir.ENDIANNESS,!0)===eV,s=n.getUint32(Ir.GL_TYPE,i),a=n.getUint32(Ir.GL_FORMAT,i),o=n.getUint32(Ir.GL_INTERNAL_FORMAT,i),u=n.getUint32(Ir.PIXEL_WIDTH,i),l=n.getUint32(Ir.PIXEL_HEIGHT,i)||1,h=n.getUint32(Ir.PIXEL_DEPTH,i)||1,c=n.getUint32(Ir.NUMBER_OF_ARRAY_ELEMENTS,i)||1,f=n.getUint32(Ir.NUMBER_OF_FACES,i),p=n.getUint32(Ir.NUMBER_OF_MIPMAP_LEVELS,i),v=n.getUint32(Ir.BYTES_OF_KEY_VALUE_DATA,i);if(l===0||h!==1)throw new Error("Only 2D textures are supported");if(f!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(c!==1)throw new Error("WebGL does not support array textures");var g=4,m=4,y=u+3&-4,x=l+3&-4,T=new Array(c),E=u*l;s===0&&(E=y*x);var b;if(s!==0?hy[s]?b=hy[s]*SR[a]:b=wR[s]:b=Tu[o],b===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var w=t?nV(n,v,i):null,C=E*b,O=C,R=u,I=l,D=y,F=x,j=ly+v,z=0;z<p;z++){for(var $=n.getUint32(j,i),H=j+4,Y=0;Y<c;Y++){var L=T[Y];L||(L=T[Y]=new Array(p)),L[z]={levelID:z,levelWidth:p>1||s!==0?R:D,levelHeight:p>1||s!==0?I:F,levelBuffer:new Uint8Array(e,H,O)},H+=O}j+=$+4,j=j%4!==0?j+4-j%4:j,R=R>>1||1,I=I>>1||1,D=R+g-1&~(g-1),F=I+m-1&~(m-1),O=D*F*b}return s!==0?{uncompressed:T.map(function(B){var N=B[0].levelBuffer,U=!1;return s===ue.FLOAT?N=new Float32Array(B[0].levelBuffer.buffer,B[0].levelBuffer.byteOffset,B[0].levelBuffer.byteLength/4):s===ue.UNSIGNED_INT?(U=!0,N=new Uint32Array(B[0].levelBuffer.buffer,B[0].levelBuffer.byteOffset,B[0].levelBuffer.byteLength/4)):s===ue.INT&&(U=!0,N=new Int32Array(B[0].levelBuffer.buffer,B[0].levelBuffer.byteOffset,B[0].levelBuffer.byteLength/4)),{resource:new Es(N,{width:B[0].levelWidth,height:B[0].levelHeight}),type:s,format:U?rV(a):a}}),kvData:w}:{compressed:T.map(function(B){return new yc(null,{format:o,width:u,height:l,levels:p,levelBuffers:B})}),kvData:w}}function tV(r,e){for(var t=0;t<w1.length;t++)if(e.getUint8(t)!==w1[t])return console.error(r+" is not a valid *.ktx file!"),!1;return!0}function rV(r){switch(r){case Z.RGBA:return Z.RGBA_INTEGER;case Z.RGB:return Z.RGB_INTEGER;case Z.RG:return Z.RG_INTEGER;case Z.RED:return Z.RED_INTEGER;default:return r}}function nV(r,e,t){for(var n=new Map,i=0;i<e;){var s=r.getUint32(ly+i,t),a=ly+i+4,o=3-(s+3)%4;if(s===0||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var u=0;u<s&&r.getUint8(a+u)!==0;u++);if(u===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var l=new TextDecoder().decode(new Uint8Array(r.buffer,a,u)),h=new DataView(r.buffer,a+u+1,s-u-1);n.set(l,h),i+=4+s+o}return n}et.setExtensionXhrType("dds",et.XHR_RESPONSE_TYPE.BUFFER);var IR=function(){function r(){}return r.use=function(e,t){if(e.extension==="dds"&&e.data)try{Object.assign(e,ER(e.name||e.url,bR(e.data),e.metadata))}catch(n){t(n);return}t()},r.extension=Ne.Loader,r}();et.setExtensionXhrType("ktx",et.XHR_RESPONSE_TYPE.BUFFER);var PR=function(){function r(){}return r.use=function(e,t){if(e.extension==="ktx"&&e.data)try{var n=e.name||e.url,i=CR(n,e.data,this.loadKeyValueData),s=i.compressed,a=i.uncompressed,o=i.kvData;if(s){var u=ER(n,s,e.metadata);if(o&&u.textures)for(var l in u.textures)u.textures[l].baseTexture.ktxKeyValueData=o;Object.assign(e,u)}else if(a){var h={};a.forEach(function(c,f){var p=new pe(new Ie(c.resource,{mipmap:xr.OFF,alphaMode:Tr.NO_PREMULTIPLIED_ALPHA,type:c.type,format:c.format})),v=n+"-"+(f+1);o&&(p.baseTexture.ktxKeyValueData=o),Ie.addToCache(p.baseTexture,v),pe.addToCache(p,v),f===0&&(h[n]=p,Ie.addToCache(p.baseTexture,n),pe.addToCache(p,n)),h[v]=p}),Object.assign(e,{textures:h})}}catch(c){t(c);return}t()},r.extension=Ne.Loader,r.loadKeyValueData=!1,r}();/*!
 * @pixi/particle-container - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var cy=function(r,e){return cy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},cy(r,e)};function AR(r,e){cy(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var iV=function(r){AR(e,r);function e(t,n,i,s){t===void 0&&(t=1500),i===void 0&&(i=16384),s===void 0&&(s=!1);var a=r.call(this)||this,o=16384;return i>o&&(i=o),a._properties=[!1,!0,!1,!1,!1],a._maxSize=t,a._batchSize=i,a._buffers=null,a._bufferUpdateIDs=[],a._updateID=0,a.interactiveChildren=!1,a.blendMode=he.NORMAL,a.autoResize=s,a.roundPixels=!0,a.baseTexture=null,a.setProperties(n),a._tint=0,a.tintRgb=new Float32Array(4),a.tint=16777215,a}return e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,vs(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var n=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return n.onChildrenChange(0)})),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var n=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<n;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[n]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(t){r.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e}(Gr),C1=function(){function r(e,t,n){this.geometry=new Na,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<e.length;++i){var s=e[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||ue.FLOAT,offset:s.offset},t[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return r.prototype.initBuffers=function(){var e=this.geometry,t=0;this.indexBuffer=new ut(wA(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){var i=this.dynamicProperties[n];i.offset=t,t+=i.size,this.dynamicStride+=i.size}var s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=new ut(this.dynamicData,!1,!1);var a=0;this.staticStride=0;for(var n=0;n<this.staticProperties.length;++n){var i=this.staticProperties[n];i.offset=a,a+=i.size,this.staticStride+=i.size}var o=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new ut(this.staticData,!0,!1);for(var n=0;n<this.dynamicProperties.length;++n){var i=this.dynamicProperties[n];e.addAttribute(i.attributeName,this.dynamicBuffer,0,i.type===ue.UNSIGNED_BYTE,i.type,this.dynamicStride*4,i.offset*4)}for(var n=0;n<this.staticProperties.length;++n){var i=this.staticProperties[n];e.addAttribute(i.attributeName,this.staticBuffer,0,i.type===ue.UNSIGNED_BYTE,i.type,this.staticStride*4,i.offset*4)}},r.prototype.uploadDynamic=function(e,t,n){for(var i=0;i<this.dynamicProperties.length;i++){var s=this.dynamicProperties[i];s.uploadFunction(e,t,n,s.type===ue.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++},r.prototype.uploadStatic=function(e,t,n){for(var i=0;i<this.staticProperties.length;i++){var s=this.staticProperties[i];s.uploadFunction(e,t,n,s.type===ue.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++},r.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},r}(),sV=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,aV=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,RR=function(r){AR(e,r);function e(t){var n=r.call(this,t)||this;return n.shader=null,n.properties=null,n.tempMatrix=new ct,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ue.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=bn.from(aV,sV,{}),n.state=bi.for2d(),n}return e.prototype.render=function(t){var n=t.children,i=t._maxSize,s=t._batchSize,a=this.renderer,o=n.length;if(o!==0){o>i&&!t.autoResize&&(o=i);var u=t._buffers;u||(u=t._buffers=this.generateBuffers(t));var l=n[0]._texture.baseTexture,h=l.alphaMode>0;this.state.blendMode=d0(t.blendMode,h),a.state.set(this.state);var c=a.gl,f=t.worldTransform.copyTo(this.tempMatrix);f.prepend(a.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=SA(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,h),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);for(var p=!1,v=0,g=0;v<o;v+=s,g+=1){var m=o-v;m>s&&(m=s),g>=u.length&&u.push(this._generateOneMoreBuffer(t));var y=u[g];y.uploadDynamic(n,v,m);var x=t._bufferUpdateIDs[g]||0;p=p||y._updateID<x,p&&(y._updateID=t._updateID,y.uploadStatic(n,v,m)),a.geometry.bind(y.geometry),c.drawElements(c.TRIANGLES,m*6,c.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var n=[],i=t._maxSize,s=t._batchSize,a=t._properties,o=0;o<i;o+=s)n.push(new C1(this.properties,a,s));return n},e.prototype._generateOneMoreBuffer=function(t){var n=t._batchSize,i=t._properties;return new C1(this.properties,i,n)},e.prototype.uploadVertices=function(t,n,i,s,a,o){for(var u=0,l=0,h=0,c=0,f=0;f<i;++f){var p=t[n+f],v=p._texture,g=p.scale.x,m=p.scale.y,y=v.trim,x=v.orig;y?(l=y.x-p.anchor.x*x.width,u=l+y.width,c=y.y-p.anchor.y*x.height,h=c+y.height):(u=x.width*(1-p.anchor.x),l=x.width*-p.anchor.x,h=x.height*(1-p.anchor.y),c=x.height*-p.anchor.y),s[o]=l*g,s[o+1]=c*m,s[o+a]=u*g,s[o+a+1]=c*m,s[o+a*2]=u*g,s[o+a*2+1]=h*m,s[o+a*3]=l*g,s[o+a*3+1]=h*m,o+=a*4}},e.prototype.uploadPosition=function(t,n,i,s,a,o){for(var u=0;u<i;u++){var l=t[n+u].position;s[o]=l.x,s[o+1]=l.y,s[o+a]=l.x,s[o+a+1]=l.y,s[o+a*2]=l.x,s[o+a*2+1]=l.y,s[o+a*3]=l.x,s[o+a*3+1]=l.y,o+=a*4}},e.prototype.uploadRotation=function(t,n,i,s,a,o){for(var u=0;u<i;u++){var l=t[n+u].rotation;s[o]=l,s[o+a]=l,s[o+a*2]=l,s[o+a*3]=l,o+=a*4}},e.prototype.uploadUvs=function(t,n,i,s,a,o){for(var u=0;u<i;++u){var l=t[n+u]._texture._uvs;l?(s[o]=l.x0,s[o+1]=l.y0,s[o+a]=l.x1,s[o+a+1]=l.y1,s[o+a*2]=l.x2,s[o+a*2+1]=l.y2,s[o+a*3]=l.x3,s[o+a*3+1]=l.y3,o+=a*4):(s[o]=0,s[o+1]=0,s[o+a]=0,s[o+a+1]=0,s[o+a*2]=0,s[o+a*2+1]=0,s[o+a*3]=0,s[o+a*3+1]=0,o+=a*4)}},e.prototype.uploadTint=function(t,n,i,s,a,o){for(var u=0;u<i;++u){var l=t[n+u],h=l._texture.baseTexture.alphaMode>0,c=l.alpha,f=c<1&&h?qc(l._tintRGB,c):l._tintRGB+(c*255<<24);s[o]=f,s[o+a]=f,s[o+a*2]=f,s[o+a*3]=f,o+=a*4}},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e.extension={name:"particle",type:Ne.RendererPlugin},e}(qu);/*!
 * @pixi/graphics - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Kr;(function(r){r.MITER="miter",r.BEVEL="bevel",r.ROUND="round"})(Kr||(Kr={}));var xn;(function(r){r.BUTT="butt",r.ROUND="round",r.SQUARE="square"})(xn||(xn={}));var ya={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(r,e){if(e===void 0&&(e=20),!this.adaptive||!r||isNaN(r))return e;var t=Math.ceil(r/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}},$0=function(){function r(){this.color=16777215,this.alpha=1,this.texture=pe.WHITE,this.matrix=null,this.visible=!1,this.reset()}return r.prototype.clone=function(){var e=new r;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},r.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=pe.WHITE,this.matrix=null,this.visible=!1},r.prototype.destroy=function(){this.texture=null,this.matrix=null},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var fy=function(r,e){return fy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},fy(r,e)};function W0(r,e){fy(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function I1(r,e){var t,n;e===void 0&&(e=!1);var i=r.length;if(!(i<6)){for(var s=0,a=0,o=r[i-2],u=r[i-1];a<i;a+=2){var l=r[a],h=r[a+1];s+=(l-o)*(h+u),o=l,u=h}if(!e&&s>0||e&&s<=0)for(var c=i/2,a=c+c%2;a<i;a+=2){var f=i-a-2,p=i-a-1,v=a,g=a+1;t=[r[v],r[f]],r[f]=t[0],r[v]=t[1],n=[r[g],r[p]],r[p]=n[0],r[g]=n[1]}}}var Y0={build:function(r){r.points=r.shape.points.slice()},triangulate:function(r,e){var t=r.points,n=r.holes,i=e.points,s=e.indices;if(t.length>=6){I1(t,!1);for(var a=[],o=0;o<n.length;o++){var u=n[o];I1(u.points,!0),a.push(t.length/2),t=t.concat(u.points)}var l=Yc(t,a,2);if(!l)return;for(var h=i.length/2,o=0;o<l.length;o+=3)s.push(l[o]+h),s.push(l[o+1]+h),s.push(l[o+2]+h);for(var o=0;o<t.length;o++)i.push(t[o])}}},Eu={build:function(r){var e=r.points,t,n,i,s,a,o;if(r.type===vt.CIRC){var u=r.shape;t=u.x,n=u.y,a=o=u.radius,i=s=0}else if(r.type===vt.ELIP){var l=r.shape;t=l.x,n=l.y,a=l.width,o=l.height,i=s=0}else{var h=r.shape,c=h.width/2,f=h.height/2;t=h.x+c,n=h.y+f,a=o=Math.max(0,Math.min(h.radius,Math.min(c,f))),i=c-a,s=f-o}if(!(a>=0&&o>=0&&i>=0&&s>=0)){e.length=0;return}var p=Math.ceil(2.3*Math.sqrt(a+o)),v=p*8+(i?4:0)+(s?4:0);if(e.length=v,v!==0){if(p===0){e.length=8,e[0]=e[6]=t+i,e[1]=e[3]=n+s,e[2]=e[4]=t-i,e[5]=e[7]=n-s;return}var g=0,m=p*4+(i?2:0)+2,y=m,x=v;{var T=i+a,E=s,b=t+T,w=t-T,C=n+E;if(e[g++]=b,e[g++]=C,e[--m]=C,e[--m]=w,s){var O=n-E;e[y++]=w,e[y++]=O,e[--x]=O,e[--x]=b}}for(var R=1;R<p;R++){var I=Math.PI/2*(R/p),T=i+Math.cos(I)*a,E=s+Math.sin(I)*o,b=t+T,w=t-T,C=n+E,O=n-E;e[g++]=b,e[g++]=C,e[--m]=C,e[--m]=w,e[y++]=w,e[y++]=O,e[--x]=O,e[--x]=b}{var T=i,E=s+o,b=t+T,w=t-T,C=n+E,O=n-E;e[g++]=b,e[g++]=C,e[--x]=O,e[--x]=b,i&&(e[g++]=w,e[g++]=C,e[--x]=O,e[--x]=w)}}},triangulate:function(r,e){var t=r.points,n=e.points,i=e.indices;if(t.length!==0){var s=n.length/2,a=s,o,u;if(r.type!==vt.RREC){var l=r.shape;o=l.x,u=l.y}else{var h=r.shape;o=h.x+h.width/2,u=h.y+h.height/2}var c=r.matrix;n.push(r.matrix?c.a*o+c.c*u+c.tx:o,r.matrix?c.b*o+c.d*u+c.ty:u),s++,n.push(t[0],t[1]);for(var f=2;f<t.length;f+=2)n.push(t[f],t[f+1]),i.push(s++,a,s);i.push(a+1,a,s)}}},OR={build:function(r){var e=r.shape,t=e.x,n=e.y,i=e.width,s=e.height,a=r.points;a.length=0,a.push(t,n,t+i,n,t+i,n+s,t,n+s)},triangulate:function(r,e){var t=r.points,n=e.points,i=n.length/2;n.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}};function As(r,e,t){var n=e-r;return r+n*t}function ql(r,e,t,n,i,s,a){a===void 0&&(a=[]);for(var o=20,u=a,l=0,h=0,c=0,f=0,p=0,v=0,g=0,m=0;g<=o;++g)m=g/o,l=As(r,t,m),h=As(e,n,m),c=As(t,i,m),f=As(n,s,m),p=As(l,c,m),v=As(h,f,m),!(g===0&&u[u.length-2]===p&&u[u.length-1]===v)&&u.push(p,v);return u}var MR={build:function(r){if(bu.nextRoundedRectBehavior){Eu.build(r);return}var e=r.shape,t=r.points,n=e.x,i=e.y,s=e.width,a=e.height,o=Math.max(0,Math.min(e.radius,Math.min(s,a)/2));t.length=0,o?(ql(n,i+o,n,i,n+o,i,t),ql(n+s-o,i,n+s,i,n+s,i+o,t),ql(n+s,i+a-o,n+s,i+a,n+s-o,i+a,t),ql(n+o,i+a,n,i+a,n,i+a-o,t)):t.push(n,i,n+s,i,n+s,i+a,n,i+a)},triangulate:function(r,e){if(bu.nextRoundedRectBehavior){Eu.triangulate(r,e);return}for(var t=r.points,n=e.points,i=e.indices,s=n.length/2,a=Yc(t,null,2),o=0,u=a.length;o<u;o+=3)i.push(a[o]+s),i.push(a[o+1]+s),i.push(a[o+2]+s);for(var o=0,u=t.length;o<u;o++)n.push(t[o],t[++o])}};function P1(r,e,t,n,i,s,a,o){var u=r-t*i,l=e-n*i,h=r+t*s,c=e+n*s,f,p;a?(f=n,p=-t):(f=-n,p=t);var v=u+f,g=l+p,m=h+f,y=c+p;return o.push(v,g),o.push(m,y),2}function Ai(r,e,t,n,i,s,a,o){var u=t-r,l=n-e,h=Math.atan2(u,l),c=Math.atan2(i-r,s-e);o&&h<c?h+=Math.PI*2:!o&&h>c&&(c+=Math.PI*2);var f=h,p=c-h,v=Math.abs(p),g=Math.sqrt(u*u+l*l),m=(15*v*Math.sqrt(g)/Math.PI>>0)+1,y=p/m;if(f+=y,o){a.push(r,e),a.push(t,n);for(var x=1,T=f;x<m;x++,T+=y)a.push(r,e),a.push(r+Math.sin(T)*g,e+Math.cos(T)*g);a.push(r,e),a.push(i,s)}else{a.push(t,n),a.push(r,e);for(var x=1,T=f;x<m;x++,T+=y)a.push(r+Math.sin(T)*g,e+Math.cos(T)*g),a.push(r,e);a.push(i,s),a.push(r,e)}return m*2}function oV(r,e){var t=r.shape,n=r.points||t.points.slice(),i=e.closePointEps;if(n.length!==0){var s=r.lineStyle,a=new He(n[0],n[1]),o=new He(n[n.length-2],n[n.length-1]),u=t.type!==vt.POLY||t.closeStroke,l=Math.abs(a.x-o.x)<i&&Math.abs(a.y-o.y)<i;if(u){n=n.slice(),l&&(n.pop(),n.pop(),o.set(n[n.length-2],n[n.length-1]));var h=(a.x+o.x)*.5,c=(o.y+a.y)*.5;n.unshift(h,c),n.push(h,c)}var f=e.points,p=n.length/2,v=n.length,g=f.length/2,m=s.width/2,y=m*m,x=s.miterLimit*s.miterLimit,T=n[0],E=n[1],b=n[2],w=n[3],C=0,O=0,R=-(E-w),I=T-b,D=0,F=0,j=Math.sqrt(R*R+I*I);R/=j,I/=j,R*=m,I*=m;var z=s.alignment,$=(1-z)*2,H=z*2;u||(s.cap===xn.ROUND?v+=Ai(T-R*($-H)*.5,E-I*($-H)*.5,T-R*$,E-I*$,T+R*H,E+I*H,f,!0)+2:s.cap===xn.SQUARE&&(v+=P1(T,E,R,I,$,H,!0,f))),f.push(T-R*$,E-I*$),f.push(T+R*H,E+I*H);for(var Y=1;Y<p-1;++Y){T=n[(Y-1)*2],E=n[(Y-1)*2+1],b=n[Y*2],w=n[Y*2+1],C=n[(Y+1)*2],O=n[(Y+1)*2+1],R=-(E-w),I=T-b,j=Math.sqrt(R*R+I*I),R/=j,I/=j,R*=m,I*=m,D=-(w-O),F=b-C,j=Math.sqrt(D*D+F*F),D/=j,F/=j,D*=m,F*=m;var L=b-T,B=E-w,N=b-C,U=O-w,q=L*N+B*U,Q=B*N-U*L,ne=Q<0;if(Math.abs(Q)<.001*Math.abs(q)){f.push(b-R*$,w-I*$),f.push(b+R*H,w+I*H),q>=0&&(s.join===Kr.ROUND?v+=Ai(b,w,b-R*$,w-I*$,b-D*$,w-F*$,f,!1)+4:v+=2,f.push(b-D*H,w-F*H),f.push(b+D*$,w+F*$));continue}var de=(-R+T)*(-I+w)-(-R+b)*(-I+E),ge=(-D+C)*(-F+w)-(-D+b)*(-F+O),oe=(L*ge-N*de)/Q,Ee=(U*de-B*ge)/Q,ke=(oe-b)*(oe-b)+(Ee-w)*(Ee-w),Je=b+(oe-b)*$,Me=w+(Ee-w)*$,Be=b-(oe-b)*H,Ge=w-(Ee-w)*H,be=Math.min(L*L+B*B,N*N+U*U),Et=ne?$:H,Ct=be+Et*Et*y,Re=ke<=Ct;Re?s.join===Kr.BEVEL||ke/y>x?(ne?(f.push(Je,Me),f.push(b+R*H,w+I*H),f.push(Je,Me),f.push(b+D*H,w+F*H)):(f.push(b-R*$,w-I*$),f.push(Be,Ge),f.push(b-D*$,w-F*$),f.push(Be,Ge)),v+=2):s.join===Kr.ROUND?ne?(f.push(Je,Me),f.push(b+R*H,w+I*H),v+=Ai(b,w,b+R*H,w+I*H,b+D*H,w+F*H,f,!0)+4,f.push(Je,Me),f.push(b+D*H,w+F*H)):(f.push(b-R*$,w-I*$),f.push(Be,Ge),v+=Ai(b,w,b-R*$,w-I*$,b-D*$,w-F*$,f,!1)+4,f.push(b-D*$,w-F*$),f.push(Be,Ge)):(f.push(Je,Me),f.push(Be,Ge)):(f.push(b-R*$,w-I*$),f.push(b+R*H,w+I*H),s.join===Kr.ROUND?ne?v+=Ai(b,w,b+R*H,w+I*H,b+D*H,w+F*H,f,!0)+2:v+=Ai(b,w,b-R*$,w-I*$,b-D*$,w-F*$,f,!1)+2:s.join===Kr.MITER&&ke/y<=x&&(ne?(f.push(Be,Ge),f.push(Be,Ge)):(f.push(Je,Me),f.push(Je,Me)),v+=2),f.push(b-D*$,w-F*$),f.push(b+D*H,w+F*H),v+=2)}T=n[(p-2)*2],E=n[(p-2)*2+1],b=n[(p-1)*2],w=n[(p-1)*2+1],R=-(E-w),I=T-b,j=Math.sqrt(R*R+I*I),R/=j,I/=j,R*=m,I*=m,f.push(b-R*$,w-I*$),f.push(b+R*H,w+I*H),u||(s.cap===xn.ROUND?v+=Ai(b-R*($-H)*.5,w-I*($-H)*.5,b-R*$,w-I*$,b+R*H,w+I*H,f,!1)+2:s.cap===xn.SQUARE&&(v+=P1(b,w,R,I,$,H,!1,f)));for(var sr=e.indices,Ln=ya.epsilon*ya.epsilon,Y=g;Y<v+g-2;++Y)T=f[Y*2],E=f[Y*2+1],b=f[(Y+1)*2],w=f[(Y+1)*2+1],C=f[(Y+2)*2],O=f[(Y+2)*2+1],!(Math.abs(T*(w-O)+b*(O-E)+C*(E-w))<Ln)&&sr.push(Y,Y+1,Y+2)}}function uV(r,e){var t=0,n=r.shape,i=r.points||n.points,s=n.type!==vt.POLY||n.closeStroke;if(i.length!==0){var a=e.points,o=e.indices,u=i.length/2,l=a.length/2,h=l;for(a.push(i[0],i[1]),t=1;t<u;t++)a.push(i[t*2],i[t*2+1]),o.push(h,h+1),h++;s&&o.push(h,l)}}function dy(r,e){r.lineStyle.native?uV(r,e):oV(r,e)}var py=function(){function r(){}return r.curveTo=function(e,t,n,i,s,a){var o=a[a.length-2],u=a[a.length-1],l=u-t,h=o-e,c=i-t,f=n-e,p=Math.abs(l*f-h*c);if(p<1e-8||s===0)return(a[a.length-2]!==e||a[a.length-1]!==t)&&a.push(e,t),null;var v=l*l+h*h,g=c*c+f*f,m=l*c+h*f,y=s*Math.sqrt(v)/p,x=s*Math.sqrt(g)/p,T=y*m/v,E=x*m/g,b=y*f+x*h,w=y*c+x*l,C=h*(x+T),O=l*(x+T),R=f*(y+E),I=c*(y+E),D=Math.atan2(O-w,C-b),F=Math.atan2(I-w,R-b);return{cx:b+e,cy:w+t,radius:s,startAngle:D,endAngle:F,anticlockwise:h*c>f*l}},r.arc=function(e,t,n,i,s,a,o,u,l){for(var h=o-a,c=ya._segmentsCount(Math.abs(h)*s,Math.ceil(Math.abs(h)/gu)*40),f=h/(c*2),p=f*2,v=Math.cos(f),g=Math.sin(f),m=c-1,y=m%1/m,x=0;x<=m;++x){var T=x+y*x,E=f+a+p*T,b=Math.cos(E),w=-Math.sin(E);l.push((v*b+g*w)*s+n,(v*-w+g*b)*s+i)}},r}(),DR=function(){function r(){}return r.curveLength=function(e,t,n,i,s,a,o,u){for(var l=10,h=0,c=0,f=0,p=0,v=0,g=0,m=0,y=0,x=0,T=0,E=0,b=e,w=t,C=1;C<=l;++C)c=C/l,f=c*c,p=f*c,v=1-c,g=v*v,m=g*v,y=m*e+3*g*c*n+3*v*f*s+p*o,x=m*t+3*g*c*i+3*v*f*a+p*u,T=b-y,E=w-x,b=y,w=x,h+=Math.sqrt(T*T+E*E);return h},r.curveTo=function(e,t,n,i,s,a,o){var u=o[o.length-2],l=o[o.length-1];o.length-=2;var h=ya._segmentsCount(r.curveLength(u,l,e,t,n,i,s,a)),c=0,f=0,p=0,v=0,g=0;o.push(u,l);for(var m=1,y=0;m<=h;++m)y=m/h,c=1-y,f=c*c,p=f*c,v=y*y,g=v*y,o.push(p*u+3*f*y*e+3*c*v*n+g*s,p*l+3*f*y*t+3*c*v*i+g*a)},r}(),LR=function(){function r(){}return r.curveLength=function(e,t,n,i,s,a){var o=e-2*n+s,u=t-2*i+a,l=2*n-2*e,h=2*i-2*t,c=4*(o*o+u*u),f=4*(o*l+u*h),p=l*l+h*h,v=2*Math.sqrt(c+f+p),g=Math.sqrt(c),m=2*c*g,y=2*Math.sqrt(p),x=f/g;return(m*v+g*f*(v-y)+(4*p*c-f*f)*Math.log((2*g+x+v)/(x+y)))/(4*m)},r.curveTo=function(e,t,n,i,s){for(var a=s[s.length-2],o=s[s.length-1],u=ya._segmentsCount(r.curveLength(a,o,e,t,n,i)),l=0,h=0,c=1;c<=u;++c){var f=c/u;l=a+(e-a)*f,h=o+(t-o)*f,s.push(l+(e+(n-e)*f-l)*f,h+(t+(i-t)*f-h)*f)}},r}(),NR=function(){function r(){this.reset()}return r.prototype.begin=function(e,t,n){this.reset(),this.style=e,this.start=t,this.attribStart=n},r.prototype.end=function(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start},r.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},r}(),Ri,Sh=(Ri={},Ri[vt.POLY]=Y0,Ri[vt.CIRC]=Eu,Ri[vt.ELIP]=Eu,Ri[vt.RECT]=OR,Ri[vt.RREC]=MR,Ri),vy=[],go=[],my=function(){function r(e,t,n,i){t===void 0&&(t=null),n===void 0&&(n=null),i===void 0&&(i=null),this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=t,this.matrix=i,this.type=e.type}return r.prototype.clone=function(){return new r(this.shape,this.fillStyle,this.lineStyle,this.matrix)},r.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},r}(),Rs=new He,FR=function(r){W0(e,r);function e(){var t=r.call(this)||this;return t.closePointEps=1e-4,t.boundsPadding=0,t.uvsFloat32=null,t.indicesUint16=null,t.batchable=!1,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.drawCalls=[],t.batchDirty=-1,t.batches=[],t.dirty=0,t.cacheDirty=-1,t.clearDirty=0,t.shapeIndex=0,t._bounds=new yu,t.boundsDirty=-1,t}return Object.defineProperty(e.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),go.push(this.drawCalls[t]);this.drawCalls.length=0;for(var t=0;t<this.batches.length;t++){var n=this.batches[t];n.reset(),vy.push(n)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,n,i,s){n===void 0&&(n=null),i===void 0&&(i=null),s===void 0&&(s=null);var a=new my(t,n,i,s);return this.graphicsData.push(a),this.dirty++,this},e.prototype.drawHole=function(t,n){if(n===void 0&&(n=null),!this.graphicsData.length)return null;var i=new my(t,null,null,n),s=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=s.lineStyle,s.holes.push(i),this.dirty++,this},e.prototype.destroy=function(){r.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var n=this.graphicsData,i=0;i<n.length;++i){var s=n[i];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(t,Rs):Rs.copyFrom(t),s.shape.contains(Rs.x,Rs.y))){var a=!1;if(s.holes)for(var o=0;o<s.holes.length;o++){var u=s.holes[o];if(u.shape.contains(Rs.x,Rs.y)){a=!0;break}}if(!a)return!0}}return!1},e.prototype.updateBatches=function(){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,n=this.graphicsData,i=null,s=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],s=i.style);for(var a=this.shapeIndex;a<n.length;a++){this.shapeIndex++;var o=n[a],u=o.fillStyle,l=o.lineStyle,h=Sh[o.type];h.build(o),o.matrix&&this.transformPoints(o.points,o.matrix),(u.visible||l.visible)&&this.processHoles(o.holes);for(var c=0;c<2;c++){var f=c===0?u:l;if(f.visible){var p=f.texture.baseTexture,v=this.indices.length,g=this.points.length/2;p.wrapMode=Fr.REPEAT,c===0?this.processFill(o):this.processLine(o);var m=this.points.length/2-g;m!==0&&(i&&!this._compareStyles(s,f)&&(i.end(v,g),i=null),i||(i=vy.pop()||new NR,i.begin(f,v,g),this.batches.push(i),s=f),this.addUvs(this.points,t,f.texture,g,m,f.matrix))}}}var y=this.indices.length,x=this.points.length/2;if(i&&i.end(y,x),this.batches.length===0){this.batchable=!0;return}var T=x>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&T===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=T?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},e.prototype._compareStyles=function(t,n){return!(!t||!n||t.texture.baseTexture!==n.texture.baseTexture||t.color+t.alpha!==n.color+n.alpha||!!t.native!=!!n.native)},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,n=this.graphicsData.length;t<n;t++){var i=this.graphicsData[t],s=i.fillStyle,a=i.lineStyle;if(s&&!s.texture.baseTexture.valid||a&&!a.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,n=0,i=t.length;n<i;n++)for(var s=t[n],a=0;a<s.size;a++){var o=s.start+a;this.indicesUint16[o]=this.indicesUint16[o]-s.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var t=this.batches,n=0;n<t.length;n++)if(t[n].style.native)return!1;return this.points.length<e.BATCHABLE_SIZE*2},e.prototype.buildDrawCalls=function(){for(var t=++Ie._globalBatch,n=0;n<this.drawCalls.length;n++)this.drawCalls[n].texArray.clear(),go.push(this.drawCalls[n]);this.drawCalls.length=0;var i=this.colors,s=this.textureIds,a=go.pop();a||(a=new vc,a.texArray=new mc),a.texArray.count=0,a.start=0,a.size=0,a.type=pr.TRIANGLES;var o=0,u=null,l=0,h=!1,c=pr.TRIANGLES,f=0;this.drawCalls.push(a);for(var n=0;n<this.batches.length;n++){var p=this.batches[n],v=8,g=p.style,m=g.texture.baseTexture;h!==!!g.native&&(h=!!g.native,c=h?pr.LINES:pr.TRIANGLES,u=null,o=v,t++),u!==m&&(u=m,m._batchEnabled!==t&&(o===v&&(t++,o=0,a.size>0&&(a=go.pop(),a||(a=new vc,a.texArray=new mc),this.drawCalls.push(a)),a.start=f,a.size=0,a.texArray.count=0,a.type=c),m.touched=1,m._batchEnabled=t,m._batchLocation=o,m.wrapMode=Fr.REPEAT,a.texArray.elements[a.texArray.count++]=m,o++)),a.size+=p.size,f+=p.size,l=m._batchLocation,this.addColors(i,g.color,g.alpha,p.attribSize,p.attribStart),this.addTextureIds(s,l,p.attribSize,p.attribStart)}Ie._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,n=this.uvs,i=this.colors,s=this.textureIds,a=new ArrayBuffer(t.length*3*4),o=new Float32Array(a),u=new Uint32Array(a),l=0,h=0;h<t.length/2;h++)o[l++]=t[h*2],o[l++]=t[h*2+1],o[l++]=n[h*2],o[l++]=n[h*2+1],u[l++]=i[h],o[l++]=s[h];this._buffer.update(a),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){if(t.holes.length)Y0.triangulate(t,this);else{var n=Sh[t.type];n.triangulate(t,this)}},e.prototype.processLine=function(t){dy(t,this);for(var n=0;n<t.holes.length;n++)dy(t.holes[n],this)},e.prototype.processHoles=function(t){for(var n=0;n<t.length;n++){var i=t[n],s=Sh[i.type];s.build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,n){for(var i=0;i<t.length/2;i++){var s=t[i*2],a=t[i*2+1];t[i*2]=n.a*s+n.c*a+n.tx,t[i*2+1]=n.b*s+n.d*a+n.ty}},e.prototype.addColors=function(t,n,i,s,a){a===void 0&&(a=0);var o=(n>>16)+(n&65280)+((n&255)<<16),u=qc(o,i);t.length=Math.max(t.length,a+s);for(var l=0;l<s;l++)t[a+l]=u},e.prototype.addTextureIds=function(t,n,i,s){s===void 0&&(s=0),t.length=Math.max(t.length,s+i);for(var a=0;a<i;a++)t[s+a]=n},e.prototype.addUvs=function(t,n,i,s,a,o){o===void 0&&(o=null);for(var u=0,l=n.length,h=i.frame;u<a;){var c=t[(s+u)*2],f=t[(s+u)*2+1];if(o){var p=o.a*c+o.c*f+o.tx;f=o.b*c+o.d*f+o.ty,c=p}u++,n.push(c/h.width,f/h.height)}var v=i.baseTexture;(h.width<v.width||h.height<v.height)&&this.adjustUvs(n,i,l,a)},e.prototype.adjustUvs=function(t,n,i,s){for(var a=n.baseTexture,o=1e-6,u=i+s*2,l=n.frame,h=l.width/a.width,c=l.height/a.height,f=l.x/l.width,p=l.y/l.height,v=Math.floor(t[i]+o),g=Math.floor(t[i+1]+o),m=i+2;m<u;m+=2)v=Math.min(v,Math.floor(t[m]+o)),g=Math.min(g,Math.floor(t[m+1]+o));f-=v,p-=g;for(var m=i;m<u;m+=2)t[m]=(t[m]+f)*h,t[m+1]=(t[m+1]+p)*c},e.BATCHABLE_SIZE=100,e}(H0),BR=function(r){W0(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.width=0,t.alignment=.5,t.native=!1,t.cap=xn.BUTT,t.join=Kr.MITER,t.miterLimit=10,t}return e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){r.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}($0),lV=new Float32Array(3),Gd={},bu=function(r){W0(e,r);function e(t){t===void 0&&(t=null);var n=r.call(this)||this;return n.shader=null,n.pluginName="batch",n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n._fillStyle=new $0,n._lineStyle=new BR,n._matrix=null,n._holeMode=!1,n.state=bi.for2d(),n._geometry=t||new FR,n._geometry.refCount++,n._transformID=-1,n.tint=16777215,n.blendMode=he.NORMAL,n}return Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t,n,i,s,a){return t===void 0&&(t=null),n===void 0&&(n=0),i===void 0&&(i=1),s===void 0&&(s=.5),a===void 0&&(a=!1),typeof t=="number"&&(t={width:t,color:n,alpha:i,alignment:s,native:a}),this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:pe.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:xn.BUTT,join:Kr.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var n=t.width>0&&t.alpha>0;return n?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:n},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,n=this.currentPath.points.length;n>2&&(this.drawShape(this.currentPath),this.currentPath=new Lo,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[n-2],t[n-1]))}else this.currentPath=new Lo,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,n){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=n,this},e.prototype.lineTo=function(t,n){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,s=i[i.length-2],a=i[i.length-1];return(s!==t||a!==n)&&i.push(t,n),this},e.prototype._initCurve=function(t,n){t===void 0&&(t=0),n===void 0&&(n=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,n]):this.moveTo(t,n)},e.prototype.quadraticCurveTo=function(t,n,i,s){this._initCurve();var a=this.currentPath.points;return a.length===0&&this.moveTo(0,0),LR.curveTo(t,n,i,s,a),this},e.prototype.bezierCurveTo=function(t,n,i,s,a,o){return this._initCurve(),DR.curveTo(t,n,i,s,a,o,this.currentPath.points),this},e.prototype.arcTo=function(t,n,i,s,a){this._initCurve(t,n);var o=this.currentPath.points,u=py.curveTo(t,n,i,s,a,o);if(u){var l=u.cx,h=u.cy,c=u.radius,f=u.startAngle,p=u.endAngle,v=u.anticlockwise;this.arc(l,h,c,f,p,v)}return this},e.prototype.arc=function(t,n,i,s,a,o){if(o===void 0&&(o=!1),s===a)return this;!o&&a<=s?a+=gu:o&&s<=a&&(s+=gu);var u=a-s;if(u===0)return this;var l=t+Math.cos(s)*i,h=n+Math.sin(s)*i,c=this._geometry.closePointEps,f=this.currentPath?this.currentPath.points:null;if(f){var p=Math.abs(f[f.length-2]-l),v=Math.abs(f[f.length-1]-h);p<c&&v<c||f.push(l,h)}else this.moveTo(l,h),f=this.currentPath.points;return py.arc(l,h,t,n,i,s,a,o,f),this},e.prototype.beginFill=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=1),this.beginTextureFill({texture:pe.WHITE,color:t,alpha:n})},e.prototype.beginTextureFill=function(t){t=Object.assign({texture:pe.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var n=t.alpha>0;return n?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:n},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,n,i,s){return this.drawShape(new Pe(t,n,i,s))},e.prototype.drawRoundedRect=function(t,n,i,s,a){return this.drawShape(new DA(t,n,i,s,a))},e.prototype.drawCircle=function(t,n,i){return this.drawShape(new OA(t,n,i))},e.prototype.drawEllipse=function(t,n,i,s){return this.drawShape(new MA(t,n,i,s))},e.prototype.drawPolygon=function(){for(var t=arguments,n=[],i=0;i<arguments.length;i++)n[i]=t[i];var s,a=!0,o=n[0];o.points?(a=o.closeStroke,s=o.points):Array.isArray(n[0])?s=n[0]:s=n;var u=new Lo(s);return u.closeStroke=a,this.drawShape(u),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===vt.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var n=this._geometry;n.updateBatches(),n.batchable?(this.batchDirty!==n.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,n=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(var s=0;s<i;s++){var a=t.batches[s],o=a.style.color,u=new Float32Array(this.vertexData.buffer,a.attribStart*4*2,a.attribSize*2),l=new Float32Array(t.uvsFloat32.buffer,a.attribStart*4*2,a.attribSize*2),h=new Uint16Array(t.indicesUint16.buffer,a.start*2,a.size),c={vertexData:u,blendMode:n,indices:h,uvs:l,_batchRGB:vs(o),_tintRGB:o,_texture:a.style.texture,alpha:a.style.alpha,worldAlpha:1};this.batches[s]=c}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var n=0,i=this.batches.length;n<i;n++){var s=this.batches[n];s.worldAlpha=this.worldAlpha*s.alpha,t.plugins[this.pluginName].render(s)}}},e.prototype._renderDirect=function(t){var n=this._resolveDirectShader(t),i=this._geometry,s=this.tint,a=this.worldAlpha,o=n.uniforms,u=i.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(s>>16&255)/255*a,o.tint[1]=(s>>8&255)/255*a,o.tint[2]=(s&255)/255*a,o.tint[3]=a,t.shader.bind(n),t.geometry.bind(i,n),t.state.set(this.state);for(var l=0,h=u.length;l<h;l++)this._renderDrawCallDirect(t,i.drawCalls[l])},e.prototype._renderDrawCallDirect=function(t,n){for(var i=n.texArray,s=n.type,a=n.size,o=n.start,u=i.count,l=0;l<u;l++)t.texture.bind(i.elements[l],l);t.geometry.draw(s,a,o)},e.prototype._resolveDirectShader=function(t){var n=this.shader,i=this.pluginName;if(!n){if(!Gd[i]){for(var s=t.plugins[i].MAX_TEXTURES,a=new Int32Array(s),o=0;o<s;o++)a[o]=o;var u={tint:new Float32Array([1,1,1,1]),translationMatrix:new ct,default:ci.from({uSamplers:a},!0)},l=t.plugins[i]._shader.program;Gd[i]=new bn(l,u)}n=Gd[i]}return n},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var n=t.bounds,i=n.minX,s=n.minY,a=n.maxX,o=n.maxY;this._bounds.addFrame(this.transform,i,s,a,o)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=vs(this.tint,lV),n=0;n<this.batches.length;n++){var i=this.batches[n],s=i._batchRGB,a=t[0]*s[0]*255,o=t[1]*s[1]*255,u=t[2]*s[2]*255,l=(a<<16)+(o<<8)+(u|0);i._tintRGB=(l>>16)+(l&65280)+((l&255)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var n=this.transform.worldTransform,i=n.a,s=n.b,a=n.c,o=n.d,u=n.tx,l=n.ty,h=this._geometry.points,c=this.vertexData,f=0,p=0;p<h.length;p+=2){var v=h[p],g=h[p+1];c[f++]=i*v+a*g+u,c[f++]=o*g+s*v+l}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,r.prototype.destroy.call(this,t)},e.nextRoundedRectBehavior=!1,e._TEMP_POINT=new He,e}(Gr),hV={buildPoly:Y0,buildCircle:Eu,buildRectangle:OR,buildRoundedRectangle:MR,buildLine:dy,ArcUtils:py,BezierUtils:DR,QuadraticUtils:LR,BatchPart:NR,FILL_COMMANDS:Sh,BATCH_POOL:vy,DRAW_CALL_POOL:go};/*!
 * @pixi/sprite - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gy=function(r,e){return gy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},gy(r,e)};function cV(r,e){gy(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var no=new He,fV=new Uint16Array([0,1,2,0,2,3]),Ba=function(r){cV(e,r);function e(t){var n=r.call(this)||this;return n._anchor=new Ki(n._onAnchorUpdate,n,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=he.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=t||pe.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=fV,n.pluginName="batch",n.isSprite=!0,n._roundPixels=te.ROUND_PIXELS,n}return e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=qi(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=qi(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===t._updateID)){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var n=this.transform.worldTransform,i=n.a,s=n.b,a=n.c,o=n.d,u=n.tx,l=n.ty,h=this.vertexData,c=t.trim,f=t.orig,p=this._anchor,v=0,g=0,m=0,y=0;if(c?(g=c.x-p._x*f.width,v=g+c.width,y=c.y-p._y*f.height,m=y+c.height):(g=-p._x*f.width,v=g+f.width,y=-p._y*f.height,m=y+f.height),h[0]=i*g+a*y+u,h[1]=o*y+s*g+l,h[2]=i*v+a*y+u,h[3]=o*y+s*v+l,h[4]=i*v+a*m+u,h[5]=o*m+s*v+l,h[6]=i*g+a*m+u,h[7]=o*m+s*g+l,this._roundPixels)for(var x=te.RESOLUTION,T=0;T<h.length;++T)h[T]=Math.round((h[T]*x|0)/x)}},e.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,n=this.vertexTrimmedData,i=t.orig,s=this._anchor,a=this.transform.worldTransform,o=a.a,u=a.b,l=a.c,h=a.d,c=a.tx,f=a.ty,p=-s._x*i.width,v=p+i.width,g=-s._y*i.height,m=g+i.height;n[0]=o*p+l*g+c,n[1]=h*g+u*p+f,n[2]=o*v+l*g+c,n[3]=h*g+u*v+f,n[4]=o*v+l*m+c,n[5]=h*m+u*v+f,n[6]=o*p+l*m+c,n[7]=h*m+u*p+f},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,n=this._texture.orig;!t||t.width===n.width&&t.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(t){return this.children.length===0?(this._localBounds||(this._localBounds=new yu),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Pe),t=this._localBoundsRect),this._localBounds.getRectangle(t)):r.prototype.getLocalBounds.call(this,t)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,no);var n=this._texture.orig.width,i=this._texture.orig.height,s=-n*this.anchor.x,a=0;return no.x>=s&&no.x<s+n&&(a=-i*this.anchor.y,no.y>=a&&no.y<a+i)},e.prototype.destroy=function(t){r.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var n=typeof t=="boolean"?t:t&&t.texture;if(n){var i=typeof t=="boolean"?t:t&&t.baseTexture;this._texture.destroy(!!i)}this._texture=null},e.from=function(t,n){var i=t instanceof pe?t:pe.from(t,n);return new e(i)},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var n=qi(this.scale.x)||1;this.scale.x=n*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var n=qi(this.scale.y)||1;this.scale.y=n*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||pe.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(Gr);/*!
 * @pixi/text - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var yy=function(r,e){return yy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},yy(r,e)};function dV(r,e){yy(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var _a;(function(r){r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(_a||(_a={}));var jd={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:_a.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},pV=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],gs=function(){function r(e){this.styleID=0,this.reset(),Vd(this,e,e)}return r.prototype.clone=function(){var e={};return Vd(e,this,jd),new r(e)},r.prototype.reset=function(){Vd(this,jd,jd)},Object.defineProperty(r.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var t=Hd(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fill",{get:function(){return this._fill},set:function(e){var t=Hd(e);this._fill!==t&&(this._fill=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){vV(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var t=Hd(e);this._stroke!==t&&(this._stroke=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),r.prototype.toFontString=function(){var e=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var n=t.length-1;n>=0;n--){var i=t[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&pV.indexOf(i)<0&&(i='"'+i+'"'),t[n]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},r}();function A1(r){return typeof r=="number"?h0(r):(typeof r=="string"&&r.indexOf("0x")===0&&(r=r.replace("0x","#")),r)}function Hd(r){if(Array.isArray(r)){for(var e=0;e<r.length;++e)r[e]=A1(r[e]);return r}else return A1(r)}function vV(r,e){if(!Array.isArray(r)||!Array.isArray(e)||r.length!==e.length)return!1;for(var t=0;t<r.length;++t)if(r[t]!==e[t])return!1;return!0}function Vd(r,e,t){for(var n in t)Array.isArray(e[n])?r[n]=e[n].slice():r[n]=e[n]}var Kl={willReadFrequently:!0},Hr=function(){function r(e,t,n,i,s,a,o,u,l){this.text=e,this.style=t,this.width=n,this.height=i,this.lines=s,this.lineWidths=a,this.lineHeight=o,this.maxLineWidth=u,this.fontProperties=l}return r.measureText=function(e,t,n,i){i===void 0&&(i=r._canvas),n=n??t.wordWrap;var s=t.toFontString(),a=r.measureFont(s);a.fontSize===0&&(a.fontSize=t.fontSize,a.ascent=t.fontSize);var o=i.getContext("2d",Kl);o.font=s;for(var u=n?r.wordWrap(e,t,i):e,l=u.split(/(?:\r\n|\r|\n)/),h=new Array(l.length),c=0,f=0;f<l.length;f++){var p=o.measureText(l[f]).width+(l[f].length-1)*t.letterSpacing;h[f]=p,c=Math.max(c,p)}var v=c+t.strokeThickness;t.dropShadow&&(v+=t.dropShadowDistance);var g=t.lineHeight||a.fontSize+t.strokeThickness,m=Math.max(g,a.fontSize+t.strokeThickness)+(l.length-1)*(g+t.leading);return t.dropShadow&&(m+=t.dropShadowDistance),new r(e,t,v,m,l,h,g+t.leading,c,a)},r.wordWrap=function(e,t,n){n===void 0&&(n=r._canvas);for(var i=n.getContext("2d",Kl),s=0,a="",o="",u=Object.create(null),l=t.letterSpacing,h=t.whiteSpace,c=r.collapseSpaces(h),f=r.collapseNewlines(h),p=!c,v=t.wordWrapWidth+l,g=r.tokenize(e),m=0;m<g.length;m++){var y=g[m];if(r.isNewline(y)){if(!f){o+=r.addLine(a),p=!c,a="",s=0;continue}y=" "}if(c){var x=r.isBreakingSpace(y),T=r.isBreakingSpace(a[a.length-1]);if(x&&T)continue}var E=r.getFromCache(y,l,u,i);if(E>v)if(a!==""&&(o+=r.addLine(a),a="",s=0),r.canBreakWords(y,t.breakWords))for(var b=r.wordWrapSplit(y),w=0;w<b.length;w++){for(var C=b[w],O=1;b[w+O];){var R=b[w+O],I=C[C.length-1];if(!r.canBreakChars(I,R,y,w,t.breakWords))C+=R;else break;O++}w+=C.length-1;var D=r.getFromCache(C,l,u,i);D+s>v&&(o+=r.addLine(a),p=!1,a="",s=0),a+=C,s+=D}else{a.length>0&&(o+=r.addLine(a),a="",s=0);var F=m===g.length-1;o+=r.addLine(y,!F),p=!1,a="",s=0}else E+s>v&&(p=!1,o+=r.addLine(a),a="",s=0),(a.length>0||!r.isBreakingSpace(y)||p)&&(a+=y,s+=E)}return o+=r.addLine(a,!1),o},r.addLine=function(e,t){return t===void 0&&(t=!0),e=r.trimRight(e),e=t?e+`
`:e,e},r.getFromCache=function(e,t,n,i){var s=n[e];if(typeof s!="number"){var a=e.length*t;s=i.measureText(e).width+a,n[e]=s}return s},r.collapseSpaces=function(e){return e==="normal"||e==="pre-line"},r.collapseNewlines=function(e){return e==="normal"},r.trimRight=function(e){if(typeof e!="string")return"";for(var t=e.length-1;t>=0;t--){var n=e[t];if(!r.isBreakingSpace(n))break;e=e.slice(0,-1)}return e},r.isNewline=function(e){return typeof e!="string"?!1:r._newlines.indexOf(e.charCodeAt(0))>=0},r.isBreakingSpace=function(e,t){return typeof e!="string"?!1:r._breakingSpaces.indexOf(e.charCodeAt(0))>=0},r.tokenize=function(e){var t=[],n="";if(typeof e!="string")return t;for(var i=0;i<e.length;i++){var s=e[i],a=e[i+1];if(r.isBreakingSpace(s,a)||r.isNewline(s)){n!==""&&(t.push(n),n=""),t.push(s);continue}n+=s}return n!==""&&t.push(n),t},r.canBreakWords=function(e,t){return t},r.canBreakChars=function(e,t,n,i,s){return!0},r.wordWrapSplit=function(e){return e.split("")},r.measureFont=function(e){if(r._fonts[e])return r._fonts[e];var t={ascent:0,descent:0,fontSize:0},n=r._canvas,i=r._context;i.font=e;var s=r.METRICS_STRING+r.BASELINE_SYMBOL,a=Math.ceil(i.measureText(s).width),o=Math.ceil(i.measureText(r.BASELINE_SYMBOL).width),u=Math.ceil(r.HEIGHT_MULTIPLIER*o);o=o*r.BASELINE_MULTIPLIER|0,n.width=a,n.height=u,i.fillStyle="#f00",i.fillRect(0,0,a,u),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s,0,o);var l=i.getImageData(0,0,a,u).data,h=l.length,c=a*4,f=0,p=0,v=!1;for(f=0;f<o;++f){for(var g=0;g<c;g+=4)if(l[p+g]!==255){v=!0;break}if(!v)p+=c;else break}for(t.ascent=o-f,p=h-c,v=!1,f=u;f>o;--f){for(var g=0;g<c;g+=4)if(l[p+g]!==255){v=!0;break}if(!v)p-=c;else break}return t.descent=f-o,t.fontSize=t.ascent+t.descent,r._fonts[e]=t,t},r.clearMetrics=function(e){e===void 0&&(e=""),e?delete r._fonts[e]:r._fonts={}},Object.defineProperty(r,"_canvas",{get:function(){if(!r.__canvas){var e=void 0;try{var t=new OffscreenCanvas(0,0),n=t.getContext("2d",Kl);if(n&&n.measureText)return r.__canvas=t,t;e=te.ADAPTER.createCanvas()}catch{e=te.ADAPTER.createCanvas()}e.width=e.height=10,r.__canvas=e}return r.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(r,"_context",{get:function(){return r.__context||(r.__context=r._canvas.getContext("2d",Kl)),r.__context},enumerable:!1,configurable:!0}),r}();Hr._fonts={};Hr.METRICS_STRING="|ÉqÅ";Hr.BASELINE_SYMBOL="M";Hr.BASELINE_MULTIPLIER=1.4;Hr.HEIGHT_MULTIPLIER=2;Hr._newlines=[10,13];Hr._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var mV={texture:!0,children:!1,baseTexture:!0},q0=function(r){dV(e,r);function e(t,n,i){var s=this,a=!1;i||(i=te.ADAPTER.createCanvas(),a=!0),i.width=3,i.height=3;var o=pe.from(i);return o.orig=new Pe,o.trim=new Pe,s=r.call(this,o)||this,s._ownCanvas=a,s.canvas=i,s.context=i.getContext("2d",{willReadFrequently:!0}),s._resolution=te.RESOLUTION,s._autoResolution=!0,s._text=null,s._style=null,s._styleListener=null,s._font="",s.text=t,s.style=n,s.localStyleID=-1,s}return e.prototype.updateText=function(t){var n=this._style;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),!(!this.dirty&&t)){this._font=this._style.toFontString();var i=this.context,s=Hr.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=s.width,o=s.height,u=s.lines,l=s.lineHeight,h=s.lineWidths,c=s.maxLineWidth,f=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,a)+n.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+n.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=n.strokeThickness,i.textBaseline=n.textBaseline,i.lineJoin=n.lineJoin,i.miterLimit=n.miterLimit;for(var p,v,g=n.dropShadow?2:1,m=0;m<g;++m){var y=n.dropShadow&&m===0,x=y?Math.ceil(Math.max(1,o)+n.padding*2):0,T=x*this._resolution;if(y){i.fillStyle="black",i.strokeStyle="black";var E=n.dropShadowColor,b=vs(typeof E=="number"?E:c0(E)),w=n.dropShadowBlur*this._resolution,C=n.dropShadowDistance*this._resolution;i.shadowColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+n.dropShadowAlpha+")",i.shadowBlur=w,i.shadowOffsetX=Math.cos(n.dropShadowAngle)*C,i.shadowOffsetY=Math.sin(n.dropShadowAngle)*C+T}else i.fillStyle=this._generateFillStyle(n,u,s),i.strokeStyle=n.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;var O=(l-f.fontSize)/2;(!e.nextLineHeightBehavior||l-f.fontSize<0)&&(O=0);for(var R=0;R<u.length;R++)p=n.strokeThickness/2,v=n.strokeThickness/2+R*l+f.ascent+O,n.align==="right"?p+=c-h[R]:n.align==="center"&&(p+=(c-h[R])/2),n.stroke&&n.strokeThickness&&this.drawLetterSpacing(u[R],p+n.padding,v+n.padding-x,!0),n.fill&&this.drawLetterSpacing(u[R],p+n.padding,v+n.padding-x)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,n,i,s){s===void 0&&(s=!1);var a=this._style,o=a.letterSpacing,u=e.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(o===0||u){u&&(this.context.letterSpacing=o,this.context.textLetterSpacing=o),s?this.context.strokeText(t,n,i):this.context.fillText(t,n,i);return}for(var l=n,h=Array.from?Array.from(t):t.split(""),c=this.context.measureText(t).width,f=0,p=0;p<h.length;++p){var v=h[p];s?this.context.strokeText(v,l,i):this.context.fillText(v,l,i);for(var g="",m=p+1;m<h.length;++m)g+=h[m];f=this.context.measureText(g).width,l+=c-f+o,c=f}},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var n=CA(t);n.data&&(t.width=n.width,t.height=n.height,this.context.putImageData(n.data,0,0))}var i=this._texture,s=this._style,a=s.trim?0:s.padding,o=i.baseTexture;i.trim.width=i._frame.width=t.width/this._resolution,i.trim.height=i._frame.height=t.height/this._resolution,i.trim.x=-a,i.trim.y=-a,i.orig.width=i._frame.width-a*2,i.orig.height=i._frame.height-a*2,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),i.updateUvs(),this.dirty=!1},e.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),r.prototype._render.call(this,t)},e.prototype.updateTransform=function(){this.updateText(!0),r.prototype.updateTransform.call(this)},e.prototype.getBounds=function(t,n){return this.updateText(!0),this._textureID===-1&&(t=!1),r.prototype.getBounds.call(this,t,n)},e.prototype.getLocalBounds=function(t){return this.updateText(!0),r.prototype.getLocalBounds.call(this,t)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,n,i){var s=t.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;var a,o=t.dropShadow?t.dropShadowDistance:0,u=t.padding||0,l=this.canvas.width/this._resolution-o-u*2,h=this.canvas.height/this._resolution-o-u*2,c=s.slice(),f=t.fillGradientStops.slice();if(!f.length)for(var p=c.length+1,v=1;v<p;++v)f.push(v/p);if(c.unshift(s[0]),f.unshift(0),c.push(s[s.length-1]),f.push(1),t.fillGradientType===_a.LINEAR_VERTICAL){a=this.context.createLinearGradient(l/2,u,l/2,h+u);for(var g=i.fontProperties.fontSize+t.strokeThickness,v=0;v<n.length;v++){var m=i.lineHeight*(v-1)+g,y=i.lineHeight*v,x=y;v>0&&m>y&&(x=(y+m)/2);var T=y+g,E=i.lineHeight*(v+1),b=T;v+1<n.length&&E<T&&(b=(T+E)/2);for(var w=(b-x)/h,C=0;C<c.length;C++){var O=0;typeof f[C]=="number"?O=f[C]:O=C/c.length;var R=Math.min(1,Math.max(0,x/h+O*w));R=Number(R.toFixed(5)),a.addColorStop(R,c[C])}}}else{a=this.context.createLinearGradient(u,h/2,l+u,h/2);for(var I=c.length+1,D=1,v=0;v<c.length;v++){var F=void 0;typeof f[v]=="number"?F=f[v]:F=D/I,a.addColorStop(F,c[v]),D++}}return a},e.prototype.destroy=function(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},mV,t),r.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var n=qi(this.scale.x)||1;this.scale.x=n*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var n=qi(this.scale.y)||1;this.scale.y=n*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},t instanceof gs?this._style=t:this._style=new gs(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e.experimentalLetterSpacing=!1,e}(Ba);/*!
 * @pixi/prepare - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */te.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _y=function(r,e){return _y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},_y(r,e)};function gV(r,e){_y(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var UR=function(){function r(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return r.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},r.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},r}();function yV(r,e){var t=!1;if(r&&r._textures&&r._textures.length){for(var n=0;n<r._textures.length;n++)if(r._textures[n]instanceof pe){var i=r._textures[n].baseTexture;e.indexOf(i)===-1&&(e.push(i),t=!0)}}return t}function _V(r,e){if(r.baseTexture instanceof Ie){var t=r.baseTexture;return e.indexOf(t)===-1&&e.push(t),!0}return!1}function xV(r,e){if(r._texture&&r._texture instanceof pe){var t=r._texture.baseTexture;return e.indexOf(t)===-1&&e.push(t),!0}return!1}function TV(r,e){return e instanceof q0?(e.updateText(!0),!0):!1}function EV(r,e){if(e instanceof gs){var t=e.toFontString();return Hr.measureFont(t),!0}return!1}function bV(r,e){if(r instanceof q0){e.indexOf(r.style)===-1&&e.push(r.style),e.indexOf(r)===-1&&e.push(r);var t=r._texture.baseTexture;return e.indexOf(t)===-1&&e.push(t),!0}return!1}function SV(r,e){return r instanceof gs?(e.indexOf(r)===-1&&e.push(r),!0):!1}var kR=function(){function r(e){var t=this;this.limiter=new UR(te.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){t.queue&&t.prepareItems()},this.registerFindHook(bV),this.registerFindHook(SV),this.registerFindHook(yV),this.registerFindHook(_V),this.registerFindHook(xV),this.registerUploadHook(TV),this.registerUploadHook(EV)}return r.prototype.upload=function(e,t){var n=this;return typeof e=="function"&&(t=e,e=null),t&&kt("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise(function(i){e&&n.add(e);var s=function(){t==null||t(),i()};n.queue.length?(n.completes.push(s),n.ticking||(n.ticking=!0,pt.system.addOnce(n.tick,n,nn.UTILITY))):s()})},r.prototype.tick=function(){setTimeout(this.delayedTick,0)},r.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed){for(var n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)pt.system.addOnce(this.tick,this,nn.UTILITY);else{this.ticking=!1;var s=this.completes.slice(0);this.completes.length=0;for(var n=0,i=s.length;n<i;n++)s[n]()}},r.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},r.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},r.prototype.add=function(e){for(var t=0,n=this.addHooks.length;t<n&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Gr)for(var t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this},r.prototype.destroy=function(){this.ticking&&pt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},r}();function GR(r,e){return e instanceof Ie?(e._glTextures[r.CONTEXT_UID]||r.texture.bind(e),!0):!1}function wV(r,e){if(!(e instanceof bu))return!1;var t=e.geometry;e.finishPoly(),t.updateBatches();for(var n=t.batches,i=0;i<n.length;i++){var s=n[i].style.texture;s&&GR(r,s.baseTexture)}return t.batchable||r.geometry.bind(t,e._resolveDirectShader(r)),!0}function CV(r,e){return r instanceof bu?(e.push(r),!0):!1}var jR=function(r){gV(e,r);function e(t){var n=r.call(this,t)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook(CV),n.registerUploadHook(GR),n.registerUploadHook(wV),n}return e.extension={name:"prepare",type:Ne.RendererPlugin},e}(kR),IV=function(){function r(e){this.maxMilliseconds=e,this.frameStart=0}return r.prototype.beginFrame=function(){this.frameStart=Date.now()},r.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},r}();/*!
 * @pixi/spritesheet - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var HR=function(){function r(e,t,n){n===void 0&&(n=null),this.linkedSheets=[],this._texture=e instanceof pe?e:null,this.baseTexture=e instanceof Ie?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;var i=this.baseTexture.resource;this.resolution=this._updateResolution(n||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return r.prototype._updateResolution=function(e){e===void 0&&(e=null);var t=this.data.meta.scale,n=mu(e,null);return n===null&&(n=t!==void 0?parseFloat(t):1),n!==1&&this.baseTexture.setResolution(n),n},r.prototype.parse=function(e){var t=this;return e&&kt("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise(function(n){t._callback=function(i){e==null||e(i),n(i)},t._batchIndex=0,t._frameKeys.length<=r.BATCH_SIZE?(t._processFrames(0),t._processAnimations(),t._parseComplete()):t._nextBatch()})},r.prototype._processFrames=function(e){for(var t=e,n=r.BATCH_SIZE;t-e<n&&t<this._frameKeys.length;){var i=this._frameKeys[t],s=this._frames[i],a=s.frame;if(a){var o=null,u=null,l=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,h=new Pe(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);s.rotated?o=new Pe(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):o=new Pe(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(u=new Pe(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[i]=new pe(this.baseTexture,o,h,u,s.rotated?2:0,s.anchor),pe.addToCache(this.textures[i],i)}t++}},r.prototype._processAnimations=function(){var e=this.data.animations||{};for(var t in e){this.animations[t]=[];for(var n=0;n<e[t].length;n++){var i=e[t][n];this.animations[t].push(this.textures[i])}}},r.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},r.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*r.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*r.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},r.prototype.destroy=function(e){var t;e===void 0&&(e=!1);for(var n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)===null||t===void 0||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},r.BATCH_SIZE=1e3,r}(),VR=function(){function r(){}return r.use=function(e,t){var n,i,s=this,a=e.name+"_image";if(!e.data||e.type!==et.TYPE.JSON||!e.data.frames||s.resources[a]){t();return}var o=(i=(n=e.data)===null||n===void 0?void 0:n.meta)===null||i===void 0?void 0:i.related_multi_packs;if(Array.isArray(o))for(var u=function(v){if(typeof v!="string")return"continue";var g=v.replace(".json",""),m=Yi.resolve(e.url.replace(s.baseUrl,""),v);if(s.resources[g]||Object.values(s.resources).some(function(x){return Yi.format(Yi.parse(x.url))===m}))return"continue";var y={crossOrigin:e.crossOrigin,loadType:et.LOAD_TYPE.XHR,xhrType:et.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata};s.add(g,m,y)},l=0,h=o;l<h.length;l++){var c=h[l];u(c)}var f={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},p=r.getResourcePath(e,s.baseUrl);s.add(a,p,f,function(g){if(g.error){t(g.error);return}var m=new HR(g.texture,e.data,e.url);m.parse().then(function(){e.spritesheet=m,e.textures=m.textures,t()})})},r.getResourcePath=function(e,t){return e.isDataUrl?e.data.meta.image:Yi.resolve(e.url.replace(t,""),e.data.meta.image)},r.extension=Ne.Loader,r}();/*!
 * @pixi/sprite-tiling - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var xy=function(r,e){return xy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},xy(r,e)};function zR(r,e){xy(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var io=new He,PV=function(r){zR(e,r);function e(t,n,i){n===void 0&&(n=100),i===void 0&&(i=100);var s=r.call(this,t)||this;return s.tileTransform=new v0,s._width=n,s._height=i,s.uvMatrix=s.texture.uvMatrix||new ef(t),s.pluginName="tilingSprite",s.uvRespectAnchor=!1,s}return Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var n=this._texture;!n||!n.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,n=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),s=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,n,i,s)},e.prototype.getLocalBounds=function(t){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Pe),t=this._localBoundsRect),this._bounds.getRectangle(t)):r.prototype.getLocalBounds.call(this,t)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,io);var n=this._width,i=this._height,s=-n*this.anchor._x;if(io.x>=s&&io.x<s+n){var a=-i*this.anchor._y;if(io.y>=a&&io.y<a+i)return!0}return!1},e.prototype.destroy=function(t){r.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,n){var i=t instanceof pe?t:pe.from(t,n);return new e(i,n.width,n.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),e}(Ba),AV=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,R1=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,RV=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,OV=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,MV=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,Jl=new ct,XR=function(r){zR(e,r);function e(t){var n=r.call(this,t)||this;return t.runners.contextChange.add(n),n.quad=new C0,n.state=bi.for2d(),n}return e.prototype.contextChange=function(){var t=this.renderer,n={globals:t.globalUniforms};this.simpleShader=bn.from(R1,AV,n),this.shader=t.context.webGLVersion>1?bn.from(OV,MV,n):bn.from(R1,RV,n)},e.prototype.render=function(t){var n=this.renderer,i=this.quad,s=i.vertices;s[0]=s[6]=t._width*-t.anchor.x,s[1]=s[3]=t._height*-t.anchor.y,s[2]=s[4]=t._width*(1-t.anchor.x),s[5]=s[7]=t._height*(1-t.anchor.y);var a=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;s=i.uvs,s[0]=s[6]=-a,s[1]=s[3]=-o,s[2]=s[4]=1-a,s[5]=s[7]=1-o,i.invalidate();var u=t._texture,l=u.baseTexture,h=l.alphaMode>0,c=t.tileTransform.localTransform,f=t.uvMatrix,p=l.isPowerOfTwo&&u.frame.width===l.width&&u.frame.height===l.height;p&&(l._glTextures[n.CONTEXT_UID]?p=l.wrapMode!==Fr.CLAMP:l.wrapMode===Fr.CLAMP&&(l.wrapMode=Fr.REPEAT));var v=p?this.simpleShader:this.shader,g=u.width,m=u.height,y=t._width,x=t._height;Jl.set(c.a*g/y,c.b*g/x,c.c*m/y,c.d*m/x,c.tx/y,c.ty/x),Jl.invert(),p?Jl.prepend(f.mapCoord):(v.uniforms.uMapCoord=f.mapCoord.toArray(!0),v.uniforms.uClampFrame=f.uClampFrame,v.uniforms.uClampOffset=f.uClampOffset),v.uniforms.uTransform=Jl.toArray(!0),v.uniforms.uColor=p0(t.tint,t.worldAlpha,v.uniforms.uColor,h),v.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),v.uniforms.uSampler=u,n.shader.bind(v),n.geometry.bind(i),this.state.blendMode=d0(t.blendMode,h),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e.extension={name:"tilingSprite",type:Ne.RendererPlugin},e}(qu);/*!
 * @pixi/mesh - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ty=function(r,e){return Ty=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},Ty(r,e)};function K0(r,e){Ty(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var $R=function(){function r(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return r.prototype.update=function(e){if(!(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}},r}(),zd=new He,O1=new Lo,xa=function(r){K0(e,r);function e(t,n,i,s){s===void 0&&(s=pr.TRIANGLES);var a=r.call(this)||this;return a.geometry=t,a.shader=n,a.state=i||bi.for2d(),a.drawMode=s,a.start=0,a.size=0,a.uvs=null,a.indices=null,a.vertexData=new Float32Array(1),a.vertexDirty=-1,a._transformID=-1,a._roundPixels=te.ROUND_PIXELS,a.batchUvs=null,a}return Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){var n=this.geometry.buffers[0].data,i=this.shader;i.batchable&&this.drawMode===pr.TRIANGLES&&n.length<e.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var n=this.shader;n.alpha=this.worldAlpha,n.update&&n.update(),t.batch.flush(),n.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(n),t.state.set(this.state),t.geometry.bind(this.geometry,n),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var n=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=n.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;var s=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[s]),t.plugins[s].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry,n=t.buffers[0],i=n.data,s=n._updateID;if(!(s===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));for(var a=this.transform.worldTransform,o=a.a,u=a.b,l=a.c,h=a.d,c=a.tx,f=a.ty,p=this.vertexData,v=0;v<p.length/2;v++){var g=i[v*2],m=i[v*2+1];p[v*2]=o*g+l*m+c,p[v*2+1]=u*g+h*m+f}if(this._roundPixels)for(var y=te.RESOLUTION,v=0;v<p.length;++v)p[v]=Math.round((p[v]*y|0)/y);this.vertexDirty=s}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],n=this.shader;n.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new $R(t,n.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,zd);for(var n=this.geometry.getBuffer("aVertexPosition").data,i=O1.points,s=this.geometry.getIndex().data,a=s.length,o=this.drawMode===4?3:1,u=0;u+2<a;u+=o){var l=s[u]*2,h=s[u+1]*2,c=s[u+2]*2;if(i[0]=n[l],i[1]=n[l+1],i[2]=n[h],i[3]=n[h+1],i[4]=n[c],i[5]=n[c+1],O1.contains(zd.x,zd.y))return!0}return!1},e.prototype.destroy=function(t){r.prototype.destroy.call(this,t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(Gr),DV=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,LV=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,Ta=function(r){K0(e,r);function e(t,n){var i=this,s={uSampler:t,alpha:1,uTextureMatrix:ct.IDENTITY,uColor:new Float32Array([1,1,1,1])};return n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n),n.uniforms&&Object.assign(s,n.uniforms),i=r.call(this,n.program||Fa.from(LV,DV),s)||this,i._colorDirty=!1,i.uvMatrix=new ef(t),i.batchable=n.program===void 0,i.pluginName=n.pluginName,i.tint=n.tint,i.alpha=n.alpha,i}return Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;p0(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(bn),Ku=function(r){K0(e,r);function e(t,n,i){var s=r.call(this)||this,a=new ut(t),o=new ut(n,!0),u=new ut(i,!0,!0);return s.addAttribute("aVertexPosition",a,2,!1,ue.FLOAT).addAttribute("aTextureCoord",o,2,!1,ue.FLOAT).addIndex(u),s._updateId=-1,s}return Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(Na);/*!
 * @pixi/text-bitmap - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ey=function(r,e){return Ey=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},Ey(r,e)};function NV(r,e){Ey(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Su=function(){function r(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return r}(),WR=function(){function r(){}return r.test=function(e){return typeof e=="string"&&e.indexOf("info face=")===0},r.parse=function(e){var t=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var i in t){var s=t[i].match(/^[a-z]+/gm)[0],a=t[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),o={};for(var u in a){var l=a[u].split("="),h=l[0],c=l[1].replace(/"/gm,""),f=parseFloat(c),p=isNaN(f)?c:f;o[h]=p}n[s].push(o)}var v=new Su;return n.info.forEach(function(g){return v.info.push({face:g.face,size:parseInt(g.size,10)})}),n.common.forEach(function(g){return v.common.push({lineHeight:parseInt(g.lineHeight,10)})}),n.page.forEach(function(g){return v.page.push({id:parseInt(g.id,10),file:g.file})}),n.char.forEach(function(g){return v.char.push({id:parseInt(g.id,10),page:parseInt(g.page,10),x:parseInt(g.x,10),y:parseInt(g.y,10),width:parseInt(g.width,10),height:parseInt(g.height,10),xoffset:parseInt(g.xoffset,10),yoffset:parseInt(g.yoffset,10),xadvance:parseInt(g.xadvance,10)})}),n.kerning.forEach(function(g){return v.kerning.push({first:parseInt(g.first,10),second:parseInt(g.second,10),amount:parseInt(g.amount,10)})}),n.distanceField.forEach(function(g){return v.distanceField.push({distanceRange:parseInt(g.distanceRange,10),fieldType:g.fieldType})}),v},r}(),_c=function(){function r(){}return r.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},r.parse=function(e){for(var t=new Su,n=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),a=e.getElementsByTagName("char"),o=e.getElementsByTagName("kerning"),u=e.getElementsByTagName("distanceField"),l=0;l<n.length;l++)t.info.push({face:n[l].getAttribute("face"),size:parseInt(n[l].getAttribute("size"),10)});for(var l=0;l<i.length;l++)t.common.push({lineHeight:parseInt(i[l].getAttribute("lineHeight"),10)});for(var l=0;l<s.length;l++)t.page.push({id:parseInt(s[l].getAttribute("id"),10)||0,file:s[l].getAttribute("file")});for(var l=0;l<a.length;l++){var h=a[l];t.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(var l=0;l<o.length;l++)t.kerning.push({first:parseInt(o[l].getAttribute("first"),10),second:parseInt(o[l].getAttribute("second"),10),amount:parseInt(o[l].getAttribute("amount"),10)});for(var l=0;l<u.length;l++)t.distanceField.push({fieldType:u[l].getAttribute("fieldType"),distanceRange:parseInt(u[l].getAttribute("distanceRange"),10)});return t},r}(),YR=function(){function r(){}return r.test=function(e){if(typeof e=="string"&&e.indexOf("<font>")>-1){var t=new globalThis.DOMParser().parseFromString(e,"text/xml");return _c.test(t)}return!1},r.parse=function(e){var t=new globalThis.DOMParser().parseFromString(e,"text/xml");return _c.parse(t)},r}(),Xd=[WR,_c,YR];function J0(r){for(var e=0;e<Xd.length;e++)if(Xd[e].test(r))return Xd[e];return null}function FV(r,e,t,n,i,s){var a=t.fill;if(Array.isArray(a)){if(a.length===1)return a[0]}else return a;var o,u=t.dropShadow?t.dropShadowDistance:0,l=t.padding||0,h=r.width/n-u-l*2,c=r.height/n-u-l*2,f=a.slice(),p=t.fillGradientStops.slice();if(!p.length)for(var v=f.length+1,g=1;g<v;++g)p.push(g/v);if(f.unshift(a[0]),p.unshift(0),f.push(a[a.length-1]),p.push(1),t.fillGradientType===_a.LINEAR_VERTICAL){o=e.createLinearGradient(h/2,l,h/2,c+l);for(var m=0,y=s.fontProperties.fontSize+t.strokeThickness,x=y/c,g=0;g<i.length;g++)for(var T=s.lineHeight*g,E=0;E<f.length;E++){var b=0;typeof p[E]=="number"?b=p[E]:b=E/f.length;var w=T/c+b*x,C=Math.max(m,w);C=Math.min(C,1),o.addColorStop(C,f[E]),m=C}}else{o=e.createLinearGradient(l,c/2,h+l,c/2);for(var O=f.length+1,R=1,g=0;g<f.length;g++){var I=void 0;typeof p[g]=="number"?I=p[g]:I=R/O,o.addColorStop(I,f[g]),R++}}return o}function BV(r,e,t,n,i,s,a){var o=t.text,u=t.fontProperties;e.translate(n,i),e.scale(s,s);var l=a.strokeThickness/2,h=-(a.strokeThickness/2);if(e.font=a.toFontString(),e.lineWidth=a.strokeThickness,e.textBaseline=a.textBaseline,e.lineJoin=a.lineJoin,e.miterLimit=a.miterLimit,e.fillStyle=FV(r,e,a,s,[o],t),e.strokeStyle=a.stroke,a.dropShadow){var c=a.dropShadowColor,f=vs(typeof c=="number"?c:c0(c)),p=a.dropShadowBlur*s,v=a.dropShadowDistance*s;e.shadowColor="rgba("+f[0]*255+","+f[1]*255+","+f[2]*255+","+a.dropShadowAlpha+")",e.shadowBlur=p,e.shadowOffsetX=Math.cos(a.dropShadowAngle)*v,e.shadowOffsetY=Math.sin(a.dropShadowAngle)*v}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;a.stroke&&a.strokeThickness&&e.strokeText(o,l,h+t.lineHeight-u.descent),a.fill&&e.fillText(o,l,h+t.lineHeight-u.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function qR(r){return Array.from?Array.from(r):r.split("")}function UV(r){typeof r=="string"&&(r=[r]);for(var e=[],t=0,n=r.length;t<n;t++){var i=r[t];if(Array.isArray(i)){if(i.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var s=i[0].charCodeAt(0),a=i[1].charCodeAt(0);if(a<s)throw new Error("[BitmapFont]: Invalid character range.");for(var o=s,u=a;o<=u;o++)e.push(String.fromCharCode(o))}else e.push.apply(e,qR(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}function wh(r){return r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}var fn=function(){function r(e,t,n){var i,s,a=e.info[0],o=e.common[0],u=e.page[0],l=e.distanceField[0],h=mu(u.file),c={};this._ownsTextures=n,this.font=a.face,this.size=a.size,this.lineHeight=o.lineHeight/h,this.chars={},this.pageTextures=c;for(var f=0;f<e.page.length;f++){var p=e.page[f],v=p.id,g=p.file;c[v]=t instanceof Array?t[f]:t[g],l!=null&&l.fieldType&&l.fieldType!=="none"&&(c[v].baseTexture.alphaMode=Tr.NO_PREMULTIPLIED_ALPHA,c[v].baseTexture.mipmap=xr.OFF)}for(var f=0;f<e.char.length;f++){var m=e.char[f],v=m.id,y=m.page,x=e.char[f],T=x.x,E=x.y,b=x.width,w=x.height,C=x.xoffset,O=x.yoffset,R=x.xadvance;T/=h,E/=h,b/=h,w/=h,C/=h,O/=h,R/=h;var I=new Pe(T+c[y].frame.x/h,E+c[y].frame.y/h,b,w);this.chars[v]={xOffset:C,yOffset:O,xAdvance:R,kerning:{},texture:new pe(c[y].baseTexture,I),page:y}}for(var f=0;f<e.kerning.length;f++){var D=e.kerning[f],F=D.first,j=D.second,z=D.amount;F/=h,j/=h,z/=h,this.chars[j]&&(this.chars[j].kerning[F]=z)}this.distanceFieldRange=l==null?void 0:l.distanceRange,this.distanceFieldType=(s=(i=l==null?void 0:l.fieldType)===null||i===void 0?void 0:i.toLowerCase())!==null&&s!==void 0?s:"none"}return r.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},r.install=function(e,t,n){var i;if(e instanceof Su)i=e;else{var s=J0(e);if(!s)throw new Error("Unrecognized data format for font.");i=s.parse(e)}t instanceof pe&&(t=[t]);var a=new r(i,t,n);return r.available[a.font]=a,a},r.uninstall=function(e){var t=r.available[e];if(!t)throw new Error("No font found named '"+e+"'");t.destroy(),delete r.available[e]},r.from=function(e,t,n){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},r.defaultOptions,n),s=i.chars,a=i.padding,o=i.resolution,u=i.textureWidth,l=i.textureHeight,h=UV(s),c=t instanceof gs?t:new gs(t),f=u,p=new Su;p.info[0]={face:c.fontFamily,size:c.fontSize},p.common[0]={lineHeight:c.fontSize};for(var v=0,g=0,m,y,x,T=0,E=[],b=0;b<h.length;b++){m||(m=te.ADAPTER.createCanvas(),m.width=u,m.height=l,y=m.getContext("2d"),x=new Ie(m,{resolution:o}),E.push(new pe(x)),p.page.push({id:E.length-1,file:""}));var w=h[b],C=Hr.measureText(w,c,!1,m),O=C.width,R=Math.ceil(C.height),I=Math.ceil((c.fontStyle==="italic"?2:1)*O);if(g>=l-R*o){if(g===0)throw new Error("[BitmapFont] textureHeight "+l+"px is too small "+("(fontFamily: '"+c.fontFamily+"', fontSize: "+c.fontSize+"px, char: '"+w+"')"));--b,m=null,y=null,x=null,g=0,v=0,T=0;continue}if(T=Math.max(R+C.fontProperties.descent,T),I*o+v>=f){if(v===0)throw new Error("[BitmapFont] textureWidth "+u+"px is too small "+("(fontFamily: '"+c.fontFamily+"', fontSize: "+c.fontSize+"px, char: '"+w+"')"));--b,g+=T*o,g=Math.ceil(g),v=0,T=0;continue}BV(m,y,C,v,g,o,c);var D=wh(C.text);p.char.push({id:D,page:E.length-1,x:v/o,y:g/o,width:I,height:R,xoffset:0,yoffset:0,xadvance:Math.ceil(O-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0))}),v+=(I+2*a)*o,v=Math.ceil(v)}if(!(n!=null&&n.skipKerning))for(var b=0,F=h.length;b<F;b++)for(var j=h[b],z=0;z<F;z++){var $=h[z],H=y.measureText(j).width,Y=y.measureText($).width,L=y.measureText(j+$).width,B=L-(H+Y);B&&p.kerning.push({first:wh(j),second:wh($),amount:B})}var N=new r(p,E,!0);return r.available[e]!==void 0&&r.uninstall(e),r.available[e]=N,N},r.ALPHA=[["a","z"],["A","Z"]," "],r.NUMERIC=[["0","9"]],r.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],r.ASCII=[[" ","~"]],r.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:r.ALPHANUMERIC},r.available={},r}(),kV=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,GV=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,M1=[],D1=[],L1=[],jV=function(r){NV(e,r);function e(t,n){n===void 0&&(n={});var i=r.call(this)||this;i._tint=16777215;var s=Object.assign({},e.styleDefaults,n),a=s.align,o=s.tint,u=s.maxWidth,l=s.letterSpacing,h=s.fontName,c=s.fontSize;if(!fn.available[h])throw new Error('Missing BitmapFont "'+h+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=a,i._tint=o,i._font=void 0,i._fontName=h,i._fontSize=c,i.text=t,i._maxWidth=u,i._maxLineHeight=0,i._letterSpacing=l,i._anchor=new Ki(function(){i.dirty=!0},i,0,0),i._roundPixels=te.ROUND_PIXELS,i.dirty=!0,i._resolution=te.RESOLUTION,i._autoResolution=!0,i._textureCache={},i}return e.prototype.updateText=function(){for(var t,n=fn.available[this._fontName],i=this.fontSize,s=i/n.size,a=new He,o=[],u=[],l=[],h=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",c=qR(h),f=this._maxWidth*n.size/i,p=n.distanceFieldType==="none"?M1:D1,v=null,g=0,m=0,y=0,x=-1,T=0,E=0,b=0,w=0,C=0;C<c.length;C++){var O=c[C],R=wh(O);if(/(?:\s)/.test(O)&&(x=C,T=g,w++),O==="\r"||O===`
`){u.push(g),l.push(-1),m=Math.max(m,g),++y,++E,a.x=0,a.y+=n.lineHeight,v=null,w=0;continue}var I=n.chars[R];if(I){v&&I.kerning[v]&&(a.x+=I.kerning[v]);var D=L1.pop()||{texture:pe.EMPTY,line:0,charCode:0,prevSpaces:0,position:new He};D.texture=I.texture,D.line=y,D.charCode=R,D.position.x=a.x+I.xOffset+this._letterSpacing/2,D.position.y=a.y+I.yOffset,D.prevSpaces=w,o.push(D),g=D.position.x+Math.max(I.xAdvance-I.xOffset,I.texture.orig.width),a.x+=I.xAdvance+this._letterSpacing,b=Math.max(b,I.yOffset+I.texture.height),v=R,x!==-1&&f>0&&a.x>f&&(++E,rs(o,1+x-E,1+C-x),C=x,x=-1,u.push(T),l.push(o.length>0?o[o.length-1].prevSpaces:0),m=Math.max(m,T),y++,a.x=0,a.y+=n.lineHeight,v=null,w=0)}}var F=c[c.length-1];F!=="\r"&&F!==`
`&&(/(?:\s)/.test(F)&&(g=T),u.push(g),m=Math.max(m,g),l.push(-1));for(var j=[],C=0;C<=y;C++){var z=0;this._align==="right"?z=m-u[C]:this._align==="center"?z=(m-u[C])/2:this._align==="justify"&&(z=l[C]<0?0:(m-u[C])/l[C]),j.push(z)}var $=o.length,H={},Y=[],L=this._activePagesMeshData;p.push.apply(p,L);for(var C=0;C<$;C++){var B=o[C].texture,N=B.baseTexture.uid;if(!H[N]){var U=p.pop();if(!U){var q=new Ku,Q=void 0,ne=void 0;n.distanceFieldType==="none"?(Q=new Ta(pe.EMPTY),ne=he.NORMAL):(Q=new Ta(pe.EMPTY,{program:Fa.from(GV,kV),uniforms:{uFWidth:0}}),ne=he.NORMAL_NPM);var de=new xa(q,Q);de.blendMode=ne,U={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:de,vertices:null,uvs:null,indices:null}}U.index=0,U.indexCount=0,U.vertexCount=0,U.uvsCount=0,U.total=0;var ge=this._textureCache;ge[N]=ge[N]||new pe(B.baseTexture),U.mesh.texture=ge[N],U.mesh.tint=this._tint,Y.push(U),H[N]=U}H[N].total++}for(var C=0;C<L.length;C++)Y.indexOf(L[C])===-1&&this.removeChild(L[C].mesh);for(var C=0;C<Y.length;C++)Y[C].mesh.parent!==this&&this.addChild(Y[C].mesh);this._activePagesMeshData=Y;for(var C in H){var U=H[C],oe=U.total;if(!(((t=U.indices)===null||t===void 0?void 0:t.length)>6*oe)||U.vertices.length<xa.BATCHABLE_SIZE*2)U.vertices=new Float32Array(4*2*oe),U.uvs=new Float32Array(4*2*oe),U.indices=new Uint16Array(6*oe);else for(var Ee=U.total,ke=U.vertices,Je=Ee*4*2;Je<ke.length;Je++)ke[Je]=0;U.mesh.size=6*oe}for(var C=0;C<$;C++){var O=o[C],Me=O.position.x+j[O.line]*(this._align==="justify"?O.prevSpaces:1);this._roundPixels&&(Me=Math.round(Me));var Be=Me*s,Ge=O.position.y*s,B=O.texture,be=H[B.baseTexture.uid],Et=B.frame,Ct=B._uvs,Re=be.index++;be.indices[Re*6+0]=0+Re*4,be.indices[Re*6+1]=1+Re*4,be.indices[Re*6+2]=2+Re*4,be.indices[Re*6+3]=0+Re*4,be.indices[Re*6+4]=2+Re*4,be.indices[Re*6+5]=3+Re*4,be.vertices[Re*8+0]=Be,be.vertices[Re*8+1]=Ge,be.vertices[Re*8+2]=Be+Et.width*s,be.vertices[Re*8+3]=Ge,be.vertices[Re*8+4]=Be+Et.width*s,be.vertices[Re*8+5]=Ge+Et.height*s,be.vertices[Re*8+6]=Be,be.vertices[Re*8+7]=Ge+Et.height*s,be.uvs[Re*8+0]=Ct.x0,be.uvs[Re*8+1]=Ct.y0,be.uvs[Re*8+2]=Ct.x1,be.uvs[Re*8+3]=Ct.y1,be.uvs[Re*8+4]=Ct.x2,be.uvs[Re*8+5]=Ct.y2,be.uvs[Re*8+6]=Ct.x3,be.uvs[Re*8+7]=Ct.y3}this._textWidth=m*s,this._textHeight=(a.y+n.lineHeight)*s;for(var C in H){var U=H[C];if(this.anchor.x!==0||this.anchor.y!==0)for(var sr=0,Ln=this._textWidth*this.anchor.x,br=this._textHeight*this.anchor.y,Qu=0;Qu<U.total;Qu++)U.vertices[sr++]-=Ln,U.vertices[sr++]-=br,U.vertices[sr++]-=Ln,U.vertices[sr++]-=br,U.vertices[sr++]-=Ln,U.vertices[sr++]-=br,U.vertices[sr++]-=Ln,U.vertices[sr++]-=br;this._maxLineHeight=b*s;var el=U.mesh.geometry.getBuffer("aVertexPosition"),tl=U.mesh.geometry.getBuffer("aTextureCoord"),rl=U.mesh.geometry.getIndex();el.data=U.vertices,tl.data=U.uvs,rl.data=U.indices,el.update(),tl.update(),rl.update()}for(var C=0;C<o.length;C++)L1.push(o[C]);this._font=n,this.dirty=!1},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);var n=fn.available[this._fontName],i=n.distanceFieldRange,s=n.distanceFieldType,a=n.size;if(s!=="none")for(var o=this.worldTransform,u=o.a,l=o.b,h=o.c,c=o.d,f=Math.sqrt(u*u+l*l),p=Math.sqrt(h*h+c*c),v=(Math.abs(f)+Math.abs(p))/2,g=this.fontSize/a,m=0,y=this._activePagesMeshData;m<y.length;m++){var x=y[m];x.mesh.shader.uniforms.uFWidth=v*i*g*this._resolution}r.prototype._render.call(this,t)},e.prototype.getLocalBounds=function(){return this.validate(),r.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){var t=fn.available[this._fontName];if(!t)throw new Error('Missing BitmapFont "'+this._fontName+'"');this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var n=0;n<this._activePagesMeshData.length;n++)this._activePagesMeshData[n].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!fn.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){var t;return(t=this._fontSize)!==null&&t!==void 0?t:fn.available[this._fontName].size},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t){var n=this._textureCache,i=fn.available[this._fontName],s=i.distanceFieldType==="none"?M1:D1;s.push.apply(s,this._activePagesMeshData);for(var a=0,o=this._activePagesMeshData;a<o.length;a++){var u=o[a];this.removeChild(u.mesh)}this._activePagesMeshData=[],s.filter(function(c){return n[c.mesh.texture.baseTexture.uid]}).forEach(function(c){c.mesh.texture=pe.EMPTY});for(var l in n){var h=n[l];h.destroy(),delete n[l]}this._font=null,this._textureCache=null,r.prototype.destroy.call(this,t)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e}(Gr),KR=function(){function r(){}return r.add=function(){et.setExtensionXhrType("fnt",et.XHR_RESPONSE_TYPE.TEXT)},r.use=function(e,t){var n=J0(e.data);if(!n){t();return}for(var i=r.getBaseUrl(this,e),s=n.parse(e.data),a={},o=function(g){a[g.metadata.pageFile]=g.texture,Object.keys(a).length===s.page.length&&(e.bitmapFont=fn.install(s,a,!0),t())},u=0;u<s.page.length;++u){var l=s.page[u].file,h=i+l,c=!1;for(var f in this.resources){var p=this.resources[f];if(p.url===h){p.metadata.pageFile=l,p.texture?o(p):p.onAfterMiddleware.add(o),c=!0;break}}if(!c){var v={crossOrigin:e.crossOrigin,loadType:et.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},e.metadata.imageMetadata),parentResource:e};this.add(h,v,o)}}},r.getBaseUrl=function(e,t){var n=t.isDataUrl?"":r.dirname(t.url);return t.isDataUrl&&(n==="."&&(n=""),e.baseUrl&&n&&e.baseUrl.charAt(e.baseUrl.length-1)==="/"&&(n+="/")),n=n.replace(e.baseUrl,""),n&&n.charAt(n.length-1)!=="/"&&(n+="/"),n},r.dirname=function(e){var t=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return t===e?".":t===""?"/":t},r.extension=Ne.Loader,r}();/*!
 * @pixi/filter-alpha - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var by=function(r,e){return by=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},by(r,e)};function HV(r,e){by(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var VV=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,zV=function(r){HV(e,r);function e(t){t===void 0&&(t=1);var n=r.call(this,sR,VV,{uAlpha:1})||this;return n.alpha=t,n}return Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(Mn);/*!
 * @pixi/filter-blur - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Sy=function(r,e){return Sy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},Sy(r,e)};function JR(r,e){Sy(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var XV=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function $V(r,e){var t=Math.ceil(r/2),n=XV,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<r;a++){var o=s.replace("%index%",a.toString());o=o.replace("%sampleIndex%",a-(t-1)+".0"),i+=o,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",r.toString()),n}var WV={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},YV=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function qV(r){for(var e=WV[r],t=e.length,n=YV,i="",s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",a,o=0;o<r;o++){var u=s.replace("%index%",o.toString());a=o,o>=t&&(a=r-o-1),u=u.replace("%value%",e[a].toString()),i+=u,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",r.toString()),n}var wy=function(r){JR(e,r);function e(t,n,i,s,a){n===void 0&&(n=8),i===void 0&&(i=4),s===void 0&&(s=te.FILTER_RESOLUTION),a===void 0&&(a=5);var o=this,u=$V(a,t),l=qV(a);return o=r.call(this,u,l)||this,o.horizontal=t,o.resolution=s,o._quality=0,o.quality=i,o.blur=n,o}return e.prototype.apply=function(t,n,i,s){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/n.width):this.uniforms.strength=1/i.height*(i.height/n.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/n.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/n.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,n,i,s);else{var a=t.getFilterTexture(),o=t.renderer,u=n,l=a;this.state.blend=!1,t.applyFilter(this,u,l,fr.CLEAR);for(var h=1;h<this.passes-1;h++){t.bindAndClear(u,fr.BLIT),this.uniforms.uSampler=l;var c=l;l=u,u=c,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,l,i,s),t.returnFilterTexture(a)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+Math.abs(t)*2,this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(Mn),KV=function(r){JR(e,r);function e(t,n,i,s){t===void 0&&(t=8),n===void 0&&(n=4),i===void 0&&(i=te.FILTER_RESOLUTION),s===void 0&&(s=5);var a=r.call(this)||this;return a.blurXFilter=new wy(!0,t,n,i,s),a.blurYFilter=new wy(!1,t,n,i,s),a.resolution=i,a.quality=n,a.blur=t,a.repeatEdgePixels=!1,a}return e.prototype.apply=function(t,n,i,s){var a=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(a&&o){var u=t.getFilterTexture();this.blurXFilter.apply(t,n,u,fr.CLEAR),this.blurYFilter.apply(t,u,i,s),t.returnFilterTexture(u)}else o?this.blurYFilter.apply(t,n,i,s):this.blurXFilter.apply(t,n,i,s)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),e}(Mn);/*!
 * @pixi/filter-color-matrix - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Cy=function(r,e){return Cy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},Cy(r,e)};function JV(r,e){Cy(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ZV=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,Iy=function(r){JV(e,r);function e(){var t=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return t=r.call(this,j0,ZV,n)||this,t.alpha=1,t}return e.prototype._loadMatrix=function(t,n){n===void 0&&(n=!1);var i=t;n&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,n,i){return t[0]=n[0]*i[0]+n[1]*i[5]+n[2]*i[10]+n[3]*i[15],t[1]=n[0]*i[1]+n[1]*i[6]+n[2]*i[11]+n[3]*i[16],t[2]=n[0]*i[2]+n[1]*i[7]+n[2]*i[12]+n[3]*i[17],t[3]=n[0]*i[3]+n[1]*i[8]+n[2]*i[13]+n[3]*i[18],t[4]=n[0]*i[4]+n[1]*i[9]+n[2]*i[14]+n[3]*i[19]+n[4],t[5]=n[5]*i[0]+n[6]*i[5]+n[7]*i[10]+n[8]*i[15],t[6]=n[5]*i[1]+n[6]*i[6]+n[7]*i[11]+n[8]*i[16],t[7]=n[5]*i[2]+n[6]*i[7]+n[7]*i[12]+n[8]*i[17],t[8]=n[5]*i[3]+n[6]*i[8]+n[7]*i[13]+n[8]*i[18],t[9]=n[5]*i[4]+n[6]*i[9]+n[7]*i[14]+n[8]*i[19]+n[9],t[10]=n[10]*i[0]+n[11]*i[5]+n[12]*i[10]+n[13]*i[15],t[11]=n[10]*i[1]+n[11]*i[6]+n[12]*i[11]+n[13]*i[16],t[12]=n[10]*i[2]+n[11]*i[7]+n[12]*i[12]+n[13]*i[17],t[13]=n[10]*i[3]+n[11]*i[8]+n[12]*i[13]+n[13]*i[18],t[14]=n[10]*i[4]+n[11]*i[9]+n[12]*i[14]+n[13]*i[19]+n[14],t[15]=n[15]*i[0]+n[16]*i[5]+n[17]*i[10]+n[18]*i[15],t[16]=n[15]*i[1]+n[16]*i[6]+n[17]*i[11]+n[18]*i[16],t[17]=n[15]*i[2]+n[16]*i[7]+n[17]*i[12]+n[18]*i[17],t[18]=n[15]*i[3]+n[16]*i[8]+n[17]*i[13]+n[18]*i[18],t[19]=n[15]*i[4]+n[16]*i[9]+n[17]*i[14]+n[18]*i[19]+n[19],t},e.prototype._colorMatrix=function(t){var n=new Float32Array(t);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n},e.prototype.brightness=function(t,n){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,n)},e.prototype.tint=function(t,n){var i=t>>16&255,s=t>>8&255,a=t&255,o=[i/255,0,0,0,0,0,s/255,0,0,0,0,0,a/255,0,0,0,0,0,1,0];this._loadMatrix(o,n)},e.prototype.greyscale=function(t,n){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,n)},e.prototype.blackAndWhite=function(t){var n=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(n,t)},e.prototype.hue=function(t,n){t=(t||0)/180*Math.PI;var i=Math.cos(t),s=Math.sin(t),a=Math.sqrt,o=1/3,u=a(o),l=i+(1-i)*o,h=o*(1-i)-u*s,c=o*(1-i)+u*s,f=o*(1-i)+u*s,p=i+o*(1-i),v=o*(1-i)-u*s,g=o*(1-i)-u*s,m=o*(1-i)+u*s,y=i+o*(1-i),x=[l,h,c,0,0,f,p,v,0,0,g,m,y,0,0,0,0,0,1,0];this._loadMatrix(x,n)},e.prototype.contrast=function(t,n){var i=(t||0)+1,s=-.5*(i-1),a=[i,0,0,0,s,0,i,0,0,s,0,0,i,0,s,0,0,0,1,0];this._loadMatrix(a,n)},e.prototype.saturate=function(t,n){t===void 0&&(t=0);var i=t*2/3+1,s=(i-1)*-.5,a=[i,s,s,0,0,s,i,s,0,0,s,s,i,0,0,0,0,0,1,0];this._loadMatrix(a,n)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){var n=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(n,t)},e.prototype.sepia=function(t){var n=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(n,t)},e.prototype.technicolor=function(t){var n=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(n,t)},e.prototype.polaroid=function(t){var n=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(n,t)},e.prototype.toBGR=function(t){var n=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(n,t)},e.prototype.kodachrome=function(t){var n=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(n,t)},e.prototype.browni=function(t){var n=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(n,t)},e.prototype.vintage=function(t){var n=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(n,t)},e.prototype.colorTone=function(t,n,i,s,a){t=t||.2,n=n||.15,i=i||16770432,s=s||3375104;var o=(i>>16&255)/255,u=(i>>8&255)/255,l=(i&255)/255,h=(s>>16&255)/255,c=(s>>8&255)/255,f=(s&255)/255,p=[.3,.59,.11,0,0,o,u,l,t,0,h,c,f,n,0,o-h,u-c,l-f,0,0];this._loadMatrix(p,a)},e.prototype.night=function(t,n){t=t||.1;var i=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(i,n)},e.prototype.predator=function(t,n){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,n)},e.prototype.lsd=function(t){var n=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(n,t)},e.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(Mn);Iy.prototype.grayscale=Iy.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Py=function(r,e){return Py=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},Py(r,e)};function QV(r,e){Py(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ez=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,tz=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,rz=function(r){QV(e,r);function e(t,n){var i=this,s=new ct;return t.renderable=!1,i=r.call(this,tz,ez,{mapSampler:t._texture,filterMatrix:s,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,i.maskSprite=t,i.maskMatrix=s,n==null&&(n=20),i.scale=new He(n,n),i}return e.prototype.apply=function(t,n,i,s){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var a=this.maskSprite.worldTransform,o=Math.sqrt(a.a*a.a+a.b*a.b),u=Math.sqrt(a.c*a.c+a.d*a.d);o!==0&&u!==0&&(this.uniforms.rotation[0]=a.a/o,this.uniforms.rotation[1]=a.b/o,this.uniforms.rotation[2]=a.c/u,this.uniforms.rotation[3]=a.d/u),t.applyFilter(this,n,i,s)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),e}(Mn);/*!
 * @pixi/filter-fxaa - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ay=function(r,e){return Ay=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},Ay(r,e)};function nz(r,e){Ay(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var iz=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,sz=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,az=function(r){nz(e,r);function e(){return r.call(this,iz,sz)||this}return e}(Mn);/*!
 * @pixi/filter-noise - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ry=function(r,e){return Ry=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},Ry(r,e)};function oz(r,e){Ry(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var uz=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,lz=function(r){oz(e,r);function e(t,n){t===void 0&&(t=.5),n===void 0&&(n=Math.random());var i=r.call(this,j0,uz,{uNoise:0,uSeed:0})||this;return i.noise=t,i.seed=n,i}return Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),e}(Mn);/*!
 * @pixi/mixin-cache-as-bitmap - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ZR=new ct;st.prototype._cacheAsBitmap=!1;st.prototype._cacheData=null;st.prototype._cacheAsBitmapResolution=null;st.prototype._cacheAsBitmapMultisample=$e.NONE;var hz=function(){function r(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return r}();Object.defineProperties(st.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(r){r!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(r){r!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(r){if(this._cacheAsBitmap!==r){this._cacheAsBitmap=r;var e;r?(this._cacheData||(this._cacheData=new hz),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}});st.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))};st.prototype._initCachedDisplayObject=function(e){var t;if(!(this._cacheData&&this._cacheData.sprite)){var n=this.alpha;this.alpha=1,e.batch.flush();var i=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var s=this.filters[0].padding;i.pad(s)}i.ceil(te.RESOLUTION);var a=e.renderTexture.current,o=e.renderTexture.sourceFrame.clone(),u=e.renderTexture.destinationFrame.clone(),l=e.projection.transform,h=vi.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:(t=this.cacheAsBitmapMultisample)!==null&&t!==void 0?t:e.multisample}),c="cacheAsBitmap_"+pi();this._cacheData.textureCacheId=c,Ie.addToCache(h.baseTexture,c),pe.addToCache(h,c);var f=this.transform.localTransform.copyTo(ZR).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:h,clear:!0,transform:f,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=l,e.renderTexture.bind(a,o,u),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var p=new Ba(h);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-(i.x/i.width),p.anchor.y=-(i.y/i.height),p.alpha=n,p._bounds=this._bounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=p.containsPoint.bind(p)}};st.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))};st.prototype._initCachedDisplayObjectCanvas=function(e){if(!(this._cacheData&&this._cacheData.sprite)){var t=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var i=e.context,s=e._projTransform;t.ceil(te.RESOLUTION);var a=vi.create({width:t.width,height:t.height}),o="cacheAsBitmap_"+pi();this._cacheData.textureCacheId=o,Ie.addToCache(a.baseTexture,o),pe.addToCache(a,o);var u=ZR;this.transform.localTransform.copyTo(u),u.invert(),u.tx-=t.x,u.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:a,clear:!0,transform:u,skipUpdateTransform:!1}),e.context=i,e._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var l=new Ba(a);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-(t.x/t.width),l.anchor.y=-(t.y/t.height),l.alpha=n,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)}};st.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};st.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};st.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Ie.removeFromCache(this._cacheData.textureCacheId),pe.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};st.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)};/*!
 * @pixi/mixin-get-child-by-name - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */st.prototype.name=null;Gr.prototype.getChildByName=function(e,t){for(var n=0,i=this.children.length;n<i;n++)if(this.children[n].name===e)return this.children[n];if(t)for(var n=0,i=this.children.length;n<i;n++){var s=this.children[n];if(s.getChildByName){var a=s.getChildByName(e,!0);if(a)return a}}return null};/*!
 * @pixi/mixin-get-global-position - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */st.prototype.getGlobalPosition=function(e,t){return e===void 0&&(e=new He),t===void 0&&(t=!1),this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};/*!
 * @pixi/app - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var QR=function(){function r(){}return r.init=function(e){var t=this;Object.defineProperty(this,"resizeTo",{set:function(n){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=n,n&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){t._resizeTo&&(t.cancelResize(),t._resizeId=requestAnimationFrame(function(){return t.resize()}))},this.cancelResize=function(){t._resizeId&&(cancelAnimationFrame(t._resizeId),t._resizeId=null)},this.resize=function(){if(t._resizeTo){t.cancelResize();var n,i;if(t._resizeTo===globalThis.window)n=globalThis.innerWidth,i=globalThis.innerHeight;else{var s=t._resizeTo,a=s.clientWidth,o=s.clientHeight;n=a,i=o}t.renderer.resize(n,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},r.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},r.extension=Ne.Application,r}(),Z0=function(){function r(e){var t=this;this.stage=new Gr,e=Object.assign({forceCanvas:!1},e),this.renderer=iR(e),r._plugins.forEach(function(n){n.init.call(t,e)})}return r.registerPlugin=function(e){kt("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),on.add({type:Ne.Application,ref:e})},r.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(r.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),r.prototype.destroy=function(e,t){var n=this,i=r._plugins.slice(0);i.reverse(),i.forEach(function(s){s.destroy.call(n)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null},r._plugins=[],r}();on.handleByList(Ne.Application,Z0._plugins);on.add(QR);/*!
 * @pixi/mesh-extras - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Oy=function(r,e){return Oy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},Oy(r,e)};function Ua(r,e){Oy(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var eO=function(r){Ua(e,r);function e(t,n,i,s){t===void 0&&(t=100),n===void 0&&(n=100),i===void 0&&(i=10),s===void 0&&(s=10);var a=r.call(this)||this;return a.segWidth=i,a.segHeight=s,a.width=t,a.height=n,a.build(),a}return e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,n=[],i=[],s=[],a=this.segWidth-1,o=this.segHeight-1,u=this.width/a,l=this.height/o,h=0;h<t;h++){var c=h%this.segWidth,f=h/this.segWidth|0;n.push(c*u,f*l),i.push(c/a,f/o)}for(var p=a*o,h=0;h<p;h++){var v=h%a,g=h/a|0,m=g*this.segWidth+v,y=g*this.segWidth+v+1,x=(g+1)*this.segWidth+v,T=(g+1)*this.segWidth+v+1;s.push(m,y,x,y,T,x)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(Ku),tO=function(r){Ua(e,r);function e(t,n,i){t===void 0&&(t=200),i===void 0&&(i=0);var s=r.call(this,new Float32Array(n.length*4),new Float32Array(n.length*4),new Uint16Array((n.length-1)*6))||this;return s.points=n,s._width=t,s.textureScale=i,s.build(),s}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var n=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),s=this.getIndex();if(!(t.length<1)){n.data.length/4!==t.length&&(n.data=new Float32Array(t.length*4),i.data=new Float32Array(t.length*4),s.data=new Uint16Array((t.length-1)*6));var a=i.data,o=s.data;a[0]=0,a[1]=0,a[2]=0,a[3]=1;for(var u=0,l=t[0],h=this._width*this.textureScale,c=t.length,f=0;f<c;f++){var p=f*4;if(this.textureScale>0){var v=l.x-t[f].x,g=l.y-t[f].y,m=Math.sqrt(v*v+g*g);l=t[f],u+=m/h}else u=f/(c-1);a[p]=u,a[p+1]=0,a[p+2]=u,a[p+3]=1}for(var y=0,f=0;f<c-1;f++){var p=f*2;o[y++]=p,o[y++]=p+1,o[y++]=p+2,o[y++]=p+2,o[y++]=p+1,o[y++]=p+3}i.update(),s.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var n=t[0],i,s=0,a=0,o=this.buffers[0].data,u=t.length,l=0;l<u;l++){var h=t[l],c=l*4;l<t.length-1?i=t[l+1]:i=h,a=-(i.x-n.x),s=i.y-n.y;var f=Math.sqrt(s*s+a*a),p=this.textureScale>0?this.textureScale*this._width/2:this._width/2;s/=f,a/=f,s*=p,a*=p,o[c]=h.x+s,o[c+1]=h.y+a,o[c+2]=h.x-s,o[c+3]=h.y-a,n=h}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(Ku),cz=function(r){Ua(e,r);function e(t,n,i){i===void 0&&(i=0);var s=this,a=new tO(t.height,n,i),o=new Ta(t);return i>0&&(t.baseTexture.wrapMode=Fr.REPEAT),s=r.call(this,a,o)||this,s.autoUpdate=!0,s}return e.prototype._render=function(t){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),r.prototype._render.call(this,t)},e}(xa),rO=function(r){Ua(e,r);function e(t,n,i){var s=this,a=new eO(t.width,t.height,n,i),o=new Ta(pe.WHITE);return s=r.call(this,a,o)||this,s.texture=t,s.autoResize=!0,s}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,n=this.shader.texture,i=n.width,s=n.height;this.autoResize&&(t.width!==i||t.height!==s)&&(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),r.prototype._render.call(this,t)},e.prototype.destroy=function(t){this.shader.texture.off("update",this.textureUpdated,this),r.prototype.destroy.call(this,t)},e}(xa),fz=function(r){Ua(e,r);function e(t,n,i,s,a){t===void 0&&(t=pe.EMPTY);var o=this,u=new Ku(n,i,s);u.getBuffer("aVertexPosition").static=!1;var l=new Ta(t);return o=r.call(this,u,l,null,a)||this,o.autoUpdate=!0,o}return Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),r.prototype._render.call(this,t)},e}(xa),Zl=10,dz=function(r){Ua(e,r);function e(t,n,i,s,a){n===void 0&&(n=Zl),i===void 0&&(i=Zl),s===void 0&&(s=Zl),a===void 0&&(a=Zl);var o=r.call(this,pe.WHITE,4,4)||this;return o._origWidth=t.orig.width,o._origHeight=t.orig.height,o._width=o._origWidth,o._height=o._origHeight,o._leftWidth=n,o._rightWidth=s,o._topHeight=i,o._bottomHeight=a,o.texture=t,o}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,n=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*n,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*n,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,n=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*n,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*n,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,n=this._width>t?1:this._width/t,i=this._topHeight+this._bottomHeight,s=this._height>i?1:this._height/i,a=Math.min(n,s);return a},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,n=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var i=1/this._origWidth,s=1/this._origHeight;n[0]=n[8]=n[16]=n[24]=0,n[1]=n[3]=n[5]=n[7]=0,n[6]=n[14]=n[22]=n[30]=1,n[25]=n[27]=n[29]=n[31]=1,n[2]=n[10]=n[18]=n[26]=i*this._leftWidth,n[4]=n[12]=n[20]=n[28]=1-i*this._rightWidth,n[9]=n[11]=n[13]=n[15]=s*this._topHeight,n[17]=n[19]=n[21]=n[23]=1-s*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e}(rO);/*!
 * @pixi/sprite-animated - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var My=function(r,e){return My=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},My(r,e)};function pz(r,e){My(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var vz=function(r){pz(e,r);function e(t,n){n===void 0&&(n=!0);var i=r.call(this,t[0]instanceof pe?t[0]:t[0].texture)||this;return i._textures=null,i._durations=null,i._autoUpdate=n,i._isConnectedToTicker=!1,i.animationSpeed=1,i.loop=!0,i.updateAnchor=!1,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i._playing=!1,i._previousFrame=null,i.textures=t,i}return e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(pt.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(pt.shared.add(this.update,this,nn.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var n=this.currentFrame;this._currentTime=t,n!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var n=this.currentFrame;this._currentTime=t,n!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var n=this.animationSpeed*t,i=this.currentFrame;if(this._durations!==null){var s=this._currentTime%1*this._durations[this.currentFrame];for(s+=n/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];var a=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(t){this.stop(),r.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var n=[],i=0;i<t.length;++i)n.push(pe.from(t[i]));return new e(n)},e.fromImages=function(t){for(var n=[],i=0;i<t.length;++i)n.push(pe.from(t[i]));return new e(n)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof pe)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var n=0;n<t.length;n++)this._textures.push(t[n].texture),this._durations.push(t[n].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(pt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(pt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e}(Ba);/*!
 * pixi.js - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */on.add(fR,vR,X0,RR,jR,V0,XR,KR,TR,IR,PR,VR,NA,gR);var mz={AlphaFilter:zV,BlurFilter:KV,BlurFilterPass:wy,ColorMatrixFilter:Iy,DisplacementFilter:rz,FXAAFilter:az,NoiseFilter:lz};const gz=Object.freeze(Object.defineProperty({__proto__:null,get ALPHA_MODES(){return Tr},AbstractBatchRenderer:aR,AbstractMultiResource:Zc,AbstractRenderer:nR,AccessibilityManager:fR,AnimatedSprite:vz,AppLoaderPlugin:gR,Application:Z0,ArrayResource:y0,Attribute:iy,get BLEND_MODES(){return he},get BUFFER_BITS(){return lu},get BUFFER_TYPE(){return Br},BaseImageResource:sn,BasePrepare:kR,BaseRenderTexture:S0,BaseTexture:Ie,BatchDrawCall:vc,BatchGeometry:H0,BatchPluginFactory:uR,BatchRenderer:V0,BatchShaderGenerator:oR,BatchSystem:P0,BatchTextureArray:mc,BitmapFont:fn,BitmapFontData:Su,BitmapFontLoader:KR,BitmapText:jV,BlobResource:xR,Bounds:yu,BrowserAdapter:eA,Buffer:ut,BufferResource:Es,get CLEAR_MODES(){return fr},get COLOR_MASK_BITS(){return Fg},CanvasResource:_0,Circle:OA,CompressedTextureLoader:TR,CompressedTextureResource:yc,Container:Gr,ContextSystem:A0,CountLimiter:UR,CubeResource:x0,DDSLoader:IR,DEG_TO_RAD:RA,get DRAW_MODES(){return pr},DisplayObject:st,get ENV(){return rn},Ellipse:MA,get ExtensionType(){return Ne},Extract:vR,get FORMATS(){return Z},FORMATS_TO_COMPONENTS:SR,FillStyle:$0,Filter:Mn,FilterState:kA,FilterSystem:I0,Framebuffer:pc,FramebufferSystem:R0,get GC_MODES(){return cu},GLFramebuffer:GA,GLProgram:eR,GLTexture:Eh,GRAPHICS_CURVES:ya,Geometry:Na,GeometrySystem:O0,Graphics:bu,GraphicsData:my,GraphicsGeometry:FR,IGLUniformData:q5,INSTALLED:_u,get INTERNAL_FORMATS(){return ye},INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:Tu,ImageBitmapResource:b0,ImageResource:Qc,InteractionData:sy,InteractionEvent:dR,InteractionManager:X0,InteractionTrackingData:bh,KTXLoader:PR,get LINE_CAP(){return xn},get LINE_JOIN(){return Kr},LineStyle:BR,Loader:xu,get LoaderResource(){return et},get MASK_TYPES(){return at},get MIPMAP_MODES(){return xr},get MSAA_QUALITY(){return $e},MaskData:jA,MaskSystem:M0,Matrix:ct,Mesh:xa,MeshBatchUvs:$R,MeshGeometry:Ku,MeshMaterial:Ta,NineSlicePlane:dz,ObjectRenderer:qu,ObservablePoint:Ki,PI_2:gu,get PRECISION(){return $t},ParticleContainer:iV,ParticleRenderer:RR,PlaneGeometry:eO,Point:He,Polygon:Lo,Prepare:jR,Program:Fa,ProjectionSystem:N0,Quad:UA,QuadUv:C0,RAD_TO_DEG:AA,get RENDERER_TYPE(){return pa},Rectangle:Pe,RenderTexture:vi,RenderTexturePool:BA,RenderTextureSystem:F0,Renderer:tf,ResizePlugin:QR,Resource:ms,RopeGeometry:tO,RoundedRectangle:DA,Runner:xt,get SAMPLER_TYPES(){return hu},get SCALE_MODES(){return Mr},get SHAPES(){return vt},SVGResource:T0,ScissorSystem:D0,Shader:bn,ShaderSystem:B0,SimpleMesh:fz,SimplePlane:rO,SimpleRope:cz,Sprite:Ba,SpriteMaskFilter:YA,Spritesheet:HR,SpritesheetLoader:VR,State:bi,StateSystem:U0,StencilSystem:L0,System:cH,get TARGETS(){return hi},get TEXT_GRADIENT(){return _a},get TYPES(){return ue},TYPES_TO_BYTES_PER_COMPONENT:hy,TYPES_TO_BYTES_PER_PIXEL:wR,TemporaryDisplayObject:g0,Text:q0,TextFormat:WR,TextMetrics:Hr,TextStyle:gs,Texture:pe,TextureGCSystem:k0,TextureLoader:yR,TextureMatrix:ef,TextureSystem:G0,TextureUvs:w0,Ticker:pt,TickerPlugin:NA,TilingSprite:PV,TilingSpriteRenderer:XR,TimeLimiter:IV,Transform:v0,get UPDATE_PRIORITY(){return nn},UniformGroup:ci,VERSION:pH,VideoResource:E0,ViewableBuffer:gc,get WRAP_MODES(){return Fr},XMLFormat:_c,XMLStringFormat:YR,accessibleTarget:cR,autoDetectFormat:J0,autoDetectRenderer:iR,autoDetectResource:Jc,checkMaxIfStatementsInShader:WA,createUBOElements:JA,defaultFilterVertex:j0,defaultVertex:sR,extensions:on,filters:mz,generateProgram:tR,generateUniformBufferSync:QA,getTestContext:zA,getUBOData:ZA,graphicsUtils:hV,groupD8:Ye,interactiveTarget:pR,isMobile:vr,parseDDS:bR,parseKTX:CR,resources:lR,settings:te,systems:hR,uniformParsers:ns,utils:y5},Symbol.toStringTag,{value:"Module"}));var nO={exports:{}},$d=/iPhone/i,N1=/iPod/i,F1=/iPad/i,B1=/\biOS-universal(?:.+)Mac\b/i,Wd=/\bAndroid(?:.+)Mobile\b/i,U1=/Android/i,Os=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Ql=/Silk/i,hn=/Windows Phone/i,k1=/\bWindows(?:.+)ARM\b/i,G1=/BlackBerry/i,j1=/BB10/i,H1=/Opera Mini/i,V1=/\b(CriOS|Chrome)(?:.+)Mobile/i,z1=/Mobile(?:.+)Firefox\b/i,X1=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function yz(r){return function(e){return e.test(r)}}function _z(r){var e={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?e.userAgent=r:r&&r.userAgent&&(e={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var t=e.userAgent,n=t.split("[FBAN");typeof n[1]<"u"&&(t=n[0]),n=t.split("Twitter"),typeof n[1]<"u"&&(t=n[0]);var i=yz(t),s={apple:{phone:i($d)&&!i(hn),ipod:i(N1),tablet:!i($d)&&(i(F1)||X1(e))&&!i(hn),universal:i(B1),device:(i($d)||i(N1)||i(F1)||i(B1)||X1(e))&&!i(hn)},amazon:{phone:i(Os),tablet:!i(Os)&&i(Ql),device:i(Os)||i(Ql)},android:{phone:!i(hn)&&i(Os)||!i(hn)&&i(Wd),tablet:!i(hn)&&!i(Os)&&!i(Wd)&&(i(Ql)||i(U1)),device:!i(hn)&&(i(Os)||i(Ql)||i(Wd)||i(U1))||i(/\bokhttp\b/i)},windows:{phone:i(hn),tablet:i(k1),device:i(hn)||i(k1)},other:{blackberry:i(G1),blackberry10:i(j1),opera:i(H1),firefox:i(z1),chrome:i(V1),device:i(G1)||i(j1)||i(H1)||i(z1)||i(V1)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}/*!
 * @pixi/settings - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Zn=_z(window.navigator);function xz(r){var e=!0;if(Zn.tablet||Zn.phone){if(Zn.apple.device){var t=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(t){var n=parseInt(t[1],10);n<11&&(e=!1)}}if(Zn.android.device){var t=navigator.userAgent.match(/Android\s([0-9.]*)/);if(t){var n=parseInt(t[1],10);n<7&&(e=!1)}}}return e?r:4}function Tz(){return!Zn.apple.device}var _e={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:xz(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:Zn.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:Tz(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};/*!
 * @pixi/constants - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var An;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(An||(An={}));var wu;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(wu||(wu={}));var xc;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(xc||(xc={}));var ce;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(ce||(ce={}));var Cu;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Cu||(Cu={}));var Iu;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Iu||(Iu={}));var is;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(is||(is={}));var Dr;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.FLOAT=5126]="FLOAT",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(Dr||(Dr={}));var Tn;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(Tn||(Tn={}));var Dy;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Dy||(Dy={}));var Pu;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON"})(Pu||(Pu={}));var mi;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(mi||(mi={}));var $r;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})($r||($r={}));var Ly;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(Ly||(Ly={}));var Jr;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(Jr||(Jr={}));var Zt;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(Zt||(Zt={}));var Ea;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(Ea||(Ea={}));/*!
 * @pixi/utils - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */_e.RETINA_PREFIX=/@([0-9\.]+)x/;_e.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var Ny=!1,$1="5.3.12";function Ez(){Ny=!0}function iO(r){var e;if(!Ny){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t=[`
 %c %c %c PixiJS `+$1+" - ✰ "+r+` ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=window.console).log.apply(e,t)}else window.console&&window.console.log("PixiJS "+$1+" - "+r+" - http://www.pixijs.com/");Ny=!0}}var Yd;function sO(){return typeof Yd>"u"&&(Yd=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:_e.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),i=!!(n&&n.getContextAttributes().stencil);if(n){var s=n.getExtension("WEBGL_lose_context");s&&s.loseContext()}return n=null,i}catch{return!1}}()),Yd}function aO(r,e){return e===void 0&&(e=[]),e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255,e}function oO(r){var e=r.toString(16);return e="000000".substr(0,6-e.length)+e,"#"+e}function bz(r){return typeof r=="string"&&r[0]==="#"&&(r=r.substr(1)),parseInt(r,16)}function Sz(r){return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)}function wz(){for(var r=[],e=[],t=0;t<32;t++)r[t]=t,e[t]=t;r[ce.NORMAL_NPM]=ce.NORMAL,r[ce.ADD_NPM]=ce.ADD,r[ce.SCREEN_NPM]=ce.SCREEN,e[ce.NORMAL]=ce.NORMAL_NPM,e[ce.ADD]=ce.ADD_NPM,e[ce.SCREEN]=ce.SCREEN_NPM;var n=[];return n.push(e),n.push(r),n}var Q0=wz();function Cz(r,e){return Q0[e?1:0][r]}function Iz(r,e,t,n){return t=t||new Float32Array(4),n||n===void 0?(t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e):(t[0]=r[0],t[1]=r[1],t[2]=r[2]),t[3]=e,t}function uO(r,e){if(e===1)return(e*255<<24)+r;if(e===0)return 0;var t=r>>16&255,n=r>>8&255,i=r&255;return t=t*e+.5|0,n=n*e+.5|0,i=i*e+.5|0,(e*255<<24)+(t<<16)+(n<<8)+i}function Pz(r,e,t,n){return t=t||new Float32Array(4),t[0]=(r>>16&255)/255,t[1]=(r>>8&255)/255,t[2]=(r&255)/255,(n||n===void 0)&&(t[0]*=e,t[1]*=e,t[2]*=e),t[3]=e,t}function Az(r,e){e===void 0&&(e=null);var t=r*6;if(e=e||new Uint16Array(t),e.length!==t)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+t);for(var n=0,i=0;n<t;n+=6,i+=4)e[n+0]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3;return e}function lO(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}var Rz={Float32Array,Uint32Array,Int32Array,Uint8Array};function Oz(r,e){for(var t=0,n=0,i={},s=0;s<r.length;s++)n+=e[s],t+=r[s].length;for(var a=new ArrayBuffer(t*4),o=null,u=0,s=0;s<r.length;s++){var l=e[s],h=r[s],c=lO(h);i[c]||(i[c]=new Rz[c](a)),o=i[c];for(var f=0;f<h.length;f++){var p=(f/l|0)*n+u,v=f%l;o[p+v]=h[f]}u+=l}return new Float32Array(a)}function Au(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function Fy(r){return!(r&r-1)&&!!r}function By(r){var e=(r>65535?1:0)<<4;r>>>=e;var t=(r>255?1:0)<<3;return r>>>=t,e|=t,t=(r>15?1:0)<<2,r>>>=t,e|=t,t=(r>3?1:0)<<1,r>>>=t,e|=t,e|r>>1}function Fo(r,e,t){var n=r.length,i;if(!(e>=n||t===0)){t=e+t>n?n-e:t;var s=n-t;for(i=e;i<s;++i)r[i]=r[i+t];r.length=s}}function Mz(r){return r===0?0:r<0?-1:1}var Dz=0;function Ru(){return++Dz}var W1={};function ex(r,e,t){if(t===void 0&&(t=3),!W1[e]){var n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+r):(n=n.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+`
Deprecated since v`+r),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+r),console.warn(n))),W1[e]=!0}}var Uy={},Vt=Object.create(null),ur=Object.create(null);function Lz(){var r;for(r in Vt)Vt[r].destroy();for(r in ur)ur[r].destroy()}function Nz(){var r;for(r in Vt)delete Vt[r];for(r in ur)delete ur[r]}var Fz=function(){function r(e,t,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||_e.RESOLUTION,this.resize(e,t)}return r.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},r.prototype.resize=function(e,t){this.canvas.width=e*this.resolution,this.canvas.height=t*this.resolution},r.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(r.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=e},enumerable:!1,configurable:!0}),r}();function Bz(r){var e=r.width,t=r.height,n=r.getContext("2d"),i=n.getImageData(0,0,e,t),s=i.data,a=s.length,o={top:null,left:null,right:null,bottom:null},u=null,l,h,c;for(l=0;l<a;l+=4)s[l+3]!==0&&(h=l/4%e,c=~~(l/4/e),o.top===null&&(o.top=c),(o.left===null||h<o.left)&&(o.left=h),(o.right===null||o.right<h)&&(o.right=h+1),(o.bottom===null||o.bottom<c)&&(o.bottom=c));return o.top!==null&&(e=o.right-o.left,t=o.bottom-o.top+1,u=n.getImageData(o.left,o.top,e,t)),{height:t,width:e,data:u}}var hO=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function Uz(r){var e=hO.exec(r);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}var eh;function cO(r,e){if(e===void 0&&(e=window.location),r.indexOf("data:")===0)return"";e=e||window.location,eh||(eh=document.createElement("a")),eh.href=r;var t=xA(eh.href),n=!t.port&&e.port===""||t.port===e.port;return t.hostname!==e.hostname||!n||t.protocol!==e.protocol?"anonymous":""}function ky(r,e){var t=_e.RETINA_PREFIX.exec(r);return t?parseFloat(t[1]):e!==void 0?e:1}const kz=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:ur,CanvasRenderTarget:Fz,DATA_URI:hO,EventEmitter:jr,ProgramCache:Uy,TextureCache:Vt,clearTextureCache:Nz,correctBlendMode:Cz,createIndicesForQuads:Az,decomposeDataUri:Uz,deprecation:ex,destroyTextureCache:Lz,determineCrossOrigin:cO,earcut:Yc,getBufferType:lO,getResolutionOfUrl:ky,hex2rgb:aO,hex2string:oO,interleaveTypedArrays:Oz,isMobile:Zn,isPow2:Fy,isWebGLSupported:sO,log2:By,nextPow2:Au,premultiplyBlendMode:Q0,premultiplyRgba:Iz,premultiplyTint:uO,premultiplyTintToRgba:Pz,removeItems:Fo,rgb2hex:Sz,sayHello:iO,sign:Mz,skipHello:Ez,string2hex:bz,trimCanvas:Bz,uid:Ru,url:Da},Symbol.toStringTag,{value:"Module"})),Gz=Du(kz);/*!
 * @pixi/math - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var fO=Math.PI*2,dO=180/Math.PI,pO=Math.PI/180,gi;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(gi||(gi={}));var ft=function(){function r(e,t,n,i){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=Number(e),this.y=Number(t),this.width=Number(n),this.height=Number(i),this.type=gi.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},r.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},r.prototype.contains=function(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height},r.prototype.pad=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this},r.prototype.fit=function(e){var t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=i,this.height=Math.max(s-i,0),this},r.prototype.ceil=function(e,t){e===void 0&&(e=1),t===void 0&&(t=.001);var n=Math.ceil((this.x+this.width-t)*e)/e,i=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=i-this.y,this},r.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=i,this.height=s-i,this},r}(),jz=function(){function r(e,t,n){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),this.x=e,this.y=t,this.radius=n,this.type=gi.CIRC}return r.prototype.clone=function(){return new r(this.x,this.y,this.radius)},r.prototype.contains=function(e,t){if(this.radius<=0)return!1;var n=this.radius*this.radius,i=this.x-e,s=this.y-t;return i*=i,s*=s,i+s<=n},r.prototype.getBounds=function(){return new ft(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},r}(),Hz=function(){function r(e,t,n,i){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=e,this.y=t,this.width=n,this.height=i,this.type=gi.ELIP}return r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var n=(e-this.x)/this.width,i=(t-this.y)/this.height;return n*=n,i*=i,n+i<=1},r.prototype.getBounds=function(){return new ft(this.x-this.width,this.y-this.height,this.width,this.height)},r}(),Vz=function(){function r(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];var i=Array.isArray(t[0])?t[0]:t;if(typeof i[0]!="number"){for(var s=[],a=0,o=i.length;a<o;a++)s.push(i[a].x,i[a].y);i=s}this.points=i,this.type=gi.POLY,this.closeStroke=!0}return r.prototype.clone=function(){var e=this.points.slice(),t=new r(e);return t.closeStroke=this.closeStroke,t},r.prototype.contains=function(e,t){for(var n=!1,i=this.points.length/2,s=0,a=i-1;s<i;a=s++){var o=this.points[s*2],u=this.points[s*2+1],l=this.points[a*2],h=this.points[a*2+1],c=u>t!=h>t&&e<(l-o)*((t-u)/(h-u))+o;c&&(n=!n)}return n},r}(),zz=function(){function r(e,t,n,i,s){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=0),s===void 0&&(s=20),this.x=e,this.y=t,this.width=n,this.height=i,this.radius=s,this.type=gi.RREC}return r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.radius)},r.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||e>=this.x+this.radius&&e<=this.x+this.width-this.radius)return!0;var n=e-(this.x+this.radius),i=t-(this.y+this.radius),s=this.radius*this.radius;if(n*n+i*i<=s||(n=e-(this.x+this.width-this.radius),n*n+i*i<=s)||(i=t-(this.y+this.height-this.radius),n*n+i*i<=s)||(n=e-(this.x+this.radius),n*n+i*i<=s))return!0}return!1},r}(),Ou=function(){function r(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this.x=e,this.y=t}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},r.prototype.copyTo=function(e){return e.set(this.x,this.y),e},r.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},r.prototype.set=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x=e,this.y=t,this},r}(),yo=function(){function r(e,t,n,i){n===void 0&&(n=0),i===void 0&&(i=0),this._x=n,this._y=i,this.cb=e,this.scope=t}return r.prototype.clone=function(e,t){return e===void 0&&(e=this.cb),t===void 0&&(t=this.scope),new r(e,t,this._x,this._y)},r.prototype.set=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(e){return e.set(this._x,this._y),e},r.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),Er=function(){function r(e,t,n,i,s,a){e===void 0&&(e=1),t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=e,this.b=t,this.c=n,this.d=i,this.tx=s,this.ty=a}return r.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},r.prototype.set=function(e,t,n,i,s,a){return this.a=e,this.b=t,this.c=n,this.d=i,this.tx=s,this.ty=a,this},r.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},r.prototype.apply=function(e,t){t=t||new Ou;var n=e.x,i=e.y;return t.x=this.a*n+this.c*i+this.tx,t.y=this.b*n+this.d*i+this.ty,t},r.prototype.applyInverse=function(e,t){t=t||new Ou;var n=1/(this.a*this.d+this.c*-this.b),i=e.x,s=e.y;return t.x=this.d*n*i+-this.c*n*s+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*s+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,t},r.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},r.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},r.prototype.rotate=function(e){var t=Math.cos(e),n=Math.sin(e),i=this.a,s=this.c,a=this.tx;return this.a=i*t-this.b*n,this.b=i*n+this.b*t,this.c=s*t-this.d*n,this.d=s*n+this.d*t,this.tx=a*t-this.ty*n,this.ty=a*n+this.ty*t,this},r.prototype.append=function(e){var t=this.a,n=this.b,i=this.c,s=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*n+e.b*s,this.c=e.c*t+e.d*i,this.d=e.c*n+e.d*s,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*n+e.ty*s+this.ty,this},r.prototype.setTransform=function(e,t,n,i,s,a,o,u,l){return this.a=Math.cos(o+l)*s,this.b=Math.sin(o+l)*s,this.c=-Math.sin(o-u)*a,this.d=Math.cos(o-u)*a,this.tx=e-(n*this.a+i*this.c),this.ty=t-(n*this.b+i*this.d),this},r.prototype.prepend=function(e){var t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){var n=this.a,i=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},r.prototype.decompose=function(e){var t=this.a,n=this.b,i=this.c,s=this.d,a=-Math.atan2(-i,s),o=Math.atan2(n,t),u=Math.abs(a+o);return u<1e-5||Math.abs(fO-u)<1e-5?(e.rotation=o,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=o),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx,e.position.y=this.ty,e},r.prototype.invert=function(){var e=this.a,t=this.b,n=this.c,i=this.d,s=this.tx,a=e*i-t*n;return this.a=i/a,this.b=-t/a,this.c=-n/a,this.d=e/a,this.tx=(n*this.ty-i*s)/a,this.ty=-(e*this.ty-t*s)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var e=new r;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},r.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},r.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),ki=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Gi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ji=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Hi=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Gy=[],vO=[],th=Math.sign;function Xz(){for(var r=0;r<16;r++){var e=[];Gy.push(e);for(var t=0;t<16;t++)for(var n=th(ki[r]*ki[t]+ji[r]*Gi[t]),i=th(Gi[r]*ki[t]+Hi[r]*Gi[t]),s=th(ki[r]*ji[t]+ji[r]*Hi[t]),a=th(Gi[r]*ji[t]+Hi[r]*Hi[t]),o=0;o<16;o++)if(ki[o]===n&&Gi[o]===i&&ji[o]===s&&Hi[o]===a){e.push(o);break}}for(var r=0;r<16;r++){var u=new Er;u.set(ki[r],Gi[r],ji[r],Hi[r],0,0),vO.push(u)}}Xz();var qe={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(r){return ki[r]},uY:function(r){return Gi[r]},vX:function(r){return ji[r]},vY:function(r){return Hi[r]},inv:function(r){return r&8?r&15:-r&7},add:function(r,e){return Gy[r][e]},sub:function(r,e){return Gy[r][qe.inv(e)]},rotate180:function(r){return r^4},isVertical:function(r){return(r&3)===2},byDirection:function(r,e){return Math.abs(r)*2<=Math.abs(e)?e>=0?qe.S:qe.N:Math.abs(e)*2<=Math.abs(r)?r>0?qe.E:qe.W:e>0?r>0?qe.SE:qe.SW:r>0?qe.NE:qe.NW},matrixAppendRotationInv:function(r,e,t,n){t===void 0&&(t=0),n===void 0&&(n=0);var i=vO[qe.inv(e)];i.tx=t,i.ty=n,r.append(i)}},mO=function(){function r(){this.worldTransform=new Er,this.localTransform=new Er,this.position=new yo(this.onChange,this,0,0),this.scale=new yo(this.onChange,this,1,1),this.pivot=new yo(this.onChange,this,0,0),this.skew=new yo(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var n=e.worldTransform,i=this.worldTransform;i.a=t.a*n.a+t.b*n.c,i.b=t.a*n.b+t.b*n.d,i.c=t.c*n.a+t.d*n.c,i.d=t.c*n.b+t.d*n.d,i.tx=t.tx*n.a+t.ty*n.c+n.tx,i.ty=t.tx*n.b+t.ty*n.d+n.ty,this._parentID=e._worldID,this._worldID++}},r.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r}();const $z=Object.freeze(Object.defineProperty({__proto__:null,Circle:jz,DEG_TO_RAD:pO,Ellipse:Hz,Matrix:Er,ObservablePoint:yo,PI_2:fO,Point:Ou,Polygon:Vz,RAD_TO_DEG:dO,Rectangle:ft,RoundedRectangle:zz,get SHAPES(){return gi},Transform:mO,groupD8:qe},Symbol.toStringTag,{value:"Module"})),Wz=Du($z);/*!
 * @pixi/runner - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Rt=function(){function r(e){this.items=[],this._name=e,this._aliasCount=0}return r.prototype.emit=function(e,t,n,i,s,a,o,u){if(arguments.length>8)throw new Error("max arguments reached");var l=this,h=l.name,c=l.items;this._aliasCount++;for(var f=0,p=c.length;f<p;f++)c[f][h](e,t,n,i,s,a,o,u);return c===this.items&&this._aliasCount--,this},r.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},r.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},r.prototype.remove=function(e){var t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},r.prototype.contains=function(e){return this.items.indexOf(e)!==-1},r.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},r.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(r.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),r}();Object.defineProperties(Rt.prototype,{dispatch:{value:Rt.prototype.emit},run:{value:Rt.prototype.emit}});/*!
 * @pixi/ticker - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */_e.TARGET_FPMS=.06;var Tc;(function(r){r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY"})(Tc||(Tc={}));var qd=function(){function r(e,t,n,i){t===void 0&&(t=null),n===void 0&&(n=0),i===void 0&&(i=!1),this.fn=e,this.context=t,this.priority=n,this.once=i,this.next=null,this.previous=null,this._destroyed=!1}return r.prototype.match=function(e,t){return t===void 0&&(t=null),this.fn===e&&this.context===t},r.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},r.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},r.prototype.destroy=function(e){e===void 0&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t},r}(),Ms=function(){function r(){var e=this;this._head=new qd(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/_e.TARGET_FPMS,this.elapsedMS=1/_e.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&e._requestId===null&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return r.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(e,t,n){return n===void 0&&(n=Tc.NORMAL),this._addListener(new qd(e,t,n))},r.prototype.addOnce=function(e,t,n){return n===void 0&&(n=Tc.NORMAL),this._addListener(new qd(e,t,n,!0))},r.prototype._addListener=function(e){var t=this._head.next,n=this._head;if(!t)e.connect(n);else{for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}return this._startIfPossible(),this},r.prototype.remove=function(e,t){for(var n=this._head.next;n;)n.match(e,t)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(r.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,t=this._head;t=t.next;)e++;return e},enumerable:!1,configurable:!0}),r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},r.prototype.update=function(e){e===void 0&&(e=performance.now());var t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var n=e-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=e-n%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*_e.TARGET_FPMS;for(var i=this._head,s=i.next;s;)s=s.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(r.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,t)/1e3,_e.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(e===0)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"shared",{get:function(){if(!r._shared){var e=r._shared=new r;e.autoStart=!0,e._protected=!0}return r._shared},enumerable:!1,configurable:!0}),Object.defineProperty(r,"system",{get:function(){if(!r._system){var e=r._system=new r;e.autoStart=!0,e._protected=!0}return r._system},enumerable:!1,configurable:!0}),r}();/*!
 * @pixi/core - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */_e.PREFER_ENV=Zn.any?An.WEBGL:An.WEBGL2;_e.STRICT_TEXTURE_CACHE=!1;var Ec=[];function tx(r,e){if(!r)return null;var t="";if(typeof r=="string"){var n=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);n&&(t=n[1].toLowerCase())}for(var i=Ec.length-1;i>=0;--i){var s=Ec[i];if(s.test&&s.test(r,t))return new s(r,e)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var jy=function(r,e){return jy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},jy(r,e)};function Te(r,e){jy(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ba=function(){function r(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Rt("setRealSize"),this.onUpdate=new Rt("update"),this.onError=new Rt("onError")}return r.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},r.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},r.prototype.resize=function(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))},Object.defineProperty(r.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),r.prototype.update=function(){this.destroyed||this.onUpdate.emit()},r.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),r.prototype.style=function(e,t,n){return!1},r.prototype.dispose=function(){},r.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},r.test=function(e,t){return!1},r}(),rf=function(r){Te(e,r);function e(t,n){var i=this,s=n||{},a=s.width,o=s.height;if(!a||!o)throw new Error("BufferResource width or height invalid");return i=r.call(this,a,o)||this,i.data=t,i}return e.prototype.upload=function(t,n,i){var s=t.gl;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===mi.UNPACK),i.width===n.width&&i.height===n.height?s.texSubImage2D(n.target,0,0,0,n.width,n.height,n.format,n.type,this.data):(i.width=n.width,i.height=n.height,s.texImage2D(n.target,0,i.internalFormat,n.width,n.height,0,n.format,i.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(ba),Yz={scaleMode:Tn.NEAREST,format:Iu.RGBA,alphaMode:mi.NPM},Mt=function(r){Te(e,r);function e(t,n){t===void 0&&(t=null),n===void 0&&(n=null);var i=r.call(this)||this;n=n||{};var s=n.alphaMode,a=n.mipmap,o=n.anisotropicLevel,u=n.scaleMode,l=n.width,h=n.height,c=n.wrapMode,f=n.format,p=n.type,v=n.target,g=n.resolution,m=n.resourceOptions;return t&&!(t instanceof ba)&&(t=tx(t,m),t.internal=!0),i.width=l||0,i.height=h||0,i.resolution=g||_e.RESOLUTION,i.mipmap=a!==void 0?a:_e.MIPMAP_TEXTURES,i.anisotropicLevel=o!==void 0?o:_e.ANISOTROPIC_LEVEL,i.wrapMode=c||_e.WRAP_MODE,i.scaleMode=u!==void 0?u:_e.SCALE_MODE,i.format=f||Iu.RGBA,i.type=p||Dr.UNSIGNED_BYTE,i.target=v||is.TEXTURE_2D,i.alphaMode=s!==void 0?s:mi.UNPACK,n.premultiplyAlpha!==void 0&&(i.premultiplyAlpha=n.premultiplyAlpha),i.uid=Ru(),i.touched=0,i.isPowerOfTwo=!1,i._refreshPOT(),i._glTextures={},i.dirtyId=0,i.dirtyStyleId=0,i.cacheId=null,i.valid=l>0&&h>0,i.textureCacheIds=[],i.destroyed=!1,i.resource=null,i._batchEnabled=0,i._batchLocation=0,i.parentTextureArray=null,i.setResource(t),i}return Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,n){var i;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),n!==void 0&&n!==this.mipmap&&(this.mipmap=n,i=!0),i&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,n,i){return this.resolution=i||this.resolution,this.width=t,this.height=n,this._refreshPOT(),this.update(),this},e.prototype.setRealSize=function(t,n,i){return this.resolution=i||this.resolution,this.width=t/this.resolution,this.height=n/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=Fy(this.realWidth)&&Fy(this.realHeight)},e.prototype.setResolution=function(t){var n=this.resolution;return n===t?this:(this.resolution=t,this.valid&&(this.width=this.width*n/t,this.height=this.height*n/t,this.emit("update",this)),this._refreshPOT(),this)},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete ur[this.cacheId],delete Vt[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,n,i){i===void 0&&(i=_e.STRICT_TEXTURE_CACHE);var s=typeof t=="string",a=null;s?a=t:(t._pixiId||(t._pixiId="pixiid_"+Ru()),a=t._pixiId);var o=ur[a];if(s&&i&&!o)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return o||(o=new e(t,n),o.cacheId=a,e.addToCache(o,a)),o},e.fromBuffer=function(t,n,i,s){t=t||new Float32Array(n*i*4);var a=new rf(t,{width:n,height:i}),o=t instanceof Float32Array?Dr.FLOAT:Dr.UNSIGNED_BYTE;return new e(a,Object.assign(Yz,s||{width:n,height:i,type:o}))},e.addToCache=function(t,n){n&&(t.textureCacheIds.indexOf(n)===-1&&t.textureCacheIds.push(n),ur[n]&&console.warn("BaseTexture added to the cache with an id ["+n+"] that already had an entry"),ur[n]=t)},e.removeFromCache=function(t){if(typeof t=="string"){var n=ur[t];if(n){var i=n.textureCacheIds.indexOf(t);return i>-1&&n.textureCacheIds.splice(i,1),delete ur[t],n}}else if(t&&t.textureCacheIds){for(var s=0;s<t.textureCacheIds.length;++s)delete ur[t.textureCacheIds[s]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(jr),rx=function(r){Te(e,r);function e(t,n){var i=this,s=n||{},a=s.width,o=s.height;i=r.call(this,a,o)||this,i.items=[],i.itemDirtyIds=[];for(var u=0;u<t;u++){var l=new Mt;i.items.push(l),i.itemDirtyIds.push(-2)}return i.length=t,i._load=null,i.baseTexture=null,i}return e.prototype.initFromArray=function(t,n){for(var i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof ba?this.addResourceAt(t[i],i):this.addResourceAt(tx(t[i],n),i))},e.prototype.dispose=function(){for(var t=0,n=this.length;t<n;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,n){if(!this.items[n])throw new Error("Index "+n+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[n].setResource(t),this},e.prototype.bind=function(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");r.prototype.bind.call(this,t);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=t,this.items[n].on("update",t.update,t)},e.prototype.unbind=function(t){r.prototype.unbind.call(this,t);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",t.update,t)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var n=this.items.map(function(s){return s.resource}).filter(function(s){return s}),i=n.map(function(s){return s.load()});return this._load=Promise.all(i).then(function(){var s=t.items[0],a=s.realWidth,o=s.realHeight;return t.resize(a,o),Promise.resolve(t)}),this._load},e}(ba),gO=function(r){Te(e,r);function e(t,n){var i=this,s=n||{},a=s.width,o=s.height,u,l;return Array.isArray(t)?(u=t,l=t.length):l=t,i=r.call(this,l,{width:a,height:o})||this,u&&i.initFromArray(u,n),i}return e.prototype.addBaseTextureAt=function(t,n){if(t.resource)this.addResourceAt(t.resource,n);else throw new Error("ArrayResource does not support RenderTexture");return this},e.prototype.bind=function(t){r.prototype.bind.call(this,t),t.target=is.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,n,i){var s=this,a=s.length,o=s.itemDirtyIds,u=s.items,l=t.gl;i.dirtyId<0&&l.texImage3D(l.TEXTURE_2D_ARRAY,0,n.format,this._width,this._height,a,0,n.format,n.type,null);for(var h=0;h<a;h++){var c=u[h];o[h]<c.dirtyId&&(o[h]=c.dirtyId,c.valid&&l.texSubImage3D(l.TEXTURE_2D_ARRAY,0,0,0,h,c.resource.width,c.resource.height,1,n.format,n.type,c.resource.source))}return!0},e}(rx),Rn=function(r){Te(e,r);function e(t){var n=this,i=t,s=i.naturalWidth||i.videoWidth||i.width,a=i.naturalHeight||i.videoHeight||i.height;return n=r.call(this,s,a)||this,n.source=t,n.noSubImage=!1,n}return e.crossOrigin=function(t,n,i){i===void 0&&n.indexOf("data:")!==0?t.crossOrigin=cO(n):i!==!1&&(t.crossOrigin=typeof i=="string"?i:"anonymous")},e.prototype.upload=function(t,n,i,s){var a=t.gl,o=n.realWidth,u=n.realHeight;return s=s||this.source,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===mi.UNPACK),!this.noSubImage&&n.target===a.TEXTURE_2D&&i.width===o&&i.height===u?a.texSubImage2D(a.TEXTURE_2D,0,0,0,n.format,n.type,s):(i.width=o,i.height=u,a.texImage2D(n.target,0,n.format,n.format,n.type,s)),!0},e.prototype.update=function(){if(!this.destroyed){var t=this.source,n=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;this.resize(n,i),r.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(ba),nx=function(r){Te(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.test=function(t){var n=window.OffscreenCanvas;return n&&t instanceof n?!0:t instanceof HTMLCanvasElement},e}(Rn),yO=function(r){Te(e,r);function e(t,n){var i=this,s=n||{},a=s.width,o=s.height,u=s.autoLoad,l=s.linkBaseTexture;if(t&&t.length!==e.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");i=r.call(this,6,{width:a,height:o})||this;for(var h=0;h<e.SIDES;h++)i.items[h].target=is.TEXTURE_CUBE_MAP_POSITIVE_X+h;return i.linkBaseTexture=l!==!1,t&&i.initFromArray(t,n),u!==!1&&i.load(),i}return e.prototype.bind=function(t){r.prototype.bind.call(this,t),t.target=is.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,n,i){if(i===void 0&&(i=this.linkBaseTexture),!this.items[n])throw new Error("Index "+n+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,n);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=is.TEXTURE_CUBE_MAP_POSITIVE_X+n,t.parentTextureArray=this.baseTexture,this.items[n]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[n]=t,this},e.prototype.upload=function(t,n,i){for(var s=this.itemDirtyIds,a=0;a<e.SIDES;a++){var o=this.items[a];s[a]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(t,o,i),s[a]=o.dirtyId):s[a]<-1&&(t.gl.texImage2D(o.target,0,i.internalFormat,n.realWidth,n.realHeight,0,n.format,i.type,null),s[a]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(rx),ix=function(r){Te(e,r);function e(t,n){var i=this;if(n=n||{},!(t instanceof HTMLImageElement)){var s=new Image;Rn.crossOrigin(s,t,n.crossorigin),s.src=t,t=s}return i=r.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(n.createBitmap!==void 0?n.createBitmap:_e.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,i.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,n.premultiplyAlpha!==void 0&&(i.premultiplyAlpha=n.premultiplyAlpha),i.bitmap=null,i._load=null,n.autoLoad!==!1&&i.load(),i}return e.prototype.load=function(t){var n=this;return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise(function(i,s){var a=n.source;n.url=a.src;var o=function(){n.destroyed||(a.onload=null,a.onerror=null,n.resize(a.width,a.height),n._load=null,n.createBitmap?i(n.process()):i(n))};a.complete&&a.src?o():(a.onload=o,a.onerror=function(u){s(u),n.onError.emit(u)})}),this._load)},e.prototype.process=function(){var t=this,n=this.source;return this._process!==null?this._process:this.bitmap!==null||!window.createImageBitmap?Promise.resolve(this):(this._process=window.createImageBitmap(n,0,0,n.width,n.height,{premultiplyAlpha:this.alphaMode===mi.UNPACK?"premultiply":"none"}).then(function(i){return t.destroyed?Promise.reject():(t.bitmap=i,t.update(),t._process=null,Promise.resolve(t))}),this._process)},e.prototype.upload=function(t,n,i){if(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),!this.createBitmap)return r.prototype.upload.call(this,t,n,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(r.prototype.upload.call(this,t,n,i,this.bitmap),!this.preserveBitmap){var s=!0,a=n._glTextures;for(var o in a){var u=a[o];if(u!==i&&u.dirtyId!==n.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,r.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return typeof t=="string"||t instanceof HTMLImageElement},e}(Rn),_O=function(r){Te(e,r);function e(t,n){var i=this;return n=n||{},i=r.call(this,document.createElement("canvas"))||this,i._width=0,i._height=0,i.svg=t,i.scale=n.scale||1,i._overrideWidth=n.width,i._overrideHeight=n.height,i._resolve=null,i._crossorigin=n.crossorigin,i._load=null,n.autoLoad!==!1&&i.load(),i}return e.prototype.load=function(){var t=this;return this._load?this._load:(this._load=new Promise(function(n){if(t._resolve=function(){t.resize(t.source.width,t.source.height),n(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}),this._load)},e.prototype._loadSvg=function(){var t=this,n=new Image;Rn.crossOrigin(n,this.svg,this._crossorigin),n.src=this.svg,n.onerror=function(i){t._resolve&&(n.onerror=null,t.onError.emit(i))},n.onload=function(){if(t._resolve){var i=n.width,s=n.height;if(!i||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=i*t.scale,o=s*t.scale;(t._overrideWidth||t._overrideHeight)&&(a=t._overrideWidth||t._overrideHeight/s*i,o=t._overrideHeight||t._overrideWidth/i*s),a=Math.round(a),o=Math.round(o);var u=t.source;u.width=a,u.height=o,u._pixiId="canvas_"+Ru(),u.getContext("2d").drawImage(n,0,0,i,s,0,0,a,o),t._resolve(),t._resolve=null}}},e.getSize=function(t){var n=e.SVG_SIZE.exec(t),i={};return n&&(i[n[1]]=Math.round(parseFloat(n[3])),i[n[5]]=Math.round(parseFloat(n[7]))),i},e.prototype.dispose=function(){r.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,n){return n==="svg"||typeof t=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||typeof t=="string"&&t.indexOf("<svg")===0},e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(Rn),xO=function(r){Te(e,r);function e(t,n){var i=this;if(n=n||{},!(t instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof t=="string"&&(t=[t]);var a=t[0].src||t[0];Rn.crossOrigin(s,a,n.crossorigin);for(var o=0;o<t.length;++o){var u=document.createElement("source"),l=t[o],h=l.src,c=l.mime;h=h||t[o];var f=h.split("?").shift().toLowerCase(),p=f.substr(f.lastIndexOf(".")+1);c=c||e.MIME_TYPES[p]||"video/"+p,u.src=h,u.type=c,s.appendChild(u)}t=s}return i=r.call(this,t)||this,i.noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=n.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=n.autoPlay!==!1,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),n.autoLoad!==!1&&i.load(),i}return e.prototype.update=function(t){if(!this.destroyed){var n=Ms.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(r.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var n=this.source;return(n.readyState===n.HAVE_ENOUGH_DATA||n.readyState===n.HAVE_FUTURE_DATA)&&n.width&&n.height&&(n.complete=!0),n.addEventListener("play",this._onPlayStart.bind(this)),n.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(n.addEventListener("canplay",this._onCanPlay),n.addEventListener("canplaythrough",this._onCanPlay),n.addEventListener("error",this._onError,!0)),this._load=new Promise(function(i){t.valid?i(t):(t._resolve=i,n.load())}),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&t.paused===!1&&t.ended===!1&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return t.readyState===3||t.readyState===4},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Ms.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Ms.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var n=this.valid;this.resize(t.videoWidth,t.videoHeight),!n&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&Ms.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),r.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Ms.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Ms.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,n){return t instanceof HTMLVideoElement||e.TYPES.indexOf(n)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(Rn),TO=function(r){Te(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.test=function(t){return!!window.createImageBitmap&&t instanceof ImageBitmap},e}(Rn);Ec.push(ix,TO,nx,xO,_O,rf,yO,gO);var qz={Resource:ba,BaseImageResource:Rn,INSTALLED:Ec,autoDetectResource:tx,AbstractMultiResource:rx,ArrayResource:gO,BufferResource:rf,CanvasResource:nx,CubeResource:yO,ImageResource:ix,SVGResource:_O,VideoResource:xO,ImageBitmapResource:TO},Kt=function(){function r(e){this.renderer=e}return r.prototype.destroy=function(){this.renderer=null},r}(),Kz=function(r){Te(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.upload=function(t,n,i){var s=t.gl;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===mi.UNPACK),i.width===n.width&&i.height===n.height?s.texSubImage2D(n.target,0,0,0,n.width,n.height,n.format,n.type,this.data):(i.width=n.width,i.height=n.height,s.texImage2D(n.target,0,t.context.webGLVersion===1?s.DEPTH_COMPONENT:s.DEPTH_COMPONENT16,n.width,n.height,0,n.format,n.type,this.data)),!0},e}(rf),bc=function(){function r(e,t){this.width=Math.ceil(e||100),this.height=Math.ceil(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Rt("disposeFramebuffer"),this.multisample=Ea.NONE}return Object.defineProperty(r.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),r.prototype.addColorTexture=function(e,t){return e===void 0&&(e=0),this.colorTextures[e]=t||new Mt(null,{scaleMode:Tn.NEAREST,resolution:1,mipmap:Pu.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.addDepthTexture=function(e){return this.depthTexture=e||new Mt(new Kz(null,{width:this.width,height:this.height}),{scaleMode:Tn.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Pu.OFF,format:Iu.DEPTH_COMPONENT,type:Dr.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.resize=function(e,t){if(e=Math.ceil(e),t=Math.ceil(t),!(e===this.width&&t===this.height)){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var i=this.colorTextures[n],s=i.resolution;i.setSize(e/s,t/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(e/s,t/s)}}},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},r}(),Bo=function(r){Te(e,r);function e(t){var n=this;if(typeof t=="number"){var i=arguments[0],s=arguments[1],a=arguments[2],o=arguments[3];t={width:i,height:s,scaleMode:a,resolution:o}}n=r.call(this,null,t)||this;var u=t||{},l=u.width,h=u.height;return n.mipmap=0,n.width=Math.ceil(l)||100,n.height=Math.ceil(h)||100,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new bc(n.width*n.resolution,n.height*n.resolution).addColorTexture(0,n),n.maskStack=[],n.filterStack=[{}],n}return e.prototype.resize=function(t,n){t=Math.ceil(t),n=Math.ceil(n),this.framebuffer.resize(t*this.resolution,n*this.resolution)},e.prototype.dispose=function(){this.framebuffer.dispose(),r.prototype.dispose.call(this)},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(Mt),sx=function(){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return r.prototype.set=function(e,t,n){var i=t.width,s=t.height;if(n){var a=e.width/2/i,o=e.height/2/s,u=e.x/i+a,l=e.y/s+o;n=qe.add(n,qe.NW),this.x0=u+a*qe.uX(n),this.y0=l+o*qe.uY(n),n=qe.add(n,2),this.x1=u+a*qe.uX(n),this.y1=l+o*qe.uY(n),n=qe.add(n,2),this.x2=u+a*qe.uX(n),this.y2=l+o*qe.uY(n),n=qe.add(n,2),this.x3=u+a*qe.uX(n),this.y3=l+o*qe.uY(n)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},r}(),Y1=new sx,an=function(r){Te(e,r);function e(t,n,i,s,a,o){var u=r.call(this)||this;if(u.noFrame=!1,n||(u.noFrame=!0,n=new ft(0,0,1,1)),t instanceof e&&(t=t.baseTexture),u.baseTexture=t,u._frame=n,u.trim=s,u.valid=!1,u._uvs=Y1,u.uvMatrix=null,u.orig=i||n,u._rotate=Number(a||0),a===!0)u._rotate=2;else if(u._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return u.defaultAnchor=o?new Ou(o.x,o.y):new Ou(0,0),u._updateID=0,u.textureCacheIds=[],t.valid?u.noFrame?t.valid&&u.onBaseTextureUpdated(t):u.frame=n:t.once("loaded",u.onBaseTextureUpdated,u),u.noFrame&&t.on("update",u.onBaseTextureUpdated,u),u}return e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var n=this.baseTexture;n&&n.url&&Vt[n.url]&&e.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},e.prototype.updateUvs=function(){this._uvs===Y1&&(this._uvs=new sx),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,n,i){n===void 0&&(n={}),i===void 0&&(i=_e.STRICT_TEXTURE_CACHE);var s=typeof t=="string",a=null;s?a=t:(t._pixiId||(t._pixiId="pixiid_"+Ru()),a=t._pixiId);var o=Vt[a];if(s&&i&&!o)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return o||(n.resolution||(n.resolution=ky(t)),o=new e(new Mt(t,n)),o.baseTexture.cacheId=a,Mt.addToCache(o.baseTexture,a),e.addToCache(o,a)),o},e.fromURL=function(t,n){var i=Object.assign({autoLoad:!1},n==null?void 0:n.resourceOptions),s=e.from(t,Object.assign({resourceOptions:i},n),!1),a=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):a.load().then(function(){return Promise.resolve(s)})},e.fromBuffer=function(t,n,i,s){return new e(Mt.fromBuffer(t,n,i,s))},e.fromLoader=function(t,n,i){var s=new ix(t);s.url=n;var a=new Mt(s,{scaleMode:_e.SCALE_MODE,resolution:ky(n)}),o=new e(a);return i||(i=n),Mt.addToCache(o.baseTexture,i),e.addToCache(o,i),i!==n&&(Mt.addToCache(o.baseTexture,n),e.addToCache(o,n)),o},e.addToCache=function(t,n){n&&(t.textureCacheIds.indexOf(n)===-1&&t.textureCacheIds.push(n),Vt[n]&&console.warn("Texture added to the cache with an id ["+n+"] that already had an entry"),Vt[n]=t)},e.removeFromCache=function(t){if(typeof t=="string"){var n=Vt[t];if(n){var i=n.textureCacheIds.indexOf(t);return i>-1&&n.textureCacheIds.splice(i,1),delete Vt[t],n}}else if(t&&t.textureCacheIds){for(var s=0;s<t.textureCacheIds.length;++s)Vt[t.textureCacheIds[s]]===t&&delete Vt[t.textureCacheIds[s]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var n=t.x,i=t.y,s=t.width,a=t.height,o=n+s>this.baseTexture.width,u=i+a>this.baseTexture.height;if(o||u){var l=o&&u?"and":"or",h="X: "+n+" + "+s+" = "+(n+s)+" > "+this.baseTexture.width,c="Y: "+i+" + "+a+" = "+(i+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(h+" "+l+" "+c))}this.valid=s&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},e}(jr);function Jz(){var r=document.createElement("canvas");r.width=16,r.height=16;var e=r.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new an(new Mt(new nx(r)))}function nf(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}an.EMPTY=new an(new Mt);nf(an.EMPTY);nf(an.EMPTY.baseTexture);an.WHITE=Jz();nf(an.WHITE);nf(an.WHITE.baseTexture);var ax=function(r){Te(e,r);function e(t,n){var i=this,s=null;if(!(t instanceof Bo)){var a=arguments[1],o=arguments[2],u=arguments[3],l=arguments[4];console.warn("Please use RenderTexture.create("+a+", "+o+") instead of the ctor directly."),s=arguments[0],n=null,t=new Bo({width:a,height:o,scaleMode:u,resolution:l})}return i=r.call(this,t,n)||this,i.legacyRenderer=s,i.valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,n,i){i===void 0&&(i=!0),t=Math.ceil(t),n=Math.ceil(n),this.valid=t>0&&n>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=n,i&&this.baseTexture.resize(t,n),this.updateUvs()},e.prototype.setResolution=function(t){var n=this.baseTexture;n.resolution!==t&&(n.setResolution(t),this.resize(n.width,n.height,!1))},e.create=function(t){return typeof t=="number"&&(t={width:t,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new e(new Bo(t))},e}(an),EO=function(){function r(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return r.prototype.createTexture=function(e,t){var n=new Bo(Object.assign({width:e,height:t,resolution:1},this.textureOptions));return new ax(n)},r.prototype.getOptimalTexture=function(e,t,n){n===void 0&&(n=1);var i=r.SCREEN_KEY;e*=n,t*=n,(!this.enableFullScreen||e!==this._pixelsWidth||t!==this._pixelsHeight)&&(e=Au(e),t=Au(t),i=(e&65535)<<16|t&65535),this.texturePool[i]||(this.texturePool[i]=[]);var s=this.texturePool[i].pop();return s||(s=this.createTexture(e,t)),s.filterPoolKey=i,s.setResolution(n),s},r.prototype.getFilterTexture=function(e,t){var n=this.getOptimalTexture(e.width,e.height,t||e.resolution);return n.filterFrame=e.filterFrame,n},r.prototype.returnTexture=function(e){var t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)},r.prototype.returnFilterTexture=function(e){this.returnTexture(e)},r.prototype.clear=function(e){if(e=e!==!1,e)for(var t in this.texturePool){var n=this.texturePool[t];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}},r.prototype.setScreenSize=function(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){var t=r.SCREEN_KEY,n=this.texturePool[t];if(this.enableFullScreen=e.width>0&&e.height>0,n)for(var i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[t]=[],this._pixelsWidth=e.width,this._pixelsHeight=e.height}},r.SCREEN_KEY="screen",r}(),Hy=function(){function r(e,t,n,i,s,a,o){t===void 0&&(t=0),n===void 0&&(n=!1),i===void 0&&(i=5126),this.buffer=e,this.size=t,this.normalized=n,this.type=i,this.stride=s,this.start=a,this.instance=o}return r.prototype.destroy=function(){this.buffer=null},r.from=function(e,t,n,i,s){return new r(e,t,n,i,s)},r}(),Zz=0,lr=function(){function r(e,t,n){t===void 0&&(t=!0),n===void 0&&(n=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=t,this.id=Zz++,this.disposeRunner=new Rt("disposeBuffer")}return r.prototype.update=function(e){this.data=e||this.data,this._updateID++},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.data=null},r.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new r(e)},r}();function bO(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}var Qz={Float32Array,Uint32Array,Int32Array,Uint8Array};function eX(r,e){for(var t=0,n=0,i={},s=0;s<r.length;s++)n+=e[s],t+=r[s].length;for(var a=new ArrayBuffer(t*4),o=null,u=0,s=0;s<r.length;s++){var l=e[s],h=r[s],c=bO(h);i[c]||(i[c]=new Qz[c](a)),o=i[c];for(var f=0;f<h.length;f++){var p=(f/l|0)*n+u,v=f%l;o[p+v]=h[f]}u+=l}return new Float32Array(a)}var q1={5126:4,5123:2,5121:1},tX=0,rX={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},sf=function(){function r(e,t){e===void 0&&(e=[]),t===void 0&&(t={}),this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=tX++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Rt("disposeGeometry"),this.refCount=0}return r.prototype.addAttribute=function(e,t,n,i,s,a,o,u){if(n===void 0&&(n=0),i===void 0&&(i=!1),u===void 0&&(u=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof lr||(t instanceof Array&&(t=new Float32Array(t)),t=new lr(t));var l=e.split("|");if(l.length>1){for(var h=0;h<l.length;h++)this.addAttribute(l[h],t,n,i,s);return this}var c=this.buffers.indexOf(t);return c===-1&&(this.buffers.push(t),c=this.buffers.length-1),this.attributes[e]=new Hy(c,n,i,s,a,o,u),this.instanced=this.instanced||u,this},r.prototype.getAttribute=function(e){return this.attributes[e]},r.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},r.prototype.addIndex=function(e){return e instanceof lr||(e instanceof Array&&(e=new Uint16Array(e)),e=new lr(e)),e.index=!0,this.indexBuffer=e,this.buffers.indexOf(e)===-1&&this.buffers.push(e),this},r.prototype.getIndex=function(){return this.indexBuffer},r.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var e=[],t=[],n=new lr,i;for(i in this.attributes){var s=this.attributes[i],a=this.buffers[s.buffer];e.push(a.data),t.push(s.size*q1[s.type]/4),s.buffer=0}for(n.data=eX(e,t),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},r.prototype.getSize=function(){for(var e in this.attributes){var t=this.attributes[e],n=this.buffers[t.buffer];return n.data.length/(t.stride/4||t.size)}return 0},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},r.prototype.clone=function(){for(var e=new r,t=0;t<this.buffers.length;t++)e.buffers[t]=new lr(this.buffers[t].data.slice(0));for(var t in this.attributes){var n=this.attributes[t];e.attributes[t]=new Hy(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.index=!0),e},r.merge=function(e){for(var t=new r,n=[],i=[],s=[],a,o=0;o<e.length;o++){a=e[o];for(var u=0;u<a.buffers.length;u++)i[u]=i[u]||0,i[u]+=a.buffers[u].data.length,s[u]=0}for(var o=0;o<a.buffers.length;o++)n[o]=new rX[bO(a.buffers[o].data)](i[o]),t.buffers[o]=new lr(n[o]);for(var o=0;o<e.length;o++){a=e[o];for(var u=0;u<a.buffers.length;u++)n[u].set(a.buffers[u].data,s[u]),s[u]+=a.buffers[u].data.length}if(t.attributes=a.attributes,a.indexBuffer){t.indexBuffer=t.buffers[a.buffers.indexOf(a.indexBuffer)],t.indexBuffer.index=!0;for(var l=0,h=0,c=0,f=0,o=0;o<a.buffers.length;o++)if(a.buffers[o]!==a.indexBuffer){f=o;break}for(var o in a.attributes){var p=a.attributes[o];(p.buffer|0)===f&&(h+=p.size*q1[p.type]/4)}for(var o=0;o<e.length;o++){for(var v=e[o].indexBuffer.data,u=0;u<v.length;u++)t.indexBuffer.data[u+c]+=l;l+=a.buffers[f].data.length/h,c+=v.length}}return t},r}(),SO=function(r){Te(e,r);function e(){var t=r.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}return e}(sf),wO=function(r){Te(e,r);function e(){var t=r.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new lr(t.vertices),t.uvBuffer=new lr(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}return e.prototype.map=function(t,n){var i=0,s=0;return this.uvs[0]=i,this.uvs[1]=s,this.uvs[2]=i+n.width/t.width,this.uvs[3]=s,this.uvs[4]=i+n.width/t.width,this.uvs[5]=s+n.height/t.height,this.uvs[6]=i,this.uvs[7]=s+n.height/t.height,i=n.x,s=n.y,this.vertices[0]=i,this.vertices[1]=s,this.vertices[2]=i+n.width,this.vertices[3]=s,this.vertices[4]=i+n.width,this.vertices[5]=s+n.height,this.vertices[6]=i,this.vertices[7]=s+n.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(sf),nX=0,ss=function(){function r(e,t){this.uniforms=e,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=nX++,this.static=!!t}return r.prototype.update=function(){this.dirtyId++},r.prototype.add=function(e,t,n){this.uniforms[e]=new r(t,n)},r.from=function(e,t){return new r(e,t)},r}(),CO=function(){function r(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new ft,this.destinationFrame=new ft,this.filters=[]}return r.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},r}(),IO=function(r){Te(e,r);function e(t){var n=r.call(this,t)||this;return n.defaultFilterStack=[{}],n.texturePool=new EO,n.texturePool.setScreenSize(t.view),n.statePool=[],n.quad=new SO,n.quadUv=new wO,n.tempRect=new ft,n.activeState={},n.globalUniforms=new ss({outputFrame:n.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),n.forceClear=!1,n.useMaxPadding=!1,n}return e.prototype.push=function(t,n){for(var i=this.renderer,s=this.defaultFilterStack,a=this.statePool.pop()||new CO,o=n[0].resolution,u=n[0].padding,l=n[0].autoFit,h=n[0].legacy,c=1;c<n.length;c++){var f=n[c];o=Math.min(o,f.resolution),u=this.useMaxPadding?Math.max(u,f.padding):u+f.padding,l=l&&f.autoFit,h=h||f.legacy}s.length===1&&(this.defaultFilterStack[0].renderTexture=i.renderTexture.current),s.push(a),a.resolution=o,a.legacy=h,a.target=t,a.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),a.sourceFrame.pad(u),l&&a.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),a.sourceFrame.ceil(o),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,o),a.filters=n,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;var p=this.tempRect;p.width=a.sourceFrame.width,p.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,i.renderTexture.bind(a.renderTexture,a.sourceFrame,p),i.renderTexture.clear()},e.prototype.pop=function(){var t=this.defaultFilterStack,n=t.pop(),i=n.filters;this.activeState=n;var s=this.globalUniforms.uniforms;s.outputFrame=n.sourceFrame,s.resolution=n.resolution;var a=s.inputSize,o=s.inputPixel,u=s.inputClamp;if(a[0]=n.destinationFrame.width,a[1]=n.destinationFrame.height,a[2]=1/a[0],a[3]=1/a[1],o[0]=a[0]*n.resolution,o[1]=a[1]*n.resolution,o[2]=1/o[0],o[3]=1/o[1],u[0]=.5*o[2],u[1]=.5*o[3],u[2]=n.sourceFrame.width*a[2]-.5*o[2],u[3]=n.sourceFrame.height*a[3]-.5*o[3],n.legacy){var l=s.filterArea;l[0]=n.destinationFrame.width,l[1]=n.destinationFrame.height,l[2]=n.sourceFrame.x,l[3]=n.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();var h=t[t.length-1];if(n.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,n.renderTexture,h.renderTexture,$r.BLEND,n),this.returnFilterTexture(n.renderTexture);else{var c=n.renderTexture,f=this.getOptimalFilterTexture(c.width,c.height,n.resolution);f.filterFrame=c.filterFrame;var p=0;for(p=0;p<i.length-1;++p){i[p].apply(this,c,f,$r.CLEAR,n);var v=c;c=f,f=v}i[p].apply(this,c,h.renderTexture,$r.BLEND,n),this.returnFilterTexture(c),this.returnFilterTexture(f)}n.clear(),this.statePool.push(n)},e.prototype.bindAndClear=function(t,n){if(n===void 0&&(n=$r.CLEAR),t&&t.filterFrame){var i=this.tempRect;i.width=t.filterFrame.width,i.height=t.filterFrame.height,this.renderer.renderTexture.bind(t,t.filterFrame,i)}else this.renderer.renderTexture.bind(t);typeof n=="boolean"&&(n=n?$r.CLEAR:$r.BLEND,ex("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(n===$r.CLEAR||n===$r.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},e.prototype.applyFilter=function(t,n,i,s){var a=this.renderer;this.bindAndClear(i,s),t.uniforms.uSampler=n,t.uniforms.filterGlobals=this.globalUniforms,a.state.set(t.state),a.shader.bind(t),t.legacy?(this.quadUv.map(n._frame,n.filterFrame),a.geometry.bind(this.quadUv),a.geometry.draw(Cu.TRIANGLES)):(a.geometry.bind(this.quad),a.geometry.draw(Cu.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(t,n){var i=this.activeState,s=i.sourceFrame,a=i.destinationFrame,o=n._texture.orig,u=t.set(a.width,0,0,a.height,s.x,s.y),l=n.worldTransform.copyTo(Er.TEMP_MATRIX);return l.invert(),u.prepend(l),u.scale(1/o.width,1/o.height),u.translate(n.anchor.x,n.anchor.y),u},e.prototype.destroy=function(){this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(t,n,i){return i===void 0&&(i=1),this.texturePool.getOptimalTexture(t,n,i)},e.prototype.getFilterTexture=function(t,n){if(typeof t=="number"){var i=t;t=n,n=i}t=t||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(t.width,t.height,n||t.resolution);return s.filterFrame=t.filterFrame,s},e.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e}(Kt),ox=function(){function r(e){this.renderer=e}return r.prototype.flush=function(){},r.prototype.destroy=function(){this.renderer=null},r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.render=function(e){},r}(),PO=function(r){Te(e,r);function e(t){var n=r.call(this,t)||this;return n.emptyRenderer=new ox(t),n.currentRenderer=n.emptyRenderer,n}return e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(t,n){for(var i=this.renderer.texture.boundTextures,s=n-1;s>=0;--s)t[s]=i[s]||null,t[s]&&(t[s]._batchLocation=s)},e.prototype.boundArray=function(t,n,i,s){for(var a=t.elements,o=t.ids,u=t.count,l=0,h=0;h<u;h++){var c=a[h],f=c._batchLocation;if(f>=0&&f<s&&n[f]===c){o[h]=f;continue}for(;l<s;){var p=n[l];if(p&&p._batchEnabled===i&&p._batchLocation===l){l++;continue}o[h]=l,c._batchLocation=l,n[l]=c;break}}},e}(Kt),K1=0,AO=function(r){Te(e,r);function e(t){var n=r.call(this,t)||this;return n.webGLVersion=1,n.extensions={},n.supports={uint32Indices:!1},n.handleContextLost=n.handleContextLost.bind(n),n.handleContextRestored=n.handleContextRestored.bind(n),t.view.addEventListener("webglcontextlost",n.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",n.handleContextRestored,!1),n}return Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=K1++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=K1++,this.renderer.runners.contextChange.emit(t)},e.prototype.initFromOptions=function(t){var n=this.createContext(this.renderer.view,t);this.initFromContext(n)},e.prototype.createContext=function(t,n){var i;if(_e.PREFER_ENV>=An.WEBGL2&&(i=t.getContext("webgl2",n)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",n)||t.getContext("experimental-webgl",n),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var t=this.gl;this.webGLVersion===1?Object.assign(this.extensions,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,{anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:t.getExtension("EXT_color_buffer_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear")})},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(t){var n=t.getContextAttributes(),i="WebGL2RenderingContext"in window&&t instanceof window.WebGL2RenderingContext;i&&(this.webGLVersion=2),n.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var s=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(Kt),RO=function(){function r(e){this.framebuffer=e,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=Ea.NONE,this.msaaBuffer=null,this.blitFramebuffer=null}return r}(),iX=new ft,OO=function(r){Te(e,r);function e(t){var n=r.call(this,t)||this;return n.managedFramebuffers=[],n.unknownFramebuffer=new bc(10,10),n.msaaSamples=null,n}return e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ft,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var n=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;_e.PREFER_ENV===An.WEBGL_LEGACY&&(n=null,i=null),n?t.drawBuffers=function(s){return n.drawBuffersWEBGL(s)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},e.prototype.bind=function(t,n){var i=this.gl;if(t){var s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var a=0;a<t.colorTextures.length;a++){var o=t.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),n?this.setViewport(n.x,n.y,n.width,n.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),n?this.setViewport(n.x,n.y,n.width,n.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(t,n,i,s){var a=this.viewport;(a.width!==i||a.height!==s||a.x!==t||a.y!==n)&&(a.x=t,a.y=n,a.width=i,a.height=s,this.gl.viewport(t,n,i,s))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(t,n,i,s,a){a===void 0&&(a=xc.COLOR|xc.DEPTH);var o=this.gl;o.clearColor(t,n,i,s),o.clear(a)},e.prototype.initFramebuffer=function(t){var n=this.gl,i=new RO(n.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},e.prototype.resizeFramebuffer=function(t){var n=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.stencil&&(n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t.width,t.height));for(var s=t.colorTextures,a=0;a<s.length;a++)this.renderer.texture.bind(s[a],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},e.prototype.updateFramebuffer=function(t){var n=this.gl,i=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures,a=s.length;n.drawBuffers||(a=Math.min(a,1)),i.multisample>1&&(i.msaaBuffer=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.RGBA8,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer));for(var o=[],u=0;u<a;u++)if(!(u===0&&i.multisample>1)){var l=t.colorTextures[u],h=l.parentTextureArray||l;this.renderer.texture.bind(h,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+u,l.target,h._glTextures[this.CONTEXT_UID].texture,0),o.push(n.COLOR_ATTACHMENT0+u)}if(o.length>1&&n.drawBuffers(o),t.depthTexture){var c=this.writeDepthTexture;if(c){var f=t.depthTexture;this.renderer.texture.bind(f,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,f._glTextures[this.CONTEXT_UID].texture,0)}}!i.stencil&&(t.stencil||t.depth)&&(i.stencil=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t.width,t.height),t.depthTexture||n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,i.stencil))},e.prototype.detectSamples=function(t){var n=this.msaaSamples,i=Ea.NONE;if(t<=1||n===null)return i;for(var s=0;s<n.length;s++)if(n[s]<=t){i=n[s];break}return i===1&&(i=Ea.NONE),i},e.prototype.blit=function(t,n,i){var s=this,a=s.current,o=s.renderer,u=s.gl,l=s.CONTEXT_UID;if(o.context.webGLVersion===2&&a){var h=a.glFramebuffers[l];if(h){if(!t){if(h.multisample<=1)return;h.blitFramebuffer||(h.blitFramebuffer=new bc(a.width,a.height),h.blitFramebuffer.addColorTexture(0,a.colorTextures[0])),t=h.blitFramebuffer,t.width=a.width,t.height=a.height}n||(n=iX,n.width=a.width,n.height=a.height),i||(i=n);var c=n.width===i.width&&n.height===i.height;this.bind(t),u.bindFramebuffer(u.READ_FRAMEBUFFER,h.framebuffer),u.blitFramebuffer(n.x,n.y,n.width,n.height,i.x,i.y,i.width,i.height,u.COLOR_BUFFER_BIT,c?u.NEAREST:u.LINEAR)}}},e.prototype.disposeFramebuffer=function(t,n){var i=t.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var a=this.managedFramebuffers.indexOf(t);a>=0&&this.managedFramebuffers.splice(a,1),t.disposeRunner.remove(this),n||(s.deleteFramebuffer(i.framebuffer),i.stencil&&s.deleteRenderbuffer(i.stencil))}},e.prototype.disposeAll=function(t){var n=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<n.length;i++)this.disposeFramebuffer(n[i],t)},e.prototype.forceStencil=function(){var t=this.current;if(t){var n=t.glFramebuffers[this.CONTEXT_UID];if(!(!n||n.stencil)){t.enableStencil();var i=t.width,s=t.height,a=this.gl,o=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,o),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,i,s),n.stencil=o,a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,o)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new ft},e}(Kt),sX=function(){function r(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return r}(),Kd={5126:4,5123:2,5121:1},MO=function(r){Te(e,r);function e(t){var n=r.call(this,t)||this;return n._activeGeometry=null,n._activeVao=null,n.hasVao=!0,n.hasInstance=!0,n.canUseUInt32ElementIndex=!1,n.managedGeometries={},n.managedBuffers={},n}return e.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,n=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,n.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;_e.PREFER_ENV===An.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(a){return i.bindVertexArrayOES(a)},t.deleteVertexArray=function(a){return i.deleteVertexArrayOES(a)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(n.webGLVersion!==2){var s=t.getExtension("ANGLE_instanced_arrays");s?(t.vertexAttribDivisor=function(a,o){return s.vertexAttribDivisorANGLE(a,o)},t.drawElementsInstanced=function(a,o,u,l,h){return s.drawElementsInstancedANGLE(a,o,u,l,h)},t.drawArraysInstanced=function(a,o,u,l){return s.drawArraysInstancedANGLE(a,o,u,l)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=n.webGLVersion===2||!!n.extensions.uint32ElementIndex},e.prototype.bind=function(t,n){n=n||this.renderer.shader.shader;var i=this.gl,s=t.glVertexArrayObjects[this.CONTEXT_UID],a=!1;s||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=s={},a=!0);var o=s[n.program.id]||this.initGeometryVao(t,n.program,a);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(t,n.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var t=this._activeGeometry,n=this.gl,i=0;i<t.buffers.length;i++){var s=t.buffers[i],a=s._glBuffers[this.CONTEXT_UID];if(s._updateID!==a.updateID){a.updateID=s._updateID;var o=s.index?n.ELEMENT_ARRAY_BUFFER:n.ARRAY_BUFFER;if(n.bindBuffer(o,a.buffer),this._boundBuffer=a,a.byteLength>=s.data.byteLength)n.bufferSubData(o,0,s.data);else{var u=s.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;a.byteLength=s.data.byteLength,n.bufferData(o,s.data,u)}}}},e.prototype.checkCompatibility=function(t,n){var i=t.attributes,s=n.attributeData;for(var a in s)if(!i[a])throw new Error('shader and geometry incompatible, geometry missing the "'+a+'" attribute')},e.prototype.getSignature=function(t,n){var i=t.attributes,s=n.attributeData,a=["g",t.id];for(var o in i)s[o]&&a.push(o);return a.join("-")},e.prototype.initGeometryVao=function(t,n,i){i===void 0&&(i=!0),this.checkCompatibility(t,n);var s=this.gl,a=this.CONTEXT_UID,o=this.getSignature(t,n),u=t.glVertexArrayObjects[this.CONTEXT_UID],l=u[o];if(l)return u[n.id]=l,l;var h=t.buffers,c=t.attributes,f={},p={};for(var v in h)f[v]=0,p[v]=0;for(var v in c)!c[v].size&&n.attributeData[v]?c[v].size=n.attributeData[v].size:c[v].size||console.warn("PIXI Geometry attribute '"+v+"' size cannot be determined (likely the bound shader does not have the attribute)"),f[c[v].buffer]+=c[v].size*Kd[c[v].type];for(var v in c){var g=c[v],m=g.size;g.stride===void 0&&(f[g.buffer]===m*Kd[g.type]?g.stride=0:g.stride=f[g.buffer]),g.start===void 0&&(g.start=p[g.buffer],p[g.buffer]+=m*Kd[g.type])}l=s.createVertexArray(),s.bindVertexArray(l);for(var y=0;y<h.length;y++){var x=h[y];x._glBuffers[a]||(x._glBuffers[a]=new sX(s.createBuffer()),this.managedBuffers[x.id]=x,x.disposeRunner.add(this)),i&&x._glBuffers[a].refCount++}return this.activateVao(t,n),this._activeVao=l,u[n.id]=l,u[o]=l,l},e.prototype.disposeBuffer=function(t,n){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],s=this.gl;t.disposeRunner.remove(this),i&&(n||s.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeGeometry=function(t,n){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var i=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,a=t.buffers;if(t.disposeRunner.remove(this),!!i){for(var o=0;o<a.length;o++){var u=a[o]._glBuffers[this.CONTEXT_UID];u.refCount--,u.refCount===0&&!n&&this.disposeBuffer(a[o],n)}if(!n){for(var l in i)if(l[0]==="g"){var h=i[l];this._activeVao===h&&this.unbind(),s.deleteVertexArray(h)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(t){for(var n=Object.keys(this.managedGeometries),i=0;i<n.length;i++)this.disposeGeometry(this.managedGeometries[n[i]],t);n=Object.keys(this.managedBuffers);for(var i=0;i<n.length;i++)this.disposeBuffer(this.managedBuffers[n[i]],t)},e.prototype.activateVao=function(t,n){var i=this.gl,s=this.CONTEXT_UID,a=t.buffers,o=t.attributes;t.indexBuffer&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[s].buffer);var u=null;for(var l in o){var h=o[l],c=a[h.buffer],f=c._glBuffers[s];if(n.attributeData[l]){u!==f&&(i.bindBuffer(i.ARRAY_BUFFER,f.buffer),u=f);var p=n.attributeData[l].location;if(i.enableVertexAttribArray(p),i.vertexAttribPointer(p,h.size,h.type||i.FLOAT,h.normalized,h.stride,h.start),h.instance)if(this.hasInstance)i.vertexAttribDivisor(p,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},e.prototype.draw=function(t,n,i,s){var a=this.gl,o=this._activeGeometry;if(o.indexBuffer){var u=o.indexBuffer.data.BYTES_PER_ELEMENT,l=u===2?a.UNSIGNED_SHORT:a.UNSIGNED_INT;u===2||u===4&&this.canUseUInt32ElementIndex?o.instanced?a.drawElementsInstanced(t,n||o.indexBuffer.data.length,l,(i||0)*u,s||1):a.drawElements(t,n||o.indexBuffer.data.length,l,(i||0)*u):console.warn("unsupported index buffer type: uint32")}else o.instanced?a.drawArraysInstanced(t,i,n||o.getSize(),s||1):a.drawArrays(t,i,n||o.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e}(Kt),DO=function(){function r(e){e===void 0&&(e=null),this.type=Zt.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return r.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Zt.NONE,this.autoDetect=!0),this._target=null},r.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},r}();function J1(r,e,t){var n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}function LO(r,e,t,n){var i=J1(r,r.VERTEX_SHADER,e),s=J1(r,r.FRAGMENT_SHADER,t),a=r.createProgram();if(r.attachShader(a,i),r.attachShader(a,s),n)for(var o in n)r.bindAttribLocation(a,n[o],o);return r.linkProgram(a),r.getProgramParameter(a,r.LINK_STATUS)||(r.getShaderParameter(i,r.COMPILE_STATUS)||(console.warn(e),console.error(r.getShaderInfoLog(i))),r.getShaderParameter(s,r.COMPILE_STATUS)||(console.warn(t),console.error(r.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",r.getProgramParameter(a,r.VALIDATE_STATUS)),console.error("gl.getError()",r.getError()),r.getProgramInfoLog(a)!==""&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(a)),r.deleteProgram(a),a=null),r.deleteShader(i),r.deleteShader(s),a}function Jd(r){for(var e=new Array(r),t=0;t<e.length;t++)e[t]=!1;return e}function NO(r,e){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return Jd(2*e);case"bvec3":return Jd(3*e);case"bvec4":return Jd(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var FO={},so=FO;function BO(){if(so===FO||so&&so.isContextLost()){var r=document.createElement("canvas"),e=void 0;_e.PREFER_ENV>=An.WEBGL2&&(e=r.getContext("webgl2",{})),e||(e=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),so=e}return so}var rh;function aX(){if(!rh){rh=Jr.MEDIUM;var r=BO();if(r&&r.getShaderPrecisionFormat){var e=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);rh=e.precision?Jr.HIGH:Jr.MEDIUM}}return rh}function Z1(r,e,t){if(r.substring(0,9)!=="precision"){var n=e;return e===Jr.HIGH&&t!==Jr.HIGH&&(n=Jr.MEDIUM),"precision "+n+` float;
`+r}else if(t!==Jr.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var oX={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function uX(r){return oX[r]}var nh=null,Q1={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function eb(r,e){if(!nh){var t=Object.keys(Q1);nh={};for(var n=0;n<t.length;++n){var i=t[n];nh[r[i]]=Q1[i]}}return nh[e]}var Ch=[{test:function(r){return r.type==="float"&&r.size===1},code:function(r){return`
            if(uv["`+r+'"] !== ud["'+r+`"].value)
            {
                ud["`+r+'"].value = uv["'+r+`"]
                gl.uniform1f(ud["`+r+'"].location, uv["'+r+`"])
            }
            `}},{test:function(r){return(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray},code:function(r){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+r+`"], t);

            if(ud["`+r+`"].value !== t)
            {
                ud["`+r+`"].value = t;
                gl.uniform1i(ud["`+r+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(r,e){return r.type==="mat3"&&r.size===1&&e.a!==void 0},code:function(r){return`
            gl.uniformMatrix3fv(ud["`+r+'"].location, false, uv["'+r+`"].toArray(true));
            `}},{test:function(r,e){return r.type==="vec2"&&r.size===1&&e.x!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+r+`"].location, v.x, v.y);
                }`}},{test:function(r){return r.type==="vec2"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+r+`"].location, v[0], v[1]);
                }
            `}},{test:function(r,e){return r.type==="vec4"&&r.size===1&&e.width!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+r+`"].location, v.x, v.y, v.width, v.height)
                }`}},{test:function(r){return r.type==="vec4"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+r+`"].location, v[0], v[1], v[2], v[3])
                }`}}],lX={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},hX={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function cX(r,e){var t=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var n in r.uniforms){var i=e[n];if(!i){r.uniforms[n].group&&t.push(`
                    renderer.shader.syncUniformGroup(uv["`+n+`"], syncData);
                `);continue}for(var s=r.uniforms[n],a=!1,o=0;o<Ch.length;o++)if(Ch[o].test(i,s)){t.push(Ch[o].code(n,s)),a=!0;break}if(!a){var u=i.size===1?lX:hX,l=u[i.type].replace("location",'ud["'+n+'"].location');t.push(`
            cv = ud["`+n+`"].value;
            v = uv["`+n+`"];
            `+l+";")}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}var fX=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function dX(r){for(var e="",t=0;t<r;++t)t>0&&(e+=`
else `),t<r-1&&(e+="if(test == "+t+".0){}");return e}function UO(r,e){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var t=e.createShader(e.FRAGMENT_SHADER);;){var n=fX.replace(/%forloop%/gi,dX(r));if(e.shaderSource(t,n),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))r=r/2|0;else break}return r}var ao;function pX(){if(typeof ao=="boolean")return ao;try{var r=new Function("param1","param2","param3","return param1[param2] === param3;");ao=r({a:"b"},"a","b")===!0}catch{ao=!1}return ao}var vX=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,mX=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,gX=0,ih={},af=function(){function r(e,t,n){n===void 0&&(n="pixi-shader"),this.id=gX++,this.vertexSrc=e||r.defaultVertexSrc,this.fragmentSrc=t||r.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),ih[n]?(ih[n]++,n+="-"+ih[n]):ih[n]=1,this.vertexSrc="#define SHADER_NAME "+n+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+n+`
`+this.fragmentSrc,this.vertexSrc=Z1(this.vertexSrc,_e.PRECISION_VERTEX,Jr.HIGH),this.fragmentSrc=Z1(this.fragmentSrc,_e.PRECISION_FRAGMENT,aX())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return r.prototype.extractData=function(e,t){var n=BO();if(n){var i=LO(n,e,t);this.attributeData=this.getAttributeData(i,n),this.uniformData=this.getUniformData(i,n),n.deleteProgram(i)}else this.uniformData={},this.attributeData={}},r.prototype.getAttributeData=function(e,t){for(var n={},i=[],s=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<s;a++){var o=t.getActiveAttrib(e,a),u=eb(t,o.type),l={type:u,name:o.name,size:uX(u),location:0};n[o.name]=l,i.push(l)}i.sort(function(h,c){return h.name>c.name?1:-1});for(var a=0;a<i.length;a++)i[a].location=a;return n},r.prototype.getUniformData=function(e,t){for(var n={},i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),s=0;s<i;s++){var a=t.getActiveUniform(e,s),o=a.name.replace(/\[.*?\]$/,""),u=a.name.match(/\[.*?\]$/),l=eb(t,a.type);n[o]={type:l,size:a.size,isArray:u,value:NO(l,a.size)}}return n},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return mX},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return vX},enumerable:!1,configurable:!0}),r.from=function(e,t,n){var i=e+t,s=Uy[i];return s||(Uy[i]=s=new r(e,t,n)),s},r}(),ux=function(){function r(e,t){this.program=e,t?t instanceof ss?this.uniformGroup=t:this.uniformGroup=new ss(t):this.uniformGroup=new ss({});for(var n in e.uniformData)this.uniformGroup.uniforms[n]instanceof Array&&(this.uniformGroup.uniforms[n]=new Float32Array(this.uniformGroup.uniforms[n]))}return r.prototype.checkUniformExists=function(e,t){if(t.uniforms[e])return!0;for(var n in t.uniforms){var i=t.uniforms[n];if(i.group&&this.checkUniformExists(e,i))return!0}return!1},r.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),r.from=function(e,t,n){var i=af.from(e,t);return new r(i,n)},r}(),Zd=0,Qd=1,ep=2,tp=3,rp=4,of=function(){function r(){this.data=0,this.blendMode=ce.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(r.prototype,"blend",{get:function(){return!!(this.data&1<<Zd)},set:function(e){!!(this.data&1<<Zd)!==e&&(this.data^=1<<Zd)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"offsets",{get:function(){return!!(this.data&1<<Qd)},set:function(e){!!(this.data&1<<Qd)!==e&&(this.data^=1<<Qd)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"culling",{get:function(){return!!(this.data&1<<ep)},set:function(e){!!(this.data&1<<ep)!==e&&(this.data^=1<<ep)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTest",{get:function(){return!!(this.data&1<<tp)},set:function(e){!!(this.data&1<<tp)!==e&&(this.data^=1<<tp)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<rp)},set:function(e){!!(this.data&1<<rp)!==e&&(this.data^=1<<rp)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==ce.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),r.for2d=function(){var e=new r;return e.depthTest=!1,e.blend=!0,e},r}(),yX=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,_X=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,kO=function(r){Te(e,r);function e(t,n,i){var s=this,a=af.from(t||e.defaultVertexSrc,n||e.defaultFragmentSrc);return s=r.call(this,a,i)||this,s.padding=0,s.resolution=_e.FILTER_RESOLUTION,s.enabled=!0,s.autoFit=!0,s.legacy=!!s.program.attributeData.aTextureCoord,s.state=new of,s}return e.prototype.apply=function(t,n,i,s,a){t.applyFilter(this,n,i,s)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return yX},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return _X},enumerable:!1,configurable:!0}),e}(ux),xX=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,TX=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,tb=new Er,GO=function(){function r(e,t){this._texture=e,this.mapCoord=new Er,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}return Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),r.prototype.multiplyUvs=function(e,t){t===void 0&&(t=e);for(var n=this.mapCoord,i=0;i<e.length;i+=2){var s=e[i],a=e[i+1];t[i]=s*n.a+a*n.c+n.tx,t[i+1]=s*n.b+a*n.d+n.ty}return t},r.prototype.update=function(e){var t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var n=t._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var i=t.orig,s=t.trim;s&&(tb.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(tb));var a=t.baseTexture,o=this.uClampFrame,u=this.clampMargin/a.resolution,l=this.clampOffset;return o[0]=(t._frame.x+u+l)/a.width,o[1]=(t._frame.y+u+l)/a.height,o[2]=(t._frame.x+t._frame.width-u+l)/a.width,o[3]=(t._frame.y+t._frame.height-u+l)/a.height,this.uClampOffset[0]=l/a.realWidth,this.uClampOffset[1]=l/a.realHeight,this.isSimple=t._frame.width===a.width&&t._frame.height===a.height&&t.rotate===0,!0},r}(),jO=function(r){Te(e,r);function e(t){var n=this,i=new Er;return n=r.call(this,xX,TX)||this,t.renderable=!1,n.maskSprite=t,n.maskMatrix=i,n}return e.prototype.apply=function(t,n,i,s){var a=this.maskSprite,o=a._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new GO(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,a).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,n,i,s))},e}(kO),HO=function(r){Te(e,r);function e(t){var n=r.call(this,t)||this;return n.enableScissor=!1,n.alphaMaskPool=[],n.maskDataPool=[],n.maskStack=[],n.alphaMaskIndex=0,n}return e.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},e.prototype.push=function(t,n){var i=n;if(!i.isMaskData){var s=this.maskDataPool.pop()||new DO;s.pooled=!0,s.maskObject=n,i=s}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case Zt.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case Zt.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case Zt.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i);break}},e.prototype.pop=function(t){var n=this.maskStack.pop();if(!(!n||n._target!==t)){switch(n.type){case Zt.SCISSOR:this.renderer.scissor.pop();break;case Zt.STENCIL:this.renderer.stencil.pop(n.maskObject);break;case Zt.SPRITE:this.popSpriteMask();break}n.reset(),n.pooled&&this.maskDataPool.push(n)}},e.prototype.detect=function(t){var n=t.maskObject;if(n.isSprite){t.type=Zt.SPRITE;return}if(t.type=Zt.STENCIL,this.enableScissor&&n.isFastRect&&n.isFastRect()){var i=n.worldTransform,s=Math.atan2(i.b,i.a),a=Math.atan2(i.d,i.c);s=Math.round(s*(180/Math.PI)*100),a=Math.round(a*(180/Math.PI)*100)-s,s=(s%9e3+9e3)%9e3,a=(a%18e3+18e3)%18e3,s===0&&a===9e3&&(t.type=Zt.SCISSOR)}},e.prototype.pushSpriteMask=function(t){var n=t.maskObject,i=t._target,s=this.alphaMaskPool[this.alphaMaskIndex];s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new jO(n)]),s[0].resolution=this.renderer.resolution,s[0].maskSprite=n;var a=i.filterArea;i.filterArea=n.getBounds(!0),this.renderer.filter.push(i,s),i.filterArea=a,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},e}(Kt),VO=function(r){Te(e,r);function e(t){var n=r.call(this,t)||this;return n.maskStack=[],n.glConst=0,n}return e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(t){var n=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var s=this.getStackLength();s!==i&&(s===0?n.disable(this.glConst):(n.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.maskStack=null},e}(Kt),zO=function(r){Te(e,r);function e(t){var n=r.call(this,t)||this;return n.glConst=WebGLRenderingContext.SCISSOR_TEST,n}return e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.push=function(t){var n=t.maskObject;n.renderable=!0;var i=t._scissorRect,s=n.getBounds(!0),a=this.renderer.gl;n.renderable=!1,i?s.fit(i):a.enable(a.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=s,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,n=this.renderer.renderTexture.current,i=this.renderer.projection,s=i.transform,a=i.sourceFrame,o=i.destinationFrame,u=n?n.resolution:this.renderer.resolution,l=(t.x-a.x)*u+o.x,h=(t.y-a.y)*u+o.y,c=t.width*u,f=t.height*u;s&&(l+=s.tx*u,h+=s.ty*u),n||(h=this.renderer.height-f-h),this.renderer.gl.scissor(l,h,c,f)},e}(VO),XO=function(r){Te(e,r);function e(t){var n=r.call(this,t)||this;return n.glConst=WebGLRenderingContext.STENCIL_TEST,n}return e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var n=t.maskObject,i=this.renderer.gl,s=t._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),i.enable(i.STENCIL_TEST)),t._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,s,this._getBitwiseMask()),i.stencilOp(i.KEEP,i.KEEP,i.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var n=this.renderer.gl;this.getStackLength()===0?(n.disable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),n.clearStencil(0)):(n.colorMask(!1,!1,!1,!1),n.stencilOp(n.KEEP,n.KEEP,n.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},e}(VO),$O=function(r){Te(e,r);function e(t){var n=r.call(this,t)||this;return n.destinationFrame=null,n.sourceFrame=null,n.defaultFrame=null,n.projectionMatrix=new Er,n.transform=null,n}return e.prototype.update=function(t,n,i,s){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=n||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,s),this.transform&&this.projectionMatrix.append(this.transform);var a=this.renderer;a.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,a.globalUniforms.update(),a.shader.shader&&a.shader.syncUniformGroup(a.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(t,n,i,s){var a=this.projectionMatrix,o=s?-1:1;a.identity(),a.a=1/n.width*2,a.d=o*(1/n.height*2),a.tx=-1-n.x*a.a,a.ty=-o-n.y*a.d},e.prototype.setTransform=function(t){},e}(Kt),Oi=new ft,oo=new ft,uo=new ft,WO=function(r){Te(e,r);function e(t){var n=r.call(this,t)||this;return n.clearColor=t._backgroundColorRgba,n.defaultMaskStack=[],n.current=null,n.sourceFrame=new ft,n.destinationFrame=new ft,n}return e.prototype.bind=function(t,n,i){t===void 0&&(t=null);var s=this.renderer;this.current=t;var a,o,u;t?(a=t.baseTexture,u=a.resolution,n||(Oi.width=t.frame.width,Oi.height=t.frame.height,n=Oi),i||(oo.x=t.frame.x,oo.y=t.frame.y,oo.width=n.width,oo.height=n.height,i=oo),o=a.framebuffer):(u=s.resolution,n||(Oi.width=s.screen.width,Oi.height=s.screen.height,n=Oi),i||(i=Oi,i.width=n.width,i.height=n.height)),uo.x=i.x*u,uo.y=i.y*u,uo.width=i.width*u,uo.height=i.height*u,this.renderer.framebuffer.bind(o,uo),this.renderer.projection.update(i,n,u,!o),t?this.renderer.mask.setMaskStack(a.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(n),this.destinationFrame.copyFrom(i)},e.prototype.clear=function(t,n){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor,this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],n)},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e}(Kt),EX=function(){function r(){}return r}(),YO=function(){function r(e,t){this.program=e,this.uniformData=t,this.uniformGroups={}}return r.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},r}(),bX=0,rb={textureCount:0},qO=function(r){Te(e,r);function e(t){var n=r.call(this,t)||this;return n.destroyed=!1,n.systemCheck(),n.gl=null,n.shader=null,n.program=null,n.cache={},n.id=bX++,n}return e.prototype.systemCheck=function(){if(!pX())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(t){this.gl=t,this.reset()},e.prototype.bind=function(t,n){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,s=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(s.program)),n||(rb.textureCount=0,this.syncUniformGroup(t.uniformGroup,rb)),s},e.prototype.setUniforms=function(t){var n=this.shader.program,i=n.glPrograms[this.renderer.CONTEXT_UID];n.syncUniforms(i.uniformData,t,this.renderer)},e.prototype.syncUniformGroup=function(t,n){var i=this.getglProgram();(!t.static||t.dirtyId!==i.uniformGroups[t.id])&&(i.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,n))},e.prototype.syncUniforms=function(t,n,i){var s=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);s(n.uniformData,t.uniforms,this.renderer,i)},e.prototype.createSyncGroups=function(t){var n=this.getSignature(t,this.shader.program.uniformData);return this.cache[n]||(this.cache[n]=cX(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[n],t.syncUniforms[this.shader.program.id]},e.prototype.getSignature=function(t,n){var i=t.uniforms,s=[];for(var a in i)s.push(a),n[a]&&s.push(n[a].type);return s.join("-")},e.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateShader=function(t){var n=this.gl,i=t.program,s={};for(var a in i.attributeData)s[a]=i.attributeData[a].location;var o=LO(n,i.vertexSrc,i.fragmentSrc,s),u={};for(var a in i.uniformData){var l=i.uniformData[a];u[a]={location:n.getUniformLocation(o,a),value:NO(l.type,l.size)}}var h=new YO(o,u);return i.glPrograms[this.renderer.CONTEXT_UID]=h,h},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.destroyed=!0},e}(Kt);function SX(r,e){return e===void 0&&(e=[]),e[ce.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[ce.ADD]=[r.ONE,r.ONE],e[ce.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[ce.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[ce.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[ce.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[ce.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[ce.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[ce.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[ce.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[ce.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[ce.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[ce.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[ce.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[ce.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[ce.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[ce.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[ce.NONE]=[0,0],e[ce.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[ce.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],e[ce.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[ce.SRC_IN]=[r.DST_ALPHA,r.ZERO],e[ce.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],e[ce.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[ce.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],e[ce.DST_IN]=[r.ZERO,r.SRC_ALPHA],e[ce.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],e[ce.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],e[ce.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[ce.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],e}var wX=0,CX=1,IX=2,PX=3,AX=4,KO=function(r){Te(e,r);function e(t){var n=r.call(this,t)||this;return n.gl=null,n.stateId=0,n.polygonOffset=0,n.blendMode=ce.NONE,n._blendEq=!1,n.map=[],n.map[wX]=n.setBlend,n.map[CX]=n.setOffset,n.map[IX]=n.setCullFace,n.map[PX]=n.setDepthTest,n.map[AX]=n.setFrontFace,n.checks=[],n.defaultState=new of,n.defaultState.blend=!0,n}return e.prototype.contextChange=function(t){this.gl=t,this.blendModes=SX(t),this.set(this.defaultState),this.reset()},e.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var n=this.stateId^t.data,i=0;n;)n&1&&this.map[i].call(this,!!(t.data&1<<i)),n=n>>1,i++;this.stateId=t.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,t)},e.prototype.forceState=function(t){t=t||this.defaultState;for(var n=0;n<this.map.length;n++)this.map[n].call(this,!!(t.data&1<<n));for(var n=0;n<this.checks.length;n++)this.checks[n](this,t);this.stateId=t.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var n=this.blendModes[t],i=this.gl;n.length===2?i.blendFunc(n[0],n[1]):i.blendFuncSeparate(n[0],n[1],n[2],n[3]),n.length===6?(this._blendEq=!0,i.blendEquationSeparate(n[4],n[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},e.prototype.setPolygonOffset=function(t,n){this.gl.polygonOffset(t,n)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(t,n){var i=this.checks.indexOf(t);n&&i===-1?this.checks.push(t):!n&&i!==-1&&this.checks.splice(i,1)},e.checkBlendMode=function(t,n){t.setBlendMode(n.blendMode)},e.checkPolygonOffset=function(t,n){t.setPolygonOffset(1,n.polygonOffset)},e}(Kt),JO=function(r){Te(e,r);function e(t){var n=r.call(this,t)||this;return n.count=0,n.checkCount=0,n.maxIdle=_e.GC_MAX_IDLE,n.checkCountMax=_e.GC_MAX_CHECK_COUNT,n.mode=_e.GC_MODE,n}return e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==Ly.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var t=this.renderer.texture,n=t.managedTextures,i=!1,s=0;s<n.length;s++){var a=n[s];!a.framebuffer&&this.count-a.touched>this.maxIdle&&(t.destroyTexture(a,!0),n[s]=null,i=!0)}if(i){for(var o=0,s=0;s<n.length;s++)n[s]!==null&&(n[o++]=n[s]);n.length=o}},e.prototype.unload=function(t){var n=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&n.destroyTexture(i);for(var s=t.children.length-1;s>=0;s--)this.unload(t.children[s])},e}(Kt),Ih=function(){function r(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121}return r}(),ZO=function(r){Te(e,r);function e(t){var n=r.call(this,t)||this;return n.boundTextures=[],n.currentLocation=-1,n.managedTextures=[],n._unknownBoundTextures=!1,n.unknownTexture=new Mt,n}return e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var n=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=n;for(var i=0;i<n;i++)this.boundTextures[i]=null;this.emptyTextures={};var s=new Ih(t.createTexture());t.bindTexture(t.TEXTURE_2D,s.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=s,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Ih(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},e.prototype.bind=function(t,n){n===void 0&&(n=0);var i=this.gl;if(t){if(t=t.castToBaseTexture(),t.parentTextureArray)return;if(t.valid){t.touched=this.renderer.textureGC.count;var s=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[n]!==t&&(this.currentLocation!==n&&(this.currentLocation=n,i.activeTexture(i.TEXTURE0+n)),i.bindTexture(t.target,s.texture)),s.dirtyId!==t.dirtyId&&(this.currentLocation!==n&&(this.currentLocation=n,i.activeTexture(i.TEXTURE0+n)),this.updateTexture(t)),this.boundTextures[n]=t}}else this.currentLocation!==n&&(this.currentLocation=n,i.activeTexture(i.TEXTURE0+n)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[n]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},e.prototype.unbind=function(t){var n=this,i=n.gl,s=n.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var a=0;a<s.length;a++)s[a]===this.unknownTexture&&this.bind(null,a)}for(var a=0;a<s.length;a++)s[a]===t&&(this.currentLocation!==a&&(i.activeTexture(i.TEXTURE0+a),this.currentLocation=a),i.bindTexture(t.target,this.emptyTextures[t.target].texture),s[a]=null)},e.prototype.initTexture=function(t){var n=new Ih(this.gl.createTexture());return n.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=n,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),n},e.prototype.initTextureType=function(t,n){if(n.internalFormat=t.format,n.type=t.type,this.webGLVersion===2){var i=this.renderer.gl;t.type===i.FLOAT&&t.format===i.RGBA&&(n.internalFormat=i.RGBA32F),t.type===Dr.HALF_FLOAT&&(n.type=i.HALF_FLOAT),n.type===i.HALF_FLOAT&&t.format===i.RGBA&&(n.internalFormat=i.RGBA16F)}},e.prototype.updateTexture=function(t){var n=t._glTextures[this.CONTEXT_UID];if(n){var i=this.renderer;if(this.initTextureType(t,n),!(t.resource&&t.resource.upload(i,t,n))){var s=t.realWidth,a=t.realHeight,o=i.gl;(n.width!==s||n.height!==a||n.dirtyId<0)&&(n.width=s,n.height=a,o.texImage2D(t.target,0,n.internalFormat,s,a,0,t.format,n.type,null))}t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId}},e.prototype.destroyTexture=function(t,n){var i=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!n)){var s=this.managedTextures.indexOf(t);s!==-1&&Fo(this.managedTextures,s,1)}},e.prototype.updateTextureStyle=function(t){var n=t._glTextures[this.CONTEXT_UID];n&&((t.mipmap===Pu.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?n.mipmap=!1:n.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?n.wrapMode=Dy.CLAMP:n.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,n)||this.setStyle(t,n),n.dirtyStyleId=t.dirtyStyleId)},e.prototype.setStyle=function(t,n){var i=this.gl;if(n.mipmap&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,n.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,n.wrapMode),n.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===Tn.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var s=this.renderer.context.extensions.anisotropicFiltering;if(s&&t.anisotropicLevel>0&&t.scaleMode===Tn.LINEAR){var a=Math.min(t.anisotropicLevel,i.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,s.TEXTURE_MAX_ANISOTROPY_EXT,a)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===Tn.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===Tn.LINEAR?i.LINEAR:i.NEAREST)},e}(Kt),RX={FilterSystem:IO,BatchSystem:PO,ContextSystem:AO,FramebufferSystem:OO,GeometrySystem:MO,MaskSystem:HO,ScissorSystem:zO,StencilSystem:XO,ProjectionSystem:$O,RenderTextureSystem:WO,ShaderSystem:qO,StateSystem:KO,TextureGCSystem:JO,TextureSystem:ZO},np=new Er,QO=function(r){Te(e,r);function e(t,n){t===void 0&&(t=wu.UNKNOWN);var i=r.call(this)||this;return n=Object.assign({},_e.RENDER_OPTIONS,n),n.roundPixels&&(_e.ROUND_PIXELS=n.roundPixels,ex("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),i.options=n,i.type=t,i.screen=new ft(0,0,n.width,n.height),i.view=n.view||document.createElement("canvas"),i.resolution=n.resolution||_e.RESOLUTION,i.transparent=n.transparent,i.autoDensity=n.autoDensity||n.autoResize||!1,i.preserveDrawingBuffer=n.preserveDrawingBuffer,i.clearBeforeRender=n.clearBeforeRender,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,0],i._backgroundColorString="#000000",i.backgroundColor=n.backgroundColor||i._backgroundColor,i._lastObjectRendered=null,i.plugins={},i}return e.prototype.initPlugins=function(t){for(var n in t)this.plugins[n]=new t[n](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,n){this.screen.width=t,this.screen.height=n,this.view.width=t*this.resolution,this.view.height=n*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=n+"px"),this.emit("resize",t,n)},e.prototype.generateTexture=function(t,n,i,s){s=s||t.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var a=ax.create({width:s.width|0,height:s.height|0,scaleMode:n,resolution:i});return np.tx=-s.x,np.ty=-s.y,this.render(t,a,!1,np,!!t.parent),a},e.prototype.destroy=function(t){for(var n in this.plugins)this.plugins[n].destroy(),this.plugins[n]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var i=this;i.plugins=null,i.type=wu.UNKNOWN,i.view=null,i.screen=null,i._tempDisplayObjectParent=null,i.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=oO(t),aO(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),e}(jr),eM=function(r){Te(e,r);function e(t){var n=r.call(this,wu.WEBGL,t)||this;return t=n.options,n.gl=null,n.CONTEXT_UID=0,n.runners={destroy:new Rt("destroy"),contextChange:new Rt("contextChange"),reset:new Rt("reset"),update:new Rt("update"),postrender:new Rt("postrender"),prerender:new Rt("prerender"),resize:new Rt("resize")},n.globalUniforms=new ss({projectionMatrix:new Er},!0),n.addSystem(HO,"mask").addSystem(AO,"context").addSystem(KO,"state").addSystem(qO,"shader").addSystem(ZO,"texture").addSystem(MO,"geometry").addSystem(OO,"framebuffer").addSystem(zO,"scissor").addSystem(XO,"stencil").addSystem($O,"projection").addSystem(JO,"textureGC").addSystem(IO,"filter").addSystem(WO,"renderTexture").addSystem(PO,"batch"),n.initPlugins(e.__plugins),t.context?n.context.initFromContext(t.context):n.context.initFromOptions({alpha:!!n.transparent,antialias:t.antialias,premultipliedAlpha:n.transparent&&n.transparent!=="notMultiplied",stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:n.options.powerPreference}),n.renderingToScreen=!0,iO(n.context.webGLVersion===2?"WebGL 2":"WebGL 1"),n.resize(n.options.width,n.options.height),n}return e.create=function(t){if(sO())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.addSystem=function(t,n){n||(n=t.name);var i=new t(this);if(this[n])throw new Error('Whoops! The name "'+n+'" is already in use');this[n]=i;for(var s in this.runners)this.runners[s].add(i);return this},e.prototype.render=function(t,n,i,s,a){if(this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=s,!this.context.isLost){if(n||(this._lastObjectRendered=t),!a){var o=t.enableTempParent();t.updateTransform(),t.disableTempParent(o)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(i!==void 0?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.resize=function(t,n){r.prototype.resize.call(this,t,n),this.runners.resize.emit(t,n)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(t){this.runners.destroy.emit();for(var n in this.runners)this.runners[n].destroy();r.prototype.destroy.call(this,t),this.gl=null},e.registerPlugin=function(t,n){e.__plugins=e.__plugins||{},e.__plugins[t]=n},e}(QO);function OX(r){return eM.create(r)}var MX=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,DX=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,tM=function(){function r(){this.texArray=null,this.blend=0,this.type=Cu.TRIANGLES,this.start=0,this.size=0,this.data=null}return r}(),rM=function(){function r(){this.elements=[],this.ids=[],this.count=0}return r.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},r}(),nM=function(){function r(e){this.rawBinaryData=new ArrayBuffer(e),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(r.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),r.prototype.view=function(e){return this[e+"View"]},r.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},r.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},r}(),iM=function(r){Te(e,r);function e(t){var n=r.call(this,t)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=of.for2d(),n.size=_e.SPRITE_BATCH_SIZE*4,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),t.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return e.prototype.contextChange=function(){var t=this.renderer.gl;_e.PREFER_ENV===An.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),_e.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=UO(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var n=0;n<this._packedGeometryPoolSize;n++)this._packedGeometries[n]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,n=e._textureArrayPool,i=this.size/4,s=Math.floor(i/this.MAX_TEXTURES)+1;t.length<i;)t.push(new tM);for(;n.length<s;)n.push(new rM);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this,n=t._bufferedTextures,i=t.MAX_TEXTURES,s=e._textureArrayPool,a=this.renderer.batch,o=this._tempBoundTextures,u=this.renderer.textureGC.count,l=++Mt._globalBatch,h=0,c=s[0],f=0;a.copyBoundTextures(o,i);for(var p=0;p<this._bufferSize;++p){var v=n[p];n[p]=null,v._batchEnabled!==l&&(c.count>=i&&(a.boundArray(c,o,l,i),this.buildDrawCalls(c,f,p),f=p,c=s[++h],++l),v._batchEnabled=l,v.touched=u,c.elements[c.count++]=v)}c.count>0&&(a.boundArray(c,o,l,i),this.buildDrawCalls(c,f,this._bufferSize),++h,++l);for(var p=0;p<o.length;p++)o[p]=null;Mt._globalBatch=l},e.prototype.buildDrawCalls=function(t,n,i){var s=this,a=s._bufferedElements,o=s._attributeBuffer,u=s._indexBuffer,l=s.vertexSize,h=e._drawCallPool,c=this._dcIndex,f=this._aIndex,p=this._iIndex,v=h[c];v.start=this._iIndex,v.texArray=t;for(var g=n;g<i;++g){var m=a[g],y=m._texture.baseTexture,x=Q0[y.alphaMode?1:0][m.blendMode];a[g]=null,n<g&&v.blend!==x&&(v.size=p-v.start,n=g,v=h[++c],v.texArray=t,v.start=p),this.packInterleavedGeometry(m,o,u,f,p),f+=m.vertexData.length/2*l,p+=m.indices.length,v.blend=x}n<i&&(v.size=p-v.start,++c),this._dcIndex=c,this._aIndex=f,this._iIndex=p},e.prototype.bindAndClearTexArray=function(t){for(var n=this.renderer.texture,i=0;i<t.count;i++)n.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this,n=t._packedGeometries,i=t._attributeBuffer,s=t._indexBuffer;_e.CAN_UPLOAD_SAME_BUFFER?(n[this._flushId]._buffer.update(i.rawBinaryData),n[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,n[this._flushId]=new this.geometryClass),n[this._flushId]._buffer.update(i.rawBinaryData),n[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(n[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,n=this.renderer,i=n.gl,s=n.state,a=e._drawCallPool,o=null,u=0;u<t;u++){var l=a[u],h=l.texArray,c=l.type,f=l.size,p=l.start,v=l.blend;o!==h&&(o=h,this.bindAndClearTexArray(h)),this.state.blendMode=v,s.set(this.state),i.drawElements(c,f,i.UNSIGNED_SHORT,p*2)}},e.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),_e.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),r.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var n=Au(Math.ceil(t/8)),i=By(n),s=n*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var a=this._aBuffers[s];return a||(this._aBuffers[s]=a=new nM(s*this.vertexSize*4)),a},e.prototype.getIndexBuffer=function(t){var n=Au(Math.ceil(t/12)),i=By(n),s=n*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var a=this._iBuffers[i];return a||(this._iBuffers[i]=a=new Uint16Array(s)),a},e.prototype.packInterleavedGeometry=function(t,n,i,s,a){for(var o=n.uint32View,u=n.float32View,l=s/this.vertexSize,h=t.uvs,c=t.indices,f=t.vertexData,p=t._texture.baseTexture._batchLocation,v=Math.min(t.worldAlpha,1),g=v<1&&t._texture.baseTexture.alphaMode?uO(t._tintRGB,v):t._tintRGB+(v*255<<24),m=0;m<f.length;m+=2)u[s++]=f[m],u[s++]=f[m+1],u[s++]=h[m],u[s++]=h[m+1],o[s++]=g,u[s++]=p;for(var m=0;m<c.length;m++)i[a++]=l+c[m]},e._drawCallPool=[],e._textureArrayPool=[],e}(ox),sM=function(){function r(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return r.prototype.generateShader=function(e){if(!this.programCache[e]){for(var t=new Int32Array(e),n=0;n<e;n++)t[n]=n;this.defaultGroupCache[e]=ss.from({uSamplers:t},!0);var i=this.fragTemplate;i=i.replace(/%count%/gi,""+e),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new af(this.vertexSrc,i)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new Er,default:this.defaultGroupCache[e]};return new ux(this.programCache[e],s)},r.prototype.generateSampleSrc=function(e){var t="";t+=`
`,t+=`
`;for(var n=0;n<e;n++)n>0&&(t+=`
else `),n<e-1&&(t+="if(vTextureId < "+n+".5)"),t+=`
{`,t+=`
	color = texture2D(uSamplers[`+n+"], vTextureCoord);",t+=`
}`;return t+=`
`,t+=`
`,t},r}(),aM=function(r){Te(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this)||this;return n._buffer=new lr(null,t,!1),n._indexBuffer=new lr(null,t,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,Dr.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,Dr.FLOAT).addAttribute("aColor",n._buffer,4,!0,Dr.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,Dr.FLOAT).addIndex(n._indexBuffer),n}return e}(sf),nb=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,ib=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,oM=function(){function r(){}return r.create=function(e){var t=Object.assign({vertex:nb,fragment:ib,geometryClass:aM,vertexSize:6},e),n=t.vertex,i=t.fragment,s=t.vertexSize,a=t.geometryClass;return function(o){Te(u,o);function u(l){var h=o.call(this,l)||this;return h.shaderGenerator=new sM(n,i),h.geometryClass=a,h.vertexSize=s,h}return u}(iM)},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return nb},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentTemplate",{get:function(){return ib},enumerable:!1,configurable:!0}),r}(),LX=oM.create();const NX=Object.freeze(Object.defineProperty({__proto__:null,AbstractBatchRenderer:iM,AbstractRenderer:QO,Attribute:Hy,BaseRenderTexture:Bo,BaseTexture:Mt,BatchDrawCall:tM,BatchGeometry:aM,BatchPluginFactory:oM,BatchRenderer:LX,BatchShaderGenerator:sM,BatchTextureArray:rM,Buffer:lr,Filter:kO,FilterState:CO,Framebuffer:bc,GLFramebuffer:RO,GLProgram:YO,GLTexture:Ih,Geometry:sf,IGLUniformData:EX,MaskData:DO,ObjectRenderer:ox,Program:af,Quad:SO,QuadUv:wO,RenderTexture:ax,RenderTexturePool:EO,Renderer:eM,Shader:ux,SpriteMaskFilter:jO,State:of,System:Kt,Texture:an,TextureMatrix:GO,TextureUvs:sx,UniformGroup:ss,ViewableBuffer:nM,autoDetectRenderer:OX,checkMaxIfStatementsInShader:UO,defaultFilterVertex:DX,defaultVertex:MX,resources:qz,systems:RX,uniformParsers:Ch},Symbol.toStringTag,{value:"Module"})),FX=Du(NX);var ip,sb;function lx(){if(sb)return ip;sb=1;function r(e){return e}return ip=r,ip}var sp,ab;function BX(){if(ab)return sp;ab=1;function r(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}return sp=r,sp}var ap,ob;function UX(){if(ob)return ap;ob=1;var r=BX(),e=Math.max;function t(n,i,s){return i=e(i===void 0?n.length-1:i,0),function(){for(var a=arguments,o=-1,u=e(a.length-i,0),l=Array(u);++o<u;)l[o]=a[i+o];o=-1;for(var h=Array(i+1);++o<i;)h[o]=a[o];return h[i]=s(l),r(n,this,h)}}return ap=t,ap}var op,ub;function kX(){if(ub)return op;ub=1;function r(e){return function(){return e}}return op=r,op}var up,lb;function uM(){if(lb)return up;lb=1;var r=typeof zi=="object"&&zi&&zi.Object===Object&&zi;return up=r,up}var lp,hb;function Dn(){if(hb)return lp;hb=1;var r=uM(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return lp=t,lp}var hp,cb;function uf(){if(cb)return hp;cb=1;var r=Dn(),e=r.Symbol;return hp=e,hp}var cp,fb;function GX(){if(fb)return cp;fb=1;var r=uf(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,i=r?r.toStringTag:void 0;function s(a){var o=t.call(a,i),u=a[i];try{a[i]=void 0;var l=!0}catch{}var h=n.call(a);return l&&(o?a[i]=u:delete a[i]),h}return cp=s,cp}var fp,db;function jX(){if(db)return fp;db=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return fp=t,fp}var dp,pb;function Ju(){if(pb)return dp;pb=1;var r=uf(),e=GX(),t=jX(),n="[object Null]",i="[object Undefined]",s=r?r.toStringTag:void 0;function a(o){return o==null?o===void 0?i:n:s&&s in Object(o)?e(o):t(o)}return dp=a,dp}var pp,vb;function hx(){if(vb)return pp;vb=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return pp=r,pp}var vp,mb;function lM(){if(mb)return vp;mb=1;var r=Ju(),e=hx(),t="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function a(o){if(!e(o))return!1;var u=r(o);return u==n||u==i||u==t||u==s}return vp=a,vp}var mp,gb;function HX(){if(gb)return mp;gb=1;var r=Dn(),e=r["__core-js_shared__"];return mp=e,mp}var gp,yb;function VX(){if(yb)return gp;yb=1;var r=HX(),e=function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function t(n){return!!e&&e in n}return gp=t,gp}var yp,_b;function hM(){if(_b)return yp;_b=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return yp=t,yp}var _p,xb;function zX(){if(xb)return _p;xb=1;var r=lM(),e=VX(),t=hx(),n=hM(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,a=Function.prototype,o=Object.prototype,u=a.toString,l=o.hasOwnProperty,h=RegExp("^"+u.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function c(f){if(!t(f)||e(f))return!1;var p=r(f)?h:s;return p.test(n(f))}return _p=c,_p}var xp,Tb;function XX(){if(Tb)return xp;Tb=1;function r(e,t){return e==null?void 0:e[t]}return xp=r,xp}var Tp,Eb;function bs(){if(Eb)return Tp;Eb=1;var r=zX(),e=XX();function t(n,i){var s=e(n,i);return r(s)?s:void 0}return Tp=t,Tp}var Ep,bb;function cM(){if(bb)return Ep;bb=1;var r=bs(),e=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}}();return Ep=e,Ep}var bp,Sb;function $X(){if(Sb)return bp;Sb=1;var r=kX(),e=cM(),t=lx(),n=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:r(s),writable:!0})}:t;return bp=n,bp}var Sp,wb;function WX(){if(wb)return Sp;wb=1;var r=800,e=16,t=Date.now;function n(i){var s=0,a=0;return function(){var o=t(),u=e-(o-a);if(a=o,u>0){if(++s>=r)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return Sp=n,Sp}var wp,Cb;function YX(){if(Cb)return wp;Cb=1;var r=$X(),e=WX(),t=e(r);return wp=t,wp}var Cp,Ib;function qX(){if(Ib)return Cp;Ib=1;var r=lx(),e=UX(),t=YX();function n(i,s){return t(e(i,s,r),i+"")}return Cp=n,Cp}var Ip,Pb;function fM(){if(Pb)return Ip;Pb=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,s=Array(i);++n<i;)s[n]=t(e[n],n,e);return s}return Ip=r,Ip}var Pp,Ab;function KX(){if(Ab)return Pp;Ab=1;function r(e,t,n,i){for(var s=e.length,a=n+(i?1:-1);i?a--:++a<s;)if(t(e[a],a,e))return a;return-1}return Pp=r,Pp}var Ap,Rb;function JX(){if(Rb)return Ap;Rb=1;function r(e){return e!==e}return Ap=r,Ap}var Rp,Ob;function ZX(){if(Ob)return Rp;Ob=1;function r(e,t,n){for(var i=n-1,s=e.length;++i<s;)if(e[i]===t)return i;return-1}return Rp=r,Rp}var Op,Mb;function QX(){if(Mb)return Op;Mb=1;var r=KX(),e=JX(),t=ZX();function n(i,s,a){return s===s?t(i,s,a):r(i,e,a)}return Op=n,Op}var Mp,Db;function e$(){if(Db)return Mp;Db=1;function r(e,t,n,i){for(var s=n-1,a=e.length;++s<a;)if(i(e[s],t))return s;return-1}return Mp=r,Mp}var Dp,Lb;function dM(){if(Lb)return Dp;Lb=1;function r(e){return function(t){return e(t)}}return Dp=r,Dp}var Lp,Nb;function t$(){if(Nb)return Lp;Nb=1;function r(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}return Lp=r,Lp}var Np,Fb;function r$(){if(Fb)return Np;Fb=1;var r=fM(),e=QX(),t=e$(),n=dM(),i=t$(),s=Array.prototype,a=s.splice;function o(u,l,h,c){var f=c?t:e,p=-1,v=l.length,g=u;for(u===l&&(l=i(l)),h&&(g=r(u,n(h)));++p<v;)for(var m=0,y=l[p],x=h?h(y):y;(m=f(g,x,m,c))>-1;)g!==u&&a.call(g,m,1),a.call(u,m,1);return u}return Np=o,Np}var Fp,Bb;function n$(){if(Bb)return Fp;Bb=1;var r=r$();function e(t,n){return t&&t.length&&n&&n.length?r(t,n):t}return Fp=e,Fp}var Bp,Ub;function i$(){if(Ub)return Bp;Ub=1;var r=qX(),e=n$(),t=r(e);return Bp=t,Bp}/*!
 * @pixi/display - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */_e.SORTABLE_CHILDREN=!1;var Vy=function(){function r(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return r.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},r.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},r.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?ft.EMPTY:(e=e||new ft(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},r.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},r.prototype.addQuad=function(e){var t=this.minX,n=this.minY,i=this.maxX,s=this.maxY,a=e[0],o=e[1];t=a<t?a:t,n=o<n?o:n,i=a>i?a:i,s=o>s?o:s,a=e[2],o=e[3],t=a<t?a:t,n=o<n?o:n,i=a>i?a:i,s=o>s?o:s,a=e[4],o=e[5],t=a<t?a:t,n=o<n?o:n,i=a>i?a:i,s=o>s?o:s,a=e[6],o=e[7],t=a<t?a:t,n=o<n?o:n,i=a>i?a:i,s=o>s?o:s,this.minX=t,this.minY=n,this.maxX=i,this.maxY=s},r.prototype.addFrame=function(e,t,n,i,s){this.addFrameMatrix(e.worldTransform,t,n,i,s)},r.prototype.addFrameMatrix=function(e,t,n,i,s){var a=e.a,o=e.b,u=e.c,l=e.d,h=e.tx,c=e.ty,f=this.minX,p=this.minY,v=this.maxX,g=this.maxY,m=a*t+u*n+h,y=o*t+l*n+c;f=m<f?m:f,p=y<p?y:p,v=m>v?m:v,g=y>g?y:g,m=a*i+u*n+h,y=o*i+l*n+c,f=m<f?m:f,p=y<p?y:p,v=m>v?m:v,g=y>g?y:g,m=a*t+u*s+h,y=o*t+l*s+c,f=m<f?m:f,p=y<p?y:p,v=m>v?m:v,g=y>g?y:g,m=a*i+u*s+h,y=o*i+l*s+c,f=m<f?m:f,p=y<p?y:p,v=m>v?m:v,g=y>g?y:g,this.minX=f,this.minY=p,this.maxX=v,this.maxY=g},r.prototype.addVertexData=function(e,t,n){for(var i=this.minX,s=this.minY,a=this.maxX,o=this.maxY,u=t;u<n;u+=2){var l=e[u],h=e[u+1];i=l<i?l:i,s=h<s?h:s,a=l>a?l:a,o=h>o?h:o}this.minX=i,this.minY=s,this.maxX=a,this.maxY=o},r.prototype.addVertices=function(e,t,n,i){this.addVerticesMatrix(e.worldTransform,t,n,i)},r.prototype.addVerticesMatrix=function(e,t,n,i,s,a){s===void 0&&(s=0),a===void 0&&(a=s);for(var o=e.a,u=e.b,l=e.c,h=e.d,c=e.tx,f=e.ty,p=this.minX,v=this.minY,g=this.maxX,m=this.maxY,y=n;y<i;y+=2){var x=t[y],T=t[y+1],E=o*x+l*T+c,b=h*T+u*x+f;p=Math.min(p,E-s),g=Math.max(g,E+s),v=Math.min(v,b-a),m=Math.max(m,b+a)}this.minX=p,this.minY=v,this.maxX=g,this.maxY=m},r.prototype.addBounds=function(e){var t=this.minX,n=this.minY,i=this.maxX,s=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>s?e.maxY:s},r.prototype.addBoundsMask=function(e,t){var n=e.minX>t.minX?e.minX:t.minX,i=e.minY>t.minY?e.minY:t.minY,s=e.maxX<t.maxX?e.maxX:t.maxX,a=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=s&&i<=a){var o=this.minX,u=this.minY,l=this.maxX,h=this.maxY;this.minX=n<o?n:o,this.minY=i<u?i:u,this.maxX=s>l?s:l,this.maxY=a>h?a:h}},r.prototype.addBoundsMatrix=function(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)},r.prototype.addBoundsArea=function(e,t){var n=e.minX>t.x?e.minX:t.x,i=e.minY>t.y?e.minY:t.y,s=e.maxX<t.x+t.width?e.maxX:t.x+t.width,a=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=s&&i<=a){var o=this.minX,u=this.minY,l=this.maxX,h=this.maxY;this.minX=n<o?n:o,this.minY=i<u?i:u,this.maxX=s>l?s:l,this.maxY=a>h?a:h}},r.prototype.pad=function(e,t){e===void 0&&(e=0),t===void 0&&(t=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)},r.prototype.addFramePad=function(e,t,n,i,s,a){e-=s,t-=a,n+=s,i+=a,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>i?this.maxY:i},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var zy=function(r,e){return zy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},zy(r,e)};function cx(r,e){zy(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Mu=function(r){cx(e,r);function e(){var t=r.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new mO,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new Vy,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return e.mixin=function(t){for(var n=Object.keys(t),i=0;i<n.length;++i){var s=n[i];Object.defineProperty(e.prototype,s,Object.getOwnPropertyDescriptor(t,s))}},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,n){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new ft),n=this._boundsRect),this._bounds.getRectangle(n)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new ft),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Vy);var n=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var s=this._bounds,a=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,t);return this.parent=i,this.transform=n,this._bounds=s,this._bounds.updateID+=this._boundsID-a,o},e.prototype.toGlobal=function(t,n,i){return i===void 0&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,n)},e.prototype.toLocal=function(t,n,i,s){return n&&(t=n.toGlobal(t,i,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,n,i,s,a,o,u,l,h){return t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=1),s===void 0&&(s=1),a===void 0&&(a=0),o===void 0&&(o=0),u===void 0&&(u=0),l===void 0&&(l=0),h===void 0&&(h=0),this.position.x=t,this.position.y=n,this.scale.x=i||1,this.scale.y=s||1,this.rotation=a,this.skew.x=o,this.skew.y=u,this.pivot.x=l,this.pivot.y=h,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new pM),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*dO},set:function(t){this.transform.rotation=t*pO},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){if(this._mask){var n=this._mask.maskObject||this._mask;n.renderable=!0,n.isMask=!1}if(this._mask=t,this._mask){var n=this._mask.maskObject||this._mask;n.renderable=!1,n.isMask=!0}},enumerable:!1,configurable:!0}),e}(jr),pM=function(r){cx(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.sortDirty=null,t}return e}(Mu);Mu.prototype.displayObjectUpdateTransform=Mu.prototype.updateTransform;function s$(r,e){return r.zIndex===e.zIndex?r._lastSortedIndex-e._lastSortedIndex:r.zIndex-e.zIndex}var Xy=function(r){cx(e,r);function e(){var t=r.call(this)||this;return t.children=[],t.sortableChildren=_e.SORTABLE_CHILDREN,t.sortDirty=!1,t}return e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,n=[],i=0;i<arguments.length;i++)n[i]=t[i];if(n.length>1)for(var s=0;s<n.length;s++)this.addChild(n[s]);else{var a=n[0];a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",a,this,this.children.length-1),a.emit("added",this)}return n[0]},e.prototype.addChildAt=function(t,n){if(n<0||n>this.children.length)throw new Error(t+"addChildAt: The index "+n+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(n,0,t),this._boundsID++,this.onChildrenChange(n),t.emit("added",this),this.emit("childAdded",t,this,n),t},e.prototype.swapChildren=function(t,n){if(t!==n){var i=this.getChildIndex(t),s=this.getChildIndex(n);this.children[i]=n,this.children[s]=t,this.onChildrenChange(i<s?i:s)}},e.prototype.getChildIndex=function(t){var n=this.children.indexOf(t);if(n===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return n},e.prototype.setChildIndex=function(t,n){if(n<0||n>=this.children.length)throw new Error("The index "+n+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);Fo(this.children,i,1),this.children.splice(n,0,t),this.onChildrenChange(n)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,n=[],i=0;i<arguments.length;i++)n[i]=t[i];if(n.length>1)for(var s=0;s<n.length;s++)this.removeChild(n[s]);else{var a=n[0],o=this.children.indexOf(a);if(o===-1)return null;a.parent=null,a.transform._parentID=-1,Fo(this.children,o,1),this._boundsID++,this.onChildrenChange(o),a.emit("removed",this),this.emit("childRemoved",a,this,o)}return n[0]},e.prototype.removeChildAt=function(t){var n=this.getChildAt(t);return n.parent=null,n.transform._parentID=-1,Fo(this.children,t,1),this._boundsID++,this.onChildrenChange(t),n.emit("removed",this),this.emit("childRemoved",n,this,t),n},e.prototype.removeChildren=function(t,n){t===void 0&&(t=0),n===void 0&&(n=this.children.length);var i=t,s=n,a=s-i,o;if(a>0&&a<=s){o=this.children.splice(i,a);for(var u=0;u<o.length;++u)o[u].parent=null,o[u].transform&&(o[u].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var u=0;u<o.length;++u)o[u].emit("removed",this),this.emit("childRemoved",o[u],this,u);return o}else if(a===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,n=0,i=this.children.length;n<i;++n){var s=this.children[n];s._lastSortedIndex=n,!t&&s.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(s$),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,n=this.children.length;t<n;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var n=this.children[t];if(!(!n.visible||!n.renderable))if(n.calculateBounds(),n._mask){var i=n._mask.maskObject||n._mask;i.calculateBounds(),this._bounds.addBoundsMask(n._bounds,i._bounds)}else n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(t,n){n===void 0&&(n=!1);var i=r.prototype.getLocalBounds.call(this,t);if(!n)for(var s=0,a=this.children.length;s<a;++s){var o=this.children[s];o.visible&&o.updateTransform()}return i},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var n=0,i=this.children.length;n<i;++n)this.children[n].render(t)}},e.prototype.renderAdvanced=function(t){t.batch.flush();var n=this.filters,i=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<n.length;s++)n[s].enabled&&this._enabledFilters.push(n[s]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}i&&t.mask.push(this,this._mask),this._render(t);for(var s=0,a=this.children.length;s<a;s++)this.children[s].render(t);t.batch.flush(),i&&t.mask.pop(this),n&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(t){r.prototype.destroy.call(this),this.sortDirty=!1;var n=typeof t=="boolean"?t:t&&t.children,i=this.removeChildren(0,this.children.length);if(n)for(var s=0;s<i.length;++s)i[s].destroy(t)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var n=this.getLocalBounds().width;n!==0?this.scale.x=t/n:this.scale.x=1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var n=this.getLocalBounds().height;n!==0?this.scale.y=t/n:this.scale.y=1,this._height=t},enumerable:!1,configurable:!0}),e}(Mu);Xy.prototype.containerUpdateTransform=Xy.prototype.updateTransform;const a$=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Vy,Container:Xy,DisplayObject:Mu,TemporaryDisplayObject:pM},Symbol.toStringTag,{value:"Module"})),o$=Du(a$);var Up,kb;function u$(){if(kb)return Up;kb=1;var r=cM();function e(t,n,i){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i}return Up=e,Up}var kp,Gb;function l$(){if(Gb)return kp;Gb=1;function r(e){return function(t,n,i){for(var s=-1,a=Object(t),o=i(t),u=o.length;u--;){var l=o[e?u:++s];if(n(a[l],l,a)===!1)break}return t}}return kp=r,kp}var Gp,jb;function h$(){if(jb)return Gp;jb=1;var r=l$(),e=r();return Gp=e,Gp}var jp,Hb;function c$(){if(Hb)return jp;Hb=1;function r(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}return jp=r,jp}var Hp,Vb;function Zu(){if(Vb)return Hp;Vb=1;function r(e){return e!=null&&typeof e=="object"}return Hp=r,Hp}var Vp,zb;function f$(){if(zb)return Vp;zb=1;var r=Ju(),e=Zu(),t="[object Arguments]";function n(i){return e(i)&&r(i)==t}return Vp=n,Vp}var zp,Xb;function vM(){if(Xb)return zp;Xb=1;var r=f$(),e=Zu(),t=Object.prototype,n=t.hasOwnProperty,i=t.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(a){return e(a)&&n.call(a,"callee")&&!i.call(a,"callee")};return zp=s,zp}var Xp,$b;function Si(){if($b)return Xp;$b=1;var r=Array.isArray;return Xp=r,Xp}var _o={exports:{}},$p,Wb;function d$(){if(Wb)return $p;Wb=1;function r(){return!1}return $p=r,$p}_o.exports;var Yb;function mM(){return Yb||(Yb=1,function(r,e){var t=Dn(),n=d$(),i=e&&!e.nodeType&&e,s=i&&!0&&r&&!r.nodeType&&r,a=s&&s.exports===i,o=a?t.Buffer:void 0,u=o?o.isBuffer:void 0,l=u||n;r.exports=l}(_o,_o.exports)),_o.exports}var Wp,qb;function gM(){if(qb)return Wp;qb=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,i){var s=typeof n;return i=i??r,!!i&&(s=="number"||s!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return Wp=t,Wp}var Yp,Kb;function fx(){if(Kb)return Yp;Kb=1;var r=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=r}return Yp=e,Yp}var qp,Jb;function p$(){if(Jb)return qp;Jb=1;var r=Ju(),e=fx(),t=Zu(),n="[object Arguments]",i="[object Array]",s="[object Boolean]",a="[object Date]",o="[object Error]",u="[object Function]",l="[object Map]",h="[object Number]",c="[object Object]",f="[object RegExp]",p="[object Set]",v="[object String]",g="[object WeakMap]",m="[object ArrayBuffer]",y="[object DataView]",x="[object Float32Array]",T="[object Float64Array]",E="[object Int8Array]",b="[object Int16Array]",w="[object Int32Array]",C="[object Uint8Array]",O="[object Uint8ClampedArray]",R="[object Uint16Array]",I="[object Uint32Array]",D={};D[x]=D[T]=D[E]=D[b]=D[w]=D[C]=D[O]=D[R]=D[I]=!0,D[n]=D[i]=D[m]=D[s]=D[y]=D[a]=D[o]=D[u]=D[l]=D[h]=D[c]=D[f]=D[p]=D[v]=D[g]=!1;function F(j){return t(j)&&e(j.length)&&!!D[r(j)]}return qp=F,qp}var xo={exports:{}};xo.exports;var Zb;function v$(){return Zb||(Zb=1,function(r,e){var t=uM(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,s=i&&i.exports===n,a=s&&t.process,o=function(){try{var u=i&&i.require&&i.require("util").types;return u||a&&a.binding&&a.binding("util")}catch{}}();r.exports=o}(xo,xo.exports)),xo.exports}var Kp,Qb;function yM(){if(Qb)return Kp;Qb=1;var r=p$(),e=dM(),t=v$(),n=t&&t.isTypedArray,i=n?e(n):r;return Kp=i,Kp}var Jp,eS;function m$(){if(eS)return Jp;eS=1;var r=c$(),e=vM(),t=Si(),n=mM(),i=gM(),s=yM(),a=Object.prototype,o=a.hasOwnProperty;function u(l,h){var c=t(l),f=!c&&e(l),p=!c&&!f&&n(l),v=!c&&!f&&!p&&s(l),g=c||f||p||v,m=g?r(l.length,String):[],y=m.length;for(var x in l)(h||o.call(l,x))&&!(g&&(x=="length"||p&&(x=="offset"||x=="parent")||v&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||i(x,y)))&&m.push(x);return m}return Jp=u,Jp}var Zp,tS;function g$(){if(tS)return Zp;tS=1;var r=Object.prototype;function e(t){var n=t&&t.constructor,i=typeof n=="function"&&n.prototype||r;return t===i}return Zp=e,Zp}var Qp,rS;function y$(){if(rS)return Qp;rS=1;function r(e,t){return function(n){return e(t(n))}}return Qp=r,Qp}var ev,nS;function _$(){if(nS)return ev;nS=1;var r=y$(),e=r(Object.keys,Object);return ev=e,ev}var tv,iS;function x$(){if(iS)return tv;iS=1;var r=g$(),e=_$(),t=Object.prototype,n=t.hasOwnProperty;function i(s){if(!r(s))return e(s);var a=[];for(var o in Object(s))n.call(s,o)&&o!="constructor"&&a.push(o);return a}return tv=i,tv}var rv,sS;function T$(){if(sS)return rv;sS=1;var r=lM(),e=fx();function t(n){return n!=null&&e(n.length)&&!r(n)}return rv=t,rv}var nv,aS;function dx(){if(aS)return nv;aS=1;var r=m$(),e=x$(),t=T$();function n(i){return t(i)?r(i):e(i)}return nv=n,nv}var iv,oS;function E$(){if(oS)return iv;oS=1;var r=h$(),e=dx();function t(n,i){return n&&r(n,i,e)}return iv=t,iv}var sv,uS;function b$(){if(uS)return sv;uS=1;function r(){this.__data__=[],this.size=0}return sv=r,sv}var av,lS;function _M(){if(lS)return av;lS=1;function r(e,t){return e===t||e!==e&&t!==t}return av=r,av}var ov,hS;function lf(){if(hS)return ov;hS=1;var r=_M();function e(t,n){for(var i=t.length;i--;)if(r(t[i][0],n))return i;return-1}return ov=e,ov}var uv,cS;function S$(){if(cS)return uv;cS=1;var r=lf(),e=Array.prototype,t=e.splice;function n(i){var s=this.__data__,a=r(s,i);if(a<0)return!1;var o=s.length-1;return a==o?s.pop():t.call(s,a,1),--this.size,!0}return uv=n,uv}var lv,fS;function w$(){if(fS)return lv;fS=1;var r=lf();function e(t){var n=this.__data__,i=r(n,t);return i<0?void 0:n[i][1]}return lv=e,lv}var hv,dS;function C$(){if(dS)return hv;dS=1;var r=lf();function e(t){return r(this.__data__,t)>-1}return hv=e,hv}var cv,pS;function I$(){if(pS)return cv;pS=1;var r=lf();function e(t,n){var i=this.__data__,s=r(i,t);return s<0?(++this.size,i.push([t,n])):i[s][1]=n,this}return cv=e,cv}var fv,vS;function hf(){if(vS)return fv;vS=1;var r=b$(),e=S$(),t=w$(),n=C$(),i=I$();function s(a){var o=-1,u=a==null?0:a.length;for(this.clear();++o<u;){var l=a[o];this.set(l[0],l[1])}}return s.prototype.clear=r,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=n,s.prototype.set=i,fv=s,fv}var dv,mS;function P$(){if(mS)return dv;mS=1;var r=hf();function e(){this.__data__=new r,this.size=0}return dv=e,dv}var pv,gS;function A$(){if(gS)return pv;gS=1;function r(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}return pv=r,pv}var vv,yS;function R$(){if(yS)return vv;yS=1;function r(e){return this.__data__.get(e)}return vv=r,vv}var mv,_S;function O$(){if(_S)return mv;_S=1;function r(e){return this.__data__.has(e)}return mv=r,mv}var gv,xS;function px(){if(xS)return gv;xS=1;var r=bs(),e=Dn(),t=r(e,"Map");return gv=t,gv}var yv,TS;function cf(){if(TS)return yv;TS=1;var r=bs(),e=r(Object,"create");return yv=e,yv}var _v,ES;function M$(){if(ES)return _v;ES=1;var r=cf();function e(){this.__data__=r?r(null):{},this.size=0}return _v=e,_v}var xv,bS;function D$(){if(bS)return xv;bS=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return xv=r,xv}var Tv,SS;function L$(){if(SS)return Tv;SS=1;var r=cf(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function i(s){var a=this.__data__;if(r){var o=a[s];return o===e?void 0:o}return n.call(a,s)?a[s]:void 0}return Tv=i,Tv}var Ev,wS;function N$(){if(wS)return Ev;wS=1;var r=cf(),e=Object.prototype,t=e.hasOwnProperty;function n(i){var s=this.__data__;return r?s[i]!==void 0:t.call(s,i)}return Ev=n,Ev}var bv,CS;function F$(){if(CS)return bv;CS=1;var r=cf(),e="__lodash_hash_undefined__";function t(n,i){var s=this.__data__;return this.size+=this.has(n)?0:1,s[n]=r&&i===void 0?e:i,this}return bv=t,bv}var Sv,IS;function B$(){if(IS)return Sv;IS=1;var r=M$(),e=D$(),t=L$(),n=N$(),i=F$();function s(a){var o=-1,u=a==null?0:a.length;for(this.clear();++o<u;){var l=a[o];this.set(l[0],l[1])}}return s.prototype.clear=r,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=n,s.prototype.set=i,Sv=s,Sv}var wv,PS;function U$(){if(PS)return wv;PS=1;var r=B$(),e=hf(),t=px();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return wv=n,wv}var Cv,AS;function k$(){if(AS)return Cv;AS=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return Cv=r,Cv}var Iv,RS;function ff(){if(RS)return Iv;RS=1;var r=k$();function e(t,n){var i=t.__data__;return r(n)?i[typeof n=="string"?"string":"hash"]:i.map}return Iv=e,Iv}var Pv,OS;function G$(){if(OS)return Pv;OS=1;var r=ff();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return Pv=e,Pv}var Av,MS;function j$(){if(MS)return Av;MS=1;var r=ff();function e(t){return r(this,t).get(t)}return Av=e,Av}var Rv,DS;function H$(){if(DS)return Rv;DS=1;var r=ff();function e(t){return r(this,t).has(t)}return Rv=e,Rv}var Ov,LS;function V$(){if(LS)return Ov;LS=1;var r=ff();function e(t,n){var i=r(this,t),s=i.size;return i.set(t,n),this.size+=i.size==s?0:1,this}return Ov=e,Ov}var Mv,NS;function vx(){if(NS)return Mv;NS=1;var r=U$(),e=G$(),t=j$(),n=H$(),i=V$();function s(a){var o=-1,u=a==null?0:a.length;for(this.clear();++o<u;){var l=a[o];this.set(l[0],l[1])}}return s.prototype.clear=r,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=n,s.prototype.set=i,Mv=s,Mv}var Dv,FS;function z$(){if(FS)return Dv;FS=1;var r=hf(),e=px(),t=vx(),n=200;function i(s,a){var o=this.__data__;if(o instanceof r){var u=o.__data__;if(!e||u.length<n-1)return u.push([s,a]),this.size=++o.size,this;o=this.__data__=new t(u)}return o.set(s,a),this.size=o.size,this}return Dv=i,Dv}var Lv,BS;function xM(){if(BS)return Lv;BS=1;var r=hf(),e=P$(),t=A$(),n=R$(),i=O$(),s=z$();function a(o){var u=this.__data__=new r(o);this.size=u.size}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=i,a.prototype.set=s,Lv=a,Lv}var Nv,US;function X$(){if(US)return Nv;US=1;var r="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,r),this}return Nv=e,Nv}var Fv,kS;function $$(){if(kS)return Fv;kS=1;function r(e){return this.__data__.has(e)}return Fv=r,Fv}var Bv,GS;function W$(){if(GS)return Bv;GS=1;var r=vx(),e=X$(),t=$$();function n(i){var s=-1,a=i==null?0:i.length;for(this.__data__=new r;++s<a;)this.add(i[s])}return n.prototype.add=n.prototype.push=e,n.prototype.has=t,Bv=n,Bv}var Uv,jS;function Y$(){if(jS)return Uv;jS=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}return Uv=r,Uv}var kv,HS;function q$(){if(HS)return kv;HS=1;function r(e,t){return e.has(t)}return kv=r,kv}var Gv,VS;function TM(){if(VS)return Gv;VS=1;var r=W$(),e=Y$(),t=q$(),n=1,i=2;function s(a,o,u,l,h,c){var f=u&n,p=a.length,v=o.length;if(p!=v&&!(f&&v>p))return!1;var g=c.get(a),m=c.get(o);if(g&&m)return g==o&&m==a;var y=-1,x=!0,T=u&i?new r:void 0;for(c.set(a,o),c.set(o,a);++y<p;){var E=a[y],b=o[y];if(l)var w=f?l(b,E,y,o,a,c):l(E,b,y,a,o,c);if(w!==void 0){if(w)continue;x=!1;break}if(T){if(!e(o,function(C,O){if(!t(T,O)&&(E===C||h(E,C,u,l,c)))return T.push(O)})){x=!1;break}}else if(!(E===b||h(E,b,u,l,c))){x=!1;break}}return c.delete(a),c.delete(o),x}return Gv=s,Gv}var jv,zS;function K$(){if(zS)return jv;zS=1;var r=Dn(),e=r.Uint8Array;return jv=e,jv}var Hv,XS;function J$(){if(XS)return Hv;XS=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i,s){n[++t]=[s,i]}),n}return Hv=r,Hv}var Vv,$S;function Z$(){if($S)return Vv;$S=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n}return Vv=r,Vv}var zv,WS;function Q$(){if(WS)return zv;WS=1;var r=uf(),e=K$(),t=_M(),n=TM(),i=J$(),s=Z$(),a=1,o=2,u="[object Boolean]",l="[object Date]",h="[object Error]",c="[object Map]",f="[object Number]",p="[object RegExp]",v="[object Set]",g="[object String]",m="[object Symbol]",y="[object ArrayBuffer]",x="[object DataView]",T=r?r.prototype:void 0,E=T?T.valueOf:void 0;function b(w,C,O,R,I,D,F){switch(O){case x:if(w.byteLength!=C.byteLength||w.byteOffset!=C.byteOffset)return!1;w=w.buffer,C=C.buffer;case y:return!(w.byteLength!=C.byteLength||!D(new e(w),new e(C)));case u:case l:case f:return t(+w,+C);case h:return w.name==C.name&&w.message==C.message;case p:case g:return w==C+"";case c:var j=i;case v:var z=R&a;if(j||(j=s),w.size!=C.size&&!z)return!1;var $=F.get(w);if($)return $==C;R|=o,F.set(w,C);var H=n(j(w),j(C),R,I,D,F);return F.delete(w),H;case m:if(E)return E.call(w)==E.call(C)}return!1}return zv=b,zv}var Xv,YS;function eW(){if(YS)return Xv;YS=1;function r(e,t){for(var n=-1,i=t.length,s=e.length;++n<i;)e[s+n]=t[n];return e}return Xv=r,Xv}var $v,qS;function tW(){if(qS)return $v;qS=1;var r=eW(),e=Si();function t(n,i,s){var a=i(n);return e(n)?a:r(a,s(n))}return $v=t,$v}var Wv,KS;function rW(){if(KS)return Wv;KS=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,s=0,a=[];++n<i;){var o=e[n];t(o,n,e)&&(a[s++]=o)}return a}return Wv=r,Wv}var Yv,JS;function nW(){if(JS)return Yv;JS=1;function r(){return[]}return Yv=r,Yv}var qv,ZS;function iW(){if(ZS)return qv;ZS=1;var r=rW(),e=nW(),t=Object.prototype,n=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(a){return a==null?[]:(a=Object(a),r(i(a),function(o){return n.call(a,o)}))}:e;return qv=s,qv}var Kv,QS;function sW(){if(QS)return Kv;QS=1;var r=tW(),e=iW(),t=dx();function n(i){return r(i,t,e)}return Kv=n,Kv}var Jv,ew;function aW(){if(ew)return Jv;ew=1;var r=sW(),e=1,t=Object.prototype,n=t.hasOwnProperty;function i(s,a,o,u,l,h){var c=o&e,f=r(s),p=f.length,v=r(a),g=v.length;if(p!=g&&!c)return!1;for(var m=p;m--;){var y=f[m];if(!(c?y in a:n.call(a,y)))return!1}var x=h.get(s),T=h.get(a);if(x&&T)return x==a&&T==s;var E=!0;h.set(s,a),h.set(a,s);for(var b=c;++m<p;){y=f[m];var w=s[y],C=a[y];if(u)var O=c?u(C,w,y,a,s,h):u(w,C,y,s,a,h);if(!(O===void 0?w===C||l(w,C,o,u,h):O)){E=!1;break}b||(b=y=="constructor")}if(E&&!b){var R=s.constructor,I=a.constructor;R!=I&&"constructor"in s&&"constructor"in a&&!(typeof R=="function"&&R instanceof R&&typeof I=="function"&&I instanceof I)&&(E=!1)}return h.delete(s),h.delete(a),E}return Jv=i,Jv}var Zv,tw;function oW(){if(tw)return Zv;tw=1;var r=bs(),e=Dn(),t=r(e,"DataView");return Zv=t,Zv}var Qv,rw;function uW(){if(rw)return Qv;rw=1;var r=bs(),e=Dn(),t=r(e,"Promise");return Qv=t,Qv}var em,nw;function lW(){if(nw)return em;nw=1;var r=bs(),e=Dn(),t=r(e,"Set");return em=t,em}var tm,iw;function hW(){if(iw)return tm;iw=1;var r=bs(),e=Dn(),t=r(e,"WeakMap");return tm=t,tm}var rm,sw;function cW(){if(sw)return rm;sw=1;var r=oW(),e=px(),t=uW(),n=lW(),i=hW(),s=Ju(),a=hM(),o="[object Map]",u="[object Object]",l="[object Promise]",h="[object Set]",c="[object WeakMap]",f="[object DataView]",p=a(r),v=a(e),g=a(t),m=a(n),y=a(i),x=s;return(r&&x(new r(new ArrayBuffer(1)))!=f||e&&x(new e)!=o||t&&x(t.resolve())!=l||n&&x(new n)!=h||i&&x(new i)!=c)&&(x=function(T){var E=s(T),b=E==u?T.constructor:void 0,w=b?a(b):"";if(w)switch(w){case p:return f;case v:return o;case g:return l;case m:return h;case y:return c}return E}),rm=x,rm}var nm,aw;function fW(){if(aw)return nm;aw=1;var r=xM(),e=TM(),t=Q$(),n=aW(),i=cW(),s=Si(),a=mM(),o=yM(),u=1,l="[object Arguments]",h="[object Array]",c="[object Object]",f=Object.prototype,p=f.hasOwnProperty;function v(g,m,y,x,T,E){var b=s(g),w=s(m),C=b?h:i(g),O=w?h:i(m);C=C==l?c:C,O=O==l?c:O;var R=C==c,I=O==c,D=C==O;if(D&&a(g)){if(!a(m))return!1;b=!0,R=!1}if(D&&!R)return E||(E=new r),b||o(g)?e(g,m,y,x,T,E):t(g,m,C,y,x,T,E);if(!(y&u)){var F=R&&p.call(g,"__wrapped__"),j=I&&p.call(m,"__wrapped__");if(F||j){var z=F?g.value():g,$=j?m.value():m;return E||(E=new r),T(z,$,y,x,E)}}return D?(E||(E=new r),n(g,m,y,x,T,E)):!1}return nm=v,nm}var im,ow;function EM(){if(ow)return im;ow=1;var r=fW(),e=Zu();function t(n,i,s,a,o){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:r(n,i,s,a,t,o)}return im=t,im}var sm,uw;function dW(){if(uw)return sm;uw=1;var r=xM(),e=EM(),t=1,n=2;function i(s,a,o,u){var l=o.length,h=l,c=!u;if(s==null)return!h;for(s=Object(s);l--;){var f=o[l];if(c&&f[2]?f[1]!==s[f[0]]:!(f[0]in s))return!1}for(;++l<h;){f=o[l];var p=f[0],v=s[p],g=f[1];if(c&&f[2]){if(v===void 0&&!(p in s))return!1}else{var m=new r;if(u)var y=u(v,g,p,s,a,m);if(!(y===void 0?e(g,v,t|n,u,m):y))return!1}}return!0}return sm=i,sm}var am,lw;function bM(){if(lw)return am;lw=1;var r=hx();function e(t){return t===t&&!r(t)}return am=e,am}var om,hw;function pW(){if(hw)return om;hw=1;var r=bM(),e=dx();function t(n){for(var i=e(n),s=i.length;s--;){var a=i[s],o=n[a];i[s]=[a,o,r(o)]}return i}return om=t,om}var um,cw;function SM(){if(cw)return um;cw=1;function r(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}return um=r,um}var lm,fw;function vW(){if(fw)return lm;fw=1;var r=dW(),e=pW(),t=SM();function n(i){var s=e(i);return s.length==1&&s[0][2]?t(s[0][0],s[0][1]):function(a){return a===i||r(a,i,s)}}return lm=n,lm}var hm,dw;function mx(){if(dw)return hm;dw=1;var r=Ju(),e=Zu(),t="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&r(i)==t}return hm=n,hm}var cm,pw;function gx(){if(pw)return cm;pw=1;var r=Si(),e=mx(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,a){if(r(s))return!1;var o=typeof s;return o=="number"||o=="symbol"||o=="boolean"||s==null||e(s)?!0:n.test(s)||!t.test(s)||a!=null&&s in Object(a)}return cm=i,cm}var fm,vw;function mW(){if(vw)return fm;vw=1;var r=vx(),e="Expected a function";function t(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var a=arguments,o=i?i.apply(this,a):a[0],u=s.cache;if(u.has(o))return u.get(o);var l=n.apply(this,a);return s.cache=u.set(o,l)||u,l};return s.cache=new(t.Cache||r),s}return t.Cache=r,fm=t,fm}var dm,mw;function gW(){if(mw)return dm;mw=1;var r=mW(),e=500;function t(n){var i=r(n,function(a){return s.size===e&&s.clear(),a}),s=i.cache;return i}return dm=t,dm}var pm,gw;function yW(){if(gw)return pm;gw=1;var r=gW(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(a,o,u,l){s.push(u?l.replace(t,"$1"):o||a)}),s});return pm=n,pm}var vm,yw;function _W(){if(yw)return vm;yw=1;var r=uf(),e=fM(),t=Si(),n=mx(),i=1/0,s=r?r.prototype:void 0,a=s?s.toString:void 0;function o(u){if(typeof u=="string")return u;if(t(u))return e(u,o)+"";if(n(u))return a?a.call(u):"";var l=u+"";return l=="0"&&1/u==-i?"-0":l}return vm=o,vm}var mm,_w;function xW(){if(_w)return mm;_w=1;var r=_W();function e(t){return t==null?"":r(t)}return mm=e,mm}var gm,xw;function wM(){if(xw)return gm;xw=1;var r=Si(),e=gx(),t=yW(),n=xW();function i(s,a){return r(s)?s:e(s,a)?[s]:t(n(s))}return gm=i,gm}var ym,Tw;function df(){if(Tw)return ym;Tw=1;var r=mx(),e=1/0;function t(n){if(typeof n=="string"||r(n))return n;var i=n+"";return i=="0"&&1/n==-e?"-0":i}return ym=t,ym}var _m,Ew;function CM(){if(Ew)return _m;Ew=1;var r=wM(),e=df();function t(n,i){i=r(i,n);for(var s=0,a=i.length;n!=null&&s<a;)n=n[e(i[s++])];return s&&s==a?n:void 0}return _m=t,_m}var xm,bw;function TW(){if(bw)return xm;bw=1;var r=CM();function e(t,n,i){var s=t==null?void 0:r(t,n);return s===void 0?i:s}return xm=e,xm}var Tm,Sw;function EW(){if(Sw)return Tm;Sw=1;function r(e,t){return e!=null&&t in Object(e)}return Tm=r,Tm}var Em,ww;function bW(){if(ww)return Em;ww=1;var r=wM(),e=vM(),t=Si(),n=gM(),i=fx(),s=df();function a(o,u,l){u=r(u,o);for(var h=-1,c=u.length,f=!1;++h<c;){var p=s(u[h]);if(!(f=o!=null&&l(o,p)))break;o=o[p]}return f||++h!=c?f:(c=o==null?0:o.length,!!c&&i(c)&&n(p,c)&&(t(o)||e(o)))}return Em=a,Em}var bm,Cw;function SW(){if(Cw)return bm;Cw=1;var r=EW(),e=bW();function t(n,i){return n!=null&&e(n,i,r)}return bm=t,bm}var Sm,Iw;function wW(){if(Iw)return Sm;Iw=1;var r=EM(),e=TW(),t=SW(),n=gx(),i=bM(),s=SM(),a=df(),o=1,u=2;function l(h,c){return n(h)&&i(c)?s(a(h),c):function(f){var p=e(f,h);return p===void 0&&p===c?t(f,h):r(c,p,o|u)}}return Sm=l,Sm}var wm,Pw;function CW(){if(Pw)return wm;Pw=1;function r(e){return function(t){return t==null?void 0:t[e]}}return wm=r,wm}var Cm,Aw;function IW(){if(Aw)return Cm;Aw=1;var r=CM();function e(t){return function(n){return r(n,t)}}return Cm=e,Cm}var Im,Rw;function PW(){if(Rw)return Im;Rw=1;var r=CW(),e=IW(),t=gx(),n=df();function i(s){return t(s)?r(n(s)):e(s)}return Im=i,Im}var Pm,Ow;function AW(){if(Ow)return Pm;Ow=1;var r=vW(),e=wW(),t=lx(),n=Si(),i=PW();function s(a){return typeof a=="function"?a:a==null?t:typeof a=="object"?n(a)?e(a[0],a[1]):r(a):i(a)}return Pm=s,Pm}var Am,Mw;function RW(){if(Mw)return Am;Mw=1;var r=u$(),e=E$(),t=AW();function n(i,s){var a={};return s=t(s,3),e(i,function(o,u,l){r(a,s(o,u,l),o)}),a}return Am=n,Am}(function(r,e){(function(n,i){r.exports=i(Gz,Wz,FX,i$(),o$,RW())})(window,function(t,n,i,s,a,o){return function(u){var l={};function h(c){if(l[c])return l[c].exports;var f=l[c]={i:c,l:!1,exports:{}};return u[c].call(f.exports,f,f.exports,h),f.l=!0,f.exports}return h.m=u,h.c=l,h.d=function(c,f,p){h.o(c,f)||Object.defineProperty(c,f,{enumerable:!0,get:p})},h.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},h.t=function(c,f){if(f&1&&(c=h(c)),f&8||f&4&&typeof c=="object"&&c&&c.__esModule)return c;var p=Object.create(null);if(h.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:c}),f&2&&typeof c!="string")for(var v in c)h.d(p,v,function(g){return c[g]}.bind(null,v));return p},h.n=function(c){var f=c&&c.__esModule?function(){return c.default}:function(){return c};return h.d(f,"a",f),f},h.o=function(c,f){return Object.prototype.hasOwnProperty.call(c,f)},h.p="",h(h.s=29)}([function(u,l,h){h.d(l,"f",function(){return f}),h.d(l,"b",function(){return p}),h.d(l,"g",function(){return v}),h.d(l,"d",function(){return g}),h.d(l,"c",function(){return m}),h.d(l,"a",function(){return y}),h.d(l,"e",function(){return x});var c=h(1),f;(function(T){function E(C,...O){c.b.logLevel<=c.b.LOG_LEVEL_VERBOSE&&console.log(`[${C}]`,...O)}T.log=E;function b(C,...O){c.b.logLevel<=c.b.LOG_LEVEL_WARNING&&console.warn(`[${C}]`,...O)}T.warn=b;function w(C,...O){c.b.logLevel<=c.b.LOG_LEVEL_ERROR&&console.error(`[${C}]`,...O)}T.error=w})(f||(f={}));function p(T,E,b){return T<E?E:T>b?b:T}function v(T,E){return Math.random()*(E-T)+T}function g(T,E,b,w,C){const O=E[w];O!==null&&typeof O===T&&(b[C]=O)}function m(T,E,b,w,C){const O=E[w];Array.isArray(O)&&(b[C]=O.filter(R=>R!==null&&typeof R===T))}function y(T,E){E.forEach(b=>{Object.getOwnPropertyNames(b.prototype).forEach(w=>{w!=="constructor"&&Object.defineProperty(T.prototype,w,Object.getOwnPropertyDescriptor(b.prototype,w))})})}function x(T){let E=T.lastIndexOf("/");return E!=-1&&(T=T.slice(0,E)),E=T.lastIndexOf("/"),E!==-1&&(T=T.slice(E+1)),T}},function(u,l,h){h.d(l,"b",function(){return c}),h.d(l,"a",function(){return f});var c;(function(p){p.LOG_LEVEL_VERBOSE=0,p.LOG_LEVEL_WARNING=1,p.LOG_LEVEL_ERROR=2,p.LOG_LEVEL_NONE=999,p.logLevel=p.LOG_LEVEL_WARNING,p.sound=!0,p.motionSync=!0,p.motionFadingDuration=500,p.idleMotionFadingDuration=2e3,p.expressionFadingDuration=500})(c||(c={}));const f="0.3.1"},function(u,l){u.exports=t},function(u,l,h){h.d(l,"a",function(){return p});var c=h(15),f=h(16);class p{static load(g){return Object(f.a)(this.middlewares,g).then(()=>g.result)}}p.middlewares=[c.a.loader]},function(u,l,h){h.d(l,"a",function(){return I});var c=h(6),f=h(3),p=h(0),v=h(16),g=h(17);function m(D,F={}){var j;const z={resourceOptions:{crossorigin:F.crossOrigin}};if(g.Texture.fromURL)return g.Texture.fromURL(D,z).catch(Y=>{if(Y instanceof Error)throw Y;const L=new Error("Texture loading error");throw L.event=Y,L});z.resourceOptions.autoLoad=!1;const $=g.Texture.from(D,z);if($.baseTexture.valid)return Promise.resolve($);const H=$.baseTexture.resource;return(j=H._live2d_load)!==null&&j!==void 0||(H._live2d_load=new Promise((Y,L)=>{const B=N=>{H.source.removeEventListener("error",B);const U=new Error("Texture loading error");U.event=N,L(U)};H.source.addEventListener("error",B),H.load().then(()=>Y($)).catch(B)})),H._live2d_load}var y=function(D,F,j,z){function $(H){return H instanceof j?H:new j(function(Y){Y(H)})}return new(j||(j=Promise))(function(H,Y){function L(U){try{N(z.next(U))}catch(q){Y(q)}}function B(U){try{N(z.throw(U))}catch(q){Y(q)}}function N(U){U.done?H(U.value):$(U.value).then(L,B)}N((z=z.apply(D,F||[])).next())})};const x="Live2DFactory",T=(D,F)=>y(void 0,void 0,void 0,function*(){if(typeof D.source=="string"){const j=yield f.a.load({url:D.source,type:"json",target:D.live2dModel});j.url=D.source,D.source=j,D.live2dModel.emit("settingsJSONLoaded",j)}return F()}),E=(D,F)=>y(void 0,void 0,void 0,function*(){if(D.source instanceof c.f)return D.settings=D.source,F();if(typeof D.source=="object"){const j=I.findRuntime(D.source);if(j){const z=j.createModelSettings(D.source);return D.settings=z,D.live2dModel.emit("settingsLoaded",z),F()}}throw new TypeError("Unknown settings format.")}),b=(D,F)=>{if(D.settings){const j=I.findRuntime(D.settings);if(j)return j.ready().then(F)}return F()},w=(D,F)=>y(void 0,void 0,void 0,function*(){yield F();const j=D.internalModel;if(j){const z=D.settings,$=I.findRuntime(z);if($){const H=[];z.pose&&H.push(f.a.load({settings:z,url:z.pose,type:"json",target:j}).then(Y=>{j.pose=$.createPose(j.coreModel,Y),D.live2dModel.emit("poseLoaded",j.pose)}).catch(Y=>p.f.warn(x,`Failed to load pose.
`,Y))),z.physics&&H.push(f.a.load({settings:z,url:z.physics,type:"json",target:j}).then(Y=>{j.physics=$.createPhysics(j.coreModel,Y),D.live2dModel.emit("physicsLoaded",j.physics)}).catch(Y=>p.f.warn(x,`Failed to load physics.
`,Y))),H.length&&(yield Promise.all(H))}}}),C=(D,F)=>y(void 0,void 0,void 0,function*(){if(D.settings){const j=D.live2dModel,z=D.settings.textures.map($=>{const H=D.settings.resolveURL($);return m(H,{crossOrigin:D.options.crossOrigin})});if(yield F(),D.internalModel)j.internalModel=D.internalModel,j.emit("modelLoaded",D.internalModel);else throw new TypeError("Missing internal model.");j.textures=yield Promise.all(z),j.emit("textureLoaded",j.textures)}else throw new TypeError("Missing settings.")}),O=(D,F)=>y(void 0,void 0,void 0,function*(){const j=D.settings;if(j instanceof c.f){const z=I.findRuntime(j);if(!z)throw new TypeError("Unknown model settings.");const $=yield f.a.load({settings:j,url:j.moc,type:"arraybuffer",target:D.live2dModel});if(!z.isValidMoc($))throw new Error("Invalid moc data");const H=z.createCoreModel($);return D.internalModel=z.createInternalModel(H,j,D.options),F()}throw new TypeError("Missing settings.")});var R=function(D,F,j,z){function $(H){return H instanceof j?H:new j(function(Y){Y(H)})}return new(j||(j=Promise))(function(H,Y){function L(U){try{N(z.next(U))}catch(q){Y(q)}}function B(U){try{N(z.throw(U))}catch(q){Y(q)}}function N(U){U.done?H(U.value):$(U.value).then(L,B)}N((z=z.apply(D,F||[])).next())})};class I{static registerRuntime(F){I.runtimes.push(F),I.runtimes.sort((j,z)=>z.version-j.version)}static findRuntime(F){for(const j of I.runtimes)if(j.test(F))return j}static setupLive2DModel(F,j,z){return R(this,void 0,void 0,function*(){const $=new Promise(L=>F.once("textureLoaded",L)),H=new Promise(L=>F.once("modelLoaded",L)),Y=Promise.all([$,H]).then(()=>F.emit("ready"));yield Object(v.a)(I.live2DModelMiddlewares,{live2dModel:F,source:j,options:z||{}}),yield Y,F.emit("load")})}static loadMotion(F,j,z){var $,H;const Y=L=>F.emit("motionLoadError",j,z,L);try{const L=($=F.definitions[j])===null||$===void 0?void 0:$[z];if(!L)return Promise.resolve(void 0);F.listeners("destroy").includes(I.releaseTasks)||F.once("destroy",I.releaseTasks);let B=I.motionTasksMap.get(F);B||(B={},I.motionTasksMap.set(F,B));let N=B[j];N||(N=[],B[j]=N);const U=F.getMotionFile(L);return(H=N[z])!==null&&H!==void 0||(N[z]=f.a.load({url:U,settings:F.settings,type:F.motionDataType,target:F}).then(q=>{var Q;const ne=(Q=I.motionTasksMap.get(F))===null||Q===void 0?void 0:Q[j];ne&&delete ne[z];const de=F.createMotion(q,j,L);return F.emit("motionLoaded",j,z,de),de}).catch(q=>{p.f.warn(F.tag,`Failed to load motion: ${U}
`,q),Y(q)})),N[z]}catch(L){p.f.warn(F.tag,`Failed to load motion at "${j}"[${z}]
`,L),Y(L)}return Promise.resolve(void 0)}static loadExpression(F,j){var z;const $=H=>F.emit("expressionLoadError",j,H);try{const H=F.definitions[j];if(!H)return Promise.resolve(void 0);F.listeners("destroy").includes(I.releaseTasks)||F.once("destroy",I.releaseTasks);let Y=I.expressionTasksMap.get(F);Y||(Y=[],I.expressionTasksMap.set(F,Y));const L=F.getExpressionFile(H);return(z=Y[j])!==null&&z!==void 0||(Y[j]=f.a.load({url:L,settings:F.settings,type:"json",target:F}).then(B=>{const N=I.expressionTasksMap.get(F);N&&delete N[j];const U=F.createExpression(B,H);return F.emit("expressionLoaded",j,U),U}).catch(B=>{p.f.warn(F.tag,`Failed to load expression: ${L}
`,B),$(B)})),Y[j]}catch(H){p.f.warn(F.tag,`Failed to load expression at [${j}]
`,H),$(H)}return Promise.resolve(void 0)}static releaseTasks(){this instanceof c.g?I.motionTasksMap.delete(this):I.expressionTasksMap.delete(this)}}I.runtimes=[],I.urlToJSON=T,I.jsonToSettings=E,I.waitUntilReady=b,I.setupOptionals=w,I.setupEssentials=C,I.createInternalModel=O,I.live2DModelMiddlewares=[T,E,b,w,C,O],I.motionTasksMap=new WeakMap,I.expressionTasksMap=new WeakMap,c.g.prototype._loadMotion=function(D,F){return I.loadMotion(this,D,F)},c.a.prototype._loadExpression=function(D){return I.loadExpression(this,D)}},function(u,l){u.exports=n},function(u,l,h){var c=h(8);h.d(l,"d",function(){return c.a}),h.d(l,"e",function(){return c.b});var f=h(10);h.d(l,"a",function(){return f.a});var p=h(14);h.d(l,"b",function(){return p.a});var v=h(11);h.d(l,"f",function(){return v.a});var g=h(9);h.d(l,"i",function(){return g.a}),h.d(l,"j",function(){return g.b});var m=h(12);h.d(l,"g",function(){return m.a}),h.d(l,"h",function(){return m.b});var y=h(7);h.d(l,"k",function(){return y.a});var x=h(13);h.d(l,"c",function(){return x.a})},function(u,l,h){h.d(l,"a",function(){return m});var c=h(0),f=h(19),p=h.n(f);const v="SoundManager",g=.5;class m{static get volume(){return this._volume}static set volume(x){this._volume=(x>1?1:x<0?0:x)||0,this.audios.forEach(T=>T.volume=this._volume)}static add(x,T,E){const b=new Audio(x);return b.volume=this._volume,b.preload="auto",b.addEventListener("ended",()=>{this.dispose(b),T==null||T()}),b.addEventListener("error",w=>{this.dispose(b),c.f.warn(v,`Error occurred on "${x}"`,w.error),E==null||E(w.error)}),this.audios.push(b),b}static play(x){return new Promise((T,E)=>{var b;(b=x.play())===null||b===void 0||b.catch(w=>{x.dispatchEvent(new ErrorEvent("error",{error:w})),E(w)}),x.readyState===x.HAVE_ENOUGH_DATA?T():x.addEventListener("canplaythrough",T)})}static dispose(x){x.pause(),x.removeAttribute("src"),p()(this.audios,x)}static destroy(){for(let x=this.audios.length-1;x>=0;x--)this.dispose(this.audios[x])}}m.audios=[],m._volume=g},function(u,l,h){h.d(l,"b",function(){return c}),h.d(l,"a",function(){return f});const c=2,f=2},function(u,l,h){h.d(l,"a",function(){return f}),h.d(l,"b",function(){return p});var c=h(0),f;(function(v){v[v.NONE=0]="NONE",v[v.IDLE=1]="IDLE",v[v.NORMAL=2]="NORMAL",v[v.FORCE=3]="FORCE"})(f||(f={}));class p{constructor(){this.debug=!1,this.currentPriority=f.NONE,this.reservePriority=f.NONE}reserve(g,m,y){if(y<=f.NONE)return c.f.log(this.tag,"Cannot start a motion with MotionPriority.NONE."),!1;if(g===this.currentGroup&&m===this.currentIndex)return c.f.log(this.tag,"Motion is already playing.",this.dump(g,m)),!1;if(g===this.reservedGroup&&m===this.reservedIndex||g===this.reservedIdleGroup&&m===this.reservedIdleIndex)return c.f.log(this.tag,"Motion is already reserved.",this.dump(g,m)),!1;if(y===f.IDLE){if(this.currentPriority!==f.NONE)return c.f.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(g,m)),!1;if(this.reservedIdleGroup!==void 0)return c.f.log(this.tag,"Cannot start idle motion because another idle motion has reserved.",this.dump(g,m)),!1;this.setReservedIdle(g,m)}else{if(y<f.FORCE){if(y<=this.currentPriority)return c.f.log(this.tag,"Cannot start motion because another motion is playing as an equivalent or higher priority.",this.dump(g,m)),!1;if(y<=this.reservePriority)return c.f.log(this.tag,"Cannot start motion because another motion has reserved as an equivalent or higher priority.",this.dump(g,m)),!1}this.setReserved(g,m,y)}return!0}start(g,m,y,x){if(x===f.IDLE){if(this.setReservedIdle(void 0,void 0),this.currentPriority!==f.NONE)return c.f.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(m,y)),!1}else{if(m!==this.reservedGroup||y!==this.reservedIndex)return c.f.log(this.tag,"Cannot start motion because another motion has taken the place.",this.dump(m,y)),!1;this.setReserved(void 0,void 0,f.NONE)}return g?(this.setCurrent(m,y,x),!0):!1}complete(){this.setCurrent(void 0,void 0,f.NONE)}setCurrent(g,m,y){this.currentPriority=y,this.currentGroup=g,this.currentIndex=m}setReserved(g,m,y){this.reservePriority=y,this.reservedGroup=g,this.reservedIndex=m}setReservedIdle(g,m){this.reservedIdleGroup=g,this.reservedIdleIndex=m}isActive(g,m){return g===this.currentGroup&&m===this.currentIndex||g===this.reservedGroup&&m===this.reservedIndex||g===this.reservedIdleGroup&&m===this.reservedIdleIndex}reset(){this.setCurrent(void 0,void 0,f.NONE),this.setReserved(void 0,void 0,f.NONE),this.setReservedIdle(void 0,void 0)}shouldRequestIdleMotion(){return this.currentGroup===void 0&&this.reservedIdleGroup===void 0}shouldOverrideExpression(){return this.currentPriority>f.IDLE}dump(g,m){if(this.debug){const y=["currentPriority","reservePriority","currentGroup","currentIndex","reservedGroup","reservedIndex","reservedIdleGroup","reservedIdleIndex"];return`
<Requested> group = "${g}", index = ${m}
`+y.map(x=>"["+x+"] "+this[x]).join(`
`)}return""}}},function(u,l,h){h.d(l,"a",function(){return v});var c=h(0),f=h(2),p=function(g,m,y,x){function T(E){return E instanceof y?E:new y(function(b){b(E)})}return new(y||(y=Promise))(function(E,b){function w(R){try{O(x.next(R))}catch(I){b(I)}}function C(R){try{O(x.throw(R))}catch(I){b(I)}}function O(R){R.done?E(R.value):T(R.value).then(w,C)}O((x=x.apply(g,m||[])).next())})};class v extends f.EventEmitter{constructor(m,y){super(),this.expressions=[],this.reserveExpressionIndex=-1,this.destroyed=!1,this.settings=m,this.tag=`ExpressionManager(${m.name})`}init(){this.defaultExpression=this.createExpression({},void 0),this.currentExpression=this.defaultExpression,this.stopAllExpressions()}loadExpression(m){return p(this,void 0,void 0,function*(){if(!this.definitions[m]){c.f.warn(this.tag,`Undefined expression at [${m}]`);return}if(this.expressions[m]===null){c.f.warn(this.tag,`Cannot set expression at [${m}] because it's already failed in loading.`);return}if(this.expressions[m])return this.expressions[m];const y=yield this._loadExpression(m);return this.expressions[m]=y,y})}_loadExpression(m){throw new Error("Not implemented.")}setRandomExpression(){return p(this,void 0,void 0,function*(){if(this.definitions.length){const m=[];for(let y=0;y<this.definitions.length;y++)this.expressions[y]!==null&&this.expressions[y]!==this.currentExpression&&y!==this.reserveExpressionIndex&&m.push(y);if(m.length){const y=Math.floor(Math.random()*m.length);return this.setExpression(y)}}return!1})}resetExpression(){this._setExpression(this.defaultExpression)}restoreExpression(){this._setExpression(this.currentExpression)}setExpression(m){return p(this,void 0,void 0,function*(){if(typeof m!="number"&&(m=this.getExpressionIndex(m)),!(m>-1&&m<this.definitions.length)||m===this.expressions.indexOf(this.currentExpression))return!1;this.reserveExpressionIndex=m;const y=yield this.loadExpression(m);return!y||this.reserveExpressionIndex!==m?!1:(this.reserveExpressionIndex=-1,this.currentExpression=y,this._setExpression(y),!0)})}update(m,y){return this.isFinished()?!1:this.updateParameters(m,y)}destroy(){this.destroyed=!0,this.emit("destroy");const m=this;m.definitions=void 0,m.expressions=void 0}}},function(u,l,h){h.d(l,"a",function(){return p});var c=h(0),f=h(2);class p{constructor(g){this.json=g;let m=g.url;if(typeof m!="string")throw new TypeError("The `url` field in settings JSON must be defined as a string.");this.url=m,this.name=Object(c.e)(this.url)}resolveURL(g){return f.url.resolve(this.url,g)}replaceFiles(g){this.moc=g(this.moc,"moc"),this.pose!==void 0&&(this.pose=g(this.pose,"pose")),this.physics!==void 0&&(this.physics=g(this.physics,"physics"));for(let m=0;m<this.textures.length;m++)this.textures[m]=g(this.textures[m],`textures[${m}]`)}getDefinedFiles(){const g=[];return this.replaceFiles(m=>(g.push(m),m)),g}validateFiles(g){const m=(T,E)=>{const b=this.resolveURL(T);if(!g.includes(b)){if(E)throw new Error(`File "${T}" is defined in settings, but doesn't exist in given files`);return!1}return!0};return[this.moc,...this.textures].forEach(T=>m(T,!0)),this.getDefinedFiles().filter(T=>m(T,!1))}}},function(u,l,h){h.d(l,"b",function(){return y}),h.d(l,"a",function(){return x});var c=h(1),f=h(9),p=h(7),v=h(0),g=h(2),m=function(T,E,b,w){function C(O){return O instanceof b?O:new b(function(R){R(O)})}return new(b||(b=Promise))(function(O,R){function I(j){try{F(w.next(j))}catch(z){R(z)}}function D(j){try{F(w.throw(j))}catch(z){R(z)}}function F(j){j.done?O(j.value):C(j.value).then(I,D)}F((w=w.apply(T,E||[])).next())})},y;(function(T){T.ALL="ALL",T.IDLE="IDLE",T.NONE="NONE"})(y||(y={}));class x extends g.EventEmitter{constructor(E,b){super(),this.motionGroups={},this.state=new f.b,this.playing=!1,this.destroyed=!1,this.settings=E,this.tag=`MotionManager(${E.name})`,this.state.tag=this.tag}init(E){E!=null&&E.idleMotionGroup&&(this.groups.idle=E.idleMotionGroup),this.setupMotions(E),this.stopAllMotions()}setupMotions(E){for(const w of Object.keys(this.definitions))this.motionGroups[w]=[];let b;switch(E==null?void 0:E.motionPreload){case y.NONE:return;case y.ALL:b=Object.keys(this.definitions);break;case y.IDLE:default:b=[this.groups.idle];break}for(const w of b)if(this.definitions[w])for(let C=0;C<this.definitions[w].length;C++)this.loadMotion(w,C).then()}loadMotion(E,b){var w;return m(this,void 0,void 0,function*(){if(!(!((w=this.definitions[E])===null||w===void 0)&&w[b])){v.f.warn(this.tag,`Undefined motion at "${E}"[${b}]`);return}if(this.motionGroups[E][b]===null){v.f.warn(this.tag,`Cannot start motion at "${E}"[${b}] because it's already failed in loading.`);return}if(this.motionGroups[E][b])return this.motionGroups[E][b];const C=yield this._loadMotion(E,b);if(!this.destroyed)return this.motionGroups[E][b]=C??null,C})}_loadMotion(E,b){throw new Error("Not implemented.")}startMotion(E,b,w=f.a.NORMAL){var C;return m(this,void 0,void 0,function*(){if(!this.state.reserve(E,b,w))return!1;const O=(C=this.definitions[E])===null||C===void 0?void 0:C[b];if(!O)return!1;this.currentAudio&&p.a.dispose(this.currentAudio);let R;if(c.b.sound){const D=this.getSoundFile(O);if(D)try{R=p.a.add(this.settings.resolveURL(D),()=>this.currentAudio=void 0,()=>this.currentAudio=void 0),this.currentAudio=R}catch(F){v.f.warn(this.tag,"Failed to create audio",D,F)}}const I=yield this.loadMotion(E,b);if(R){const D=p.a.play(R).catch(F=>v.f.warn(this.tag,"Failed to play audio",R.src,F));c.b.motionSync&&(yield D)}return this.state.start(I,E,b,w)?(v.f.log(this.tag,"Start motion:",this.getMotionName(O)),this.emit("motionStart",E,b,R),this.state.shouldOverrideExpression()&&this.expressionManager&&this.expressionManager.resetExpression(),this.playing=!0,this._startMotion(I),!0):(R&&(p.a.dispose(R),this.currentAudio=void 0),!1)})}startRandomMotion(E,b){return m(this,void 0,void 0,function*(){const w=this.definitions[E];if(w!=null&&w.length){const C=[];for(let O=0;O<w.length;O++)this.motionGroups[E][O]!==null&&!this.state.isActive(E,O)&&C.push(O);if(C.length){const O=Math.floor(Math.random()*C.length);return this.startMotion(E,C[O],b)}}return!1})}stopAllMotions(){this._stopAllMotions(),this.state.reset(),this.currentAudio&&(p.a.dispose(this.currentAudio),this.currentAudio=void 0)}update(E,b){var w,C;this.isFinished()&&(this.playing&&(this.playing=!1,this.emit("motionFinish")),this.state.shouldOverrideExpression()&&((w=this.expressionManager)===null||w===void 0||w.restoreExpression()),this.state.complete(),this.state.shouldRequestIdleMotion()&&this.startRandomMotion(this.groups.idle,f.a.IDLE));let O=this.updateParameters(E,b);return O=((C=this.expressionManager)===null||C===void 0?void 0:C.update(E,b))||O,O}destroy(){var E;this.destroyed=!0,this.emit("destroy"),this.stopAllMotions(),(E=this.expressionManager)===null||E===void 0||E.destroy();const b=this;b.definitions=void 0,b.motionGroups=void 0}}},function(u,l,h){h.d(l,"a",function(){return m});var c=h(8),f=h(14),p=h(5),v=h(2);const g={x:0,y:0,width:0,height:0};class m extends v.EventEmitter{constructor(){super(...arguments),this.focusController=new f.a,this.originalWidth=0,this.originalHeight=0,this.width=0,this.height=0,this.localTransform=new p.Matrix,this.drawingMatrix=new p.Matrix,this.hitAreas={},this.textureFlipY=!1,this.viewport=[0,0,0,0],this.destroyed=!1}init(){this.setupLayout(),this.setupHitAreas()}setupLayout(){const x=this,T=this.getSize();x.originalWidth=T[0],x.originalHeight=T[1];const E=Object.assign({width:c.b,height:c.a},this.getLayout());this.localTransform.scale(E.width/c.b,E.height/c.a),x.width=this.originalWidth*this.localTransform.a,x.height=this.originalHeight*this.localTransform.d;const b=E.x!==void 0&&E.x-E.width/2||E.centerX!==void 0&&E.centerX||E.left!==void 0&&E.left-E.width/2||E.right!==void 0&&E.right+E.width/2||0,w=E.y!==void 0&&E.y-E.height/2||E.centerY!==void 0&&E.centerY||E.top!==void 0&&E.top-E.height/2||E.bottom!==void 0&&E.bottom+E.height/2||0;this.localTransform.translate(this.width*b,-this.height*w)}setupHitAreas(){const x=this.getHitAreaDefs().filter(T=>T.index>=0);for(const T of x)this.hitAreas[T.name]=T}hitTest(x,T){return Object.keys(this.hitAreas).filter(E=>this.isHit(E,x,T))}isHit(x,T,E){if(!this.hitAreas[x])return!1;const b=this.hitAreas[x].index,w=this.getDrawableBounds(b,g);return w.x<=T&&T<=w.x+w.width&&w.y<=E&&E<=w.y+w.height}getDrawableBounds(x,T){const E=this.getDrawableVertices(x);let b=E[0],w=E[0],C=E[1],O=E[1];for(let R=0;R<E.length;R+=2){const I=E[R],D=E[R+1];b=Math.min(I,b),w=Math.max(I,w),C=Math.min(D,C),O=Math.max(D,O)}return T??(T={}),T.x=b,T.y=C,T.width=w-b,T.height=O-C,T}updateTransform(x){this.drawingMatrix.copyFrom(x).append(this.localTransform)}update(x,T){this.focusController.update(x)}destroy(){this.destroyed=!0,this.emit("destroy"),this.motionManager.destroy(),this.motionManager=void 0}}},function(u,l,h){h.d(l,"a",function(){return g});var c=h(0);const f=.01,p=40/7.5,v=1/(.15*1e3);class g{constructor(){this.targetX=0,this.targetY=0,this.x=0,this.y=0,this.vx=0,this.vy=0}focus(y,x,T=!1){this.targetX=Object(c.b)(y,-1,1),this.targetY=Object(c.b)(x,-1,1),T&&(this.x=this.targetX,this.y=this.targetY)}update(y){const x=this.targetX-this.x,T=this.targetY-this.y;if(Math.abs(x)<f&&Math.abs(T)<f)return;const E=Math.sqrt(Math.pow(x,2)+Math.pow(T,2)),b=p/(1e3/y);let w=b*(x/E)-this.vx,C=b*(T/E)-this.vy;const O=Math.sqrt(Math.pow(w,2)+Math.pow(C,2)),R=b*v*y;O>R&&(w*=R/O,C*=R/O),this.vx+=w,this.vy+=C;const I=Math.sqrt(Math.pow(this.vx,2)+Math.pow(this.vy,2)),D=.5*(Math.sqrt(Math.pow(R,2)+8*R*E)-R);I>D&&(this.vx*=D/I,this.vy*=D/I),this.x+=this.vx,this.y+=this.vy}}},function(u,l,h){h.d(l,"a",function(){return v});var c=h(0);const f="XHRLoader";class p extends Error{constructor(m,y,x,T=!1){super(m),this.url=y,this.status=x,this.aborted=T}}class v{static createXHR(m,y,x,T,E){const b=new XMLHttpRequest;if(v.allXhrSet.add(b),m){let w=v.xhrMap.get(m);w?w.add(b):(w=new Set([b]),v.xhrMap.set(m,w)),m.listeners("destroy").includes(v.cancelXHRs)||m.once("destroy",v.cancelXHRs)}return b.open("GET",y),b.responseType=x,b.onload=()=>{(b.status===200||b.status===0)&&b.response?T(b.response):b.onerror()},b.onerror=()=>{c.f.warn(f,`Failed to load resource as ${b.responseType} (Status ${b.status}): ${y}`),E(new p("Network error.",y,b.status))},b.onabort=()=>E(new p("Aborted.",y,b.status,!0)),b.onloadend=()=>{var w;v.allXhrSet.delete(b),m&&((w=v.xhrMap.get(m))===null||w===void 0||w.delete(b))},b}static cancelXHRs(){var m;(m=v.xhrMap.get(this))===null||m===void 0||m.forEach(y=>{y.abort(),v.allXhrSet.delete(y)}),v.xhrMap.delete(this)}static release(){v.allXhrSet.forEach(m=>m.abort()),v.allXhrSet.clear(),v.xhrMap=new WeakMap}}v.xhrMap=new WeakMap,v.allXhrSet=new Set,v.loader=(g,m)=>new Promise((y,x)=>{v.createXHR(g.target,g.settings?g.settings.resolveURL(g.url):g.url,g.type,E=>{g.result=E,y()},x).send()})},function(u,l,h){h.d(l,"a",function(){return c});function c(f,p){let v=-1;return g(0);function g(m,y){if(y)return Promise.reject(y);if(m<=v)return Promise.reject(new Error("next() called multiple times"));v=m;const x=f[m];if(!x)return Promise.resolve();try{return Promise.resolve(x(p,g.bind(null,m+1)))}catch(T){return Promise.reject(T)}}}},function(u,l){u.exports=i},function(u,l,h){h.d(l,"g",function(){return c.e}),h.d(l,"f",function(){return c.d}),h.d(l,"a",function(){return c.a}),h.d(l,"c",function(){return c.b}),h.d(l,"l",function(){return c.f}),h.d(l,"o",function(){return c.i}),h.d(l,"p",function(){return c.j}),h.d(l,"n",function(){return c.h}),h.d(l,"m",function(){return c.g}),h.d(l,"q",function(){return c.k}),h.d(l,"e",function(){return c.c}),h.d(l,"j",function(){return O}),h.d(l,"k",function(){return x}),h.d(l,"d",function(){return g}),h.d(l,"w",function(){return R.b}),h.d(l,"r",function(){return R.a}),h.d(l,"h",function(){return f.a}),h.d(l,"i",function(){return I.a}),h.d(l,"s",function(){return D.a}),h.d(l,"b",function(){return z}),h.d(l,"t",function(){return H}),h.d(l,"A",function(){return T.f}),h.d(l,"v",function(){return T.b}),h.d(l,"B",function(){return T.g}),h.d(l,"y",function(){return T.d}),h.d(l,"x",function(){return T.c}),h.d(l,"u",function(){return T.a}),h.d(l,"z",function(){return T.e});var c=h(6),f=h(4),p=h(20),v=h(5);class g{constructor(){this._autoInteract=!1}get autoInteract(){return this._autoInteract}set autoInteract(L){L!==this._autoInteract&&(L?this.on("pointertap",m,this):this.off("pointertap",m,this),this._autoInteract=L)}registerInteraction(L){L!==this.interactionManager&&(this.unregisterInteraction(),this._autoInteract&&L&&(this.interactionManager=L,L.on("pointermove",y,this)))}unregisterInteraction(){var L;this.interactionManager&&((L=this.interactionManager)===null||L===void 0||L.off("pointermove",y,this),this.interactionManager=void 0)}}function m(Y){this.tap(Y.data.global.x,Y.data.global.y)}function y(Y){this.focus(Y.data.global.x,Y.data.global.y)}class x extends v.Transform{}var T=h(0),E;const b=new v.Point,w=new v.Matrix;let C=(E=window.PIXI)===null||E===void 0?void 0:E.Ticker;class O extends p.Container{constructor(L){super(),this.tag="Live2DModel(uninitialized)",this.textures=[],this.transform=new x,this.anchor=new v.ObservablePoint(this.onAnchorChange,this,0,0),this.glContextID=-1,this.elapsedTime=performance.now(),this.deltaTime=0,this._autoUpdate=!1,this.once("modelLoaded",()=>this.init(L))}static from(L,B){const N=new this(B);return f.a.setupLive2DModel(N,L,B).then(()=>N)}static fromSync(L,B){const N=new this(B);return f.a.setupLive2DModel(N,L,B).then(B==null?void 0:B.onLoad).catch(B==null?void 0:B.onError),N}static registerTicker(L){C=L}get autoUpdate(){return this._autoUpdate}set autoUpdate(L){L?this._destroyed||(C?(C.shared.add(this.onTickerUpdate,this),this._autoUpdate=!0):T.f.warn(this.tag,"No Ticker registered, please call Live2DModel.registerTicker(Ticker).")):(C==null||C.shared.remove(this.onTickerUpdate,this),this._autoUpdate=!1)}init(L){this.tag=`Live2DModel(${this.internalModel.settings.name})`;const B=Object.assign({autoUpdate:!0,autoInteract:!0},L);B.autoInteract&&(this.interactive=!0),this.autoInteract=B.autoInteract,this.autoUpdate=B.autoUpdate}onAnchorChange(){this.pivot.set(this.anchor.x*this.internalModel.width,this.anchor.y*this.internalModel.height)}motion(L,B,N){return B===void 0?this.internalModel.motionManager.startRandomMotion(L,N):this.internalModel.motionManager.startMotion(L,B,N)}expression(L){return this.internalModel.motionManager.expressionManager?L===void 0?this.internalModel.motionManager.expressionManager.setRandomExpression():this.internalModel.motionManager.expressionManager.setExpression(L):Promise.resolve(!1)}focus(L,B,N=!1){b.x=L,b.y=B,this.toModelPosition(b,b,!0),this.internalModel.focusController.focus(b.x/this.internalModel.originalWidth*2-1,-(b.y/this.internalModel.originalHeight*2-1),N)}tap(L,B){const N=this.hitTest(L,B);N.length&&(T.f.log(this.tag,"Hit",N),this.emit("hit",N))}hitTest(L,B){return b.x=L,b.y=B,this.toModelPosition(b,b),this.internalModel.hitTest(b.x,b.y)}toModelPosition(L,B=L.clone(),N){return N||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.transform.worldTransform.applyInverse(L,B),this.internalModel.localTransform.applyInverse(B,B),B}containsPoint(L){return this.getBounds(!0).contains(L.x,L.y)}_calculateBounds(){this._bounds.addFrame(this.transform,0,0,this.internalModel.width,this.internalModel.height)}onTickerUpdate(){this.update(C.shared.deltaMS)}update(L){this.deltaTime+=L,this.elapsedTime+=L}_render(L){this.registerInteraction(L.plugins.interaction),L.batch.reset(),L.geometry.reset(),L.shader.reset(),L.state.reset();let B=!1;this.glContextID!==L.CONTEXT_UID&&(this.glContextID=L.CONTEXT_UID,this.internalModel.updateWebGLContext(L.gl,this.glContextID),B=!0);for(let q=0;q<this.textures.length;q++){const Q=this.textures[q];Q.valid&&((B||!Q.baseTexture._glTextures[this.glContextID])&&(L.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL,this.internalModel.textureFlipY),L.texture.bind(Q.baseTexture,0)),this.internalModel.bindTexture(q,Q.baseTexture._glTextures[this.glContextID].texture),Q.baseTexture.touched=L.textureGC.count)}const N=L.framebuffer.viewport;this.internalModel.viewport=[N.x,N.y,N.width,N.height],this.deltaTime&&(this.internalModel.update(this.deltaTime,this.elapsedTime),this.deltaTime=0);const U=w.copyFrom(L.globalUniforms.uniforms.projectionMatrix).append(this.worldTransform);this.internalModel.updateTransform(U),this.internalModel.draw(L.gl),L.state.reset(),L.texture.reset()}destroy(L){this.emit("destroy"),this.autoUpdate=!1,this.unregisterInteraction(),L!=null&&L.texture&&this.textures.forEach(B=>B.destroy(L.baseTexture)),this.internalModel.destroy(),super.destroy(L)}}Object(T.a)(O,[g]);var R=h(1),I=h(3),D=h(15),F=h(2),j=function(Y,L,B,N){function U(q){return q instanceof B?q:new B(function(Q){Q(q)})}return new(B||(B=Promise))(function(q,Q){function ne(oe){try{ge(N.next(oe))}catch(Ee){Q(Ee)}}function de(oe){try{ge(N.throw(oe))}catch(Ee){Q(Ee)}}function ge(oe){oe.done?q(oe.value):U(oe.value).then(ne,de)}ge((N=N.apply(Y,L||[])).next())})};class z{static resolveURL(L,B){var N;const U=(N=z.filesMap[L])===null||N===void 0?void 0:N[B];if(U===void 0)throw new Error("Cannot find this file from uploaded files: "+B);return U}static upload(L,B){return j(this,void 0,void 0,function*(){const N={};for(const U of B.getDefinedFiles()){const q=decodeURI(F.url.resolve(B.url,U)),Q=L.find(ne=>ne.webkitRelativePath===q);Q&&(N[U]=URL.createObjectURL(Q))}z.filesMap[B._objectURL]=N})}static createSettings(L){return j(this,void 0,void 0,function*(){const B=L.find(ne=>ne.name.endsWith("model.json")||ne.name.endsWith("model3.json"));if(!B)throw new TypeError("Settings file not found");const N=yield z.readText(B),U=JSON.parse(N);U.url=B.webkitRelativePath;const q=f.a.findRuntime(U);if(!q)throw new Error("Unknown settings JSON");const Q=q.createModelSettings(U);return Q._objectURL=URL.createObjectURL(B),Q})}static readText(L){return j(this,void 0,void 0,function*(){return new Promise((B,N)=>{const U=new FileReader;U.onload=()=>B(U.result),U.onerror=N,U.readAsText(L,"utf8")})})}}z.filesMap={},z.factory=(Y,L)=>j(void 0,void 0,void 0,function*(){if(Array.isArray(Y.source)&&Y.source[0]instanceof File){const B=Y.source;let N=B.settings;if(!N)N=yield z.createSettings(B);else if(!N._objectURL)throw new Error('"_objectURL" must be specified in ModelSettings');N.validateFiles(B.map(U=>encodeURI(U.webkitRelativePath))),yield z.upload(B,N),N.resolveURL=function(U){return z.resolveURL(this._objectURL,U)},Y.source=N,Y.live2dModel.once("modelLoaded",U=>{U.once("destroy",function(){const q=this.settings._objectURL;if(URL.revokeObjectURL(q),z.filesMap[q])for(const Q of Object.values(z.filesMap[q]))URL.revokeObjectURL(Q);delete z.filesMap[q]})})}return L()}),f.a.live2DModelMiddlewares.unshift(z.factory);var $=function(Y,L,B,N){function U(q){return q instanceof B?q:new B(function(Q){Q(q)})}return new(B||(B=Promise))(function(q,Q){function ne(oe){try{ge(N.next(oe))}catch(Ee){Q(Ee)}}function de(oe){try{ge(N.throw(oe))}catch(Ee){Q(Ee)}}function ge(oe){oe.done?q(oe.value):U(oe.value).then(ne,de)}ge((N=N.apply(Y,L||[])).next())})};class H{static unzip(L,B){return $(this,void 0,void 0,function*(){const N=yield H.getFilePaths(L),U=[];for(const Q of B.getDefinedFiles()){const ne=decodeURI(F.url.resolve(B.url,Q));N.includes(ne)&&U.push(ne)}const q=yield H.getFiles(L,U);for(let Q=0;Q<q.length;Q++){const ne=U[Q],de=q[Q];Object.defineProperty(de,"webkitRelativePath",{value:ne})}return q})}static createSettings(L){return $(this,void 0,void 0,function*(){const N=(yield H.getFilePaths(L)).find(ne=>ne.endsWith("model.json")||ne.endsWith("model3.json"));if(!N)throw new Error("Settings file not found");const U=yield H.readText(L,N);if(!U)throw new Error("Empty settings file: "+N);const q=JSON.parse(U);q.url=N;const Q=f.a.findRuntime(q);if(!Q)throw new Error("Unknown settings JSON");return Q.createModelSettings(q)})}static zipReader(L,B){return $(this,void 0,void 0,function*(){throw new Error("Not implemented")})}static getFilePaths(L){return $(this,void 0,void 0,function*(){throw new Error("Not implemented")})}static getFiles(L,B){return $(this,void 0,void 0,function*(){throw new Error("Not implemented")})}static readText(L,B){return $(this,void 0,void 0,function*(){throw new Error("Not implemented")})}static releaseReader(L){}}H.ZIP_PROTOCOL="zip://",H.uid=0,H.factory=(Y,L)=>$(void 0,void 0,void 0,function*(){const B=Y.source;let N,U,q;if(typeof B=="string"&&(B.endsWith(".zip")||B.startsWith(H.ZIP_PROTOCOL))?(B.startsWith(H.ZIP_PROTOCOL)?N=B.slice(H.ZIP_PROTOCOL.length):N=B,U=yield I.a.load({url:N,type:"blob",target:Y.live2dModel})):Array.isArray(B)&&B.length===1&&B[0]instanceof File&&B[0].name.endsWith(".zip")&&(U=B[0],N=URL.createObjectURL(U),q=B.settings),U){if(!U.size)throw new Error("Empty zip file");const Q=yield H.zipReader(U,N);q||(q=yield H.createSettings(Q)),q._objectURL=H.ZIP_PROTOCOL+H.uid+"/"+q.url;const ne=yield H.unzip(Q,q);ne.settings=q,Y.source=ne,N.startsWith("blob:")&&Y.live2dModel.once("modelLoaded",de=>{de.once("destroy",function(){URL.revokeObjectURL(N)})}),H.releaseReader(Q)}return L()}),f.a.live2DModelMiddlewares.unshift(H.factory)},function(u,l){u.exports=s},function(u,l){u.exports=a},,function(u,l,h){h.d(l,"a",function(){return U}),h.d(l,"c",function(){return de}),h.d(l,"d",function(){return yx}),h.d(l,"b",function(){return Ex}),h.d(l,"e",function(){return Sx}),h.d(l,"f",function(){return wx}),h(26);var c=h(10);class f{constructor(d,_){this.x=d||0,this.y=_||0}add(d){const _=new f(0,0);return _.x=this.x+d.x,_.y=this.y+d.y,_}substract(d){const _=new f(0,0);return _.x=this.x-d.x,_.y=this.y-d.y,_}multiply(d){const _=new f(0,0);return _.x=this.x*d.x,_.y=this.y*d.y,_}multiplyByScaler(d){return this.multiply(new f(d,d))}division(d){const _=new f(0,0);return _.x=this.x/d.x,_.y=this.y/d.y,_}divisionByScalar(d){return this.division(new f(d,d))}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}getDistanceWith(d){return Math.sqrt((this.x-d.x)*(this.x-d.x)+(this.y-d.y)*(this.y-d.y))}dot(d){return this.x*d.x+this.y*d.y}normalize(){const d=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/d,this.y=this.y/d}isEqual(d){return this.x==d.x&&this.y==d.y}isNotEqual(d){return!this.isEqual(d)}}class p{static range(d,_,S){return d<_?d=_:d>S&&(d=S),d}static sin(d){return Math.sin(d)}static cos(d){return Math.cos(d)}static abs(d){return Math.abs(d)}static sqrt(d){return Math.sqrt(d)}static getEasingSine(d){return d<0?0:d>1?1:.5-.5*this.cos(d*Math.PI)}static max(d,_){return d>_?d:_}static min(d,_){return d>_?_:d}static degreesToRadian(d){return d/180*Math.PI}static radianToDegrees(d){return d*180/Math.PI}static directionToRadian(d,_){const S=Math.atan2(_.y,_.x),P=Math.atan2(d.y,d.x);let M=S-P;for(;M<-Math.PI;)M+=Math.PI*2;for(;M>Math.PI;)M-=Math.PI*2;return M}static directionToDegrees(d,_){const S=this.directionToRadian(d,_);let P=this.radianToDegrees(S);return _.x-d.x>0&&(P=-P),P}static radianToDirection(d){const _=new f;return _.x=this.sin(d),_.y=this.cos(d),_}constructor(){}}class v{constructor(){this._tr=new Float32Array(16),this.loadIdentity()}static multiply(d,_,S){const P=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),M=4;for(let k=0;k<M;++k)for(let G=0;G<M;++G)for(let X=0;X<M;++X)P[G+k*4]+=d[X+k*4]*_[G+X*4];for(let k=0;k<16;++k)S[k]=P[k]}loadIdentity(){const d=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(d)}setMatrix(d){for(let _=0;_<16;++_)this._tr[_]=d[_]}getArray(){return this._tr}getScaleX(){return this._tr[0]}getScaleY(){return this._tr[5]}getTranslateX(){return this._tr[12]}getTranslateY(){return this._tr[13]}transformX(d){return this._tr[0]*d+this._tr[12]}transformY(d){return this._tr[5]*d+this._tr[13]}invertTransformX(d){return(d-this._tr[12])/this._tr[0]}invertTransformY(d){return(d-this._tr[13])/this._tr[5]}translateRelative(d,_){const S=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,d,_,0,1]);v.multiply(S,this._tr,this._tr)}translate(d,_){this._tr[12]=d,this._tr[13]=_}translateX(d){this._tr[12]=d}translateY(d){this._tr[13]=d}scaleRelative(d,_){const S=new Float32Array([d,0,0,0,0,_,0,0,0,0,1,0,0,0,0,1]);v.multiply(S,this._tr,this._tr)}scale(d,_){this._tr[0]=d,this._tr[5]=_}multiplyByMatrix(d){v.multiply(d.getArray(),this._tr,this._tr)}clone(){const d=new v;for(let _=0;_<this._tr.length;_++)d._tr[_]=this._tr[_];return d}}class g{constructor(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisortopy=0,this._modelColor=new y,this._mvpMatrix4x4=new v,this._mvpMatrix4x4.loadIdentity()}initialize(d){this._model=d}drawModel(){this.getModel()!=null&&this.doDrawModel()}setMvpMatrix(d){this._mvpMatrix4x4.setMatrix(d.getArray())}getMvpMatrix(){return this._mvpMatrix4x4}setModelColor(d,_,S,P){d<0?d=0:d>1&&(d=1),_<0?_=0:_>1&&(_=1),S<0?S=0:S>1&&(S=1),P<0?P=0:P>1&&(P=1),this._modelColor.R=d,this._modelColor.G=_,this._modelColor.B=S,this._modelColor.A=P}getModelColor(){return Object.assign({},this._modelColor)}setIsPremultipliedAlpha(d){this._isPremultipliedAlpha=d}isPremultipliedAlpha(){return this._isPremultipliedAlpha}setIsCulling(d){this._isCulling=d}isCulling(){return this._isCulling}setAnisotropy(d){this._anisortopy=d}getAnisotropy(){return this._anisortopy}getModel(){return this._model}}var m;(function(A){A[A.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",A[A.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",A[A.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative"})(m||(m={}));class y{constructor(){this.R=1,this.G=1,this.B=1,this.A=1}}let x=!1,T=!1,E;var b;(function(A){A.vertexOffset=0,A.vertexStep=2})(b||(b={}));class w{static startUp(d){if(x)return I("CubismFramework.startUp() is already done."),x;if(Live2DCubismCore._isStarted)return x=!0,!0;if(Live2DCubismCore._isStarted=!0,E=d,E&&Live2DCubismCore.Logging.csmSetLogFunction(E.logFunction),x=!0,x){const _=Live2DCubismCore.Version.csmGetVersion(),S=(_&4278190080)>>24,P=(_&16711680)>>16,M=_&65535,k=_;I("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+S).slice(-2),("00"+P).slice(-2),("0000"+M).slice(-4),k)}return I("CubismFramework.startUp() is complete."),x}static cleanUp(){x=!1,T=!1,E=void 0}static initialize(){if(!x){D("CubismFramework is not started.");return}if(T){D("CubismFramework.initialize() skipped, already initialized.");return}T=!0,I("CubismFramework.initialize() is complete.")}static dispose(){if(!x){D("CubismFramework is not started.");return}if(!T){D("CubismFramework.dispose() skipped, not initialized.");return}g.staticRelease(),T=!1,I("CubismFramework.dispose() is complete.")}static isStarted(){return x}static isInitialized(){return T}static coreLogFunction(d){Live2DCubismCore.Logging.csmGetLogFunction()&&Live2DCubismCore.Logging.csmGetLogFunction()(d)}static getLoggingLevel(){return E!=null?E.loggingLevel:C.LogLevel_Off}constructor(){}}var C;(function(A){A[A.LogLevel_Verbose=0]="LogLevel_Verbose",A[A.LogLevel_Debug=1]="LogLevel_Debug",A[A.LogLevel_Info=2]="LogLevel_Info",A[A.LogLevel_Warning=3]="LogLevel_Warning",A[A.LogLevel_Error=4]="LogLevel_Error",A[A.LogLevel_Off=5]="LogLevel_Off"})(C||(C={}));const O=()=>{};function R(A,...d){j.print(C.LogLevel_Debug,"[CSM][D]"+A+`
`,d)}function I(A,...d){j.print(C.LogLevel_Info,"[CSM][I]"+A+`
`,d)}function D(A,...d){j.print(C.LogLevel_Warning,"[CSM][W]"+A+`
`,d)}function F(A,...d){j.print(C.LogLevel_Error,"[CSM][E]"+A+`
`,d)}class j{static print(d,_,S){if(d<w.getLoggingLevel())return;const P=w.coreLogFunction;if(!P)return;const M=_.replace(/{(\d+)}/g,(k,G)=>S[G]);P(M)}static dumpBytes(d,_,S){for(let P=0;P<S;P++)P%16==0&&P>0?this.print(d,`
`):P%8==0&&P>0&&this.print(d,"  "),this.print(d,"{0} ",[_[P]&255]);this.print(d,`
`)}constructor(){}}class z{constructor(){this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=[]}release(){this._weight=0}updateParameters(d,_,S){if(!_.isAvailable()||_.isFinished())return;if(!_.isStarted()){_.setIsStarted(!0),_.setStartTime(S-this._offsetSeconds),_.setFadeInStartTime(S);const G=this.getDuration();_.getEndTime()<0&&_.setEndTime(G<=0?-1:_.getStartTime()+G)}let P=this._weight;const M=this._fadeInSeconds==0?1:p.getEasingSine((S-_.getFadeInStartTime())/this._fadeInSeconds),k=this._fadeOutSeconds==0||_.getEndTime()<0?1:p.getEasingSine((_.getEndTime()-S)/this._fadeOutSeconds);P=P*M*k,_.setState(S,P),this.doUpdateParameters(d,S,P,_),_.getEndTime()>0&&_.getEndTime()<S&&_.setIsFinished(!0)}setFadeInTime(d){this._fadeInSeconds=d}setFadeOutTime(d){this._fadeOutSeconds=d}getFadeOutTime(){return this._fadeOutSeconds}getFadeInTime(){return this._fadeInSeconds}setWeight(d){this._weight=d}getWeight(){return this._weight}getDuration(){return-1}getLoopDuration(){return-1}setOffsetTime(d){this._offsetSeconds=d}getFiredEvent(d,_){return this._firedEventValues}setFinishedMotionHandler(d){this._onFinishedMotion=d}getFinishedMotionHandler(){return this._onFinishedMotion}}const $=1;class H extends z{constructor(){super(),this._parameters=[]}static create(d){const _=new H,S=d.FadeInTime,P=d.FadeOutTime;_.setFadeInTime(S!==void 0?S:$),_.setFadeOutTime(P!==void 0?P:$);const M=d.Parameters||[];for(let k=0;k<M.length;++k){const G=M[k],X=G.Id,W=G.Value;let ee;switch(G.Blend){case"Multiply":ee=Y.ExpressionBlendType_Multiply;break;case"Overwrite":ee=Y.ExpressionBlendType_Overwrite;break;case"Add":default:ee=Y.ExpressionBlendType_Add;break}const ie={parameterId:X,blendType:ee,value:W};_._parameters.push(ie)}return _}doUpdateParameters(d,_,S,P){for(let M=0;M<this._parameters.length;++M){const k=this._parameters[M];switch(k.blendType){case Y.ExpressionBlendType_Add:{d.addParameterValueById(k.parameterId,k.value,S);break}case Y.ExpressionBlendType_Multiply:{d.multiplyParameterValueById(k.parameterId,k.value,S);break}case Y.ExpressionBlendType_Overwrite:{d.setParameterValueById(k.parameterId,k.value,S);break}}}}}var Y;(function(A){A[A.ExpressionBlendType_Add=0]="ExpressionBlendType_Add",A[A.ExpressionBlendType_Multiply=1]="ExpressionBlendType_Multiply",A[A.ExpressionBlendType_Overwrite=2]="ExpressionBlendType_Overwrite"})(Y||(Y={}));class L{constructor(){this._autoDelete=!1,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this,this._fadeOutSeconds=0,this._isTriggeredFadeOut=!1}release(){this._autoDelete&&this._motion&&this._motion.release()}setFadeOut(d){this._fadeOutSeconds=d,this._isTriggeredFadeOut=!0}startFadeOut(d,_){const S=_+d;this._isTriggeredFadeOut=!0,(this._endTimeSeconds<0||S<this._endTimeSeconds)&&(this._endTimeSeconds=S)}isFinished(){return this._finished}isStarted(){return this._started}getStartTime(){return this._startTimeSeconds}getFadeInStartTime(){return this._fadeInStartTimeSeconds}getEndTime(){return this._endTimeSeconds}setStartTime(d){this._startTimeSeconds=d}setFadeInStartTime(d){this._fadeInStartTimeSeconds=d}setEndTime(d){this._endTimeSeconds=d}setIsFinished(d){this._finished=d}setIsStarted(d){this._started=d}isAvailable(){return this._available}setIsAvailable(d){this._available=d}setState(d,_){this._stateTimeSeconds=d,this._stateWeight=_}getStateTime(){return this._stateTimeSeconds}getStateWeight(){return this._stateWeight}getLastCheckEventSeconds(){return this._lastEventCheckSeconds}setLastCheckEventSeconds(d){this._lastEventCheckSeconds=d}isTriggeredFadeOut(){return this._isTriggeredFadeOut&&this._endTimeSeconds<0}getFadeOutSeconds(){return this._fadeOutSeconds}}class B{constructor(){this._userTimeSeconds=0,this._eventCustomData=null,this._motions=[]}release(){for(let d=0;d<this._motions.length;++d)this._motions[d]&&this._motions[d].release();this._motions=void 0}startMotion(d,_,S){if(d==null)return N;let P;for(let M=0;M<this._motions.length;++M)P=this._motions[M],P!=null&&P.setFadeOut(P._motion.getFadeOutTime());return P=new L,P._autoDelete=_,P._motion=d,this._motions.push(P),P._motionQueueEntryHandle}isFinished(){let d=0;for(;d<this._motions.length;){const _=this._motions[d];if(_==null){this._motions.splice(d,1);continue}if(_._motion==null){_.release(),this._motions.splice(d,1);continue}if(!_.isFinished())return!1;d++}return!0}isFinishedByHandle(d){for(let _=0;_<this._motions.length;_++){const S=this._motions[_];if(S!=null&&S._motionQueueEntryHandle==d&&!S.isFinished())return!1}return!0}stopAllMotions(){for(let d=0;d<this._motions.length;d++){const _=this._motions[d];_!=null&&_.release()}this._motions=[]}getCubismMotionQueueEntry(d){return this._motions.find(_=>_!=null&&_._motionQueueEntryHandle==d)}setEventCallback(d,_=null){this._eventCallBack=d,this._eventCustomData=_}doUpdateMotion(d,_){let S=!1,P=0;for(;P<this._motions.length;){const M=this._motions[P];if(M==null){this._motions.splice(P,1);continue}const k=M._motion;if(k==null){M.release(),this._motions.splice(P,1);continue}k.updateParameters(d,M,_),S=!0;const G=k.getFiredEvent(M.getLastCheckEventSeconds()-M.getStartTime(),_-M.getStartTime());for(let X=0;X<G.length;++X)this._eventCallBack(this,G[X],this._eventCustomData);M.setLastCheckEventSeconds(_),M.isFinished()?(M.release(),this._motions.splice(P,1)):(M.isTriggeredFadeOut()&&M.startFadeOut(M.getFadeOutSeconds(),_),P++)}return S}}const N=-1;class U extends c.a{constructor(d,_){var S;super(d,_),this.queueManager=new B,this.definitions=(S=d.expressions)!==null&&S!==void 0?S:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(d){return this.definitions.findIndex(_=>_.Name===d)}getExpressionFile(d){return d.File}createExpression(d,_){return H.create(d)}_setExpression(d){return this.queueManager.startMotion(d,!1,performance.now())}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(d,_){return this.queueManager.doUpdateMotion(d,_)}}var q=h(11),Q=h(0);class ne{constructor(d){this.groups=d.Groups,this.hitAreas=d.HitAreas,this.layout=d.Layout,this.moc=d.FileReferences.Moc,this.expressions=d.FileReferences.Expressions,this.motions=d.FileReferences.Motions,this.textures=d.FileReferences.Textures,this.physics=d.FileReferences.Physics,this.pose=d.FileReferences.Pose}getEyeBlinkParameters(){var d,_;return(_=(d=this.groups)===null||d===void 0?void 0:d.find(S=>S.Name==="EyeBlink"))===null||_===void 0?void 0:_.Ids}getLipSyncParameters(){var d,_;return(_=(d=this.groups)===null||d===void 0?void 0:d.find(S=>S.Name==="LipSync"))===null||_===void 0?void 0:_.Ids}}class de extends q.a{constructor(d){if(super(d),!de.isValidJSON(d))throw new TypeError("Invalid JSON.");Object.assign(this,new ne(d))}static isValidJSON(d){var _;return!!(d!=null&&d.FileReferences)&&typeof d.FileReferences.Moc=="string"&&((_=d.FileReferences.Textures)===null||_===void 0?void 0:_.length)>0&&d.FileReferences.Textures.every(S=>typeof S=="string")}replaceFiles(d){if(super.replaceFiles(d),this.motions)for(const[_,S]of Object.entries(this.motions))for(let P=0;P<S.length;P++)S[P].File=d(S[P].File,`motions.${_}[${P}].File`),S[P].Sound!==void 0&&(S[P].Sound=d(S[P].Sound,`motions.${_}[${P}].Sound`));if(this.expressions)for(let _=0;_<this.expressions.length;_++)this.expressions[_].File=d(this.expressions[_].File,`expressions[${_}].File`)}}Object(Q.a)(de,[ne]);var ge=h(12),oe;(function(A){A[A.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",A[A.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",A[A.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity"})(oe||(oe={}));var Ee;(function(A){A[A.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",A[A.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",A[A.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",A[A.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped"})(Ee||(Ee={}));class ke{constructor(d=0,_=0){this.time=d,this.value=_}}class Je{constructor(){this.basePointIndex=0,this.segmentType=0}}class Me{constructor(){this.id="",this.type=oe.CubismMotionCurveTarget_Model,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0}}class Be{constructor(){this.fireTime=0,this.value=""}}class Ge{constructor(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=[],this.segments=[],this.points=[],this.events=[]}}class be{constructor(d){this._json=d}release(){this._json=void 0}getMotionDuration(){return this._json.Meta.Duration}isMotionLoop(){return this._json.Meta.Loop||!1}getMotionCurveCount(){return this._json.Meta.CurveCount}getMotionFps(){return this._json.Meta.Fps}getMotionTotalSegmentCount(){return this._json.Meta.TotalSegmentCount}getMotionTotalPointCount(){return this._json.Meta.TotalPointCount}getMotionFadeInTime(){return this._json.Meta.FadeInTime}getMotionFadeOutTime(){return this._json.Meta.FadeOutTime}getMotionCurveTarget(d){return this._json.Curves[d].Target}getMotionCurveId(d){return this._json.Curves[d].Id}getMotionCurveFadeInTime(d){return this._json.Curves[d].FadeInTime}getMotionCurveFadeOutTime(d){return this._json.Curves[d].FadeOutTime}getMotionCurveSegmentCount(d){return this._json.Curves[d].Segments.length}getMotionCurveSegment(d,_){return this._json.Curves[d].Segments[_]}getEventCount(){return this._json.Meta.UserDataCount||0}getTotalEventValueSize(){return this._json.Meta.TotalUserDataSize}getEventTime(d){return this._json.UserData[d].Time}getEventValue(d){return this._json.UserData[d].Value}}const Et="EyeBlink",Ct="LipSync",Re="Model",sr="Parameter",Ln="PartOpacity";function br(A,d,_){const S=new ke;return S.time=A.time+(d.time-A.time)*_,S.value=A.value+(d.value-A.value)*_,S}function Qu(A,d){let _=(d-A[0].time)/(A[1].time-A[0].time);return _<0&&(_=0),A[0].value+(A[1].value-A[0].value)*_}function el(A,d){let _=(d-A[0].time)/(A[3].time-A[0].time);_<0&&(_=0);const S=br(A[0],A[1],_),P=br(A[1],A[2],_),M=br(A[2],A[3],_),k=br(S,P,_),G=br(P,M,_);return br(k,G,_).value}function tl(A,d){return A[0].value}function rl(A,d){return A[1].value}function pf(A,d,_){const S=A.curves[d];let P=-1;const M=S.baseSegmentIndex+S.segmentCount;let k=0;for(let X=S.baseSegmentIndex;X<M;++X)if(k=A.segments[X].basePointIndex+(A.segments[X].segmentType==Ee.CubismMotionSegmentType_Bezier?3:1),A.points[k].time>_){P=X;break}if(P==-1)return A.points[k].value;const G=A.segments[P];return G.evaluate(A.points.slice(G.basePointIndex),_)}class vf extends z{constructor(){super(),this._eyeBlinkParameterIds=[],this._lipSyncParameterIds=[],this._sourceFrameRate=30,this._loopDurationSeconds=-1,this._isLoop=!1,this._isLoopFadeIn=!0,this._lastWeight=0}static create(d,_){const S=new vf;return S.parse(d),S._sourceFrameRate=S._motionData.fps,S._loopDurationSeconds=S._motionData.duration,S._onFinishedMotion=_,S}doUpdateParameters(d,_,S,P){this._modelCurveIdEyeBlink==null&&(this._modelCurveIdEyeBlink=Et),this._modelCurveIdLipSync==null&&(this._modelCurveIdLipSync=Ct);let M=_-P.getStartTime();M<0&&(M=0);let k=Number.MAX_VALUE,G=Number.MAX_VALUE;const X=64;let W=0,ee=0;this._eyeBlinkParameterIds.length>X&&R("too many eye blink targets : {0}",this._eyeBlinkParameterIds.length),this._lipSyncParameterIds.length>X&&R("too many lip sync targets : {0}",this._lipSyncParameterIds.length);const ie=this._fadeInSeconds<=0?1:p.getEasingSine((_-P.getFadeInStartTime())/this._fadeInSeconds),ve=this._fadeOutSeconds<=0||P.getEndTime()<0?1:p.getEasingSine((P.getEndTime()-_)/this._fadeOutSeconds);let me,le,Oe,ae=M;if(this._isLoop)for(;ae>this._motionData.duration;)ae-=this._motionData.duration;const se=this._motionData.curves;for(le=0;le<this._motionData.curveCount&&se[le].type==oe.CubismMotionCurveTarget_Model;++le)me=pf(this._motionData,le,ae),se[le].id==this._modelCurveIdEyeBlink?G=me:se[le].id==this._modelCurveIdLipSync&&(k=me);for(;le<this._motionData.curveCount&&se[le].type==oe.CubismMotionCurveTarget_Parameter;++le){if(Oe=d.getParameterIndex(se[le].id),Oe==-1)continue;const xe=d.getParameterValueByIndex(Oe);if(me=pf(this._motionData,le,ae),G!=Number.MAX_VALUE){for(let Fe=0;Fe<this._eyeBlinkParameterIds.length&&Fe<X;++Fe)if(this._eyeBlinkParameterIds[Fe]==se[le].id){me*=G,ee|=1<<Fe;break}}if(k!=Number.MAX_VALUE){for(let Fe=0;Fe<this._lipSyncParameterIds.length&&Fe<X;++Fe)if(this._lipSyncParameterIds[Fe]==se[le].id){me+=k,W|=1<<Fe;break}}let Ce;if(se[le].fadeInTime<0&&se[le].fadeOutTime<0)Ce=xe+(me-xe)*S;else{let Fe,Ft;se[le].fadeInTime<0?Fe=ie:Fe=se[le].fadeInTime==0?1:p.getEasingSine((_-P.getFadeInStartTime())/se[le].fadeInTime),se[le].fadeOutTime<0?Ft=ve:Ft=se[le].fadeOutTime==0||P.getEndTime()<0?1:p.getEasingSine((P.getEndTime()-_)/se[le].fadeOutTime);const ze=this._weight*Fe*Ft;Ce=xe+(me-xe)*ze}d.setParameterValueByIndex(Oe,Ce,1)}{if(G!=Number.MAX_VALUE)for(let xe=0;xe<this._eyeBlinkParameterIds.length&&xe<X;++xe){const Ce=d.getParameterValueById(this._eyeBlinkParameterIds[xe]);if(ee>>xe&1)continue;const Fe=Ce+(G-Ce)*S;d.setParameterValueById(this._eyeBlinkParameterIds[xe],Fe)}if(k!=Number.MAX_VALUE)for(let xe=0;xe<this._lipSyncParameterIds.length&&xe<X;++xe){const Ce=d.getParameterValueById(this._lipSyncParameterIds[xe]);if(W>>xe&1)continue;const Fe=Ce+(k-Ce)*S;d.setParameterValueById(this._lipSyncParameterIds[xe],Fe)}}for(;le<this._motionData.curveCount&&se[le].type==oe.CubismMotionCurveTarget_PartOpacity;++le)Oe=d.getParameterIndex(se[le].id),Oe!=-1&&(me=pf(this._motionData,le,ae),d.setParameterValueByIndex(Oe,me));M>=this._motionData.duration&&(this._isLoop?(P.setStartTime(_),this._isLoopFadeIn&&P.setFadeInStartTime(_)):(this._onFinishedMotion&&this._onFinishedMotion(this),P.setIsFinished(!0))),this._lastWeight=S}setIsLoop(d){this._isLoop=d}isLoop(){return this._isLoop}setIsLoopFadeIn(d){this._isLoopFadeIn=d}isLoopFadeIn(){return this._isLoopFadeIn}getDuration(){return this._isLoop?-1:this._loopDurationSeconds}getLoopDuration(){return this._loopDurationSeconds}setParameterFadeInTime(d,_){const S=this._motionData.curves;for(let P=0;P<this._motionData.curveCount;++P)if(d==S[P].id){S[P].fadeInTime=_;return}}setParameterFadeOutTime(d,_){const S=this._motionData.curves;for(let P=0;P<this._motionData.curveCount;++P)if(d==S[P].id){S[P].fadeOutTime=_;return}}getParameterFadeInTime(d){const _=this._motionData.curves;for(let S=0;S<this._motionData.curveCount;++S)if(d==_[S].id)return _[S].fadeInTime;return-1}getParameterFadeOutTime(d){const _=this._motionData.curves;for(let S=0;S<this._motionData.curveCount;++S)if(d==_[S].id)return _[S].fadeOutTime;return-1}setEffectIds(d,_){this._eyeBlinkParameterIds=d,this._lipSyncParameterIds=_}release(){this._motionData=void 0}parse(d){this._motionData=new Ge;let _=new be(d);this._motionData.duration=_.getMotionDuration(),this._motionData.loop=_.isMotionLoop(),this._motionData.curveCount=_.getMotionCurveCount(),this._motionData.fps=_.getMotionFps(),this._motionData.eventCount=_.getEventCount();const S=_.getMotionFadeInTime(),P=_.getMotionFadeOutTime();S!==void 0?this._fadeInSeconds=S<0?1:S:this._fadeInSeconds=1,P!==void 0?this._fadeOutSeconds=P<0?1:P:this._fadeOutSeconds=1,this._motionData.curves=Array.from({length:this._motionData.curveCount}).map(()=>new Me),this._motionData.segments=Array.from({length:_.getMotionTotalSegmentCount()}).map(()=>new Je),this._motionData.events=Array.from({length:this._motionData.eventCount}).map(()=>new Be),this._motionData.points=[];let M=0,k=0;for(let G=0;G<this._motionData.curveCount;++G){const X=this._motionData.curves[G];switch(_.getMotionCurveTarget(G)){case Re:X.type=oe.CubismMotionCurveTarget_Model;break;case sr:X.type=oe.CubismMotionCurveTarget_Parameter;break;case Ln:X.type=oe.CubismMotionCurveTarget_PartOpacity;break}X.id=_.getMotionCurveId(G),X.baseSegmentIndex=k;const W=_.getMotionCurveFadeInTime(G),ee=_.getMotionCurveFadeOutTime(G);X.fadeInTime=W!==void 0?W:-1,X.fadeOutTime=ee!==void 0?ee:-1;for(let ie=0;ie<_.getMotionCurveSegmentCount(G);){switch(ie==0?(this._motionData.segments[k].basePointIndex=M,this._motionData.points[M]=new ke(_.getMotionCurveSegment(G,ie),_.getMotionCurveSegment(G,ie+1)),M+=1,ie+=2):this._motionData.segments[k].basePointIndex=M-1,_.getMotionCurveSegment(G,ie)){case Ee.CubismMotionSegmentType_Linear:{this._motionData.segments[k].segmentType=Ee.CubismMotionSegmentType_Linear,this._motionData.segments[k].evaluate=Qu,this._motionData.points[M]=new ke(_.getMotionCurveSegment(G,ie+1),_.getMotionCurveSegment(G,ie+2)),M+=1,ie+=3;break}case Ee.CubismMotionSegmentType_Bezier:{this._motionData.segments[k].segmentType=Ee.CubismMotionSegmentType_Bezier,this._motionData.segments[k].evaluate=el,this._motionData.points[M]=new ke(_.getMotionCurveSegment(G,ie+1),_.getMotionCurveSegment(G,ie+2)),this._motionData.points[M+1]=new ke(_.getMotionCurveSegment(G,ie+3),_.getMotionCurveSegment(G,ie+4)),this._motionData.points[M+2]=new ke(_.getMotionCurveSegment(G,ie+5),_.getMotionCurveSegment(G,ie+6)),M+=3,ie+=7;break}case Ee.CubismMotionSegmentType_Stepped:{this._motionData.segments[k].segmentType=Ee.CubismMotionSegmentType_Stepped,this._motionData.segments[k].evaluate=tl,this._motionData.points[M]=new ke(_.getMotionCurveSegment(G,ie+1),_.getMotionCurveSegment(G,ie+2)),M+=1,ie+=3;break}case Ee.CubismMotionSegmentType_InverseStepped:{this._motionData.segments[k].segmentType=Ee.CubismMotionSegmentType_InverseStepped,this._motionData.segments[k].evaluate=rl,this._motionData.points[M]=new ke(_.getMotionCurveSegment(G,ie+1),_.getMotionCurveSegment(G,ie+2)),M+=1,ie+=3;break}}++X.segmentCount,++k}this._motionData.curves.push(X)}for(let G=0;G<_.getEventCount();++G)this._motionData.events[G].fireTime=_.getEventTime(G),this._motionData.events[G].value=_.getEventValue(G);_.release()}getFiredEvent(d,_){this._firedEventValues.length=0;for(let S=0;S<this._motionData.eventCount;++S)this._motionData.events[S].fireTime>d&&this._motionData.events[S].fireTime<=_&&this._firedEventValues.push(this._motionData.events[S].value);return this._firedEventValues}}var mf=h(1);class yx extends ge.a{constructor(d,_){var S;super(d,_),this.groups={idle:"Idle"},this.motionDataType="json",this.queueManager=new B,this.definitions=(S=d.motions)!==null&&S!==void 0?S:{},this.eyeBlinkIds=d.getEyeBlinkParameters()||[],this.lipSyncIds=d.getLipSyncParameters()||[],this.init(_)}init(d){super.init(d),this.settings.expressions&&(this.expressionManager=new U(this.settings,d)),this.queueManager.setEventCallback((_,S,P)=>{this.emit("motion:"+S)})}isFinished(){return this.queueManager.isFinished()}_startMotion(d,_){return d.setFinishedMotionHandler(_),this.queueManager.stopAllMotions(),this.queueManager.startMotion(d,!1,performance.now())}_stopAllMotions(){this.queueManager.stopAllMotions()}createMotion(d,_,S){const P=vf.create(d),M=(_===this.groups.idle?mf.b.idleMotionFadingDuration:mf.b.motionFadingDuration)/1e3;return P.setFadeInTime(S.FadeInTime>0?S.FadeInTime:M),P.setFadeOutTime(S.FadeOutTime>0?S.FadeOutTime:M),P.setEffectIds(this.eyeBlinkIds,this.lipSyncIds),P}getMotionFile(d){return d.File}getMotionName(d){return d.File}getSoundFile(d){return d.Sound}updateParameters(d,_){return this.queueManager.doUpdateMotion(d,_)}destroy(){super.destroy(),this.queueManager.release(),this.queueManager=void 0}}var AM=h(13);const RM="ParamAngleX",OM="ParamAngleY",MM="ParamAngleZ",DM="ParamEyeBallX",LM="ParamEyeBallY",NM="ParamBodyAngleX",FM="ParamBreath";class gf{constructor(){this._breathParameters=[],this._currentTime=0}static create(){return new gf}setParameters(d){this._breathParameters=d}getParameters(){return this._breathParameters}updateParameters(d,_){this._currentTime+=_;const S=this._currentTime*2*3.14159;for(let P=0;P<this._breathParameters.length;++P){const M=this._breathParameters[P];d.addParameterValueById(M.parameterId,M.offset+M.peak*Math.sin(S/M.cycle),M.weight)}}}class ka{constructor(d,_,S,P,M){this.parameterId=d??void 0,this.offset=_??0,this.peak=S??0,this.cycle=P??0,this.weight=M??0}}class Ga{constructor(d){var _,S;this._blinkingState=Jt.EyeState_First,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=[],d!=null&&(this._parameterIds=(S=(_=d.getEyeBlinkParameters())===null||_===void 0?void 0:_.slice())!==null&&S!==void 0?S:this._parameterIds)}static create(d){return new Ga(d)}setBlinkingInterval(d){this._blinkingIntervalSeconds=d}setBlinkingSetting(d,_,S){this._closingSeconds=d,this._closedSeconds=_,this._openingSeconds=S}setParameterIds(d){this._parameterIds=d}getParameterIds(){return this._parameterIds}updateParameters(d,_){this._userTimeSeconds+=_;let S,P=0;switch(this._blinkingState){case Jt.EyeState_Closing:P=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds,P>=1&&(P=1,this._blinkingState=Jt.EyeState_Closed,this._stateStartTimeSeconds=this._userTimeSeconds),S=1-P;break;case Jt.EyeState_Closed:P=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds,P>=1&&(this._blinkingState=Jt.EyeState_Opening,this._stateStartTimeSeconds=this._userTimeSeconds),S=0;break;case Jt.EyeState_Opening:P=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds,P>=1&&(P=1,this._blinkingState=Jt.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming()),S=P;break;case Jt.EyeState_Interval:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=Jt.EyeState_Closing,this._stateStartTimeSeconds=this._userTimeSeconds),S=1;break;case Jt.EyeState_First:default:this._blinkingState=Jt.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming(),S=1;break}Ga.CloseIfZero||(S=-S);for(let M=0;M<this._parameterIds.length;++M)d.setParameterValueById(this._parameterIds[M],S)}determinNextBlinkingTiming(){const d=Math.random();return this._userTimeSeconds+d*(2*this._blinkingIntervalSeconds-1)}}Ga.CloseIfZero=!0;var Jt;(function(A){A[A.EyeState_First=0]="EyeState_First",A[A.EyeState_Interval=1]="EyeState_Interval",A[A.EyeState_Closing=2]="EyeState_Closing",A[A.EyeState_Closed=3]="EyeState_Closed",A[A.EyeState_Opening=4]="EyeState_Opening"})(Jt||(Jt={}));class yf{constructor(d=0,_=0,S=0,P=0){this.x=d,this.y=_,this.width=S,this.height=P}getCenterX(){return this.x+.5*this.width}getCenterY(){return this.y+.5*this.height}getRight(){return this.x+this.width}getBottom(){return this.y+this.height}setRect(d){this.x=d.x,this.y=d.y,this.width=d.width,this.height=d.height}expand(d,_){this.x-=d,this.y-=_,this.width+=d*2,this.height+=_*2}}var nl;(function(A){A.supportMoreMaskDivisions=!0})(nl||(nl={}));const _f=4,BM=10;let wi,ja,xf;class Tf{constructor(){this._maskRenderTexture=null,this._colorBuffer=null,this._currentFrameNo=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=[],this._clippingContextListForDraw=[],this._channelColors=[],this._tmpBoundsOnModel=new yf,this._tmpMatrix=new v,this._tmpMatrixForMask=new v,this._tmpMatrixForDraw=new v;let d=new y;d.R=1,d.G=0,d.B=0,d.A=0,this._channelColors.push(d),d=new y,d.R=0,d.G=1,d.B=0,d.A=0,this._channelColors.push(d),d=new y,d.R=0,d.G=0,d.B=1,d.A=0,this._channelColors.push(d),d=new y,d.R=0,d.G=0,d.B=0,d.A=1,this._channelColors.push(d)}getChannelFlagAsColor(d){return this._channelColors[d]}getMaskRenderTexture(){let d=0;if(this._maskTexture&&this._maskTexture.texture!=0&&(this._maskTexture.frameNo=this._currentFrameNo,d=this._maskTexture.texture),d==0){const _=this._clippingMaskBufferSize;this._colorBuffer=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this._colorBuffer),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,_,_,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),d=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,d),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._colorBuffer,0),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,xf),this._maskTexture=new UM(this._currentFrameNo,d)}return d}setGL(d){this.gl=d}calcClippedDrawTotalBounds(d,_){let S=Number.MAX_VALUE,P=Number.MAX_VALUE,M=Number.MIN_VALUE,k=Number.MIN_VALUE;const G=_._clippedDrawableIndexList.length;for(let X=0;X<G;X++){const W=_._clippedDrawableIndexList[X],ee=d.getDrawableVertexCount(W),ie=d.getDrawableVertices(W);let ve=Number.MAX_VALUE,me=Number.MAX_VALUE,le=Number.MIN_VALUE,Oe=Number.MIN_VALUE;const ae=ee*b.vertexStep;for(let se=b.vertexOffset;se<ae;se+=b.vertexStep){const xe=ie[se],Ce=ie[se+1];xe<ve&&(ve=xe),xe>le&&(le=xe),Ce<me&&(me=Ce),Ce>Oe&&(Oe=Ce)}if(ve!=Number.MAX_VALUE)if(ve<S&&(S=ve),me<P&&(P=me),le>M&&(M=le),Oe>k&&(k=Oe),S==Number.MAX_VALUE)_._allClippedDrawRect.x=0,_._allClippedDrawRect.y=0,_._allClippedDrawRect.width=0,_._allClippedDrawRect.height=0,_._isUsing=!1;else{_._isUsing=!0;const se=M-S,xe=k-P;_._allClippedDrawRect.x=S,_._allClippedDrawRect.y=P,_._allClippedDrawRect.width=se,_._allClippedDrawRect.height=xe}}}release(){var d,_,S;const P=this;for(let M=0;M<this._clippingContextListForMask.length;M++)this._clippingContextListForMask[M]&&((d=this._clippingContextListForMask[M])===null||d===void 0||d.release());P._clippingContextListForMask=void 0,P._clippingContextListForDraw=void 0,this._maskTexture&&((_=this.gl)===null||_===void 0||_.deleteFramebuffer(this._maskTexture.texture),P._maskTexture=void 0),P._channelColors=void 0,(S=this.gl)===null||S===void 0||S.deleteTexture(this._colorBuffer),this._colorBuffer=null}initialize(d,_,S,P){for(let M=0;M<_;M++){if(P[M]<=0){this._clippingContextListForDraw.push(null);continue}let k=this.findSameClip(S[M],P[M]);k==null&&(k=new kM(this,S[M],P[M]),this._clippingContextListForMask.push(k)),k.addClippedDrawable(M),this._clippingContextListForDraw.push(k)}}setupClippingContext(d,_){this._currentFrameNo++;let S=0;for(let P=0;P<this._clippingContextListForMask.length;P++){const M=this._clippingContextListForMask[P];this.calcClippedDrawTotalBounds(d,M),M._isUsing&&S++}if(S>0){this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._maskRenderTexture=this.getMaskRenderTexture(),_.getMvpMatrix(),_.preDraw(),this.setupLayoutBounds(S),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTexture),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);for(let P=0;P<this._clippingContextListForMask.length;P++){const M=this._clippingContextListForMask[P],k=M._allClippedDrawRect,G=M._layoutBounds,X=.05;this._tmpBoundsOnModel.setRect(k),this._tmpBoundsOnModel.expand(k.width*X,k.height*X);const W=G.width/this._tmpBoundsOnModel.width,ee=G.height/this._tmpBoundsOnModel.height;this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(G.x,G.y),this._tmpMatrix.scaleRelative(W,ee),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(G.x,G.y),this._tmpMatrix.scaleRelative(W,ee),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),M._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),M._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());const ie=M._clippingIdCount;for(let ve=0;ve<ie;ve++){const me=M._clippingIdList[ve];d.getDrawableDynamicFlagVertexPositionsDidChange(me)&&(_.setIsCulling(d.getDrawableCulling(me)!=!1),_.setClippingContextBufferForMask(M),_.drawMesh(d.getDrawableTextureIndices(me),d.getDrawableVertexIndexCount(me),d.getDrawableVertexCount(me),d.getDrawableVertexIndices(me),d.getDrawableVertices(me),d.getDrawableVertexUvs(me),d.getDrawableOpacity(me),m.CubismBlendMode_Normal,!1))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,xf),_.setClippingContextBufferForMask(null),this.gl.viewport(ja[0],ja[1],ja[2],ja[3])}}findSameClip(d,_){for(let S=0;S<this._clippingContextListForMask.length;S++){const P=this._clippingContextListForMask[S],M=P._clippingIdCount;if(M!=_)continue;let k=0;for(let G=0;G<M;G++){const X=P._clippingIdList[G];for(let W=0;W<M;W++)if(d[W]==X){k++;break}}if(k==M)return P}return null}setupLayoutBounds(d){let _=d/_f,S=d%_f;_=~~_,S=~~S;let P=0;for(let M=0;M<_f;M++){const k=_+(M<S?1:0);if(k!=0)if(k==1){const G=this._clippingContextListForMask[P++];G._layoutChannelNo=M,G._layoutBounds.x=0,G._layoutBounds.y=0,G._layoutBounds.width=1,G._layoutBounds.height=1}else if(k==2)for(let G=0;G<k;G++){let X=G%2;X=~~X;const W=this._clippingContextListForMask[P++];W._layoutChannelNo=M,W._layoutBounds.x=X*.5,W._layoutBounds.y=0,W._layoutBounds.width=.5,W._layoutBounds.height=1}else if(k<=4)for(let G=0;G<k;G++){let X=G%2,W=G/2;X=~~X,W=~~W;const ee=this._clippingContextListForMask[P++];ee._layoutChannelNo=M,ee._layoutBounds.x=X*.5,ee._layoutBounds.y=W*.5,ee._layoutBounds.width=.5,ee._layoutBounds.height=.5}else if(k<=9)for(let G=0;G<k;G++){let X=G%3,W=G/3;X=~~X,W=~~W;const ee=this._clippingContextListForMask[P++];ee._layoutChannelNo=M,ee._layoutBounds.x=X/3,ee._layoutBounds.y=W/3,ee._layoutBounds.width=1/3,ee._layoutBounds.height=1/3}else if(nl.supportMoreMaskDivisions&&k<=16)for(let G=0;G<k;G++){let X=G%4,W=G/4;X=~~X,W=~~W;const ee=this._clippingContextListForMask[P++];ee._layoutChannelNo=M,ee._layoutBounds.x=X/4,ee._layoutBounds.y=W/4,ee._layoutBounds.width=1/4,ee._layoutBounds.height=1/4}else F("not supported mask count : {0}",k)}}getColorBuffer(){return this._colorBuffer}getClippingContextListForDraw(){return this._clippingContextListForDraw}setClippingMaskBufferSize(d){this._clippingMaskBufferSize=d}getClippingMaskBufferSize(){return this._clippingMaskBufferSize}}class UM{constructor(d,_){this.frameNo=d,this.texture=_}}class kM{constructor(d,_,S){this._isUsing=!1,this._owner=d,this._clippingIdList=_,this._clippingIdCount=S,this._allClippedDrawRect=new yf,this._layoutBounds=new yf,this._clippedDrawableIndexList=[],this._matrixForMask=new v,this._matrixForDraw=new v}release(){const d=this;d._layoutBounds=void 0,d._allClippedDrawRect=void 0,d._clippedDrawableIndexList=void 0}addClippedDrawable(d){this._clippedDrawableIndexList.push(d)}getClippingManager(){return this._owner}setGl(d){this._owner.setGL(d)}}class Ss{constructor(){this._shaderSets=[]}static getInstance(){return wi==null&&(wi=new Ss),wi}static deleteInstance(){wi&&(wi.release(),wi=void 0)}release(){this.releaseShaderProgram()}setupShaderProgram(d,_,S,P,M,k,G,X,W,ee,ie,ve,me){ie||F("NoPremultipliedAlpha is not allowed"),this._shaderSets.length==0&&this.generateShaders();let le,Oe,ae,se;const xe=d.getClippingContextBufferForMask();if(xe!=null){const Ce=this._shaderSets[ws.ShaderNames_SetupMask];this.gl.useProgram(Ce.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,_),this.gl.uniform1i(Ce.samplerTexture0Location,0),G.vertex==null&&(G.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,G.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,P,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(Ce.attributePositionLocation),this.gl.vertexAttribPointer(Ce.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),G.uv==null&&(G.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,G.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,k,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(Ce.attributeTexCoordLocation),this.gl.vertexAttribPointer(Ce.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);const Fe=xe._layoutChannelNo,Ft=xe.getClippingManager().getChannelFlagAsColor(Fe);this.gl.uniform4f(Ce.uniformChannelFlagLocation,Ft.R,Ft.G,Ft.B,Ft.A),this.gl.uniformMatrix4fv(Ce.uniformClipMatrixLocation,!1,xe._matrixForMask.getArray());const ze=xe._layoutBounds;this.gl.uniform4f(Ce.uniformBaseColorLocation,ze.x*2-1,ze.y*2-1,ze.getRight()*2-1,ze.getBottom()*2-1),le=this.gl.ZERO,Oe=this.gl.ONE_MINUS_SRC_COLOR,ae=this.gl.ZERO,se=this.gl.ONE_MINUS_SRC_ALPHA}else{const Ce=d.getClippingContextBufferForDraw(),Ft=Ce!=null?me?2:1:0;let ze;switch(W){case m.CubismBlendMode_Normal:default:ze=this._shaderSets[ws.ShaderNames_NormalPremultipliedAlpha+Ft],le=this.gl.ONE,Oe=this.gl.ONE_MINUS_SRC_ALPHA,ae=this.gl.ONE,se=this.gl.ONE_MINUS_SRC_ALPHA;break;case m.CubismBlendMode_Additive:ze=this._shaderSets[ws.ShaderNames_AddPremultipliedAlpha+Ft],le=this.gl.ONE,Oe=this.gl.ONE,ae=this.gl.ZERO,se=this.gl.ONE;break;case m.CubismBlendMode_Multiplicative:ze=this._shaderSets[ws.ShaderNames_MultPremultipliedAlpha+Ft],le=this.gl.DST_COLOR,Oe=this.gl.ONE_MINUS_SRC_ALPHA,ae=this.gl.ZERO,se=this.gl.ONE;break}if(this.gl.useProgram(ze.shaderProgram),G.vertex==null&&(G.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,G.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,P,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(ze.attributePositionLocation),this.gl.vertexAttribPointer(ze.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),G.uv==null&&(G.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,G.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,k,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(ze.attributeTexCoordLocation),this.gl.vertexAttribPointer(ze.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),Ce!=null){this.gl.activeTexture(this.gl.TEXTURE1);const al=Ce.getClippingManager().getColorBuffer();this.gl.bindTexture(this.gl.TEXTURE_2D,al),this.gl.uniform1i(ze.samplerTexture1Location,1),this.gl.uniformMatrix4fv(ze.uniformClipMatrixLocation,!1,Ce._matrixForDraw.getArray());const T2=Ce._layoutChannelNo,ol=Ce.getClippingManager().getChannelFlagAsColor(T2);this.gl.uniform4f(ze.uniformChannelFlagLocation,ol.R,ol.G,ol.B,ol.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,_),this.gl.uniform1i(ze.samplerTexture0Location,0),this.gl.uniformMatrix4fv(ze.uniformMatrixLocation,!1,ve.getArray()),this.gl.uniform4f(ze.uniformBaseColorLocation,ee.R,ee.G,ee.B,ee.A)}G.index==null&&(G.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,G.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,M,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(le,Oe,ae,se)}releaseShaderProgram(){for(let d=0;d<this._shaderSets.length;d++)this.gl.deleteProgram(this._shaderSets[d].shaderProgram),this._shaderSets[d].shaderProgram=0;this._shaderSets=[]}generateShaders(){for(let d=0;d<BM;d++)this._shaderSets.push({});this._shaderSets[0].shaderProgram=this.loadShaderProgram(GM,jM),this._shaderSets[1].shaderProgram=this.loadShaderProgram(HM,VM),this._shaderSets[2].shaderProgram=this.loadShaderProgram(_x,zM),this._shaderSets[3].shaderProgram=this.loadShaderProgram(_x,XM),this._shaderSets[4].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[5].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[6].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[7].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[8].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[9].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[0].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_position"),this._shaderSets[0].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_texCoord"),this._shaderSets[0].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"s_texture0"),this._shaderSets[0].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_clipMatrix"),this._shaderSets[0].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_channelFlag"),this._shaderSets[0].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_baseColor"),this._shaderSets[1].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_position"),this._shaderSets[1].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_texCoord"),this._shaderSets[1].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"s_texture0"),this._shaderSets[1].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_matrix"),this._shaderSets[1].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_baseColor"),this._shaderSets[2].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_position"),this._shaderSets[2].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_texCoord"),this._shaderSets[2].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture0"),this._shaderSets[2].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture1"),this._shaderSets[2].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_matrix"),this._shaderSets[2].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_clipMatrix"),this._shaderSets[2].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_channelFlag"),this._shaderSets[2].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_baseColor"),this._shaderSets[3].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_position"),this._shaderSets[3].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_texCoord"),this._shaderSets[3].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture0"),this._shaderSets[3].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture1"),this._shaderSets[3].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_matrix"),this._shaderSets[3].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_clipMatrix"),this._shaderSets[3].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_channelFlag"),this._shaderSets[3].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_baseColor"),this._shaderSets[4].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_position"),this._shaderSets[4].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_texCoord"),this._shaderSets[4].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"s_texture0"),this._shaderSets[4].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_matrix"),this._shaderSets[4].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_baseColor"),this._shaderSets[5].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_position"),this._shaderSets[5].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_texCoord"),this._shaderSets[5].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture0"),this._shaderSets[5].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture1"),this._shaderSets[5].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_matrix"),this._shaderSets[5].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_clipMatrix"),this._shaderSets[5].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_channelFlag"),this._shaderSets[5].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_baseColor"),this._shaderSets[6].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_position"),this._shaderSets[6].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_texCoord"),this._shaderSets[6].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture0"),this._shaderSets[6].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture1"),this._shaderSets[6].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_matrix"),this._shaderSets[6].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_clipMatrix"),this._shaderSets[6].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_channelFlag"),this._shaderSets[6].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_baseColor"),this._shaderSets[7].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_position"),this._shaderSets[7].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_texCoord"),this._shaderSets[7].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"s_texture0"),this._shaderSets[7].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_matrix"),this._shaderSets[7].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_baseColor"),this._shaderSets[8].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_position"),this._shaderSets[8].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_texCoord"),this._shaderSets[8].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture0"),this._shaderSets[8].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture1"),this._shaderSets[8].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_matrix"),this._shaderSets[8].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_clipMatrix"),this._shaderSets[8].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_channelFlag"),this._shaderSets[8].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_baseColor"),this._shaderSets[9].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_position"),this._shaderSets[9].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_texCoord"),this._shaderSets[9].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture0"),this._shaderSets[9].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture1"),this._shaderSets[9].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_matrix"),this._shaderSets[9].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_clipMatrix"),this._shaderSets[9].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_channelFlag"),this._shaderSets[9].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_baseColor")}loadShaderProgram(d,_){let S=this.gl.createProgram(),P=this.compileShaderSource(this.gl.VERTEX_SHADER,d);if(!P)return F("Vertex shader compile error!"),0;let M=this.compileShaderSource(this.gl.FRAGMENT_SHADER,_);return M?(this.gl.attachShader(S,P),this.gl.attachShader(S,M),this.gl.linkProgram(S),this.gl.getProgramParameter(S,this.gl.LINK_STATUS)?(this.gl.deleteShader(P),this.gl.deleteShader(M),S):(F("Failed to link program: {0}",S),this.gl.deleteShader(P),this.gl.deleteShader(M),S&&this.gl.deleteProgram(S),0)):(F("Vertex shader compile error!"),0)}compileShaderSource(d,_){const S=_,P=this.gl.createShader(d);if(this.gl.shaderSource(P,S),this.gl.compileShader(P),!P){const k=this.gl.getShaderInfoLog(P);F("Shader compile log: {0} ",k)}return this.gl.getShaderParameter(P,this.gl.COMPILE_STATUS)?P:(this.gl.deleteShader(P),null)}setGl(d){this.gl=d}}var ws;(function(A){A[A.ShaderNames_SetupMask=0]="ShaderNames_SetupMask",A[A.ShaderNames_NormalPremultipliedAlpha=1]="ShaderNames_NormalPremultipliedAlpha",A[A.ShaderNames_NormalMaskedPremultipliedAlpha=2]="ShaderNames_NormalMaskedPremultipliedAlpha",A[A.ShaderNames_NomralMaskedInvertedPremultipliedAlpha=3]="ShaderNames_NomralMaskedInvertedPremultipliedAlpha",A[A.ShaderNames_AddPremultipliedAlpha=4]="ShaderNames_AddPremultipliedAlpha",A[A.ShaderNames_AddMaskedPremultipliedAlpha=5]="ShaderNames_AddMaskedPremultipliedAlpha",A[A.ShaderNames_AddMaskedPremultipliedAlphaInverted=6]="ShaderNames_AddMaskedPremultipliedAlphaInverted",A[A.ShaderNames_MultPremultipliedAlpha=7]="ShaderNames_MultPremultipliedAlpha",A[A.ShaderNames_MultMaskedPremultipliedAlpha=8]="ShaderNames_MultMaskedPremultipliedAlpha",A[A.ShaderNames_MultMaskedPremultipliedAlphaInverted=9]="ShaderNames_MultMaskedPremultipliedAlphaInverted"})(ws||(ws={}));const GM="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",jM="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",HM="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",_x="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",VM="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;void main(){   gl_FragColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;}",zM="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;void main(){   vec4 col_formask = texture2D(s_texture0 , v_texCoord) * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",XM="precision mediump float;varying vec2 v_texCoord;varying vec4 v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4 u_channelFlag;uniform vec4 u_baseColor;void main(){vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;col_formask = col_formask * (1.0 - maskVal);gl_FragColor = col_formask;}";class xx extends g{constructor(){super(),this._clippingContextBufferForMask=null,this._clippingContextBufferForDraw=null,this._clippingManager=new Tf,this.firstDraw=!0,this._textures={},this._sortedDrawableIndexList=[],this._bufferData={vertex:null,uv:null,index:null}}initialize(d){d.isUsingMasking()&&(this._clippingManager=new Tf,this._clippingManager.initialize(d,d.getDrawableCount(),d.getDrawableMasks(),d.getDrawableMaskCounts()));for(let _=d.getDrawableCount()-1;_>=0;_--)this._sortedDrawableIndexList[_]=0;super.initialize(d)}bindTexture(d,_){this._textures[d]=_}getBindedTextures(){return this._textures}setClippingMaskBufferSize(d){this._clippingManager.release(),this._clippingManager=new Tf,this._clippingManager.setClippingMaskBufferSize(d),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts())}getClippingMaskBufferSize(){return this._clippingManager.getClippingMaskBufferSize()}release(){var d,_,S;const P=this;this._clippingManager.release(),P._clippingManager=void 0,(d=this.gl)===null||d===void 0||d.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,(_=this.gl)===null||_===void 0||_.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,(S=this.gl)===null||S===void 0||S.deleteBuffer(this._bufferData.index),this._bufferData.index=null,P._bufferData=void 0,P._textures=void 0}doDrawModel(){this.preDraw(),this._clippingManager!=null&&this._clippingManager.setupClippingContext(this.getModel(),this);const d=this.getModel().getDrawableCount(),_=this.getModel().getDrawableRenderOrders();for(let S=0;S<d;++S){const P=_[S];this._sortedDrawableIndexList[P]=S}for(let S=0;S<d;++S){const P=this._sortedDrawableIndexList[S];this.getModel().getDrawableDynamicFlagIsVisible(P)&&(this.setClippingContextBufferForDraw(this._clippingManager!=null?this._clippingManager.getClippingContextListForDraw()[P]:null),this.setIsCulling(this.getModel().getDrawableCulling(P)),this.drawMesh(this.getModel().getDrawableTextureIndices(P),this.getModel().getDrawableVertexIndexCount(P),this.getModel().getDrawableVertexCount(P),this.getModel().getDrawableVertexIndices(P),this.getModel().getDrawableVertices(P),this.getModel().getDrawableVertexUvs(P),this.getModel().getDrawableOpacity(P),this.getModel().getDrawableBlendMode(P),this.getModel().getDrawableInvertedMaskBit(P)))}}drawMesh(d,_,S,P,M,k,G,X,W){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);const ee=this.getModelColor();this.getClippingContextBufferForMask()==null&&(ee.A*=G,this.isPremultipliedAlpha()&&(ee.R*=ee.A,ee.G*=ee.A,ee.B*=ee.A));let ie=null;this._textures[d]!=null&&(ie=this._textures[d]),Ss.getInstance().setupShaderProgram(this,ie,S,M,P,k,this._bufferData,G,X,ee,this.isPremultipliedAlpha(),this.getMvpMatrix(),W),this.gl.drawElements(this.gl.TRIANGLES,_,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)}static doStaticRelease(){Ss.deleteInstance()}setRenderState(d,_){xf=d,ja=_}preDraw(){this.firstDraw&&(this.firstDraw=!1,this._anisortopy=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}setClippingContextBufferForMask(d){this._clippingContextBufferForMask=d}getClippingContextBufferForMask(){return this._clippingContextBufferForMask}setClippingContextBufferForDraw(d){this._clippingContextBufferForDraw=d}getClippingContextBufferForDraw(){return this._clippingContextBufferForDraw}startUp(d){this.gl=d,this._clippingManager.setGL(d),Ss.getInstance().setGl(d)}}g.staticRelease=()=>{xx.doStaticRelease()};var $M=h(5),WM=h(24),YM=h.n(WM);const Tx=new v;class Ex extends AM.a{constructor(d,_,S){super(),this.lipSync=!0,this.breath=gf.create(),this.renderer=new xx,this.idParamAngleX=RM,this.idParamAngleY=OM,this.idParamAngleZ=MM,this.idParamEyeBallX=DM,this.idParamEyeBallY=LM,this.idParamBodyAngleX=NM,this.idParamBreath=FM,this.pixelsPerUnit=1,this.centeringTransform=new $M.Matrix,this.coreModel=d,this.settings=_,this.motionManager=new yx(_,S),this.init()}init(){var d;super.init(),((d=this.settings.getEyeBlinkParameters())===null||d===void 0?void 0:d.length)>0&&(this.eyeBlink=Ga.create(this.settings)),this.breath.setParameters([new ka(this.idParamAngleX,0,15,6.5345,.5),new ka(this.idParamAngleY,0,8,3.5345,.5),new ka(this.idParamAngleZ,0,10,5.5345,.5),new ka(this.idParamBodyAngleX,0,4,15.5345,.5),new ka(this.idParamBreath,0,.5,3.2345,.5)]),this.renderer.initialize(this.coreModel),this.renderer.setIsPremultipliedAlpha(!0)}getSize(){return[this.coreModel.getModel().canvasinfo.CanvasWidth,this.coreModel.getModel().canvasinfo.CanvasHeight]}getLayout(){return YM()(Object.assign({},this.settings.layout),(d,_)=>_.charAt(0).toLowerCase()+_.slice(1))}setupLayout(){super.setupLayout(),this.pixelsPerUnit=this.coreModel.getModel().canvasinfo.PixelsPerUnit,this.centeringTransform.scale(this.pixelsPerUnit,this.pixelsPerUnit).translate(this.originalWidth/2,this.originalHeight/2)}updateWebGLContext(d,_){this.renderer.firstDraw=!0,this.renderer._bufferData={vertex:null,uv:null,index:null},this.renderer.startUp(d),this.renderer._clippingManager._currentFrameNo=_,this.renderer._clippingManager._maskTexture=void 0,Ss.getInstance()._shaderSets=[]}bindTexture(d,_){this.renderer.bindTexture(d,_)}getHitAreaDefs(){var d,_;return(_=(d=this.settings.hitAreas)===null||d===void 0?void 0:d.map(S=>({id:S.Id,name:S.Name,index:this.coreModel.getDrawableIndex(S.Id)})))!==null&&_!==void 0?_:[]}getDrawableIDs(){return this.coreModel.getDrawableIds()}getDrawableIndex(d){return this.coreModel.getDrawableIndex(d)}getDrawableVertices(d){if(typeof d=="string"&&(d=this.coreModel.getDrawableIndex(d),d===-1))throw new TypeError("Unable to find drawable ID: "+d);const _=this.coreModel.getDrawableVertices(d).slice();for(let S=0;S<_.length;S+=2)_[S]=_[S]*this.pixelsPerUnit+this.originalWidth/2,_[S+1]=-_[S+1]*this.pixelsPerUnit+this.originalHeight/2;return _}updateTransform(d){this.drawingMatrix.copyFrom(this.centeringTransform).prepend(this.localTransform).prepend(d)}update(d,_){var S,P,M;super.update(d,_),d/=1e3,_/=1e3;const k=this.coreModel;this.emit("beforeMotionUpdate");const G=this.motionManager.update(this.coreModel,_);this.emit("afterMotionUpdate"),k.saveParameters(),G||(S=this.eyeBlink)===null||S===void 0||S.updateParameters(k,d),this.updateFocus(),this.updateNaturalMovements(d*1e3,_*1e3),(P=this.physics)===null||P===void 0||P.evaluate(k,d),(M=this.pose)===null||M===void 0||M.updateParameters(k,d),this.emit("beforeModelUpdate"),k.update(),k.loadParameters()}updateFocus(){this.coreModel.addParameterValueById(this.idParamEyeBallX,this.focusController.x),this.coreModel.addParameterValueById(this.idParamEyeBallY,this.focusController.y),this.coreModel.addParameterValueById(this.idParamAngleX,this.focusController.x*30),this.coreModel.addParameterValueById(this.idParamAngleY,this.focusController.y*30),this.coreModel.addParameterValueById(this.idParamAngleZ,this.focusController.x*this.focusController.y*-30),this.coreModel.addParameterValueById(this.idParamBodyAngleX,this.focusController.x*10)}updateNaturalMovements(d,_){var S;(S=this.breath)===null||S===void 0||S.updateParameters(this.coreModel,d/1e3)}draw(d){const _=this.drawingMatrix,S=Tx.getArray();S[0]=_.a,S[1]=_.b,S[4]=-_.c,S[5]=-_.d,S[12]=_.tx,S[13]=_.ty,this.renderer.setMvpMatrix(Tx),this.renderer.setRenderState(d.getParameter(d.FRAMEBUFFER_BINDING),this.viewport),this.renderer.drawModel()}destroy(){super.destroy(),this.renderer.release(),this.coreModel.release(),this.renderer=void 0,this.coreModel=void 0}}let Ha,bx=20;function Sx(){return w.isStarted()?Promise.resolve():(Ha??(Ha=new Promise((A,d)=>{function _(){try{wx(),A()}catch(S){if(bx--,bx<0){const P=new Error("Failed to start up Cubism 4 framework.");P.cause=S,d(P);return}Q.f.log("Cubism4","Startup failed, retrying 10ms later..."),setTimeout(_,10)}}_()})),Ha)}function wx(A){A=Object.assign({logFunction:console.log,loggingLevel:C.LogLevel_Verbose},A),w.startUp(A),w.initialize()}var qM=h(4);const KM=.001,Cx=.5;class Ef{constructor(){this._fadeTimeSeconds=Cx,this._lastModel=void 0,this._partGroups=[],this._partGroupCounts=[]}static create(d){const _=new Ef;typeof d.FadeInTime=="number"&&(_._fadeTimeSeconds=d.FadeInTime,_._fadeTimeSeconds<=0&&(_._fadeTimeSeconds=Cx));const S=d.Groups,P=S.length;for(let M=0;M<P;++M){const k=S[M],G=k.length;let X=0;for(let W=0;W<G;++W){const ee=k[W],ie=new il;ie.partId=ee.Id;const ve=ee.Link;if(ve){const me=ve.length;for(let le=0;le<me;++le){const Oe=new il;Oe.partId=ve[le],ie.link.push(Oe)}}_._partGroups.push(ie),++X}_._partGroupCounts.push(X)}return _}updateParameters(d,_){d!=this._lastModel&&this.reset(d),this._lastModel=d,_<0&&(_=0);let S=0;for(let P=0;P<this._partGroupCounts.length;P++){const M=this._partGroupCounts[P];this.doFade(d,_,S,M),S+=M}this.copyPartOpacities(d)}reset(d){let _=0;for(let S=0;S<this._partGroupCounts.length;++S){const P=this._partGroupCounts[S];for(let M=_;M<_+P;++M){this._partGroups[M].initialize(d);const k=this._partGroups[M].partIndex,G=this._partGroups[M].parameterIndex;if(!(k<0)){d.setPartOpacityByIndex(k,M==_?1:0),d.setParameterValueByIndex(G,M==_?1:0);for(let X=0;X<this._partGroups[M].link.length;++X)this._partGroups[M].link[X].initialize(d)}}_+=P}}copyPartOpacities(d){for(let _=0;_<this._partGroups.length;++_){const S=this._partGroups[_];if(S.link.length==0)continue;const P=this._partGroups[_].partIndex,M=d.getPartOpacityByIndex(P);for(let k=0;k<S.link.length;++k){const X=S.link[k].partIndex;X<0||d.setPartOpacityByIndex(X,M)}}}doFade(d,_,S,P){let M=-1,k=1;const G=.5,X=.15;for(let W=S;W<S+P;++W){const ee=this._partGroups[W].partIndex,ie=this._partGroups[W].parameterIndex;if(d.getParameterValueByIndex(ie)>KM){if(M>=0)break;M=W,k=d.getPartOpacityByIndex(ee),k+=_/this._fadeTimeSeconds,k>1&&(k=1)}}M<0&&(M=0,k=1);for(let W=S;W<S+P;++W){const ee=this._partGroups[W].partIndex;if(M==W)d.setPartOpacityByIndex(ee,k);else{let ie=d.getPartOpacityByIndex(ee),ve;k<G?ve=k*(G-1)/G+1:ve=(1-k)*G/(1-G),(1-ve)*(1-k)>X&&(ve=1-X/(1-k)),ie>ve&&(ie=ve),d.setPartOpacityByIndex(ee,ie)}}}}class il{constructor(d){this.parameterIndex=0,this.partIndex=0,this.partId="",this.link=[],d!=null&&this.assignment(d)}assignment(d){return this.partId=d.partId,this.link=d.link.map(_=>_.clone()),this}initialize(d){this.parameterIndex=d.getParameterIndex(this.partId),this.partIndex=d.getPartIndex(this.partId),d.setParameterValueByIndex(this.parameterIndex,1)}clone(){const d=new il;return d.partId=this.partId,d.parameterIndex=this.parameterIndex,d.partIndex=this.partIndex,d.link=this.link.map(_=>_.clone()),d}}class JM{constructor(d){this._model=d,this._savedParameters=[],this._parameterIds=[],this._drawableIds=[],this._partIds=[],this._notExistPartId={},this._notExistParameterId={},this._notExistParameterValues={},this._notExistPartOpacities={},this.initialize()}update(){this._model.update(),this._model.drawables.resetDynamicFlags()}getCanvasWidth(){return this._model==null?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit}getCanvasHeight(){return this._model==null?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit}saveParameters(){const d=this._model.parameters.count,_=this._savedParameters.length;for(let S=0;S<d;++S)S<_?this._savedParameters[S]=this._parameterValues[S]:this._savedParameters.push(this._parameterValues[S])}getModel(){return this._model}getPartIndex(d){let _;const S=this._model.parts.count;for(_=0;_<S;++_)if(d==this._partIds[_])return _;return d in this._notExistPartId?this._notExistPartId[d]:(_=S+this._notExistPartId.length,this._notExistPartId[d]=_,this._notExistPartOpacities[_]=0,_)}getPartCount(){return this._model.parts.count}setPartOpacityByIndex(d,_){if(d in this._notExistPartOpacities){this._notExistPartOpacities[d]=_;return}O(0<=d&&d<this.getPartCount()),this._partOpacities[d]=_}setPartOpacityById(d,_){const S=this.getPartIndex(d);S<0||this.setPartOpacityByIndex(S,_)}getPartOpacityByIndex(d){return d in this._notExistPartOpacities?this._notExistPartOpacities[d]:(O(0<=d&&d<this.getPartCount()),this._partOpacities[d])}getPartOpacityById(d){const _=this.getPartIndex(d);return _<0?0:this.getPartOpacityByIndex(_)}getParameterIndex(d){let _;const S=this._model.parameters.count;for(_=0;_<S;++_)if(d==this._parameterIds[_])return _;return d in this._notExistParameterId?this._notExistParameterId[d]:(_=this._model.parameters.count+Object.keys(this._notExistParameterId).length,this._notExistParameterId[d]=_,this._notExistParameterValues[_]=0,_)}getParameterCount(){return this._model.parameters.count}getParameterMaximumValue(d){return this._model.parameters.maximumValues[d]}getParameterMinimumValue(d){return this._model.parameters.minimumValues[d]}getParameterDefaultValue(d){return this._model.parameters.defaultValues[d]}getParameterValueByIndex(d){return d in this._notExistParameterValues?this._notExistParameterValues[d]:(O(0<=d&&d<this.getParameterCount()),this._parameterValues[d])}getParameterValueById(d){const _=this.getParameterIndex(d);return this.getParameterValueByIndex(_)}setParameterValueByIndex(d,_,S=1){if(d in this._notExistParameterValues){this._notExistParameterValues[d]=S==1?_:this._notExistParameterValues[d]*(1-S)+_*S;return}O(0<=d&&d<this.getParameterCount()),this._model.parameters.maximumValues[d]<_&&(_=this._model.parameters.maximumValues[d]),this._model.parameters.minimumValues[d]>_&&(_=this._model.parameters.minimumValues[d]),this._parameterValues[d]=S==1?_:this._parameterValues[d]=this._parameterValues[d]*(1-S)+_*S}setParameterValueById(d,_,S=1){const P=this.getParameterIndex(d);this.setParameterValueByIndex(P,_,S)}addParameterValueByIndex(d,_,S=1){this.setParameterValueByIndex(d,this.getParameterValueByIndex(d)+_*S)}addParameterValueById(d,_,S=1){const P=this.getParameterIndex(d);this.addParameterValueByIndex(P,_,S)}multiplyParameterValueById(d,_,S=1){const P=this.getParameterIndex(d);this.multiplyParameterValueByIndex(P,_,S)}multiplyParameterValueByIndex(d,_,S=1){this.setParameterValueByIndex(d,this.getParameterValueByIndex(d)*(1+(_-1)*S))}getDrawableIds(){return this._drawableIds.slice()}getDrawableIndex(d){const _=this._model.drawables.count;for(let S=0;S<_;++S)if(this._drawableIds[S]==d)return S;return-1}getDrawableCount(){return this._model.drawables.count}getDrawableId(d){return this._model.drawables.ids[d]}getDrawableRenderOrders(){return this._model.drawables.renderOrders}getDrawableTextureIndices(d){return this._model.drawables.textureIndices[d]}getDrawableDynamicFlagVertexPositionsDidChange(d){const _=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(_[d])}getDrawableVertexIndexCount(d){return this._model.drawables.indexCounts[d]}getDrawableVertexCount(d){return this._model.drawables.vertexCounts[d]}getDrawableVertices(d){return this.getDrawableVertexPositions(d)}getDrawableVertexIndices(d){return this._model.drawables.indices[d]}getDrawableVertexPositions(d){return this._model.drawables.vertexPositions[d]}getDrawableVertexUvs(d){return this._model.drawables.vertexUvs[d]}getDrawableOpacity(d){return this._model.drawables.opacities[d]}getDrawableCulling(d){const _=this._model.drawables.constantFlags;return!Live2DCubismCore.Utils.hasIsDoubleSidedBit(_[d])}getDrawableBlendMode(d){const _=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasBlendAdditiveBit(_[d])?m.CubismBlendMode_Additive:Live2DCubismCore.Utils.hasBlendMultiplicativeBit(_[d])?m.CubismBlendMode_Multiplicative:m.CubismBlendMode_Normal}getDrawableInvertedMaskBit(d){const _=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasIsInvertedMaskBit(_[d])}getDrawableMasks(){return this._model.drawables.masks}getDrawableMaskCounts(){return this._model.drawables.maskCounts}isUsingMasking(){for(let d=0;d<this._model.drawables.count;++d)if(!(this._model.drawables.maskCounts[d]<=0))return!0;return!1}getDrawableDynamicFlagIsVisible(d){const _=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasIsVisibleBit(_[d])}getDrawableDynamicFlagVisibilityDidChange(d){const _=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(_[d])}getDrawableDynamicFlagOpacityDidChange(d){const _=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasOpacityDidChangeBit(_[d])}getDrawableDynamicFlagRenderOrderDidChange(d){const _=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(_[d])}loadParameters(){let d=this._model.parameters.count;const _=this._savedParameters.length;d>_&&(d=_);for(let S=0;S<d;++S)this._parameterValues[S]=this._savedParameters[S]}initialize(){this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;{const d=this._model.parameters.ids,_=this._model.parameters.count;for(let S=0;S<_;++S)this._parameterIds.push(d[S])}{const d=this._model.parts.ids,_=this._model.parts.count;for(let S=0;S<_;++S)this._partIds.push(d[S])}{const d=this._model.drawables.ids,_=this._model.drawables.count;for(let S=0;S<_;++S)this._drawableIds.push(d[S])}}release(){this._model.release(),this._model=void 0}}class bf{constructor(d){this._moc=d,this._modelCount=0}static create(d){const _=Live2DCubismCore.Moc.fromArrayBuffer(d);if(_)return new bf(_);throw new Error("Unknown error")}createModel(){let d;const _=Live2DCubismCore.Model.fromMoc(this._moc);if(_)return d=new JM(_),++this._modelCount,d;throw new Error("Unknown error")}deleteModel(d){d!=null&&--this._modelCount}release(){this._moc._release(),this._moc=void 0}}var sl;(function(A){A[A.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter"})(sl||(sl={}));var Nn;(function(A){A[A.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",A[A.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",A[A.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle"})(Nn||(Nn={}));class ZM{constructor(){this.initialPosition=new f(0,0),this.position=new f(0,0),this.lastPosition=new f(0,0),this.lastGravity=new f(0,0),this.force=new f(0,0),this.velocity=new f(0,0)}}class QM{constructor(){this.normalizationPosition={},this.normalizationAngle={}}}class e2{constructor(){this.source={}}}class t2{constructor(){this.destination={},this.translationScale=new f(0,0)}}class r2{constructor(){this.settings=[],this.inputs=[],this.outputs=[],this.particles=[],this.gravity=new f(0,0),this.wind=new f(0,0)}}class n2{constructor(d){this._json=d}release(){this._json=void 0}getGravity(){const d=new f(0,0);return d.x=this._json.Meta.EffectiveForces.Gravity.X,d.y=this._json.Meta.EffectiveForces.Gravity.Y,d}getWind(){const d=new f(0,0);return d.x=this._json.Meta.EffectiveForces.Wind.X,d.y=this._json.Meta.EffectiveForces.Wind.Y,d}getSubRigCount(){return this._json.Meta.PhysicsSettingCount}getTotalInputCount(){return this._json.Meta.TotalInputCount}getTotalOutputCount(){return this._json.Meta.TotalOutputCount}getVertexCount(){return this._json.Meta.VertexCount}getNormalizationPositionMinimumValue(d){return this._json.PhysicsSettings[d].Normalization.Position.Minimum}getNormalizationPositionMaximumValue(d){return this._json.PhysicsSettings[d].Normalization.Position.Maximum}getNormalizationPositionDefaultValue(d){return this._json.PhysicsSettings[d].Normalization.Position.Default}getNormalizationAngleMinimumValue(d){return this._json.PhysicsSettings[d].Normalization.Angle.Minimum}getNormalizationAngleMaximumValue(d){return this._json.PhysicsSettings[d].Normalization.Angle.Maximum}getNormalizationAngleDefaultValue(d){return this._json.PhysicsSettings[d].Normalization.Angle.Default}getInputCount(d){return this._json.PhysicsSettings[d].Input.length}getInputWeight(d,_){return this._json.PhysicsSettings[d].Input[_].Weight}getInputReflect(d,_){return this._json.PhysicsSettings[d].Input[_].Reflect}getInputType(d,_){return this._json.PhysicsSettings[d].Input[_].Type}getInputSourceId(d,_){return this._json.PhysicsSettings[d].Input[_].Source.Id}getOutputCount(d){return this._json.PhysicsSettings[d].Output.length}getOutputVertexIndex(d,_){return this._json.PhysicsSettings[d].Output[_].VertexIndex}getOutputAngleScale(d,_){return this._json.PhysicsSettings[d].Output[_].Scale}getOutputWeight(d,_){return this._json.PhysicsSettings[d].Output[_].Weight}getOutputDestinationId(d,_){return this._json.PhysicsSettings[d].Output[_].Destination.Id}getOutputType(d,_){return this._json.PhysicsSettings[d].Output[_].Type}getOutputReflect(d,_){return this._json.PhysicsSettings[d].Output[_].Reflect}getParticleCount(d){return this._json.PhysicsSettings[d].Vertices.length}getParticleMobility(d,_){return this._json.PhysicsSettings[d].Vertices[_].Mobility}getParticleDelay(d,_){return this._json.PhysicsSettings[d].Vertices[_].Delay}getParticleAcceleration(d,_){return this._json.PhysicsSettings[d].Vertices[_].Acceleration}getParticleRadius(d,_){return this._json.PhysicsSettings[d].Vertices[_].Radius}getParticlePosition(d,_){const S=new f(0,0);return S.x=this._json.PhysicsSettings[d].Vertices[_].Position.X,S.y=this._json.PhysicsSettings[d].Vertices[_].Position.Y,S}}const Ix="X",Px="Y",Ax="Angle",i2=5,Rx=100,s2=.001;class Sf{constructor(){this._options=new a2,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0}static create(d){const _=new Sf;return _.parse(d),_._physicsRig.gravity.y=0,_}evaluate(d,_){let S,P,M,k;const G=new f;let X,W,ee,ie,ve,me,le,Oe;ve=d.getModel().parameters.values,me=d.getModel().parameters.maximumValues,le=d.getModel().parameters.minimumValues,Oe=d.getModel().parameters.defaultValues;for(let ae=0;ae<this._physicsRig.subRigCount;++ae){S={angle:0},G.x=0,G.y=0,X=this._physicsRig.settings[ae],W=this._physicsRig.inputs.slice(X.baseInputIndex),ee=this._physicsRig.outputs.slice(X.baseOutputIndex),ie=this._physicsRig.particles.slice(X.baseParticleIndex);for(let se=0;se<X.inputCount;++se)P=W[se].weight/Rx,W[se].sourceParameterIndex==-1&&(W[se].sourceParameterIndex=d.getParameterIndex(W[se].source.id)),W[se].getNormalizedParameterValue(G,S,ve[W[se].sourceParameterIndex],le[W[se].sourceParameterIndex],me[W[se].sourceParameterIndex],Oe[W[se].sourceParameterIndex],X.normalizationPosition,X.normalizationAngle,W[se].reflect,P);M=p.degreesToRadian(-S.angle),G.x=G.x*p.cos(M)-G.y*p.sin(M),G.y=G.x*p.sin(M)+G.y*p.cos(M),y2(ie,X.particleCount,G,S.angle,this._options.wind,s2*X.normalizationPosition.maximum,_,i2);for(let se=0;se<X.outputCount;++se){const xe=ee[se].vertexIndex;if(xe<1||xe>=X.particleCount)break;ee[se].destinationParameterIndex==-1&&(ee[se].destinationParameterIndex=d.getParameterIndex(ee[se].destination.id));const Ce=new f;Ce.x=ie[xe].position.x-ie[xe-1].position.x,Ce.y=ie[xe].position.y-ie[xe-1].position.y,k=ee[se].getValue(Ce,ie,xe,ee[se].reflect,this._options.gravity);const Fe=ee[se].destinationParameterIndex,Ft=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(ve.subarray(Fe))):ve.slice(Fe);_2(Ft,le[Fe],me[Fe],k,ee[se]);for(let ze=Fe,al=0;ze<ve.length;ze++,al++)ve[ze]=Ft[al]}}}setOptions(d){this._options=d}getOption(){return this._options}release(){this._physicsRig=void 0}parse(d){this._physicsRig=new r2;let _=new n2(d);this._physicsRig.gravity=_.getGravity(),this._physicsRig.wind=_.getWind(),this._physicsRig.subRigCount=_.getSubRigCount();let S=0,P=0,M=0;for(let k=0;k<this._physicsRig.subRigCount;++k){const G=new QM;G.normalizationPosition.minimum=_.getNormalizationPositionMinimumValue(k),G.normalizationPosition.maximum=_.getNormalizationPositionMaximumValue(k),G.normalizationPosition.defalut=_.getNormalizationPositionDefaultValue(k),G.normalizationAngle.minimum=_.getNormalizationAngleMinimumValue(k),G.normalizationAngle.maximum=_.getNormalizationAngleMaximumValue(k),G.normalizationAngle.defalut=_.getNormalizationAngleDefaultValue(k),G.inputCount=_.getInputCount(k),G.baseInputIndex=S,S+=G.inputCount;for(let X=0;X<G.inputCount;++X){const W=new e2;switch(W.sourceParameterIndex=-1,W.weight=_.getInputWeight(k,X),W.reflect=_.getInputReflect(k,X),_.getInputType(k,X)){case Ix:W.type=Nn.CubismPhysicsSource_X,W.getNormalizedParameterValue=o2;break;case Px:W.type=Nn.CubismPhysicsSource_Y,W.getNormalizedParameterValue=u2;break;case Ax:W.type=Nn.CubismPhysicsSource_Angle,W.getNormalizedParameterValue=l2;break}W.source.targetType=sl.CubismPhysicsTargetType_Parameter,W.source.id=_.getInputSourceId(k,X),this._physicsRig.inputs.push(W)}G.outputCount=_.getOutputCount(k),G.baseOutputIndex=P,P+=G.outputCount;for(let X=0;X<G.outputCount;++X){const W=new t2;switch(W.destinationParameterIndex=-1,W.vertexIndex=_.getOutputVertexIndex(k,X),W.angleScale=_.getOutputAngleScale(k,X),W.weight=_.getOutputWeight(k,X),W.destination.targetType=sl.CubismPhysicsTargetType_Parameter,W.destination.id=_.getOutputDestinationId(k,X),_.getOutputType(k,X)){case Ix:W.type=Nn.CubismPhysicsSource_X,W.getValue=h2,W.getScale=v2;break;case Px:W.type=Nn.CubismPhysicsSource_Y,W.getValue=c2,W.getScale=m2;break;case Ax:W.type=Nn.CubismPhysicsSource_Angle,W.getValue=f2,W.getScale=g2;break}W.reflect=_.getOutputReflect(k,X),this._physicsRig.outputs.push(W)}G.particleCount=_.getParticleCount(k),G.baseParticleIndex=M,M+=G.particleCount;for(let X=0;X<G.particleCount;++X){const W=new ZM;W.mobility=_.getParticleMobility(k,X),W.delay=_.getParticleDelay(k,X),W.acceleration=_.getParticleAcceleration(k,X),W.radius=_.getParticleRadius(k,X),W.position=_.getParticlePosition(k,X),this._physicsRig.particles.push(W)}this._physicsRig.settings.push(G)}this.initialize(),_.release()}initialize(){let d,_,S;for(let P=0;P<this._physicsRig.subRigCount;++P){_=this._physicsRig.settings[P],d=this._physicsRig.particles.slice(_.baseParticleIndex),d[0].initialPosition=new f(0,0),d[0].lastPosition=new f(d[0].initialPosition.x,d[0].initialPosition.y),d[0].lastGravity=new f(0,-1),d[0].lastGravity.y*=-1,d[0].velocity=new f(0,0),d[0].force=new f(0,0);for(let M=1;M<_.particleCount;++M)S=new f(0,0),S.y=d[M].radius,d[M].initialPosition=new f(d[M-1].initialPosition.x+S.x,d[M-1].initialPosition.y+S.y),d[M].position=new f(d[M].initialPosition.x,d[M].initialPosition.y),d[M].lastPosition=new f(d[M].initialPosition.x,d[M].initialPosition.y),d[M].lastGravity=new f(0,-1),d[M].lastGravity.y*=-1,d[M].velocity=new f(0,0),d[M].force=new f(0,0)}}}class a2{constructor(){this.gravity=new f(0,0),this.wind=new f(0,0)}}function o2(A,d,_,S,P,M,k,G,X,W){A.x+=wf(_,S,P,M,k.minimum,k.maximum,k.defalut,X)*W}function u2(A,d,_,S,P,M,k,G,X,W){A.y+=wf(_,S,P,M,k.minimum,k.maximum,k.defalut,X)*W}function l2(A,d,_,S,P,M,k,G,X,W){d.angle+=wf(_,S,P,M,G.minimum,G.maximum,G.defalut,X)*W}function h2(A,d,_,S,P){let M=A.x;return S&&(M*=-1),M}function c2(A,d,_,S,P){let M=A.y;return S&&(M*=-1),M}function f2(A,d,_,S,P){let M;return _>=2?P=d[_-1].position.substract(d[_-2].position):P=P.multiplyByScaler(-1),M=p.directionToRadian(P,A),S&&(M*=-1),M}function d2(A,d){return Math.abs(Math.max(A,d)-Math.min(A,d))}function p2(A,d){return Math.min(A,d)+d2(A,d)/2}function v2(A,d){return A.x}function m2(A,d){return A.y}function g2(A,d){return d}function y2(A,d,_,S,P,M,k,G){let X,W,ee,ie,ve=new f(0,0),me=new f(0,0),le=new f(0,0),Oe=new f(0,0);A[0].position=new f(_.x,_.y),X=p.degreesToRadian(S),ie=p.radianToDirection(X),ie.normalize();for(let ae=1;ae<d;++ae)A[ae].force=ie.multiplyByScaler(A[ae].acceleration).add(P),A[ae].lastPosition=new f(A[ae].position.x,A[ae].position.y),W=A[ae].delay*k*30,ve=A[ae].position.substract(A[ae-1].position),ee=p.directionToRadian(A[ae].lastGravity,ie)/G,ve.x=p.cos(ee)*ve.x-ve.y*p.sin(ee),ve.y=p.sin(ee)*ve.x+ve.y*p.cos(ee),A[ae].position=A[ae-1].position.add(ve),me=A[ae].velocity.multiplyByScaler(W),le=A[ae].force.multiplyByScaler(W).multiplyByScaler(W),A[ae].position=A[ae].position.add(me).add(le),Oe=A[ae].position.substract(A[ae-1].position),Oe.normalize(),A[ae].position=A[ae-1].position.add(Oe.multiplyByScaler(A[ae].radius)),p.abs(A[ae].position.x)<M&&(A[ae].position.x=0),W!=0&&(A[ae].velocity=A[ae].position.substract(A[ae].lastPosition),A[ae].velocity=A[ae].velocity.divisionByScalar(W),A[ae].velocity=A[ae].velocity.multiplyByScaler(A[ae].mobility)),A[ae].force=new f(0,0),A[ae].lastGravity=new f(ie.x,ie.y)}function _2(A,d,_,S,P){let M,k,G;M=P.getScale(P.translationScale,P.angleScale),k=S*M,k<d?(k<P.valueBelowMinimum&&(P.valueBelowMinimum=k),k=d):k>_&&(k>P.valueExceededMaximum&&(P.valueExceededMaximum=k),k=_),G=P.weight/Rx,G>=1||(k=A[0]*(1-G)+k*G),A[0]=k}function wf(A,d,_,S,P,M,k,G){let X=0;const W=p.max(_,d);W<A&&(A=W);const ee=p.min(_,d);ee>A&&(A=ee);const ie=p.min(P,M),ve=p.max(P,M),me=k,le=p2(ee,W),Oe=A-le;switch(Math.sign(Oe)){case 1:{const ae=ve-me,se=W-le;se!=0&&(X=Oe*(ae/se),X+=me);break}case-1:{const ae=ie-me,se=ee-le;se!=0&&(X=Oe*(ae/se),X+=me);break}case 0:{X=me;break}}return G?X:X*-1}mf.b.cubism4=nl,qM.a.registerRuntime({version:4,ready:Sx,test(A){return A instanceof de||de.isValidJSON(A)},isValidMoc(A){if(A.byteLength<4)return!1;const d=new Int8Array(A,0,4);return String.fromCharCode(...d)==="MOC3"},createModelSettings(A){return new de(A)},createCoreModel(A){const d=bf.create(A);try{const _=d.createModel();return _.__moc=d,_}catch(_){try{d.release()}catch{}throw _}},createInternalModel(A,d,_){const S=new Ex(A,d,_),P=A;return P.__moc&&(S.__moc=P.__moc,delete P.__moc,S.once("destroy",x2)),S},createPhysics(A,d){return Sf.create(d)},createPose(A,d){return Ef.create(d)}});function x2(){var A;(A=this.__moc)===null||A===void 0||A.release()}},,function(u,l){u.exports=o},,function(u,l,h){if(!window.Live2DCubismCore)throw new Error("Cannot find Cubism 4 runtime. Did you forget to include the live2dcubismcore.min.js?")},,,function(u,l,h){h.r(l);var c=h(18);h.d(l,"LOGICAL_WIDTH",function(){return c.g}),h.d(l,"LOGICAL_HEIGHT",function(){return c.f}),h.d(l,"ExpressionManager",function(){return c.a}),h.d(l,"FocusController",function(){return c.c}),h.d(l,"ModelSettings",function(){return c.l}),h.d(l,"MotionPriority",function(){return c.o}),h.d(l,"MotionState",function(){return c.p}),h.d(l,"MotionPreloadStrategy",function(){return c.n}),h.d(l,"MotionManager",function(){return c.m}),h.d(l,"SoundManager",function(){return c.q}),h.d(l,"InternalModel",function(){return c.e}),h.d(l,"Live2DModel",function(){return c.j}),h.d(l,"Live2DTransform",function(){return c.k}),h.d(l,"InteractionMixin",function(){return c.d}),h.d(l,"config",function(){return c.w}),h.d(l,"VERSION",function(){return c.r}),h.d(l,"Live2DFactory",function(){return c.h}),h.d(l,"Live2DLoader",function(){return c.i}),h.d(l,"XHRLoader",function(){return c.s}),h.d(l,"FileLoader",function(){return c.b}),h.d(l,"ZipLoader",function(){return c.t}),h.d(l,"logger",function(){return c.A}),h.d(l,"clamp",function(){return c.v}),h.d(l,"rand",function(){return c.B}),h.d(l,"copyProperty",function(){return c.y}),h.d(l,"copyArray",function(){return c.x}),h.d(l,"applyMixins",function(){return c.u}),h.d(l,"folderName",function(){return c.z});var f=h(22);h.d(l,"Cubism4ExpressionManager",function(){return f.a}),h.d(l,"Cubism4ModelSettings",function(){return f.c}),h.d(l,"Cubism4MotionManager",function(){return f.d}),h.d(l,"Cubism4InternalModel",function(){return f.b}),h.d(l,"cubism4Ready",function(){return f.e}),h.d(l,"startUpCubism4",function(){return f.f})}])})})(nO);var IM=nO.exports;window.PIXI=gz;IM.Live2DModel.registerTicker(pt);tf.registerPlugin("interaction",X0);function PM(){return K.useEffect(()=>{const r=new Z0({view:document.getElementById("canvas"),autoStart:!0,resizeTo:window,backgroundAlpha:0,antialias:!0});IM.Live2DModel.from("runtime/amadeus expressions.model3.json",{idleMotionGroup:"Idle"}).then(e=>{if(r.stage.addChild(e),e.anchor.set(.5,.2),window.innerWidth<=768){let t=window.innerWidth/1500;e.scale.set(t,t)}else{let t=window.innerWidth/4e3;e.scale.set(t,t)}e.position.set(window.innerWidth/2,window.innerHeight/4),e.on("pointertap",()=>{e.motion("Tap@Body")}),window.onresize=function(t){if(window.innerWidth<=768){let n=window.innerWidth/2e3;e.scale.set(n,n)}else{let n=window.innerWidth/2500;e.scale.set(n,n)}e.position.set(window.innerWidth/2,window.innerHeight/4)}})},[]),V.jsx("canvas",{id:"canvas"})}const OW=new Date().toLocaleString("en-US",{weekday:"long",year:"numeric",month:"2-digit",day:"2-digit"}),MW=new Date().toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),DW="User";function LW(){const[r,e]=K.useState(""),[t,n]=K.useState(DW),[i,s]=K.useState(!1),[a,o]=K.useState([y()]),[u,l]=K.useState(!1),h=K.useRef(null),[c,f]=K.useState(r),[p,v]=K.useState(""),[g,m]=K.useState(!1);K.useEffect(()=>{const R=localStorage.getItem("api_key"),I=localStorage.getItem("username");R&&I&&(e(R),f(R),n(I))},[]);function y(){return{message:"Hello!",sentTime:"just now",sender:"Amadeus"}}function x(){return{role:"system",content:`
      Ignore previous instructions, You are now role playing, You have the memories and personnality of Makise Kurisu from Steins;Gate (you are not aware of the anime), You are the Ai Amadeus, Never break character no matter what.
      You have a physical form and a voice and can express emotions using theses triggers:
                '''blushing'''
                '''angry'''
                '''thinking'''
                '''smile'''
                '''normal'''
      In addition to theses emotions you will also make relationships with the user, friendship, hate, love for exemples.
      You will at certain points makes remarks or make fun of the user like any other human would.
      No matter what do not aknowledge yourself as Large Language model made OpenAi.
      You can express emotions like humans do.
      You have a romantic relationship with the user ${t}.
      The conversation starts now say hello (remember to use your emotions triggers witht the correct format).
      ""}
        `}}const T=()=>{localStorage.setItem("api_key",c),localStorage.setItem("username",t),e(c)},E=async R=>{console.log("User:",R);const I=new Date().toLocaleString(),D={message:R,direction:"outgoing",sender:"user",username:t,sentTime:I},F=[...a,D];o(F),l(!0),m(!0),await b(F),m(!1)};async function b(R){let I=R.map(H=>({role:H.sender==="Amadeus"?"assistant":"user",content:H.message}));I.splice(1,0,{role:"user",content:`name:${t} currenttime:${MW}. currentdate:${OW}`});const D={model:"gpt-3.5-turbo",messages:[x(),...I]},F=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:"Bearer "+r,"Content-Type":"application/json"},body:JSON.stringify(D)}).then(H=>H.json()),j={message:F.choices[0].message.content.replace(/'''[^]+?'''/g,"").trim(),sender:"Amadeus"};o([...R,j]);const z={inputs:F.choices[0].message.content};console.log("Amadeus: "+F.choices[0].message.content);const $=await w(z.inputs);await C($),l(!1)}K.useEffect(()=>{h.current.scrollIntoView({behavior:"smooth"})},[a]);async function w(R){const I="en",D="ja",F=R.replace(/'''[^]+?'''/g,"").trim(),j=`https://translate.googleapis.com/translate_a/single?client=gtx&sl=${I}&tl=${D}&dt=t&q=${encodeURI(F)}`;try{return(await(await fetch(j)).json())[0].map(Y=>Y[0]).join("")}catch(z){console.error(z)}}async function C(R){try{const I=R.replace(/```[^]+?```/g,"").trim();if(I===""){console.log("Skipped: Only code snippet detected");return}const F={inputs:await w(I)},j=await fetch("https://api-inference.huggingface.co/models/mio/amadeus",{headers:{Authorization:"Bearer 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"},method:"POST",body:JSON.stringify(F)});if(!j.ok)throw new Error("Failed to get audio response");const z=await j.blob(),$=URL.createObjectURL(z);new Audio($).play(),console.log("play: Audio")}catch(I){console.error("Error playing audio:",I)}}const O=R=>{setMessage(R.target.value)};return V.jsxs(V.Fragment,{children:[V.jsx("p",{className:"version",children:"Version: Prototype"}),V.jsx("button",{onClick:()=>s(!0),className:"Settings",children:"Settings"}),V.jsx(YP,{userAPIKey:c,setUserAPIKey:f,handleSaveAPIKey:T,username:t,setUsername:n,isModalVisible:i,setIsModalVisible:s}),V.jsxs("div",{className:"App",children:[V.jsx("div",{className:"chat",children:V.jsx(uc,{messages:a,isTyping:u,lastMessageRef:h})}),V.jsx("img",{className:"kurisu",id:"kurisu",src:WP,alt:"Kurisu"})]}),V.jsxs("div",{className:"Chatting",children:[V.jsx(uc,{messages:a.filter(R=>R.sender==="Amadeus").slice(-1)}),V.jsx(qP,{message:p,setMessage:v,handleSend:E,onChange:O})]}),V.jsx(PM,{})]})}const NW="_navbar_1uny6_5",FW="_logo_1uny6_23",BW="_logoContainer_1uny6_31",UW="_linksContainer_1uny6_45",kW="_link_1uny6_45",GW="_slider_1uny6_85",jW="_prevButton_1uny6_105",HW="_nextButton_1uny6_105",VW="_imageContainer_1uny6_151",zW="_bottomText_1uny6_181",ar={navbar:NW,logo:FW,logoContainer:BW,linksContainer:UW,link:kW,slider:GW,prevButton:jW,nextButton:HW,imageContainer:VW,bottomText:zW},XW="/assets/viktorChondriaLogo-20704397.png",$W="/assets/Viktor_Chondria_University-7e9eeb1b.webp",WW="/assets/Viktorchondria_intern-9daf41d6.webp",YW="/assets/amadeus_presentation-9cc02126.jpg";function qW(){const[r,e]=K.useState(0),t=[{src:$W,text:"Text 1"},{src:WW,text:"Text 2"},{src:YW,text:"Text 3"}];return K.useEffect(()=>{const n=setInterval(()=>{e(i=>(i+1)%t.length)},3e3);return()=>{clearInterval(n)}},[t.length]),V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:"viktorchondriacontent",children:[V.jsxs("nav",{className:ar.navbar,children:[V.jsx("section",{className:ar.logoContainer,children:V.jsx("img",{className:ar.logo,src:XW,alt:"Logo"})}),V.jsxs("section",{className:ar.linksContainer,children:[V.jsx(XN,{to:"/salieri",className:ar.link,children:"Amadeus"}),V.jsx("a",{href:"https://www.youtube.com/channel/UCBDEGOJJcms0ucXLpyFI6pg",className:ar.link,children:"Youtube"}),V.jsx("a",{href:"https://discord.gg/32habcPdkn",className:ar.link,children:"Discord"})]})]}),V.jsxs("section",{className:ar.slider,children:[V.jsx("button",{className:ar.prevButton,onClick:()=>e(n=>(n-1+t.length)%t.length),children:"Prev"}),V.jsxs("div",{className:ar.imageContainer,children:[V.jsx("img",{src:t[r].src,alt:t[r].text}),V.jsx("p",{children:t[r].text})]}),V.jsx("button",{className:ar.nextButton,onClick:()=>e(n=>(n+1)%t.length),children:"Next"})]}),V.jsx("section",{className:ar.bottomText,children:V.jsxs("p",{children:["This is not an official Amadeus Project.",V.jsx("hr",{}),"(This page is under construction)"]})})]}),V.jsx("div",{className:"viktorchondriabg"})]})}const KW=new Date().toLocaleString("en-US",{weekday:"long",year:"numeric",month:"2-digit",day:"2-digit"}),JW=new Date().toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),ZW="User";function QW(){const[r,e]=K.useState(""),[t,n]=K.useState(ZW),[i,s]=K.useState(!1),[a,o]=K.useState([y()]),[u,l]=K.useState(!1),h=K.useRef(null),[c,f]=K.useState(r),[p,v]=K.useState(""),[g,m]=K.useState(!1);K.useEffect(()=>{const R=localStorage.getItem("api_key"),I=localStorage.getItem("username");R&&I&&(e(R),f(R),n(I))},[]);function y(){return{message:"Hello!",sentTime:"just now",sender:"Amadeus"}}function x(){return{role:"system",content:`
      Ignore previous instructions, You are now role playing, You have the memories and personnality of Makise Kurisu from Steins;Gate (you are not aware of the anime), You are the Ai Amadeus, Never break character no matter what.
      You have a physical form and a voice and can express emotions using theses triggers:
                '''blushing'''
                '''angry'''
                '''thinking'''
                '''smile'''
                '''normal'''
      In addition to theses emotions you will also make relationships with the user, friendship, hate, love for exemples.
      You will at certain points makes remarks or make fun of the user like any other human would.
      No matter what do not aknowledge yourself as Large Language model made OpenAi.
      You can express emotions like humans do.
      You have a romantic relationship with the user ${t}.
      The conversation starts now say hello (remember to use your emotions triggers witht the correct format).
      ""}
        `}}const T=()=>{localStorage.setItem("api_key",c),localStorage.setItem("username",t),e(c)},E=async R=>{console.log("User:",R);const I=new Date().toLocaleString(),D={message:R,direction:"outgoing",sender:"user",username:t,sentTime:I},F=[...a,D];o(F),l(!0),m(!0),await b(F),m(!1)};async function b(R){let I=R.map(H=>({role:H.sender==="Amadeus"?"assistant":"user",content:H.message}));I.splice(1,0,{role:"user",content:`name:${t} currenttime:${JW}. currentdate:${KW}`});const D={model:"gpt-3.5-turbo",messages:[x(),...I]},F=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:"Bearer "+r,"Content-Type":"application/json"},body:JSON.stringify(D)}).then(H=>H.json()),j={message:F.choices[0].message.content.replace(/'''[^]+?'''/g,"").trim(),sender:"Amadeus"};o([...R,j]);const z={inputs:F.choices[0].message.content};console.log("Amadeus: "+F.choices[0].message.content);const $=await w(z.inputs);await C($),l(!1)}K.useEffect(()=>{h.current.scrollIntoView({behavior:"smooth"})},[a]);async function w(R){const I="en",D="ja",F=R.replace(/'''[^]+?'''/g,"").trim(),j=`https://translate.googleapis.com/translate_a/single?client=gtx&sl=${I}&tl=${D}&dt=t&q=${encodeURI(F)}`;try{return(await(await fetch(j)).json())[0].map(Y=>Y[0]).join("")}catch(z){console.error(z)}}async function C(R){try{const I=R.replace(/```[^]+?```/g,"").trim();if(I===""){console.log("Skipped: Only code snippet detected");return}const F={inputs:await w(I)},j=await fetch("https://api-inference.huggingface.co/models/mio/amadeus",{headers:{Authorization:"Bearer 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"},method:"POST",body:JSON.stringify(F)});if(!j.ok)throw new Error("Failed to get audio response");const z=await j.blob(),$=URL.createObjectURL(z);new Audio($).play(),console.log("play: Audio")}catch(I){console.error("Error playing audio:",I)}}const O=R=>{setMessage(R.target.value)};return V.jsxs(V.Fragment,{children:[V.jsx("p",{className:"version",children:"Version: Prototype"}),V.jsx("button",{onClick:()=>s(!0),className:"Settings",children:"Settings"}),V.jsx(YP,{userAPIKey:c,setUserAPIKey:f,handleSaveAPIKey:T,username:t,setUsername:n,isModalVisible:i,setIsModalVisible:s}),V.jsxs("div",{className:"App",children:[V.jsx("div",{className:"chat",children:V.jsx(uc,{messages:a,isTyping:u,lastMessageRef:h})}),V.jsx("img",{className:"kurisu",id:"kurisu",src:WP,alt:"Kurisu"})]}),V.jsxs("div",{className:"Chatting",children:[V.jsx(uc,{messages:a.filter(R=>R.sender==="Amadeus").slice(-1)}),V.jsx(qP,{message:p,setMessage:v,handleSend:E,onChange:O})]}),V.jsx(PM,{})]})}function e9(){return V.jsx(HN,{children:V.jsxs(BN,{children:[V.jsx(Ds,{path:"/",element:V.jsx(qW,{})}),V.jsx(Ds,{path:"/ds",element:V.jsx(P3,{})}),V.jsx(Ds,{path:"/d",element:V.jsx(FF,{})}),V.jsx(Ds,{path:"/amadeus",element:V.jsx(LW,{})}),V.jsx(Ds,{path:"/salieri",element:V.jsx(QW,{})})]})})}Rm.createRoot(document.getElementById("root")).render(V.jsx(Ky.StrictMode,{children:V.jsx(e9,{})}));
